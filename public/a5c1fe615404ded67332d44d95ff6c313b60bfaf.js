!function(){var e,t;(function(){t={}}).call(this),function(){(function(){var e=this,n=e._,i={},r=Array.prototype,o=Object.prototype,a=Function.prototype,s=r.push,c=r.slice,l=r.concat,u=o.toString,d=o.hasOwnProperty,f=r.forEach,h=r.map,p=r.reduce,m=r.reduceRight,g=r.filter,v=r.every,y=r.some,b=r.indexOf,_=r.lastIndexOf,w=Array.isArray,k=Object.keys,S=a.bind,T=function(e){return e instanceof T?e:this instanceof T?(this._wrapped=e,void 0):new T(e)};"undefined"!=typeof t?("undefined"!=typeof module&&module.exports&&(t=module.exports=T),t._=T):e._=T,T.VERSION="1.5.2";var C=T.each=T.forEach=function(e,t,n){if(null!=e)if(f&&e.forEach===f)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,o=e.length;o>r;r++)if(t.call(n,e[r],r,e)===i)return}else for(var a=T.keys(e),r=0,o=a.length;o>r;r++)if(t.call(n,e[a[r]],a[r],e)===i)return};T.map=T.collect=function(e,t,n){var i=[];return null==e?i:h&&e.map===h?e.map(t,n):(C(e,function(e,r,o){i.push(t.call(n,e,r,o))}),i)};var x="Reduce of empty array with no initial value";T.reduce=T.foldl=T.inject=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return i&&(t=T.bind(t,i)),r?e.reduce(t,n):e.reduce(t);if(C(e,function(e,o,a){r?n=t.call(i,n,e,o,a):(n=e,r=!0)}),!r)throw new TypeError(x);return n},T.reduceRight=T.foldr=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),m&&e.reduceRight===m)return i&&(t=T.bind(t,i)),r?e.reduceRight(t,n):e.reduceRight(t);var o=e.length;if(o!==+o){var a=T.keys(e);o=a.length}if(C(e,function(s,c,l){c=a?a[--o]:--o,r?n=t.call(i,n,e[c],c,l):(n=e[c],r=!0)}),!r)throw new TypeError(x);return n},T.find=T.detect=function(e,t,n){var i;return P(e,function(e,r,o){return t.call(n,e,r,o)?(i=e,!0):void 0}),i},T.filter=T.select=function(e,t,n){var i=[];return null==e?i:g&&e.filter===g?e.filter(t,n):(C(e,function(e,r,o){t.call(n,e,r,o)&&i.push(e)}),i)},T.reject=function(e,t,n){return T.filter(e,function(e,i,r){return!t.call(n,e,i,r)},n)},T.every=T.all=function(e,t,n){t||(t=T.identity);var r=!0;return null==e?r:v&&e.every===v?e.every(t,n):(C(e,function(e,o,a){return(r=r&&t.call(n,e,o,a))?void 0:i}),!!r)};var P=T.some=T.any=function(e,t,n){t||(t=T.identity);var r=!1;return null==e?r:y&&e.some===y?e.some(t,n):(C(e,function(e,o,a){return r||(r=t.call(n,e,o,a))?i:void 0}),!!r)};T.contains=T.include=function(e,t){return null==e?!1:b&&e.indexOf===b?-1!=e.indexOf(t):P(e,function(e){return e===t})},T.invoke=function(e,t){var n=c.call(arguments,2),i=T.isFunction(t);return T.map(e,function(e){return(i?t:e[t]).apply(e,n)})},T.pluck=function(e,t){return T.map(e,function(e){return e[t]})},T.where=function(e,t,n){return T.isEmpty(t)?n?void 0:[]:T[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},T.findWhere=function(e,t){return T.where(e,t,!0)},T.max=function(e,t,n){if(!t&&T.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&T.isEmpty(e))return-1/0;var i={computed:-1/0,value:-1/0};return C(e,function(e,r,o){var a=t?t.call(n,e,r,o):e;a>i.computed&&(i={value:e,computed:a})}),i.value},T.min=function(e,t,n){if(!t&&T.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&T.isEmpty(e))return 1/0;var i={computed:1/0,value:1/0};return C(e,function(e,r,o){var a=t?t.call(n,e,r,o):e;a<i.computed&&(i={value:e,computed:a})}),i.value},T.shuffle=function(e){var t,n=0,i=[];return C(e,function(e){t=T.random(n++),i[n-1]=i[t],i[t]=e}),i},T.sample=function(e,t,n){return arguments.length<2||n?e[T.random(e.length-1)]:T.shuffle(e).slice(0,Math.max(0,t))};var M=function(e){return T.isFunction(e)?e:function(t){return t[e]}};T.sortBy=function(e,t,n){var i=M(t);return T.pluck(T.map(e,function(e,t,r){return{value:e,index:t,criteria:i.call(n,e,t,r)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var D=function(e){return function(t,n,i){var r={},o=null==n?T.identity:M(n);return C(t,function(n,a){var s=o.call(i,n,a,t);e(r,s,n)}),r}};T.groupBy=D(function(e,t,n){(T.has(e,t)?e[t]:e[t]=[]).push(n)}),T.indexBy=D(function(e,t,n){e[t]=n}),T.countBy=D(function(e,t){T.has(e,t)?e[t]++:e[t]=1}),T.sortedIndex=function(e,t,n,i){n=null==n?T.identity:M(n);for(var r=n.call(i,t),o=0,a=e.length;a>o;){var s=o+a>>>1;n.call(i,e[s])<r?o=s+1:a=s}return o},T.toArray=function(e){return e?T.isArray(e)?c.call(e):e.length===+e.length?T.map(e,T.identity):T.values(e):[]},T.size=function(e){return null==e?0:e.length===+e.length?e.length:T.keys(e).length},T.first=T.head=T.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:c.call(e,0,t)},T.initial=function(e,t,n){return c.call(e,0,e.length-(null==t||n?1:t))},T.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:c.call(e,Math.max(e.length-t,0))},T.rest=T.tail=T.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},T.compact=function(e){return T.filter(e,T.identity)};var I=function(e,t,n){return t&&T.every(e,T.isArray)?l.apply(n,e):(C(e,function(e){T.isArray(e)||T.isArguments(e)?t?s.apply(n,e):I(e,t,n):n.push(e)}),n)};T.flatten=function(e,t){return I(e,t,[])},T.without=function(e){return T.difference(e,c.call(arguments,1))},T.uniq=T.unique=function(e,t,n,i){T.isFunction(t)&&(i=n,n=t,t=!1);var r=n?T.map(e,n,i):e,o=[],a=[];return C(r,function(n,i){(t?i&&a[a.length-1]===n:T.contains(a,n))||(a.push(n),o.push(e[i]))}),o},T.union=function(){return T.uniq(T.flatten(arguments,!0))},T.intersection=function(e){var t=c.call(arguments,1);return T.filter(T.uniq(e),function(e){return T.every(t,function(t){return T.indexOf(t,e)>=0})})},T.difference=function(e){var t=l.apply(r,c.call(arguments,1));return T.filter(e,function(e){return!T.contains(t,e)})},T.zip=function(){for(var e=T.max(T.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=T.pluck(arguments,""+n);return t},T.object=function(e,t){if(null==e)return{};for(var n={},i=0,r=e.length;r>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},T.indexOf=function(e,t,n){if(null==e)return-1;var i=0,r=e.length;if(n){if("number"!=typeof n)return i=T.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,r+n):n}if(b&&e.indexOf===b)return e.indexOf(t,n);for(;r>i;i++)if(e[i]===t)return i;return-1},T.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(_&&e.lastIndexOf===_)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var r=i?n:e.length;r--;)if(e[r]===t)return r;return-1},T.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=0,o=new Array(i);i>r;)o[r++]=e,e+=n;return o};var E=function(){};T.bind=function(e,t){var n,i;if(S&&e.bind===S)return S.apply(e,c.call(arguments,1));if(!T.isFunction(e))throw new TypeError;return n=c.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(c.call(arguments)));E.prototype=e.prototype;var r=new E;E.prototype=null;var o=e.apply(r,n.concat(c.call(arguments)));return Object(o)===o?o:r}},T.partial=function(e){var t=c.call(arguments,1);return function(){return e.apply(this,t.concat(c.call(arguments)))}},T.bindAll=function(e){var t=c.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return C(t,function(t){e[t]=T.bind(e[t],e)}),e},T.memoize=function(e,t){var n={};return t||(t=T.identity),function(){var i=t.apply(this,arguments);return T.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},T.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},T.defer=function(e){return T.delay.apply(T,[e,1].concat(c.call(arguments,1)))},T.throttle=function(e,t,n){var i,r,o,a=null,s=0;n||(n={});var c=function(){s=n.leading===!1?0:new Date,a=null,o=e.apply(i,r)};return function(){var l=new Date;s||n.leading!==!1||(s=l);var u=t-(l-s);return i=this,r=arguments,0>=u?(clearTimeout(a),a=null,s=l,o=e.apply(i,r)):a||n.trailing===!1||(a=setTimeout(c,u)),o}},T.debounce=function(e,t,n){var i,r,o,a,s;return function(){o=this,r=arguments,a=new Date;var c=function(){var l=new Date-a;t>l?i=setTimeout(c,t-l):(i=null,n||(s=e.apply(o,r)))},l=n&&!i;return i||(i=setTimeout(c,t)),l&&(s=e.apply(o,r)),s}},T.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},T.wrap=function(e,t){return function(){var n=[e];return s.apply(n,arguments),t.apply(this,n)}},T.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},T.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},T.keys=k||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)T.has(e,n)&&t.push(n);return t},T.values=function(e){for(var t=T.keys(e),n=t.length,i=new Array(n),r=0;n>r;r++)i[r]=e[t[r]];return i},T.pairs=function(e){for(var t=T.keys(e),n=t.length,i=new Array(n),r=0;n>r;r++)i[r]=[t[r],e[t[r]]];return i},T.invert=function(e){for(var t={},n=T.keys(e),i=0,r=n.length;r>i;i++)t[e[n[i]]]=n[i];return t},T.functions=T.methods=function(e){var t=[];for(var n in e)T.isFunction(e[n])&&t.push(n);return t.sort()},T.extend=function(e){return C(c.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},T.pick=function(e){var t={},n=l.apply(r,c.call(arguments,1));return C(n,function(n){n in e&&(t[n]=e[n])}),t},T.omit=function(e){var t={},n=l.apply(r,c.call(arguments,1));for(var i in e)T.contains(n,i)||(t[i]=e[i]);return t},T.defaults=function(e){return C(c.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},T.clone=function(e){return T.isObject(e)?T.isArray(e)?e.slice():T.extend({},e):e},T.tap=function(e,t){return t(e),e};var L=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof T&&(e=e._wrapped),t instanceof T&&(t=t._wrapped);var r=u.call(e);if(r!=u.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return i[o]==t;var a=e.constructor,s=t.constructor;if(a!==s&&!(T.isFunction(a)&&a instanceof a&&T.isFunction(s)&&s instanceof s))return!1;n.push(e),i.push(t);var c=0,l=!0;if("[object Array]"==r){if(c=e.length,l=c==t.length)for(;c--&&(l=L(e[c],t[c],n,i)););}else{for(var d in e)if(T.has(e,d)&&(c++,!(l=T.has(t,d)&&L(e[d],t[d],n,i))))break;if(l){for(d in t)if(T.has(t,d)&&!c--)break;l=!c}}return n.pop(),i.pop(),l};T.isEqual=function(e,t){return L(e,t,[],[])},T.isEmpty=function(e){if(null==e)return!0;if(T.isArray(e)||T.isString(e))return 0===e.length;for(var t in e)if(T.has(e,t))return!1;return!0},T.isElement=function(e){return!(!e||1!==e.nodeType)},T.isArray=w||function(e){return"[object Array]"==u.call(e)},T.isObject=function(e){return e===Object(e)},C(["Arguments","Function","String","Number","Date","RegExp"],function(e){T["is"+e]=function(t){return u.call(t)=="[object "+e+"]"}}),T.isArguments(arguments)||(T.isArguments=function(e){return!(!e||!T.has(e,"callee"))}),"function"!=typeof/./&&(T.isFunction=function(e){return"function"==typeof e}),T.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},T.isNaN=function(e){return T.isNumber(e)&&e!=+e},T.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==u.call(e)},T.isNull=function(e){return null===e},T.isUndefined=function(e){return void 0===e},T.has=function(e,t){return d.call(e,t)},T.noConflict=function(){return e._=n,this},T.identity=function(e){return e},T.times=function(e,t,n){for(var i=Array(Math.max(0,e)),r=0;e>r;r++)i[r]=t.call(n,r);return i},T.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var H={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};H.unescape=T.invert(H.escape);var z={escape:new RegExp("["+T.keys(H.escape).join("")+"]","g"),unescape:new RegExp("("+T.keys(H.unescape).join("|")+")","g")};T.each(["escape","unescape"],function(e){T[e]=function(t){return null==t?"":(""+t).replace(z[e],function(t){return H[e][t]})}}),T.result=function(e,t){if(null==e)return void 0;var n=e[t];return T.isFunction(n)?n.call(e):n},T.mixin=function(e){C(T.functions(e),function(t){var n=T[t]=e[t];T.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),$.call(this,n.apply(T,e))}})};var N=0;T.uniqueId=function(e){var t=++N+"";return e?e+t:t},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},A=/\\|'|\r|\n|\t|\u2028|\u2029/g;T.template=function(e,t,n){var i;n=T.defaults({},n,T.templateSettings);var r=new RegExp([(n.escape||O).source,(n.interpolate||O).source,(n.evaluate||O).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(r,function(t,n,i,r,s){return a+=e.slice(o,s).replace(A,function(e){return"\\"+R[e]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(a+="';\n"+r+"\n__p+='"),o=s+t.length,t}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(n.variable||"obj","_",a)}catch(s){throw s.source=a,s}if(t)return i(t,T);var c=function(e){return i.call(this,e,T)};return c.source="function("+(n.variable||"obj")+"){\n"+a+"}",c},T.chain=function(e){return T(e).chain()};var $=function(e){return this._chain?T(e).chain():e};T.mixin(T),C(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];T.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],$.call(this,n)}}),C(["concat","join","slice"],function(e){var t=r[e];T.prototype[e]=function(){return $.call(this,t.apply(this._wrapped,arguments))}}),T.extend(T.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)}.call(this),function(){e=t._}.call(this),"undefined"==typeof Package&&(Package={}),Package.underscore={_:e}}(),function(){var e,t=Package.underscore._;(function(){e={isClient:!0,isServer:!1},"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.PUBLIC_SETTINGS&&(e.settings={"public":__meteor_runtime_config__.PUBLIC_SETTINGS})}).call(this),function(){if(e.isServer)var n=Npm.require("fibers/future");"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.meteorRelease&&(e.release=__meteor_runtime_config__.meteorRelease),t.extend(e,{_get:function(e){for(var t=1;t<arguments.length;t++){if(!(arguments[t]in e))return void 0;e=e[arguments[t]]}return e},_ensure:function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];n in e||(e[n]={}),e=e[n]}return e},_delete:function(e){for(var t=[e],n=!0,i=1;i<arguments.length-1;i++){var r=arguments[i];if(!(r in e)){n=!1;break}if(e=e[r],"object"!=typeof e)break;t.push(e)}for(var i=t.length-1;i>=0;i--){var r=arguments[i+1];if(n)n=!1;else for(var o in t[i][r])return;delete t[i][r]}},_wrapAsync:function(i){return function(){for(var r,o,a=this,s=t.toArray(arguments),c=function(t){return t?e._debug("Exception in callback of async function",t.stack?t.stack:t):void 0};s.length>0&&"undefined"==typeof s[s.length-1];)s.pop();s.length>0&&s[s.length-1]instanceof Function?r=s.pop():e.isClient?r=c:(o=new n,r=o.resolver()),s.push(e.bindEnvironment(r));var l=i.apply(a,s);return o?o.wait():l}}})}.call(this),function(){"use strict";function t(){if(r.setImmediate){var e=function(e){r.setImmediate(e)};return e.implementation="setImmediate",e}return null}function n(){function e(e,t){return"string"==typeof e&&e.substring(0,t.length)===t}function t(t){if(t.source===r&&e(t.data,s)){var n=t.data.substring(s.length);try{a[n]&&a[n]()}finally{delete a[n]}}}if(!r.postMessage||r.importScripts)return null;var n=!0,i=r.onmessage;if(r.onmessage=function(){n=!1},r.postMessage("","*"),r.onmessage=i,!n)return null;var o=0,a={},s="Meteor._setImmediate."+Math.random()+".";r.addEventListener?r.addEventListener("message",t,!1):r.attachEvent("onmessage",t);var c=function(e){++o,a[o]=e,r.postMessage(s+o,"*")};return c.implementation="postMessage",c}function i(){var e=function(e){r.setTimeout(e,0)};return e.implementation="setTimeout",e}var r=this;e._setImmediate=t()||n()||i()}.call(this),function(){var n=function(e){if(Package.livedata){var t=Package.livedata.DDP._CurrentInvocation;if(t.get()&&t.get().isSimulation)throw new Error("Can't set timers inside simulations");return function(){t.withValue(null,e)}}return e},i=function(t,i){return e.bindEnvironment(n(i),t)};t.extend(e,{setTimeout:function(e,t){return setTimeout(i("setTimeout callback",e),t)},setInterval:function(e,t){return setInterval(i("setInterval callback",e),t)},clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)},defer:function(t){e._setImmediate(i("defer callback",t))}})}.call(this),function(){var t=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};e.makeErrorType=function(e,n){var i=function(){var t=this;if(Error.captureStackTrace)Error.captureStackTrace(t,i);else{var r=new Error;r.__proto__=i.prototype,r instanceof i&&(t=r)}return n.apply(t,arguments),t.errorType=e,t};return t(i,Error),i},e.Error=e.makeErrorType("Meteor.Error",function(e,t,n){var i=this;i.error=e,i.reason=t,i.details=n,i.message=i.reason?i.reason+" ["+i.error+"]":"["+i.error+"]"}),e.Error.prototype.clone=function(){var t=this;return new e.Error(t.error,t.reason,t.details)}}.call(this),function(){e._noYieldsAllowed=function(e){return e()},e._SynchronousQueue=function(){var e=this;e._tasks=[],e._running=!1},t.extend(e._SynchronousQueue.prototype,{runTask:function(n){var i=this;if(!i.safeToRunTask())throw new Error("Could not synchronously run a task from a running task");i._tasks.push(n);var r=i._tasks;i._tasks=[],i._running=!0;try{for(;!t.isEmpty(r);){var o=r.shift();try{o()}catch(a){if(t.isEmpty(r))throw a;e._debug("Exception in queued task: "+a.stack)}}}finally{i._running=!1}},queueTask:function(e){var n=this,i=t.isEmpty(n._tasks);n._tasks.push(e),i&&setTimeout(t.bind(n.flush,n),0)},flush:function(){var e=this;e.runTask(function(){})},drain:function(){var e=this;if(e.safeToRunTask())for(;!t.isEmpty(e._tasks);)e.flush()},safeToRunTask:function(){var e=this;return!e._running}})}.call(this),function(){var t=[],n="loaded"===document.readyState||"complete"==document.readyState,i=function(){for(n=!0;t.length;)t.shift()()};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("load",i)),e.startup=function(i){var r=!document.addEventListener&&document.documentElement.doScroll;if(r&&window===top){try{r("left")}catch(o){return setTimeout(function(){e.startup(i)},50),void 0}i()}else n?i():t.push(i)}}.call(this),function(){var t=0;e._debug=function(){if(t)return t--,void 0;if("undefined"!=typeof console&&"undefined"!=typeof console.log)if(0==arguments.length)console.log("");else if("function"==typeof console.log.apply){for(var e=!0,n=0;n<arguments.length;n++)"string"!=typeof arguments[n]&&(e=!1);e?console.log.apply(console,[Array.prototype.join.call(arguments," ")]):console.log.apply(console,arguments)}else if("function"==typeof Function.prototype.bind){var i=Function.prototype.bind.call(console.log,console);i.apply(console,arguments)}else Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))},e._suppress_log=function(e){t+=e}}.call(this),function(){var n=0,i=[];e.EnvironmentVariable=function(){this.slot=n++},t.extend(e.EnvironmentVariable.prototype,{get:function(){return i[this.slot]},withValue:function(e,t){var n=i[this.slot];try{i[this.slot]=e;var r=t()}finally{i[this.slot]=n}return r}}),e.bindEnvironment=function(n,r,o){var a=t.clone(i);if(!r||"string"==typeof r){var s=r||"callback of async function";r=function(t){e._debug("Exception in "+s+":",t&&t.stack||t)}}return function(){var e=i;try{i=a;var s=n.apply(o,t.toArray(arguments))}catch(c){r(c)}finally{i=e}return s}}}.call(this),function(){e.absoluteUrl=function(n,i){i||"object"!=typeof n||(i=n,n=void 0),i=t.extend({},e.absoluteUrl.defaultOptions,i||{});var r=i.rootUrl;if(!r)throw new Error("Must pass options.rootUrl or set ROOT_URL in the server environment");return/^http[s]?:\/\//i.test(r)||(r="http://"+r),/\/$/.test(r)||(r+="/"),n&&(r+=n),i.secure&&/^http:/.test(r)&&!/http:\/\/localhost[:\/]/.test(r)&&!/http:\/\/127\.0\.0\.1[:\/]/.test(r)&&(r=r.replace(/^http:/,"https:")),i.replaceLocalhost&&(r=r.replace(/^http:\/\/localhost([:\/].*)/,"http://127.0.0.1$1")),r},e.absoluteUrl.defaultOptions={},"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.ROOT_URL&&(e.absoluteUrl.defaultOptions.rootUrl=__meteor_runtime_config__.ROOT_URL),e._relativeToSiteRootUrl=function(e){return"object"==typeof __meteor_runtime_config__&&"/"===e.substr(0,1)&&(e=(__meteor_runtime_config__.ROOT_URL_PATH_PREFIX||"")+e),e}}.call(this),"undefined"==typeof Package&&(Package={}),Package.meteor={Meteor:e}}(),function(){var Meteor=Package.meteor.Meteor,JSON;(function(){window.JSON&&(JSON=window.JSON)}).call(this),function(){"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,r,o,a,s=gap,c=t[e];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(c)){for(o=c.length,n=0;o>n;n+=1)a[n]=str(n,c)||"null";return r=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,r}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],r=str(i,c),r&&a.push(quote(i)+(gap?": ":":")+r));else for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(r=str(i,c),r&&a.push(quote(i)+(gap?": ":":")+r));return r=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=walk(r,n),void 0!==i?r[n]=i:delete r[n]);return reviver.call(e,t,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()}.call(this),"undefined"==typeof Package&&(Package={}),Package.json={JSON:JSON}}(),function(){var e,t,n,i,r=(Package.meteor.Meteor,Package.json.JSON),o=Package.underscore._;(function(){e={},t={};var a={};e.addType=function(e,t){if(o.has(a,e))throw new Error("Type "+e+" already present");a[e]=t};var s=function(e){return o.isNaN(e)||1/0===e||e===-1/0},c=[{matchJSONValue:function(e){return o.has(e,"$date")&&1===o.size(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return o.has(e,"$InfNaN")&&1===o.size(e)},matchObject:s,toJSONValue:function(e){var t;return t=o.isNaN(e)?0:1/0===e?1:-1,{$InfNaN:t}},fromJSONValue:function(e){return e.$InfNaN/0}},{matchJSONValue:function(e){return o.has(e,"$binary")&&1===o.size(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&o.has(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:n(e)}},fromJSONValue:function(e){return i(e.$binary)}},{matchJSONValue:function(e){return o.has(e,"$escape")&&1===o.size(e)},matchObject:function(e){return o.isEmpty(e)||o.size(e)>2?!1:o.any(c,function(t){return t.matchJSONValue(e)})},toJSONValue:function(t){var n={};return o.each(t,function(t,i){n[i]=e.toJSONValue(t)}),{$escape:n}},fromJSONValue:function(t){var n={};return o.each(t.$escape,function(t,i){n[i]=e.fromJSONValue(t)}),n}},{matchJSONValue:function(e){return o.has(e,"$type")&&o.has(e,"$value")&&2===o.size(e)},matchObject:function(t){return e._isCustomType(t)},toJSONValue:function(e){return{$type:e.typeName(),$value:e.toJSONValue()}},fromJSONValue:function(e){var t=e.$type,n=a[t];return n(e.$value)}}];e._isCustomType=function(e){return e&&"function"==typeof e.toJSONValue&&"function"==typeof e.typeName&&o.has(a,e.typeName())};var l=e._adjustTypesToJSONValue=function(e){if(null===e)return null;var t=u(e);return void 0!==t?t:"object"!=typeof e?e:(o.each(e,function(t,n){if("object"==typeof t||void 0===t||s(t)){var i=u(t);return i?(e[n]=i,void 0):(l(t),void 0)}}),e)},u=function(e){for(var t=0;t<c.length;t++){var n=c[t];if(n.matchObject(e))return n.toJSONValue(e)}return void 0};e.toJSONValue=function(t){var n=u(t);return void 0!==n?n:("object"==typeof t&&(t=e.clone(t),l(t)),t)};var d=e._adjustTypesFromJSONValue=function(e){if(null===e)return null;var t=f(e);return t!==e?t:"object"!=typeof e?e:(o.each(e,function(t,n){if("object"==typeof t){var i=f(t);if(t!==i)return e[n]=i,void 0;d(t)}}),e)},f=function(e){if("object"==typeof e&&null!==e&&o.size(e)<=2&&o.all(e,function(e,t){return"string"==typeof t&&"$"===t.substr(0,1)}))for(var t=0;t<c.length;t++){var n=c[t];if(n.matchJSONValue(e))return n.fromJSONValue(e)}return e};e.fromJSONValue=function(t){var n=f(t);return n===t&&"object"==typeof t?(t=e.clone(t),d(t),t):n},e.stringify=function(t,n){var i=e.toJSONValue(t);return n&&(n.canonical||n.indent)?e._canonicalStringify(i,n):r.stringify(i)},e.parse=function(t){if("string"!=typeof t)throw new Error("EJSON.parse argument should be a string");return e.fromJSONValue(r.parse(t))},e.isBinary=function(e){return!!("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},e.equals=function(t,n,i){var r,a=!(!i||!i.keyOrderSensitive);if(t===n)return!0;if(o.isNaN(t)&&o.isNaN(n))return!0;if(!t||!n)return!1;if("object"!=typeof t||"object"!=typeof n)return!1;if(t instanceof Date&&n instanceof Date)return t.valueOf()===n.valueOf();if(e.isBinary(t)&&e.isBinary(n)){if(t.length!==n.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}if("function"==typeof t.equals)return t.equals(n,i);if(t instanceof Array){if(!(n instanceof Array))return!1;if(t.length!==n.length)return!1;for(r=0;r<t.length;r++)if(!e.equals(t[r],n[r],i))return!1;return!0}var s;if(a){var c=[];return o.each(n,function(e,t){c.push(t)}),r=0,s=o.all(t,function(t,o){return r>=c.length?!1:o!==c[r]?!1:e.equals(t,n[c[r]],i)?(r++,!0):!1}),s&&r===c.length}return r=0,s=o.all(t,function(t,a){return o.has(n,a)?e.equals(t,n[a],i)?(r++,!0):!1:!1}),s&&o.size(n)===r},e.clone=function(t){var n;if("object"!=typeof t)return t;if(null===t)return null;if(t instanceof Date)return new Date(t.getTime());if(e.isBinary(t)){n=e.newBinary(t.length);for(var i=0;i<t.length;i++)n[i]=t[i];return n}if(o.isArray(t)||o.isArguments(t)){for(n=[],i=0;i<t.length;i++)n[i]=e.clone(t[i]);return n}return"function"==typeof t.clone?t.clone():(n={},o.each(t,function(t,i){n[i]=e.clone(t)}),n)}}).call(this),function(){function t(e){return r.stringify(e)}var n=function(e,i,r,a,s){var c,l,u,d,f=a,h=i[e];switch(typeof h){case"string":return t(h);case"number":return isFinite(h)?String(h):"null";case"boolean":return String(h);case"object":if(!h)return"null";if(f=a+r,d=[],o.isArray(h)||o.isArguments(h)){for(u=h.length,c=0;u>c;c+=1)d[c]=n(c,h,r,f,s)||"null";return l=0===d.length?"[]":f?"[\n"+f+d.join(",\n"+f)+"\n"+a+"]":"["+d.join(",")+"]"}var p=o.keys(h);return s&&(p=p.sort()),o.each(p,function(e){l=n(e,h,r,f,s),l&&d.push(t(e)+(f?": ":":")+l)}),l=0===d.length?"{}":f?"{\n"+f+d.join(",\n"+f)+"\n"+a+"}":"{"+d.join(",")+"}"}};e._canonicalStringify=function(e,t){if(t=o.extend({indent:"",canonical:!1},t),t.indent===!0)t.indent="  ";else if("number"==typeof t.indent){for(var i="",r=0;r<t.indent;r++)i+=" ";t.indent=i}return n("",{"":e},t.indent,"",t.canonical)}}.call(this),function(){for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o={},a=0;a<r.length;a++)o[r.charAt(a)]=a;n=function(e){for(var t=[],n=null,i=null,r=null,o=null,a=0;a<e.length;a++)switch(a%3){case 0:n=e[a]>>2&63,i=(3&e[a])<<4;break;case 1:i|=e[a]>>4&15,r=(15&e[a])<<2;break;case 2:r|=e[a]>>6&3,o=63&e[a],t.push(s(n)),t.push(s(i)),t.push(s(r)),t.push(s(o)),n=null,i=null,r=null,o=null}return null!=n&&(t.push(s(n)),t.push(s(i)),null==r?t.push("="):t.push(s(r)),null==o&&t.push("=")),t.join("")};var s=function(e){return r.charAt(e)},c=function(e){return"="===e?-1:o[e]};e.newBinary=function(e){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var t=[],n=0;e>n;n++)t.push(0);return t.$Uint8ArrayPolyfill=!0,t}return new Uint8Array(new ArrayBuffer(e))},i=function(t){var n=Math.floor(3*t.length/4);"="==t.charAt(t.length-1)&&(n--,"="==t.charAt(t.length-2)&&n--);for(var i=e.newBinary(n),r=null,o=null,a=null,s=0,l=0;l<t.length;l++){var u=t.charAt(l),d=c(u);switch(l%4){case 0:if(0>d)throw new Error("invalid base64 string");r=d<<2;break;case 1:if(0>d)throw new Error("invalid base64 string");r|=d>>4,i[s++]=r,o=(15&d)<<4;break;case 2:d>=0&&(o|=d>>2,i[s++]=o,a=(3&d)<<6);break;case 3:d>=0&&(i[s++]=a|d)}}return i},t.base64Encode=n,t.base64Decode=i}.call(this),"undefined"==typeof Package&&(Package={}),Package.ejson={EJSON:e,EJSONTest:t}}(),function(){var e,t=Package.meteor.Meteor,n=Package.underscore._,i=Package.ejson.EJSON;(function(){e=function(){return e.info.apply(this,arguments)};var r=0,o=[],a=0;e._intercept=function(e){r+=e},e._suppress=function(e){a+=e},e._intercepted=function(){var e=o;return o=[],r=0,e},e.outputFormat="json";var s={debug:"green",warn:"magenta",error:"red"},c="blue",l=["time","timeInexact","level","file","line","program","originApp","satellite","stderr"],u=l.concat(["app","message"]),d=function(n){var i=e.format(n),r=n.level;"undefined"!=typeof console&&console[r]?console[r](i):t._debug(i)};e._getCallerDetails=function(){var e=function(){var e=new Error,t=e.stack;return t},t=e();if(!t)return{};for(var n,i=t.split("\n"),r=1;r<i.length;++r){if(n=i[r],n.match(/^\s*at eval \(eval/))return{file:"eval"};
if(!n.match(/packages\/logging(?:\/|(?::tests)?\.js)/))break}var o={},a=/(?:[@(]| at )([^(]+?):([0-9:]+)(?:\)|$)/.exec(n);return a?(o.line=a[2].split(":")[0],o.file=a[1].split("/").slice(-1)[0].split("?")[0],o):o},n.each(["debug","info","warn","error"],function(s){e[s]=function(c){if(a)return a--,void 0;var u=!1;r&&(r--,u=!0);var f=!n.isObject(c)||n.isRegExp(c)||n.isDate(c)?{message:new String(c).toString()}:c;if(n.each(l,function(e){if(f[e])throw new Error("Can't set '"+e+"' in log message")}),n.has(f,"message")&&!n.isString(f.message))throw new Error("The 'message' field in log objects must be a string");if(f=n.extend(e._getCallerDetails(),f),f.time=new Date,f.level=s,"debug"!==s)if(u)o.push(i.stringify(f));else if(t.isServer)if("colored-text"===e.outputFormat)console.log(e.format(f,{color:!0}));else{if("json"!==e.outputFormat)throw new Error("Unknown logging output format: "+e.outputFormat);console.log(i.stringify(f))}else d(f)}}),e.parse=function(e){var t=null;if(e&&"{"===e.charAt(0))try{t=i.parse(e)}catch(n){}return t&&t.time&&t.time instanceof Date?t:null},e.format=function(e,r){e=i.clone(e),r=r||{};var o=e.time;if(!(o instanceof Date))throw new Error("'time' must be a Date object");var a=e.timeInexact,l=e.level||"info",d=e.file,f=e.line,h=e.app||"",p=e.originApp,m=e.message||"",g=e.program||"",v=e.satellite,y=e.stderr||"";n.each(u,function(t){delete e[t]}),n.isEmpty(e)||(m&&(m+=" "),m+=i.stringify(e));var b=function(e){return 10>e?"0"+e:e.toString()},_=function(e){return 100>e?"0"+b(e):e.toString()},w=o.getFullYear().toString()+b(o.getMonth()+1)+b(o.getDate()),k=b(o.getHours())+":"+b(o.getMinutes())+":"+b(o.getSeconds())+"."+_(o.getMilliseconds()),S="("+-((new Date).getTimezoneOffset()/60)+")",T="";h&&(T+=h),p&&p!==h&&(T+=" via "+p),T&&(T="["+T+"] ");var C=d&&f?["(",g?g+":":"",d,":",f,") "].join(""):"";v&&(C+=["[",v,"]"].join(""));var x=y?"(STDERR) ":"",P=[l.charAt(0).toUpperCase(),w,"-",k,S,a?"? ":" ",T,C,x].join(""),M=function(e,n){return r.color&&t.isServer&&n?Npm.require("cli-color")[n](e):e};return M(P,c)+M(m,s[l])},e.objFromText=function(e,t){var i={message:e,level:"info",time:new Date,timeInexact:!0};return n.extend(i,t)}}).call(this),"undefined"==typeof Package&&(Package={}),Package.logging={Log:e}}(),function(){var e,t=Package.meteor.Meteor,n=Package.underscore._,i=(Package.logging.Log,Package.json.JSON);(function(){var r,o="Meteor_Reload",a=3e4,s={};"undefined"!=typeof sessionStorage&&sessionStorage&&(r=sessionStorage.getItem(o),sessionStorage.removeItem(o)),r||(r="{}");var c={};try{c=i.parse(r),"object"!=typeof c&&(t._debug("Got bad data on reload. Ignoring."),c={})}catch(l){t._debug("Got invalid JSON on reload. Ignoring.")}c.reload&&"object"==typeof c.data&&c.time+a>(new Date).getTime()&&(s=c.data);var u=[];e={},e._onMigrate=function(e,t){t||(t=e,e=void 0),u.push({name:e,callback:t})},e._migrationData=function(e){return s[e]};var d=!1;e._reload=function(){if(!d){d=!0;var e=function(){n.defer(function(){for(var r={},a=n.clone(u);a.length;){var s=a.shift(),c=s.callback(e);if(!c[0])return;c.length>1&&s.name&&(r[s.name]=c[1])}try{var l=i.stringify({time:(new Date).getTime(),data:r,reload:!0})}catch(d){throw t._debug("Couldn't serialize data for migration",r),d}"undefined"!=typeof sessionStorage&&sessionStorage?sessionStorage.setItem(o,l):t._debug("Browser does not support sessionStorage. Not saving migration state."),window.location.reload()})};e()}}}).call(this),function(){t._reload={onMigrate:e._onMigrate,migrationData:e._migrationData,reload:e._reload}}.call(this),"undefined"==typeof Package&&(Package={}),Package.reload={Reload:e}}(),function(){var e,t=Package.meteor.Meteor,n=Package.underscore._;(function(){e={},e.active=!1,e.currentComputation=null;var i=function(t){e.currentComputation=t,e.active=!!t},r=function(){return"undefined"!=typeof t?t._debug:"undefined"!=typeof console&&console.log?console.log:function(){}},o=1,a=[],s=!1,c=!1,l=!1,u=[],d=function(){s||(setTimeout(e.flush,0),s=!0)},f=!1;e.Computation=function(e,t){if(!f)throw new Error("Deps.Computation constructor is private; use Deps.autorun");f=!1;var n=this;n.stopped=!1,n.invalidated=!1,n.firstRun=!0,n._id=o++,n._onInvalidateCallbacks=[],n._parent=t,n._func=e,n._recomputing=!1;var i=!0;try{n._compute(),i=!1}finally{n.firstRun=!1,i&&n.stop()}},n.extend(e.Computation.prototype,{onInvalidate:function(t){var n=this;if("function"!=typeof t)throw new Error("onInvalidate requires a function");var i=function(){e.nonreactive(function(){t(n)})};n.invalidated?i():n._onInvalidateCallbacks.push(i)},invalidate:function(){var e=this;if(!e.invalidated){e._recomputing||e.stopped||(d(),a.push(this)),e.invalidated=!0;for(var t,n=0;t=e._onInvalidateCallbacks[n];n++)t();e._onInvalidateCallbacks=[]}},stop:function(){this.stopped||(this.stopped=!0,this.invalidate())},_compute:function(){var t=this;t.invalidated=!1;var n=e.currentComputation;i(t);l=!0;try{t._func(t)}finally{i(n),l=!1}},_recompute:function(){var e=this;for(e._recomputing=!0;e.invalidated&&!e.stopped;)try{e._compute()}catch(t){r()("Exception from Deps recompute:",t.stack||t.message)}e._recomputing=!1}}),e.Dependency=function(){this._dependentsById={}},n.extend(e.Dependency.prototype,{depend:function(t){if(!t){if(!e.active)return!1;t=e.currentComputation}var n=this,i=t._id;return i in n._dependentsById?!1:(n._dependentsById[i]=t,t.onInvalidate(function(){delete n._dependentsById[i]}),!0)},changed:function(){var e=this;for(var t in e._dependentsById)e._dependentsById[t].invalidate()},hasDependents:function(){var e=this;for(var t in e._dependentsById)return!0;return!1}}),n.extend(e,{flush:function(){if(c)throw new Error("Can't call Deps.flush while flushing");if(l)throw new Error("Can't flush inside Deps.autorun");for(c=!0,s=!0;a.length||u.length;){var e=a;a=[];for(var t,n=0;t=e[n];n++)t._recompute();if(u.length){var i=u.shift();try{i()}catch(o){r()("Exception from Deps afterFlush function:",o.stack||o.message)}}}c=!1,s=!1},autorun:function(t){if("function"!=typeof t)throw new Error("Deps.autorun requires a function argument");f=!0;var n=new e.Computation(t,e.currentComputation);return e.active&&e.onInvalidate(function(){n.stop()}),n},nonreactive:function(t){var n=e.currentComputation;i(null);try{return t()}finally{i(n)}},_makeNonreactive:function(t){if(t.$isNonreactive)return t;var i=function(){var i,r=this,o=n.toArray(arguments);return e.nonreactive(function(){i=t.apply(r,o)}),i};return i.$isNonreactive=!0,i},onInvalidate:function(t){if(!e.active)throw new Error("Deps.onInvalidate requires a currentComputation");e.currentComputation.onInvalidate(t)},afterFlush:function(e){u.push(e),d()},isolateValue:function(t,n){if(!e.active)return t();var i,r=new e.Dependency;return e.autorun(function(e){var o=t();e.firstRun?i=o:(n?n(o,i):o===i)||r.changed()}),r.depend(),i}})}).call(this),function(){t.flush=e.flush,t.autorun=e.autorun,t.autosubscribe=e.autorun,e.depend=function(e){return e.depend()}}.call(this),"undefined"==typeof Package&&(Package={}),Package.deps={Deps:e}}(),function(){var e,t,n=Package.meteor.Meteor,i=Package.underscore._,r=Package.ejson.EJSON;(function(){var o=new n.EnvironmentVariable;e=function(e,n){var i=o.get();i&&i.checking(e);try{d(e,n)}catch(r){throw r instanceof t.Error&&r.path&&(r.message+=" in field "+r.path),r}},t={Optional:function(e){return new a(e)},OneOf:function(){return new s(i.toArray(arguments))},Any:["__any__"],Where:function(e){return new c(e)},ObjectIncluding:function(e){return new l(e)},Integer:["__integer__"],Error:n.makeErrorType("Match.Error",function(e){this.message="Match error: "+e,this.path="",this.sanitizedError=new n.Error(400,"Match failed")}),test:function(e,n){try{return d(e,n),!0}catch(i){if(i instanceof t.Error)return!1;throw i}},_failIfArgumentsAreNotAllChecked:function(e,t,n,i){var r=new f(n,i),a=o.withValue(r,function(){return e.apply(t,n)});return r.throwUnlessAllArgumentsHaveBeenChecked(),a}};var a=function(e){this.pattern=e},s=function(e){if(i.isEmpty(e))throw new Error("Must provide at least one choice to Match.OneOf");this.choices=e},c=function(e){this.condition=e},l=function(e){this.pattern=e},u=[[String,"string"],[Number,"number"],[Boolean,"boolean"],[void 0,"undefined"]],d=function(e,n){if(n!==t.Any){for(var o=0;o<u.length;++o)if(n===u[o][0]){if(typeof e===u[o][1])return;throw new t.Error("Expected "+u[o][1]+", got "+typeof e)}if(null===n){if(null===e)return;throw new t.Error("Expected null, got "+r.stringify(e))}if(n===t.Integer){if("number"==typeof e&&(0|e)===e)return;throw new t.Error("Expected Integer, got "+(e instanceof Object?r.stringify(e):e))}if(n===Object&&(n=t.ObjectIncluding({})),n instanceof Array){if(1!==n.length)throw Error("Bad pattern: arrays must have one type element"+r.stringify(n));if(!i.isArray(e)&&!i.isArguments(e))throw new t.Error("Expected array, got "+r.stringify(e));return i.each(e,function(e,i){try{d(e,n[0])}catch(r){throw r instanceof t.Error&&(r.path=p(i,r.path)),r}}),void 0}if(n instanceof c){if(n.condition(e))return;throw new t.Error("Failed Match.Where validation")}if(n instanceof a&&(n=t.OneOf(void 0,n.pattern)),n instanceof s){for(var o=0;o<n.choices.length;++o)try{return d(e,n.choices[o]),void 0}catch(f){if(!(f instanceof t.Error))throw f}throw new t.Error("Failed Match.OneOf or Match.Optional validation")}if(n instanceof Function){if(e instanceof n)return;throw new t.Error("Expected "+n.name)}var h=!1;if(n instanceof l&&(h=!0,n=n.pattern),"object"!=typeof n)throw Error("Bad pattern: unknown pattern type");if("object"!=typeof e)throw new t.Error("Expected object, got "+typeof e);if(null===e)throw new t.Error("Expected object, got null");if(e.constructor!==Object)throw new t.Error("Expected plain object");var m={},g={};i.each(n,function(e,t){e instanceof a?g[t]=e.pattern:m[t]=e}),i.each(e,function(e,n){try{if(i.has(m,n))d(e,m[n]),delete m[n];else if(i.has(g,n))d(e,g[n]);else if(!h)throw new t.Error("Unknown key")}catch(r){throw r instanceof t.Error&&(r.path=p(n,r.path)),r}}),i.each(m,function(e,n){throw new t.Error("Missing key '"+n+"'")})}},f=function(e,t){var n=this;n.args=i.clone(e),n.args.reverse(),n.description=t};i.extend(f.prototype,{checking:function(e){var t=this;t._checkingOneValue(e)||(i.isArray(e)||i.isArguments(e))&&i.each(e,i.bind(t._checkingOneValue,t))},_checkingOneValue:function(e){for(var t=this,n=0;n<t.args.length;++n)if(e===t.args[n])return t.args.splice(n,1),!0;return!1},throwUnlessAllArgumentsHaveBeenChecked:function(){var e=this;if(!i.isEmpty(e.args))throw new Error("Did not check() all arguments during "+e.description)}});var h=["do","if","in","for","let","new","try","var","case","else","enum","eval","false","null","this","true","void","with","break","catch","class","const","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof"],p=function(e,t){return"number"==typeof e||e.match(/^[0-9]+$/)?e="["+e+"]":(!e.match(/^[a-z_$][0-9a-z_$]*$/i)||i.contains(h,e))&&(e=JSON.stringify([e])),t&&"["!==t[0]?e+"."+t:e+t}}).call(this),"undefined"==typeof Package&&(Package={}),Package.check={check:e,Match:t}}(),function(){{var e,t=Package.meteor.Meteor;Package.underscore._}(function(){if(t.isServer)var n=Npm.require("crypto");var i=function(){function e(){var e=4022871197,t=function(t){t=t.toString();for(var n=0;n<t.length;n++){e+=t.charCodeAt(n);var i=.02519603282416938*e;e=i>>>0,i-=e,i*=e,e=i>>>0,i-=e,e+=4294967296*i}return 2.3283064365386963e-10*(e>>>0)};return t.version="Mash 0.9",t}return function(t){var n=0,i=0,r=0,o=1;0==t.length&&(t=[+new Date]);var a=e();n=a(" "),i=a(" "),r=a(" ");for(var s=0;s<t.length;s++)n-=a(t[s]),0>n&&(n+=1),i-=a(t[s]),0>i&&(i+=1),r-=a(t[s]),0>r&&(r+=1);a=null;var c=function(){var e=2091639*n+2.3283064365386963e-10*o;return n=i,i=r,r=e-(o=0|e)};return c.uint32=function(){return 4294967296*c()},c.fract53=function(){return c()+1.1102230246251565e-16*(2097152*c()|0)},c.version="Alea 0.9",c.args=t,c}(Array.prototype.slice.call(arguments))},r="23456789ABCDEFGHJKLMNPQRSTWXYZabcdefghijkmnopqrstuvwxyz",o=function(e){var t=this;void 0!==e&&(t.alea=i.apply(null,e))};o.prototype.fraction=function(){var e=this;if(e.alea)return e.alea();if(n){var t=parseInt(e.hexString(8),16);return 2.3283064365386963e-10*t}if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues){var i=new Uint32Array(1);return window.crypto.getRandomValues(i),2.3283064365386963e-10*i[0]}},o.prototype.hexString=function(e){var t=this;if(n&&!t.alea){var i,r=Math.ceil(e/2);try{i=n.randomBytes(r)}catch(o){i=n.pseudoRandomBytes(r)}var a=i.toString("hex");return a.substring(0,e)}for(var s=[],c=0;e>c;++c)s.push(t.choice("0123456789abcdef"));return s.join("")},o.prototype.id=function(){for(var e=[],t=this,n=0;17>n;n++)e[n]=t.choice(r);return e.join("")},o.prototype.choice=function(e){var t=Math.floor(this.fraction()*e.length);return"string"==typeof e?e.substr(t,1):e[t]};var a="undefined"!=typeof window&&window.innerHeight||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientHeight||"undefined"!=typeof document&&document.body&&document.body.clientHeight||1,s="undefined"!=typeof window&&window.innerWidth||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientWidth||"undefined"!=typeof document&&document.body&&document.body.clientWidth||1,c="undefined"!=typeof navigator&&navigator.userAgent||"";e=n||"undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues?new o:new o([new Date,a,s,c,Math.random()]),e.create=function(){return new o(arguments)}}).call(this),function(){t.uuid=function(){for(var t="0123456789abcdef",n=[],i=0;36>i;i++)n[i]=e.choice(t);n[14]="4",n[19]=t.substr(3&parseInt(n[19],16)|8,1),n[8]=n[13]=n[18]=n[23]="-";var r=n.join("");return r}}.call(this),"undefined"==typeof Package&&(Package={}),Package.random={Random:e}}(),function(){var e,t=(Package.meteor.Meteor,Package.underscore._);(function(){var n=function(e,t,n,i){return{key:e,value:t,next:n,prev:i}};e=function(){var e=this;e._dict={},e._first=null,e._last=null,e._size=0;var n=t.toArray(arguments);e._stringify=function(e){return e},"function"==typeof n[0]&&(e._stringify=n.shift()),t.each(n,function(t){e.putBefore(t[0],t[1],null)})},t.extend(e.prototype,{_k:function(e){return" "+this._stringify(e)},empty:function(){var e=this;return!e._first},size:function(){var e=this;return e._size},_linkEltIn:function(e){var t=this;e.next?(e.prev=e.next.prev,e.next.prev=e,e.prev&&(e.prev.next=e)):(e.prev=t._last,t._last&&(t._last.next=e),t._last=e),(null===t._first||t._first===e.next)&&(t._first=e)},_linkEltOut:function(e){var t=this;e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next),e===t._last&&(t._last=e.prev),e===t._first&&(t._first=e.next)},putBefore:function(e,t,i){var r=this;if(r._dict[r._k(e)])throw new Error("Item "+e+" already present in OrderedDict");var o=i?n(e,t,r._dict[r._k(i)]):n(e,t,null);if(void 0===o.next)throw new Error("could not find item to put this one before");r._linkEltIn(o),r._dict[r._k(e)]=o,r._size++},append:function(e,t){var n=this;n.putBefore(e,t,null)},remove:function(e){var t=this,n=t._dict[t._k(e)];if(void 0===n)throw new Error("Item "+e+" not present in OrderedDict");return t._linkEltOut(n),t._size--,delete t._dict[t._k(e)],n.value},get:function(e){var t=this;return t.has(e)?t._dict[t._k(e)].value:void 0},has:function(e){var n=this;return t.has(n._dict,n._k(e))},forEach:function(t){for(var n=this,i=0,r=n._first;null!==r;){var o=t(r.value,r.key,i);if(o===e.BREAK)return;r=r.next,i++}},first:function(){var e=this;return e.empty()?void 0:e._first.key},firstValue:function(){var e=this;return e.empty()?void 0:e._first.value},last:function(){var e=this;return e.empty()?void 0:e._last.key},lastValue:function(){var e=this;return e.empty()?void 0:e._last.value},prev:function(e){var t=this;if(t.has(e)){var n=t._dict[t._k(e)];if(n.prev)return n.prev.key}return null},next:function(e){var t=this;if(t.has(e)){var n=t._dict[t._k(e)];if(n.next)return n.next.key}return null},moveBefore:function(e,t){var n=this,i=n._dict[n._k(e)],r=t?n._dict[n._k(t)]:null;if(void 0===i)throw new Error("Item to move is not present");if(void 0===r)throw new Error("Could not find element to move this one before");r!==i.next&&(n._linkEltOut(i),i.next=r,n._linkEltIn(i))},indexOf:function(t){var n=this,i=null;return n.forEach(function(r,o,a){return n._k(o)===n._k(t)?(i=a,e.BREAK):void 0}),i},_checkRep:function(){var e=this;t.each(e._dict,function(e,t){if(t.next===t)throw new Error("Next is a loop");if(t.prev===t)throw new Error("Prev is a loop")})}}),e.BREAK={"break":!0}}).call(this),"undefined"==typeof Package&&(Package={}),Package["ordered-dict"]={OrderedDict:e}}(),function(){{var e,t;Package.meteor.Meteor}(function(){t={exports:{}}}).call(this),function(){!function(){function e(e){for(var t=[],n=[],i=0;i<e[0].length;i++)t.push(e[0][i][1]),n.push(e[0][i][0]);return t=t.sort(function(e,t){return e-t}),n=n.sort(function(e,t){return e-t}),[[t[0],n[0]],[t[t.length-1],n[n.length-1]]]}function n(e,t,n){for(var i=[[0,0]],r=0;r<n.length;r++){for(var o=0;o<n[r].length;o++)i.push(n[r][o]);i.push([0,0])}for(var a=!1,r=0,o=i.length-1;r<i.length;o=r++)i[r][0]>t!=i[o][0]>t&&e<(i[o][1]-i[r][1])*(t-i[r][0])/(i[o][0]-i[r][0])+i[r][1]&&(a=!a);return a}var i={};"undefined"!=typeof t&&t.exports&&(t.exports=i),i.lineStringsIntersect=function(e,t){for(var n=[],i=0;i<=e.coordinates.length-2;++i)for(var r=0;r<=t.coordinates.length-2;++r){var o={x:e.coordinates[i][1],y:e.coordinates[i][0]},a={x:e.coordinates[i+1][1],y:e.coordinates[i+1][0]},s={x:t.coordinates[r][1],y:t.coordinates[r][0]},c={x:t.coordinates[r+1][1],y:t.coordinates[r+1][0]},l=(c.x-s.x)*(o.y-s.y)-(c.y-s.y)*(o.x-s.x),u=(a.x-o.x)*(o.y-s.y)-(a.y-o.y)*(o.x-s.x),d=(c.y-s.y)*(a.x-o.x)-(c.x-s.x)*(a.y-o.y);if(0!=d){var f=l/d,h=u/d;f>=0&&1>=f&&h>=0&&1>=h&&n.push({type:"Point",coordinates:[o.x+f*(a.x-o.x),o.y+f*(a.y-o.y)]})}}return 0==n.length&&(n=!1),n},i.pointInBoundingBox=function(e,t){return!(e.coordinates[1]<t[0][0]||e.coordinates[1]>t[1][0]||e.coordinates[0]<t[0][1]||e.coordinates[0]>t[1][1])},i.pointInPolygon=function(t,r){for(var o="Polygon"==r.type?[r.coordinates]:r.coordinates,a=!1,s=0;s<o.length;s++)i.pointInBoundingBox(t,e(o[s]))&&(a=!0);if(!a)return!1;for(var c=!1,s=0;s<o.length;s++)n(t.coordinates[1],t.coordinates[0],o[s])&&(c=!0);return c},i.numberToRadius=function(e){return e*Math.PI/180},i.numberToDegree=function(e){return 180*e/Math.PI},i.drawCircle=function(e,t,n){for(var r=[t.coordinates[1],t.coordinates[0]],o=e/1e3/6371,a=[i.numberToRadius(r[0]),i.numberToRadius(r[1])],n=n||15,s=[[r[0],r[1]]],c=0;n>c;c++){var l=2*Math.PI*c/n,u=Math.asin(Math.sin(a[0])*Math.cos(o)+Math.cos(a[0])*Math.sin(o)*Math.cos(l)),d=a[1]+Math.atan2(Math.sin(l)*Math.sin(o)*Math.cos(a[0]),Math.cos(o)-Math.sin(a[0])*Math.sin(u));s[c]=[],s[c][1]=i.numberToDegree(u),s[c][0]=i.numberToDegree(d)}return{type:"Polygon",coordinates:[s]}},i.rectangleCentroid=function(e){var t=e.coordinates[0],n=t[0][0],i=t[0][1],r=t[2][0],o=t[2][1],a=r-n,s=o-i;return{type:"Point",coordinates:[n+a/2,i+s/2]}},i.pointDistance=function(e,t){var n=e.coordinates[0],r=e.coordinates[1],o=t.coordinates[0],a=t.coordinates[1],s=i.numberToRadius(a-r),c=i.numberToRadius(o-n),l=Math.pow(Math.sin(s/2),2)+Math.cos(i.numberToRadius(r))*Math.cos(i.numberToRadius(a))*Math.pow(Math.sin(c/2),2),u=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return 6371*u*1e3},i.geometryWithinRadius=function(e,t,n){if("Point"==e.type)return i.pointDistance(e,t)<=n;if("LineString"==e.type||"Polygon"==e.type){var r,o={};r="Polygon"==e.type?e.coordinates[0]:e.coordinates;for(var a in r)if(o.coordinates=r[a],i.pointDistance(o,t)>n)return!1}return!0},i.area=function(e){for(var t,n,i=0,r=e.coordinates[0],o=r.length-1,a=0;a<r.length;o=a++){var t={x:r[a][1],y:r[a][0]},n={x:r[o][1],y:r[o][0]};i+=t.x*n.y,i-=t.y*n.x}return i/=2},i.centroid=function(e){for(var t,n,r,o=0,a=0,s=e.coordinates[0],c=s.length-1,l=0;l<s.length;c=l++){var n={x:s[l][1],y:s[l][0]},r={x:s[c][1],y:s[c][0]};t=n.x*r.y-r.x*n.y,o+=(n.x+r.x)*t,a+=(n.y+r.y)*t}return t=6*i.area(e),{type:"Point",coordinates:[a/t,o/t]}},i.simplify=function(e,t){t=t||20,e=e.map(function(e){return{lng:e.coordinates[0],lat:e.coordinates[1]}});var n,i,r,o,a,s,c,l,u,d,f,h,p,m,g,v,y,b,_,w=Math.PI/180*.5,k=new Array,S=new Array,T=new Array;if(e.length<3)return e;for(n=e.length,d=360*t/(2*Math.PI*6378137),d*=d,r=0,S[0]=0,T[0]=n-1,i=1;i>0;)if(o=S[i-1],a=T[i-1],i--,a-o>1){for(f=e[a].lng()-e[o].lng(),h=e[a].lat()-e[o].lat(),Math.abs(f)>180&&(f=360-Math.abs(f)),f*=Math.cos(w*(e[a].lat()+e[o].lat())),p=f*f+h*h,s=o+1,c=o,u=-1;a>s;s++)m=e[s].lng()-e[o].lng(),g=e[s].lat()-e[o].lat(),Math.abs(m)>180&&(m=360-Math.abs(m)),m*=Math.cos(w*(e[s].lat()+e[o].lat())),v=m*m+g*g,y=e[s].lng()-e[a].lng(),b=e[s].lat()-e[a].lat(),Math.abs(y)>180&&(y=360-Math.abs(y)),y*=Math.cos(w*(e[s].lat()+e[a].lat())),_=y*y+b*b,l=v>=p+_?_:_>=p+v?v:(m*h-g*f)*(m*h-g*f)/p,l>u&&(c=s,u=l);d>u?(k[r]=o,r++):(i++,S[i-1]=c,T[i-1]=a,i++,S[i-1]=o,T[i-1]=c)}else k[r]=o,r++;k[r]=n-1,r++;for(var C=new Array,s=0;r>s;s++)C.push(e[k[s]]);return C.map(function(e){return{type:"Point",coordinates:[e.lng,e.lat]}})},i.destinationPoint=function(e,t,n){n/=6371,t=i.numberToRadius(t);var r=i.numberToRadius(e.coordinates[0]),o=i.numberToRadius(e.coordinates[1]),a=Math.asin(Math.sin(r)*Math.cos(n)+Math.cos(r)*Math.sin(n)*Math.cos(t)),s=o+Math.atan2(Math.sin(t)*Math.sin(n)*Math.cos(r),Math.cos(n)-Math.sin(r)*Math.sin(a));return s=(s+3*Math.PI)%(2*Math.PI)-Math.PI,{type:"Point",coordinates:[i.numberToDegree(a),i.numberToDegree(s)]}}}()}.call(this),function(){e=t.exports}.call(this),"undefined"==typeof Package&&(Package={}),Package["geojson-utils"]={GeoJSON:e}}(),function(){var e,t,n,i,r,o=Package.meteor.Meteor,a=Package.underscore._,s=Package.json.JSON,c=Package.ejson.EJSON,l=Package["ordered-dict"].OrderedDict,u=Package.deps.Deps,d=Package.random.Random,f=Package["geojson-utils"].GeoJSON;(function(){e=function(e){this.name=e,this.docs={},this._observeQueue=new o._SynchronousQueue,this.next_qid=1,this.queries={},this._savedOriginals=null,this.paused=!1},t={},e._applyChanges=function(e,t){a.each(t,function(t,n){void 0===t?delete e[n]:e[n]=t})},n=function(e){var t=new Error(e);return t.name="MinimongoError",t},e.prototype.find=function(t,n){return 0===arguments.length&&(t={}),new e.Cursor(this,t,n)},e.Cursor=function(t,n,o){var a=this;if(o||(o={}),this.collection=t,e._selectorIsId(n))a.selector_id=e._idStringify(n),a.selector_f=e._compileSelector(n,a),a.sort_f=void 0;else{if(r(n))throw new Error("$near can't be inside $or/$and/$nor/$not");a.selector_id=void 0,a.selector_f=e._compileSelector(n,a),a.sort_f=i(n)||o.sort?e._compileSort(o.sort||[],a):null}a.skip=o.skip,a.limit=o.limit,a.fields=o.fields,a.fields&&(a.projection_f=e._compileProjection(a.fields)),a._transform=o.transform&&"undefined"!=typeof u?u._makeNonreactive(e.wrapTransform(o.transform)):e.wrapTransform(o.transform),a.db_objects=null,a.cursor_pos=0,"undefined"!=typeof u&&(a.reactive=void 0===o.reactive?!0:o.reactive)},e.Cursor.prototype.rewind=function(){var e=this;e.db_objects=null,e.cursor_pos=0},e.prototype.findOne=function(e,t){return 0===arguments.length&&(e={}),t=t||{},t.limit=1,this.find(e,t).fetch()[0]},e.Cursor.prototype.forEach=function(e,t){var n=this;for(null===n.db_objects&&(n.db_objects=n._getRawObjects(!0)),n.reactive&&n._depend({addedBefore:!0,removed:!0,changed:!0,movedBefore:!0});n.cursor_pos<n.db_objects.length;){var i=c.clone(n.db_objects[n.cursor_pos]);n.projection_f&&(i=n.projection_f(i)),n._transform&&(i=n._transform(i)),e.call(t,i,n.cursor_pos,n),++n.cursor_pos}},e.Cursor.prototype.getTransform=function(){return this._transform},e.Cursor.prototype.map=function(e,t){var n=this,i=[];return n.forEach(function(r,o){i.push(e.call(t,r,o,n))}),i},e.Cursor.prototype.fetch=function(){var e=this,t=[];return e.forEach(function(e){t.push(e)}),t},e.Cursor.prototype.count=function(){var e=this;return e.reactive&&e._depend({added:!0,removed:!0},!0),null===e.db_objects&&(e.db_objects=e._getRawObjects(!0)),e.db_objects.length},e.Cursor.prototype._publishCursor=function(e){var t=this;if(!t.collection.name)throw new Error("Can't publish a cursor from a collection without a name.");var n=t.collection.name;return o.Collection._publishCursor(t,e,n)},e._observeChangesCallbacksAreOrdered=function(e){if(e.added&&e.addedBefore)throw new Error("Please specify only one of added() and addedBefore()");return!(!e.addedBefore&&!e.movedBefore)},e._observeCallbacksAreOrdered=function(e){if(e.addedAt&&e.added)throw new Error("Please specify only one of added() and addedAt()");if(e.changedAt&&e.changed)throw new Error("Please specify only one of changed() and changedAt()");if(e.removed&&e.removedAt)throw new Error("Please specify only one of removed() and removedAt()");return!!(e.addedAt||e.movedTo||e.changedAt||e.removedAt)},e.ObserveHandle=function(){},a.extend(e.Cursor.prototype,{observe:function(t){var n=this;return e._observeFromObserveChanges(n,t)},observeChanges:function(t){var n=this,i=e._observeChangesCallbacksAreOrdered(t);if(!t._allow_unordered&&!i&&(n.skip||n.limit))throw new Error("must use ordered observe with skip or limit");var r,o={selector_f:n.selector_f,sort_f:i&&n.sort_f,results_snapshot:null,ordered:i,cursor:n,observeChanges:t.observeChanges,fields:n.fields,projection_f:n.projection_f};n.reactive&&(r=n.collection.next_qid++,n.collection.queries[r]=o),o.results=n._getRawObjects(i),n.collection.paused&&(o.results_snapshot=i?[]:{});var s=function(e,t,i){return e?function(){var r=this,o=arguments;void 0!==t&&n.projection_f&&(o[t]=n.projection_f(o[t]),i&&a.isEmpty(o[t]))||n.collection.paused||n.collection._observeQueue.queueTask(function(){e.apply(r,o)})}:function(){}};o.added=s(t.added,1),o.changed=s(t.changed,1,!0),o.removed=s(t.removed),i&&(o.addedBefore=s(t.addedBefore,1),o.movedBefore=s(t.movedBefore)),t._suppress_initial||n.collection.paused||a.each(o.results,function(e){var t=c.clone(e);delete t._id,i&&o.addedBefore(e._id,t,null),o.added(e._id,t)});var l=new e.ObserveHandle;return a.extend(l,{collection:n.collection,stop:function(){n.reactive&&delete n.collection.queries[r]}}),n.reactive&&u.active&&u.onInvalidate(function(){l.stop()}),n.collection._observeQueue.drain(),l}}),e.Cursor.prototype._getRawObjects=function(e){var t=this,n=e?[]:{};if(t.selector_id){if(t.skip)return n;if(a.has(t.collection.docs,t.selector_id)){var i=t.collection.docs[t.selector_id];e?n.push(i):n[t.selector_id]=i}return n}for(var r in t.collection.docs){var o=t.collection.docs[r];if(t.selector_f(o)&&(e?n.push(o):n[r]=o),t.limit&&!t.skip&&!t.sort_f&&n.length===t.limit)return n}if(!e)return n;t.sort_f&&n.sort(t.sort_f);var s=t.skip||0,c=t.limit?t.limit+s:n.length;return n.slice(s,c)},e.Cursor.prototype._depend=function(e,t){var n=this;if(u.active){var i=new u.Dependency;i.depend();var r=a.bind(i.changed,i),o={_suppress_initial:!0,_allow_unordered:t};a.each(["added","changed","removed","addedBefore","movedBefore"],function(t){e[t]&&(o[t]=r)}),n.observeChanges(o)}},e.prototype.insert=function(t,i){var r=this;t=c.clone(t),a.has(t,"_id")||(t._id=e._useOID?new e._ObjectID:d.id());var s=e._idStringify(t._id);if(a.has(r.docs,s))throw n("Duplicate _id '"+t._id+"'");r._saveOriginal(s,void 0),r.docs[s]=t;var l=[];for(var u in r.queries){var f=r.queries[u];f.selector_f(t)&&(f.cursor.skip||f.cursor.limit?l.push(u):e._insertInResults(f,t))}return a.each(l,function(t){r.queries[t]&&e._recomputeResults(r.queries[t])}),r._observeQueue.drain(),i&&o.defer(function(){i(null,t._id)}),t._id},e.prototype.remove=function(t,n){var i=this,r=[],s=[],c=e._compileSelector(t,i),l=e._idsMatchedBySelector(t);if(l)a.each(l,function(t){var n=e._idStringify(t);a.has(i.docs,n)&&c(i.docs[n])&&r.push(n)});else for(var u in i.docs){var d=i.docs[u];c(d)&&r.push(u)}for(var f=[],h=0;h<r.length;h++){var p=r[h],m=i.docs[p];a.each(i.queries,function(e,t){e.selector_f(m)&&(e.cursor.skip||e.cursor.limit?s.push(t):f.push({qid:t,doc:m}))}),i._saveOriginal(p,m),delete i.docs[p]}a.each(f,function(t){var n=i.queries[t.qid];n&&e._removeFromResults(n,t.doc)}),a.each(s,function(t){var n=i.queries[t];n&&e._recomputeResults(n)}),i._observeQueue.drain();var g=r.length;return n&&o.defer(function(){n(null,g)}),g},e.prototype.update=function(t,n,i,r){var s=this;!r&&i instanceof Function&&(r=i,i=null),i||(i={});var l=e._compileSelector(t,s),u={};a.each(s.queries,function(e,t){!e.cursor.skip&&!e.cursor.limit||e.paused||(u[t]=c.clone(e.results))});var d={},f=0;for(var h in s.docs){var p=s.docs[h];if(l(p)&&(s._saveOriginal(h,p),s._modifyAndNotify(p,n,d),++f,!i.multi))break}a.each(d,function(t,n){var i=s.queries[n];i&&e._recomputeResults(i,u[n])}),s._observeQueue.drain();var m;if(0===f&&i.upsert){var g=e._removeDollarOperators(t);e._modify(g,n,!0),!g._id&&i.insertedId&&(g._id=i.insertedId),m=s.insert(g),f=1}var v;return i._returnObject?(v={numberAffected:f},void 0!==m&&(v.insertedId=m)):v=f,r&&o.defer(function(){r(null,v)}),v},e.prototype.upsert=function(e,t,n,i){var r=this;return i||"function"!=typeof n||(i=n,n={}),r.update(e,t,a.extend({},n,{upsert:!0,_returnObject:!0}),i)},e.prototype._modifyAndNotify=function(t,n,i){var r=this,o={};for(var s in r.queries){var l=r.queries[s];o[s]=l.ordered?l.selector_f(t):a.has(l.results,e._idStringify(t._id))}var u=c.clone(t);e._modify(t,n);for(s in r.queries){l=r.queries[s];var d=o[s],f=l.selector_f(t);l.cursor.skip||l.cursor.limit?(d||f)&&(i[s]=!0):d&&!f?e._removeFromResults(l,t):!d&&f?e._insertInResults(l,t):d&&f&&e._updateInResults(l,t,u)}},e._insertInResults=function(t,n){var i=c.clone(n);if(delete i._id,t.ordered){if(t.sort_f){var r=e._insertInSortedList(t.sort_f,t.results,n),o=t.results[r+1];o=o?o._id:null,t.addedBefore(n._id,i,o)}else t.addedBefore(n._id,i,null),t.results.push(n);t.added(n._id,i)}else t.added(n._id,i),t.results[e._idStringify(n._id)]=n},e._removeFromResults=function(t,n){if(t.ordered){var i=e._findInOrderedResults(t,n);t.removed(n._id),t.results.splice(i,1)}else{var r=e._idStringify(n._id);t.removed(n._id),delete t.results[r]}},e._updateInResults=function(t,n,i){if(!c.equals(n._id,i._id))throw new Error("Can't change a doc's _id while updating");var r=e._makeChangedFields(n,i);if(!t.ordered)return a.isEmpty(r)||(t.changed(n._id,r),t.results[e._idStringify(n._id)]=n),void 0;var o=e._findInOrderedResults(t,n);if(a.isEmpty(r)||t.changed(n._id,r),t.sort_f){t.results.splice(o,1);var s=e._insertInSortedList(t.sort_f,t.results,n);if(o!==s){var l=t.results[s+1];l=l?l._id:null,t.movedBefore&&t.movedBefore(n._id,l)}}},e._recomputeResults=function(t,n){n||(n=t.results),t.results=t.cursor._getRawObjects(t.ordered),t.paused||e._diffQueryChanges(t.ordered,n,t.results,t)},e._findInOrderedResults=function(e,t){if(!e.ordered)throw new Error("Can't call _findInOrderedResults on unordered query");for(var n=0;n<e.results.length;n++)if(e.results[n]===t)return n;throw Error("object missing from query")},e._binarySearch=function(e,t,n){for(var i=0,r=t.length;r>0;){var o=Math.floor(r/2);e(n,t[i+o])>=0?(i+=o+1,r-=o+1):r=o}return i},e._insertInSortedList=function(t,n,i){if(0===n.length)return n.push(i),0;var r=e._binarySearch(t,n,i);return n.splice(r,0,i),r},e.prototype.saveOriginals=function(){var e=this;if(e._savedOriginals)throw new Error("Called saveOriginals twice without retrieveOriginals");e._savedOriginals={}},e.prototype.retrieveOriginals=function(){var e=this;if(!e._savedOriginals)throw new Error("Called retrieveOriginals without saveOriginals");var t=e._savedOriginals;return e._savedOriginals=null,t},e.prototype._saveOriginal=function(e,t){var n=this;n._savedOriginals&&(a.has(n._savedOriginals,e)||(n._savedOriginals[e]=c.clone(t)))},e.prototype.pauseObservers=function(){if(!this.paused){this.paused=!0;for(var e in this.queries){var t=this.queries[e];t.results_snapshot=c.clone(t.results)}}},e.prototype.resumeObservers=function(){var t=this;
if(this.paused){this.paused=!1;for(var n in this.queries){var i=t.queries[n];e._diffQueryChanges(i.ordered,i.results_snapshot,i.results,i),i.results_snapshot=null}t._observeQueue.drain()}},e._idStringify=function(t){if(t instanceof e._ObjectID)return t.valueOf();if("string"==typeof t)return""===t?t:"-"===t.substr(0,1)||"~"===t.substr(0,1)||e._looksLikeObjectID(t)||"{"===t.substr(0,1)?"-"+t:t;if(void 0===t)return"-";if("object"==typeof t&&null!==t)throw new Error("Meteor does not currently support objects other than ObjectID as ids");return"~"+s.stringify(t)},e._idParse=function(t){return""===t?t:"-"===t?void 0:"-"===t.substr(0,1)?t.substr(1):"~"===t.substr(0,1)?s.parse(t.substr(1)):e._looksLikeObjectID(t)?new e._ObjectID(t):t},e._makeChangedFields=function(t,n){var i={};return e._diffObjects(n,t,{leftOnly:function(e){i[e]=void 0},rightOnly:function(e,t){i[e]=t},both:function(e,t,n){c.equals(t,n)||(i[e]=n)}}),i};var i=function(e){return a.any(e,function(e,t){return"$near"===t||a.isObject(e)&&i(e)})},r=function(e){return a.any(e,function(e,t){return a.contains(["$or","$and","$nor","$not"],t)?i(e):a.isObject(e)&&r(e)})}}).call(this),function(){e.wrapTransform=function(e){return e?function(t){var n=t._id,i=e(t);if("object"!=typeof i||i instanceof Array||i instanceof o.Collection.ObjectID)throw new Error("transform must return object");if(i._id){if(i._id!==n)throw new Error("transformed document can't have different _id")}else i._id=n;return i}:void 0}}.call(this),function(){var n=function(e){return a.isArray(e)&&!c.isBinary(e)},i=function(e,t){return n(e)?a.any(e,t):t(e)},r=function(e,t){return t(e)?!0:n(e)&&a.any(e,t)},o=function(e){var t=void 0;for(var n in e){var i="$"===n.substr(0,1);if(void 0===t)t=i;else if(t!==i)throw new Error("Inconsistent selector: "+e)}return!!t},l=function(t,s,c){if(null==t)return function(e){return i(e,function(e){return null==e})};if(!a.isObject(t))return function(e){return i(e,function(e){return e===t})};if(t instanceof RegExp)return function(e){return void 0===e?!1:i(e,function(e){return t.test(e)})};if(n(t))return function(i){return n(i)?r(i,function(n){return e._f._equal(t,n)}):!1};if(o(t)){var l=[];return a.each(t,function(e,n){if(!a.has(d,n))throw new Error("Unrecognized operator: "+n);l.push(d[n](e,t,c))}),function(e,t){return a.all(l,function(n){return n(e,t)})}}return function(n){return i(n,function(n){return e._f._equal(t,n)})}},u={$and:function(e,t,i){if(!n(e)||a.isEmpty(e))throw Error("$and/$or/$nor must be nonempty array");var r=a.map(e,function(e){return h(e,i)});return function(e,t){return a.all(r,function(n){return n(e,t)})}},$or:function(e,t,i){if(!n(e)||a.isEmpty(e))throw Error("$and/$or/$nor must be nonempty array");var r=a.map(e,function(e){return h(e,i)});return function(e,t){return a.any(r,function(n){return n(e,t)})}},$nor:function(e,t,i){if(!n(e)||a.isEmpty(e))throw Error("$and/$or/$nor must be nonempty array");var r=a.map(e,function(e){return h(e,i)});return function(e,t){return a.all(r,function(n){return!n(e,t)})}},$where:function(e){return e instanceof Function||(e=Function("return "+e)),function(t){return e.call(t)}}},d={$in:function(t){if(!n(t))throw new Error("Argument to $in must be array");return function(n){return r(n,function(n){return a.any(t,function(t){return e._f._equal(t,n)})})}},$all:function(t){if(!n(t))throw new Error("Argument to $all must be array");return function(i){return n(i)?a.all(t,function(t){return a.any(i,function(n){return e._f._equal(t,n)})}):!1}},$lt:function(t){return function(n){return i(n,function(n){return e._f._cmp(n,t)<0})}},$lte:function(t){return function(n){return i(n,function(n){return e._f._cmp(n,t)<=0})}},$gt:function(t){return function(n){return i(n,function(n){return e._f._cmp(n,t)>0})}},$gte:function(t){return function(n){return i(n,function(n){return e._f._cmp(n,t)>=0})}},$ne:function(t){return function(n){return!r(n,function(n){return e._f._equal(n,t)})}},$nin:function(e){if(!n(e))throw new Error("Argument to $nin must be array");var t=d.$in(e);return function(e,n){return void 0===e?!0:!t(e,n)}},$exists:function(e){return function(t){return e===(void 0!==t)}},$mod:function(e){var t=e[0],n=e[1];return function(e){return i(e,function(e){return e%t===n})}},$size:function(e){return function(t){return n(t)&&e===t.length}},$type:function(t){return function(n){return void 0===n?!1:i(n,function(n){return e._f._type(n)===t})}},$regex:function(e,t){var n=t.$options;if(void 0!==n){if(/[^gim]/.test(n))throw new Error("Only the i, m, and g regexp options are supported");var r=e instanceof RegExp?e.source:e;e=new RegExp(r,n)}else e instanceof RegExp||(e=new RegExp(e));return function(t){return void 0===t?!1:i(t,function(t){return e.test(t)})}},$options:function(){return function(){return!0}},$elemMatch:function(e,t,i){var r=h(e,i);return function(e,t){return n(e)?a.any(e,function(e){return r(e,t)}):!1}},$not:function(e,t,n){var i=l(e,t,n);return function(e,t){return!i(e,t)}},$near:function(e,t,n){function i(e,t){e=r(e),t=r(t);var n=e[0]-t[0],i=e[1]-t[1];return a.isNaN(n)||a.isNaN(i)?null:Math.sqrt(n*n+i*i)}function r(e){return a.map(e,a.identity)}var o=a.isObject(e)&&a.has(e,"$geometry")?"2dsphere":"2d",s="2d"===o?t.$maxDistance:e.$maxDistance,c="2d"===o?e:e.$geometry;return function(e,t){var r=null;switch(o){case"2d":r=i(c,e);break;case"2dsphere":r="Point"===e.type?f.pointDistance(c,e):f.geometryWithinRadius(e,c,s)?0:s+1}return n&&(n._distance||(n._distance={}),n._distance[t._id]=r),null===r?!1:void 0===s?!0:s>=r}},$maxDistance:function(){return function(){return!0}}};e._f={_type:function(t){return"number"==typeof t?1:"string"==typeof t?2:"boolean"==typeof t?8:n(t)?4:null===t?10:t instanceof RegExp?11:"function"==typeof t?13:t instanceof Date?9:c.isBinary(t)?5:t instanceof e._ObjectID?7:3},_equal:function(e,t){return c.equals(e,t,{keyOrderSensitive:!0})},_typeorder:function(e){return[-1,1,2,3,4,5,-1,6,7,8,0,9,-1,100,2,100,1,8,1][e]},_cmp:function(t,n){if(void 0===t)return void 0===n?0:-1;if(void 0===n)return 1;var i=e._f._type(t),r=e._f._type(n),o=e._f._typeorder(i),a=e._f._typeorder(r);if(o!==a)return a>o?-1:1;if(i!==r)throw Error("Missing type coercion logic in _cmp");if(7===i&&(i=r=2,t=t.toHexString(),n=n.toHexString()),9===i&&(i=r=1,t=t.getTime(),n=n.getTime()),1===i)return t-n;if(2===r)return n>t?-1:t===n?0:1;if(3===i){var s=function(e){var t=[];for(var n in e)t.push(n),t.push(e[n]);return t};return e._f._cmp(s(t),s(n))}if(4===i)for(var c=0;;c++){if(c===t.length)return c===n.length?0:-1;if(c===n.length)return 1;var l=e._f._cmp(t[c],n[c]);if(0!==l)return l}if(5===i){if(t.length!==n.length)return t.length-n.length;for(c=0;c<t.length;c++){if(t[c]<n[c])return-1;if(t[c]>n[c])return 1}return 0}if(8===i)return t?n?0:1:n?-1:0;if(10===i)return 0;if(11===i)throw Error("Sorting not supported on regular expression");if(13===i)throw Error("Sorting not supported on Javascript code");throw Error("Unknown type to sort")}},t.matches=function(t,n){return e._compileSelector(t)(n)},e._makeLookupFunction=function(t){var i,r,o,s=t.indexOf(".");if(-1===s)i=t;else{i=t.substr(0,s);var c=t.substr(s+1);r=e._makeLookupFunction(c),o=/^\d+(\.|$)/.test(c)}return function(e){if(null==e)return[void 0];var t=e[i];return r?n(t)&&0===t.length?[void 0]:((!n(t)||o)&&(t=[t]),Array.prototype.concat.apply([],a.map(t,r))):[t]}};var h=function(t,n){var i=[];return a.each(t,function(r,o){if("$"===o.substr(0,1)){if(!a.has(u,o))throw new Error("Unrecognized logical operator: "+o);i.push(u[o](r,t,n))}else{var s=e._makeLookupFunction(o),c=l(r,t,n);i.push(function(e,t){var n=s(e),i=r&&(r.$not||r.$ne||r.$nin)?a.all:a.any;return i(n,function(e){return c(e,t)})})}}),function(e,t){return void 0===t&&(t=e),a.all(i,function(n){return n(e,t)})}};e._compileSelector=function(t,i){if(t instanceof Function)return function(e){return t.call(e)};if(e._selectorIsId(t))return function(e){return c.equals(e._id,t)};if(!t||"_id"in t&&!t._id)return function(){return!1};if("boolean"==typeof t||n(t)||c.isBinary(t))throw new Error("Invalid selector: "+t);return h(t,i)},e._compileSort=function(t,i){var r=[];if(t instanceof Array)for(var o=0;o<t.length;o++)"string"==typeof t[o]?r.push({lookup:e._makeLookupFunction(t[o]),ascending:!0}):r.push({lookup:e._makeLookupFunction(t[o][0]),ascending:"desc"!==t[o][1]});else{if("object"!=typeof t)throw Error("Bad sort specification: ",s.stringify(t));for(var c in t)r.push({lookup:e._makeLookupFunction(c),ascending:t[c]>=0})}if(0===r.length)return function(e,t){return i&&i._distance?i._distance[e._id]-i._distance[t._id]:0};var l=function(t,i){var r,o=!0;return a.each(t,function(t){n(t)||(t=[t]),n(t)&&0===t.length&&(t=[void 0]),a.each(t,function(t){if(o)r=t,o=!1;else{var n=e._f._cmp(r,t);(i&&n>0||!i&&0>n)&&(r=t)}})}),r};return function(t,n){for(var i=0;i<r.length;++i){var o=r[i],a=l(o.lookup(t),o.ascending),s=l(o.lookup(n),o.ascending),c=e._f._cmp(a,s);if(0!==c)return o.ascending?c:-c}return 0}}}.call(this),function(){e._compileProjection=function(t){e._checkSupportedProjection(t);var n=a.isUndefined(t._id)?!0:t._id,r=i(t),o=function(e,t){if(a.isArray(e))return a.map(e,function(e){return o(e,t)});var n=r.including?{}:c.clone(e);return a.each(t,function(t,i){a.has(e,i)&&(a.isObject(t)?a.isObject(e[i])&&(n[i]=o(e[i],t)):r.including?n[i]=c.clone(e[i]):delete n[i])}),n};return function(e){var t=o(e,r.tree);return n&&a.has(e,"_id")&&(t._id=e._id),!n&&a.has(t,"_id")&&delete t._id,t}},i=function(e){var t=a.keys(e).sort();t.length>0&&(1!==t.length||"_id"!==t[0])&&(t=a.reject(t,function(e){return"_id"===e}));var i=null;a.each(t,function(t){var r=!!e[t];if(null===i&&(i=r),i!==r)throw n("You cannot currently mix including and excluding fields.")});var o=r(t,function(){return i},function(e,t,i){var r=i,o=t;throw n("both "+r+" and "+o+" found in fields option, using both of them may trigger unexpected behavior. Did you mean to use only one of them?")});return{tree:o,including:i}},r=function(e,t,n,i){return i=i||{},a.each(e,function(e){var r=i,o=e.split("."),s=a.all(o.slice(0,-1),function(t,i){if(a.has(r,t)){if(!a.isObject(r[t])&&(r[t]=n(r[t],o.slice(0,i+1).join("."),e),!a.isObject(r[t])))return!1}else r[t]={};return r=r[t],!0});if(s){var c=a.last(o);r[c]=a.has(r,c)?n(r[c],e,e):t(e)}}),i},e._checkSupportedProjection=function(e){if(!a.isObject(e)||a.isArray(e))throw n("fields option must be an object");a.each(e,function(e,t){if(a.contains(t.split("."),"$"))throw n("Minimongo doesn't support $ operator in projections yet.");if(-1===a.indexOf([1,0,!0,!1],e))throw n("Projection values should be one of 1, 0, true, or false")})}}.call(this),function(){e._modify=function(t,i,r){var o=!1;for(var s in i){o="$"===s.substr(0,1);break}var l;if(o){var l=c.clone(t);for(var u in i){var d=e._modifiers[u];if(r&&"$setOnInsert"===u&&(d=e._modifiers.$set),!d)throw n("Invalid modifier specified "+u);for(var f in i[u]){if(f.length&&"."===f[f.length-1])throw n("Invalid mod field name, may not end in a period");var h=i[u][f],p=f.split("."),m=!!e._noCreateModifiers[u],g="$rename"===u,v=e._findModTarget(l,p,m,g),y=p.pop();d(v,y,h,f,l)}}}else{if(i._id&&!c.equals(t._id,i._id))throw n("Cannot change the _id of a document");for(var s in i){if("$"===s.substr(0,1))throw n("When replacing document, field name may not start with '$'");if(/\./.test(s))throw n("When replacing document, field name may not contain '.'")}l=i}a.each(a.keys(t),function(e){("_id"!==e||r)&&delete t[e]});for(var s in l)t[s]=l[s]},e._findModTarget=function(e,t,i,r){for(var o=0;o<t.length;o++){var a=o===t.length-1,c=t[o],l=/^[0-9]+$/.test(c);if(!(!i||"object"==typeof e&&c in e))return void 0;if(e instanceof Array){if(r)return null;if(!l)throw n("can't append to array using string field name ["+c+"]");for(c=parseInt(c),a&&(t[o]=c);e.length<c;)e.push(null);if(!a)if(e.length===c)e.push({});else if("object"!=typeof e[c])throw n("can't modify field '"+t[o+1]+"' of list value "+s.stringify(e[c]))}else a||c in e||(e[c]={});if(a)return e;e=e[c]}},e._noCreateModifiers={$unset:!0,$pop:!0,$rename:!0,$pull:!0,$pullAll:!0},e._modifiers={$inc:function(e,t,i){if("number"!=typeof i)throw n("Modifier $inc allowed for numbers only");if(t in e){if("number"!=typeof e[t])throw n("Cannot apply $inc modifier to non-number");e[t]+=i}else e[t]=i},$set:function(e,t,i){if(!a.isObject(e)){var r=n("Cannot set property on non-object field");throw r.setPropertyError=!0,r}if(null===e){var r=n("Cannot set property on null");throw r.setPropertyError=!0,r}if("_id"===t&&!c.equals(i,e._id))throw n("Cannot change the _id of a document");e[t]=c.clone(i)},$setOnInsert:function(){},$unset:function(e,t){void 0!==e&&(e instanceof Array?t in e&&(e[t]=null):delete e[t])},$push:function(t,i,r){if(void 0===t[i]&&(t[i]=[]),!(t[i]instanceof Array))throw n("Cannot apply $push modifier to non-array");if(!r||!r.$each)return t[i].push(c.clone(r)),void 0;var o=r.$each;if(!(o instanceof Array))throw n("$each must be an array");var a=void 0;if("$slice"in r){if("number"!=typeof r.$slice)throw n("$slice must be a numeric value");if(r.$slice>0)throw n("$slice in $push must be zero or negative");a=r.$slice}var s=void 0;if(r.$sort){if(void 0===a)throw n("$sort requires $slice to be present");s=e._compileSort(r.$sort);for(var l=0;l<o.length;l++)if(3!==e._f._type(o[l]))throw n("$push like modifiers using $sort require all elements to be objects")}for(var u=0;u<o.length;u++)t[i].push(c.clone(o[u]));s&&t[i].sort(s),void 0!==a&&(t[i]=0===a?[]:t[i].slice(a))},$pushAll:function(e,t,i){if(!("object"==typeof i&&i instanceof Array))throw n("Modifier $pushAll/pullAll allowed for arrays only");var r=e[t];if(void 0===r)e[t]=i;else{if(!(r instanceof Array))throw n("Cannot apply $pushAll modifier to non-array");for(var o=0;o<i.length;o++)r.push(i[o])}},$addToSet:function(t,i,r){var o=t[i];if(void 0===o)t[i]=[r];else{if(!(o instanceof Array))throw n("Cannot apply $addToSet modifier to non-array");var s=!1;if("object"==typeof r)for(var l in r){"$each"===l&&(s=!0);break}var u=s?r.$each:[r];a.each(u,function(t){for(var n=0;n<o.length;n++)if(e._f._equal(t,o[n]))return;o.push(c.clone(t))})}},$pop:function(e,t,i){if(void 0!==e){var r=e[t];if(void 0!==r){if(!(r instanceof Array))throw n("Cannot apply $pop modifier to non-array");"number"==typeof i&&0>i?r.splice(0,1):r.pop()}}},$pull:function(t,i,r){if(void 0!==t){var o=t[i];if(void 0!==o){if(!(o instanceof Array))throw n("Cannot apply $pull/pullAll modifier to non-array");var a=[];if("object"!=typeof r||r instanceof Array)for(var s=0;s<o.length;s++)e._f._equal(o[s],r)||a.push(o[s]);else for(var c=e._compileSelector(r),s=0;s<o.length;s++)c(o[s])||a.push(o[s]);t[i]=a}}},$pullAll:function(t,i,r){if(!("object"==typeof r&&r instanceof Array))throw n("Modifier $pushAll/pullAll allowed for arrays only");if(void 0!==t){var o=t[i];if(void 0!==o){if(!(o instanceof Array))throw n("Cannot apply $pull/pullAll modifier to non-array");for(var a=[],s=0;s<o.length;s++){for(var c=!1,l=0;l<r.length;l++)if(e._f._equal(o[s],r[l])){c=!0;break}c||a.push(o[s])}t[i]=a}}},$rename:function(t,i,r,o,a){if(o===r)throw n("$rename source must differ from target");if(null===t)throw n("$rename source field invalid");if("string"!=typeof r)throw n("$rename target must be a string");if(void 0!==t){var s=t[i];delete t[i];var c=r.split("."),l=e._findModTarget(a,c,!1,!0);if(null===l)throw n("$rename target field invalid");var u=c.pop();l[u]=s}},$bit:function(){throw n("$bit is not supported")}},e._removeDollarOperators=function(e){var t={};for(var n in e)"$"!==n.substr(0,1)&&(t[n]=e[n]);return t}}.call(this),function(){e._diffQueryChanges=function(t,n,i,r){t?e._diffQueryOrderedChanges(n,i,r):e._diffQueryUnorderedChanges(n,i,r)},e._diffQueryUnorderedChanges=function(t,n,i){if(i.movedBefore)throw new Error("_diffQueryUnordered called with a movedBefore observer!");a.each(n,function(n){if(a.has(t,n._id)){var r=t[n._id];i.changed&&!c.equals(r,n)&&i.changed(n._id,e._makeChangedFields(n,r))}else{var o=c.clone(n);delete o._id,i.added&&i.added(n._id,o)}}),i.removed&&a.each(t,function(e){a.has(n,e._id)||i.removed(e._id)})},e._diffQueryOrderedChanges=function(t,n,i){var r={};a.each(n,function(e){r[e._id]&&o._debug("Duplicate _id in new_results"),r[e._id]=!0});var s={};a.each(t,function(e,t){e._id in s&&o._debug("Duplicate _id in old_results"),s[e._id]=t});for(var l=[],u=0,d=n.length,f=new Array(d),h=new Array(d),p=function(e){return s[n[e]._id]},m=0;d>m;m++)if(void 0!==s[n[m]._id]){for(var g=u;g>0&&!(p(f[g-1])<p(m));)g--;h[m]=0===g?-1:f[g-1],f[g]=m,g+1>u&&(u=g+1)}for(var v=0===u?-1:f[u-1];v>=0;)l.push(v),v=h[v];l.reverse(),l.push(n.length),a.each(t,function(e){r[e._id]||i.removed&&i.removed(e._id)});var y=0;a.each(l,function(r){for(var o,l,u,d=n[r]?n[r]._id:null,f=y;r>f;f++)l=n[f],a.has(s,l._id)?(o=t[s[l._id]],u=e._makeChangedFields(l,o),a.isEmpty(u)||i.changed&&i.changed(l._id,u),i.movedBefore&&i.movedBefore(l._id,d)):(u=c.clone(l),delete u._id,i.addedBefore&&i.addedBefore(l._id,u,d),i.added&&i.added(l._id,u));d&&(l=n[r],o=t[s[l._id]],u=e._makeChangedFields(l,o),a.isEmpty(u)||i.changed&&i.changed(l._id,u)),y=r+1})},e._diffObjects=function(e,t,n){a.each(e,function(e,i){a.has(t,i)?n.both&&n.both(i,e,t[i]):n.leftOnly&&n.leftOnly(i,e)}),n.rightOnly&&a.each(t,function(t,i){a.has(e,i)||n.rightOnly(i,t)})}}.call(this),function(){e._IdMap=function(){var e=this;e._map={}},a.extend(e._IdMap.prototype,{get:function(t){var n=this,i=e._idStringify(t);return n._map[i]},set:function(t,n){var i=this,r=e._idStringify(t);i._map[r]=n},remove:function(t){var n=this,i=e._idStringify(t);delete n._map[i]},has:function(t){var n=this,i=e._idStringify(t);return a.has(n._map,i)},empty:function(){var e=this;return a.isEmpty(e._map)},clear:function(){var e=this;e._map={}},forEach:function(t){var n=this;a.each(n._map,function(n,i,r){var o=this;t.call(o,n,e._idParse(i),r)})},setDefault:function(t,n){var i=this,r=e._idStringify(t);return a.has(i._map,r)?i._map[r]:(i._map[r]=n,n)}})}.call(this),function(){e._CachingChangeObserver=function(t){var n=this;t=t||{};var i=t.callbacks&&e._observeChangesCallbacksAreOrdered(t.callbacks);if(a.has(t,"ordered")){if(n.ordered=t.ordered,t.callbacks&&t.ordered!==i)throw Error("ordered option doesn't match callbacks")}else{if(!t.callbacks)throw Error("must provide ordered or callbacks");n.ordered=i}var r=t.callbacks||{};n.ordered?(n.docs=new l(e._idStringify),n.applyChange={addedBefore:function(e,t,i){var o=c.clone(t);o._id=e,r.addedBefore&&r.addedBefore.call(n,e,t,i),r.added&&r.added.call(n,e,t),n.docs.putBefore(e,o,i||null)},movedBefore:function(e,t){n.docs.get(e);r.movedBefore&&r.movedBefore.call(n,e,t),n.docs.moveBefore(e,t||null)}}):(n.docs=new e._IdMap,n.applyChange={added:function(e,t){var i=c.clone(t);r.added&&r.added.call(n,e,t),i._id=e,n.docs.set(e,i)}}),n.applyChange.changed=function(t,i){var o=n.docs.get(t);if(!o)throw new Error("Unknown id for changed: "+t);r.changed&&r.changed.call(n,t,c.clone(i)),e._applyChanges(o,i)},n.applyChange.removed=function(e){r.removed&&r.removed.call(n,e),n.docs.remove(e)}},e._observeFromObserveChanges=function(t,n){var i,r=t.getTransform()||function(e){return e},o=!!n._suppress_initial;if(e._observeCallbacksAreOrdered(n)){var s=!n._no_indices;i={addedBefore:function(e,t,i){var c=this;if(!o&&(n.addedAt||n.added)){var l=r(a.extend(t,{_id:e}));if(n.addedAt){var u=s?i?c.docs.indexOf(i):c.docs.size():-1;n.addedAt(l,u,i)}else n.added(l)}},changed:function(t,i){var o=this;if(n.changedAt||n.changed){var a=c.clone(o.docs.get(t));if(!a)throw new Error("Unknown id for changed: "+t);var l=r(c.clone(a));if(e._applyChanges(a,i),a=r(a),n.changedAt){var u=s?o.docs.indexOf(t):-1;n.changedAt(a,l,u)}else n.changed(a,l)}},movedBefore:function(e,t){var i=this;if(n.movedTo){var o=s?i.docs.indexOf(e):-1,a=s?t?i.docs.indexOf(t):i.docs.size():-1;a>o&&--a,n.movedTo(r(c.clone(i.docs.get(e))),o,a,t||null)}},removed:function(e){var t=this;if(n.removedAt||n.removed){var i=r(t.docs.get(e));if(n.removedAt){var o=s?t.docs.indexOf(e):-1;n.removedAt(i,o)}else n.removed(i)}}}}else i={added:function(e,t){if(!o&&n.added){var i=a.extend(t,{_id:e});n.added(r(i))}},changed:function(t,i){var o=this;if(n.changed){var a=o.docs.get(t),s=c.clone(a);e._applyChanges(s,i),n.changed(r(s),r(a))}},removed:function(e){var t=this;n.removed&&n.removed(r(t.docs.get(e)))}};var l=new e._CachingChangeObserver({callbacks:i}),u=t.observeChanges(l.applyChange);return o=!1,l.ordered&&(u._fetch=function(){var e=[];return l.docs.forEach(function(t){e.push(r(t))}),e}),u}}.call(this),function(){e._looksLikeObjectID=function(e){return 24===e.length&&e.match(/^[0-9a-f]*$/)},e._ObjectID=function(t){var n=this;if(t){if(t=t.toLowerCase(),!e._looksLikeObjectID(t))throw new Error("Invalid hexadecimal string for creating an ObjectID");n._str=t}else n._str=d.hexString(24)},e._ObjectID.prototype.toString=function(){var e=this;return'ObjectID("'+e._str+'")'},e._ObjectID.prototype.equals=function(t){var n=this;return t instanceof e._ObjectID&&n.valueOf()===t.valueOf()},e._ObjectID.prototype.clone=function(){var t=this;return new e._ObjectID(t._str)},e._ObjectID.prototype.typeName=function(){return"oid"},e._ObjectID.prototype.getTimestamp=function(){var e=this;return parseInt(e._str.substr(0,8),16)},e._ObjectID.prototype.valueOf=e._ObjectID.prototype.toJSONValue=e._ObjectID.prototype.toHexString=function(){return this._str},e._selectorIsId=function(t){return"string"==typeof t||"number"==typeof t||t instanceof e._ObjectID},e._selectorIsIdPerhapsAsObject=function(t){return e._selectorIsId(t)||t&&"object"==typeof t&&t._id&&e._selectorIsId(t._id)&&1===a.size(t)},e._idsMatchedBySelector=function(t){if(e._selectorIsId(t))return[t];if(!t)return null;if(a.has(t,"_id"))return e._selectorIsId(t._id)?[t._id]:t._id&&t._id.$in&&a.isArray(t._id.$in)&&!a.isEmpty(t._id.$in)&&a.all(t._id.$in,e._selectorIsId)?t._id.$in:null;if(t.$and&&a.isArray(t.$and))for(var n=0;n<t.$and.length;++n){var i=e._idsMatchedBySelector(t.$and[n]);if(i)return i}return null},c.addType("oid",function(t){return new e._ObjectID(t)})}.call(this),"undefined"==typeof Package&&(Package={}),Package.minimongo={LocalCollection:e,MinimongoTest:t}}(),function(){var e,t,n,i,r,o,a,s,c,l,u,d=Package.meteor.Meteor,f=(Package.check.check,Package.check.Match,Package.random.Random),h=Package.ejson.EJSON,p=Package.json.JSON,m=Package.underscore._,g=Package.deps.Deps,v=(Package.logging.Log,Package.minimongo.LocalCollection);(function(){t={}}).call(this),function(){n=function(e){var t=this;m.extend(t,m.defaults(m.clone(e||{}),{baseTimeout:1e3,exponent:2.2,maxTimeout:3e5,minTimeout:10,minCount:2,fuzz:.5})),t.retryTimer=null},m.extend(n.prototype,{clear:function(){var e=this;e.retryTimer&&clearTimeout(e.retryTimer),e.retryTimer=null},_timeout:function(e){var t=this;if(e<t.minCount)return t.minTimeout;var n=Math.min(t.maxTimeout,t.baseTimeout*Math.pow(t.exponent,e));return n*=f.fraction()*t.fuzz+(1-t.fuzz/2)},retryLater:function(e,t){var n=this,i=n._timeout(e);return n.retryTimer&&clearTimeout(n.retryTimer),n.retryTimer=setTimeout(t,i),i}})}.call(this),function(){i=function(){var e=document,t=window,n={},i=function(){};i.prototype.addEventListener=function(e,t){this._listeners||(this._listeners={}),e in this._listeners||(this._listeners[e]=[]);var i=this._listeners[e];-1===n.arrIndexOf(i,t)&&i.push(t)},i.prototype.removeEventListener=function(e,t){if(this._listeners&&e in this._listeners){var i=this._listeners[e],r=n.arrIndexOf(i,t);return-1!==r?(i.length>1?this._listeners[e]=i.slice(0,r).concat(i.slice(r+1)):delete this._listeners[e],void 0):void 0}},i.prototype.dispatchEvent=function(e){var t=e.type,n=Array.prototype.slice.call(arguments,0);if(this["on"+t]&&this["on"+t].apply(this,n),this._listeners&&t in this._listeners)for(var i=0;i<this._listeners[t].length;i++)this._listeners[t][i].apply(this,n)};var r=function(e,t){if(this.type=e,"undefined"!=typeof t)for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])};r.prototype.toString=function(){var e=[];for(var t in this)if(this.hasOwnProperty(t)){var n=this[t];"function"==typeof n&&(n="[function]"),e.push(t+"="+n)}return"SimpleEvent("+e.join(", ")+")"};var o=function(e){var t=this;t._events=e||[],t._listeners={}};o.prototype.emit=function(e){var t=this;if(t._verifyType(e),!t._nuked){var n=Array.prototype.slice.call(arguments,1);if(t["on"+e]&&t["on"+e].apply(t,n),e in t._listeners)for(var i=0;i<t._listeners[e].length;i++)t._listeners[e][i].apply(t,n)}},o.prototype.on=function(e,t){var n=this;n._verifyType(e),n._nuked||(e in n._listeners||(n._listeners[e]=[]),n._listeners[e].push(t))},o.prototype._verifyType=function(e){var t=this;-1===n.arrIndexOf(t._events,e)&&n.log("Event "+p.stringify(e)+" not listed "+p.stringify(t._events)+" in "+t)},o.prototype.nuke=function(){var e=this;e._nuked=!0;for(var t=0;t<e._events.length;t++)delete e[e._events[t]];e._listeners={}};var a="abcdefghijklmnopqrstuvwxyz0123456789_";n.random_string=function(e,t){t=t||a.length;var n,i=[];for(n=0;e>n;n++)i.push(a.substr(Math.floor(Math.random()*t),1));return i.join("")},n.random_number=function(e){return Math.floor(Math.random()*e)},n.random_number_string=function(e){var t=(""+(e-1)).length,i=Array(t+1).join("0");return(i+n.random_number(e)).slice(-t)},n.getOrigin=function(e){e+="/";var t=e.split("/").slice(0,3);return t.join("/")},n.isSameOriginUrl=function(e,n){return n||(n=t.location.href),e.split("/").slice(0,3).join("/")===n.split("/").slice(0,3).join("/")},n.isSameOriginScheme=function(e,n){return n||(n=t.location.href),e.split(":")[0]===n.split(":")[0]},n.getParentDomain=function(e){if(/^[0-9.]*$/.test(e))return e;if(/^\[/.test(e))return e;if(!/[.]/.test(e))return e;var t=e.split(".").slice(1);return t.join(".")},n.objectExtend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e};var s="_jp";n.polluteGlobalNamespace=function(){s in t||(t[s]={})},n.closeFrame=function(e,t){return"c"+p.stringify([e,t])},n.userSetCode=function(e){return 1e3===e||e>=3e3&&4999>=e},n.countRTO=function(e){var t;return t=e>100?3*e:e+200},n.log=function(){t.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},n.bind=function(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}},n.flatUrl=function(e){return-1===e.indexOf("?")&&-1===e.indexOf("#")},n.amendUrl=function(t){var i=e.location;if(!t)throw new Error("Wrong url for SockJS");if(!n.flatUrl(t))throw new Error("Only basic urls are supported in SockJS");0===t.indexOf("//")&&(t=i.protocol+t),0===t.indexOf("/")&&(t=i.protocol+"//"+i.host+t),t=t.replace(/[/]+$/,"");var r=t.split("/");return("http:"===r[0]&&/:80$/.test(r[2])||"https:"===r[0]&&/:443$/.test(r[2]))&&(r[2]=r[2].replace(/:(80|443)$/,"")),t=r.join("/")},n.arrIndexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},n.arrSkip=function(e,t){var i=n.arrIndexOf(e,t);if(-1===i)return e.slice();var r=e.slice(0,i);return r.concat(e.slice(i+1))},n.isArray=Array.isArray||function(e){return{}.toString.call(e).indexOf("Array")>=0},n.delay=function(e,t){return"function"==typeof e&&(t=e,e=0),setTimeout(t,e)};var c,l=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u={"\x00":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","	":"\\t","\n":"\\n","":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","­":"\\u00ad","؀":"\\u0600","؁":"\\u0601","؂":"\\u0602","؃":"\\u0603","؄":"\\u0604","܏":"\\u070f","឴":"\\u17b4","឵":"\\u17b5","‌":"\\u200c","‍":"\\u200d","‎":"\\u200e","‏":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","‪":"\\u202a","‫":"\\u202b","‬":"\\u202c","‭":"\\u202d","‮":"\\u202e"," ":"\\u202f","⁠":"\\u2060","⁡":"\\u2061","⁢":"\\u2062","⁣":"\\u2063","⁤":"\\u2064","⁥":"\\u2065","⁦":"\\u2066","⁧":"\\u2067","⁨":"\\u2068","⁩":"\\u2069","⁪":"\\u206a","⁫":"\\u206b","⁬":"\\u206c","⁭":"\\u206d","⁮":"\\u206e","⁯":"\\u206f","﻿":"\\ufeff","￰":"\\ufff0","￱":"\\ufff1","￲":"\\ufff2","￳":"\\ufff3","￴":"\\ufff4","￵":"\\ufff5","￶":"\\ufff6","￷":"\\ufff7","￸":"\\ufff8","￹":"\\ufff9","￺":"\\ufffa","￻":"\\ufffb","￼":"\\ufffc","�":"\\ufffd","￾":"\\ufffe","￿":"\\uffff"},d=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,f=p&&p.stringify||function(e){return l.lastIndex=0,l.test(e)&&(e=e.replace(l,function(e){return u[e]})),'"'+e+'"'},h=function(e){var t,n={},i=[];for(t=0;65536>t;t++)i.push(String.fromCharCode(t));return e.lastIndex=0,i.join("").replace(e,function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n};n.quote=function(e){var t=f(e);return d.lastIndex=0,d.test(t)?(c||(c=h(d)),t.replace(d,function(e){return c[e]})):t};var m=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];n.probeProtocols=function(){for(var e={},t=0;t<m.length;t++){var n=m[t];e[n]=C[n]&&C[n].enabled()}return e},n.detectProtocols=function(e,t,n){var i={},r=[];t||(t=m);for(var o=0;o<t.length;o++){var a=t[o];i[a]=e[a]}var s=function(e){var t=e.shift();i[t]?r.push(t):e.length>0&&s(e)};return n.websocket!==!1&&s(["websocket"]),i["xhr-streaming"]&&!n.null_origin?r.push("xhr-streaming"):!i["xdr-streaming"]||n.cookie_needed||n.null_origin?s(["iframe-eventsource","iframe-htmlfile"]):r.push("xdr-streaming"),i["xhr-polling"]&&!n.null_origin?r.push("xhr-polling"):!i["xdr-polling"]||n.cookie_needed||n.null_origin?s(["iframe-xhr-polling","jsonp-polling"]):r.push("xdr-polling"),r};var g="_sockjs_global";n.createHook=function(){var e="a"+n.random_string(8);if(!(g in t)){var i={};t[g]=function(e){return e in i||(i[e]={id:e,del:function(){delete i[e]}}),i[e]}}return t[g](e)},n.attachMessage=function(e){n.attachEvent("message",e)},n.attachEvent=function(n,i){"undefined"!=typeof t.addEventListener?t.addEventListener(n,i,!1):(e.attachEvent("on"+n,i),t.attachEvent("on"+n,i))},n.detachMessage=function(e){n.detachEvent("message",e)},n.detachEvent=function(n,i){"undefined"!=typeof t.addEventListener?t.removeEventListener(n,i,!1):(e.detachEvent("on"+n,i),t.detachEvent("on"+n,i))};var v={},y=!1,b=function(){for(var e in v)v[e](),delete v[e]},_=function(){y||(y=!0,b())};n.attachEvent("unload",_),n.unload_add=function(e){var t=n.random_string(8);return v[t]=e,y&&n.delay(b),t},n.unload_del=function(e){e in v&&delete v[e]},n.createIframe=function(t,i){var r,o,a=e.createElement("iframe"),s=function(){clearTimeout(r);
try{a.onload=null}catch(e){}a.onerror=null},c=function(){a&&(s(),setTimeout(function(){a&&a.parentNode.removeChild(a),a=null},0),n.unload_del(o))},l=function(e){a&&(c(),i(e))},u=function(e,t){try{a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}catch(n){}};return a.src=t,a.style.display="none",a.style.position="absolute",a.onerror=function(){l("onerror")},a.onload=function(){clearTimeout(r),r=setTimeout(function(){l("onload timeout")},2e3)},e.body.appendChild(a),r=setTimeout(function(){l("timeout")},15e3),o=n.unload_add(c),{post:u,cleanup:c,loaded:s}},n.createHtmlfile=function(e,i){var r,o,a,c=new ActiveXObject("htmlfile"),l=function(){clearTimeout(r)},u=function(){c&&(l(),n.unload_del(o),a.parentNode.removeChild(a),a=c=null,CollectGarbage())},d=function(e){c&&(u(),i(e))},f=function(e,t){try{a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}catch(n){}};c.open(),c.write('<html><script>document.domain="'+document.domain+'";</script></html>'),c.close(),c.parentWindow[s]=t[s];var h=c.createElement("div");return c.body.appendChild(h),a=c.createElement("iframe"),h.appendChild(a),a.src=e,r=setTimeout(function(){d("timeout")},15e3),o=n.unload_add(u),{post:f,cleanup:u,loaded:l}};var w=function(){};w.prototype=new o(["chunk","finish"]),w.prototype._start=function(e,i,r,o){var a=this;try{a.xhr=new XMLHttpRequest}catch(s){}if(!a.xhr)try{a.xhr=new t.ActiveXObject("Microsoft.XMLHTTP")}catch(s){}(t.ActiveXObject||t.XDomainRequest)&&(i+=(-1===i.indexOf("?")?"?":"&")+"t="+ +new Date),a.unload_ref=n.unload_add(function(){a._cleanup(!0)});try{a.xhr.open(e,i,!0)}catch(c){return a.emit("finish",0,""),a._cleanup(),void 0}if(o&&o.no_credentials||(a.xhr.withCredentials="true"),o&&o.headers)for(var l in o.headers)a.xhr.setRequestHeader(l,o.headers[l]);a.xhr.onreadystatechange=function(){if(a.xhr){var e=a.xhr;switch(e.readyState){case 3:try{var t=e.status,n=e.responseText}catch(e){}1223===t&&(t=204),n&&n.length>0&&a.emit("chunk",t,n);break;case 4:var t=e.status;1223===t&&(t=204),a.emit("finish",t,e.responseText),a._cleanup(!1)}}},a.xhr.send(r)},w.prototype._cleanup=function(e){var t=this;if(t.xhr){if(n.unload_del(t.unload_ref),t.xhr.onreadystatechange=function(){},e)try{t.xhr.abort()}catch(i){}t.unload_ref=t.xhr=null}},w.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)};var k=n.XHRCorsObject=function(){var e=this,t=arguments;n.delay(function(){e._start.apply(e,t)})};k.prototype=new w;var S=n.XHRLocalObject=function(e,t,i){var r=this;n.delay(function(){r._start(e,t,i,{no_credentials:!0})})};S.prototype=new w;var T=n.XDRObject=function(e,t,i){var r=this;n.delay(function(){r._start(e,t,i)})};T.prototype=new o(["chunk","finish"]),T.prototype._start=function(e,t,i){var r=this,o=new XDomainRequest;t+=(-1===t.indexOf("?")?"?":"&")+"t="+ +new Date;var a=o.ontimeout=o.onerror=function(){r.emit("finish",0,""),r._cleanup(!1)};o.onprogress=function(){r.emit("chunk",200,o.responseText)},o.onload=function(){r.emit("finish",200,o.responseText),r._cleanup(!1)},r.xdr=o,r.unload_ref=n.unload_add(function(){r._cleanup(!0)});try{r.xdr.open(e,t),r.xdr.send(i)}catch(s){a()}},T.prototype._cleanup=function(e){var t=this;if(t.xdr){if(n.unload_del(t.unload_ref),t.xdr.ontimeout=t.xdr.onerror=t.xdr.onprogress=t.xdr.onload=null,e)try{t.xdr.abort()}catch(i){}t.unload_ref=t.xdr=null}},T.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)},n.isXHRCorsCapable=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:t.XDomainRequest&&e.domain?2:A.enabled()?3:4};var C=function(e,t,i){if(!(this instanceof C))return new C(e,t,i);var r,o=this;o._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},i&&n.objectExtend(o._options,i),o._base_url=n.amendUrl(e),o._server=o._options.server||n.random_number_string(1e3),o._options.protocols_whitelist&&o._options.protocols_whitelist.length?r=o._options.protocols_whitelist:(r="string"==typeof t&&t.length>0?[t]:n.isArray(t)?t:null,r&&o._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),o._protocols=[],o.protocol=null,o.readyState=C.CONNECTING,o._ir=q(o._base_url),o._ir.onfinish=function(e,t){o._ir=null,e?(o._options.info&&(e=n.objectExtend(e,o._options.info)),o._options.rtt&&(t=o._options.rtt),o._applyInfo(e,t,r),o._didClose()):o._didClose(1002,"Can't connect to server",!0)}};C.prototype=new i,C.version="0.3.4",C.CONNECTING=0,C.OPEN=1,C.CLOSING=2,C.CLOSED=3,C.prototype._debug=function(){this._options.debug&&n.log.apply(n,arguments)},C.prototype._dispatchOpen=function(){var e=this;e.readyState===C.CONNECTING?(e._transport_tref&&(clearTimeout(e._transport_tref),e._transport_tref=null),e.readyState=C.OPEN,e.dispatchEvent(new r("open"))):e._didClose(1006,"Server lost session")},C.prototype._dispatchMessage=function(e){var t=this;t.readyState===C.OPEN&&t.dispatchEvent(new r("message",{data:e}))},C.prototype._dispatchHeartbeat=function(){var e=this;e.readyState===C.OPEN&&e.dispatchEvent(new r("heartbeat",{}))},C.prototype._didClose=function(e,t,i){var o=this;if(o.readyState!==C.CONNECTING&&o.readyState!==C.OPEN&&o.readyState!==C.CLOSING)throw new Error("INVALID_STATE_ERR");o._ir&&(o._ir.nuke(),o._ir=null),o._transport&&(o._transport.doCleanup(),o._transport=null);var a=new r("close",{code:e,reason:t,wasClean:n.userSetCode(e)});if(!n.userSetCode(e)&&o.readyState===C.CONNECTING&&!i){if(o._try_next_protocol(a))return;a=new r("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:a})}o.readyState=C.CLOSED,n.delay(function(){o.dispatchEvent(a)})},C.prototype._didMessage=function(e){var t=this,n=e.slice(0,1);switch(n){case"o":t._dispatchOpen();break;case"a":for(var i=p.parse(e.slice(1)||"[]"),r=0;r<i.length;r++)t._dispatchMessage(i[r]);break;case"m":var i=p.parse(e.slice(1)||"null");t._dispatchMessage(i);break;case"c":var i=p.parse(e.slice(1)||"[]");t._didClose(i[0],i[1]);break;case"h":t._dispatchHeartbeat()}},C.prototype._try_next_protocol=function(t){var i=this;for(i.protocol&&(i._debug("Closed transport:",i.protocol,""+t),i.protocol=null),i._transport_tref&&(clearTimeout(i._transport_tref),i._transport_tref=null);;){var r=i.protocol=i._protocols.shift();if(!r)return!1;if(C[r]&&C[r].need_body===!0&&(!e.body||"undefined"!=typeof e.readyState&&"complete"!==e.readyState))return i._protocols.unshift(r),i.protocol="waiting-for-load",n.attachEvent("load",function(){i._try_next_protocol()}),!0;if(C[r]&&C[r].enabled(i._options)){var o=C[r].roundTrips||1,a=(i._options.rto||0)*o||5e3;i._transport_tref=n.delay(a,function(){i.readyState===C.CONNECTING&&i._didClose(2007,"Transport timeouted")});var s=n.random_string(8),c=i._base_url+"/"+i._server+"/"+s;return i._debug("Opening transport:",r," url:"+c," RTO:"+i._options.rto),i._transport=new C[r](i,c,i._base_url),!0}i._debug("Skipping transport:",r)}},C.prototype.close=function(e,t){var i=this;if(e&&!n.userSetCode(e))throw new Error("INVALID_ACCESS_ERR");return i.readyState!==C.CONNECTING&&i.readyState!==C.OPEN?!1:(i.readyState=C.CLOSING,i._didClose(e||1e3,t||"Normal closure"),!0)},C.prototype.send=function(e){var t=this;if(t.readyState===C.CONNECTING)throw new Error("INVALID_STATE_ERR");return t.readyState===C.OPEN&&t._transport.doSend(n.quote(""+e)),!0},C.prototype._applyInfo=function(t,i,r){var o=this;o._options.info=t,o._options.rtt=i,o._options.rto=n.countRTO(i),o._options.info.null_origin=!e.domain,t.base_url&&(o._base_url=n.amendUrl(t.base_url));var a=n.probeProtocols();o._protocols=n.detectProtocols(a,r,t),n.isSameOriginScheme(o._base_url)||2!==n.isXHRCorsCapable()||(o._protocols=["jsonp-polling"])};var x=C.websocket=function(e,i){var r=this,o=i+"/websocket";o="https"===o.slice(0,5)?"wss"+o.slice(5):"ws"+o.slice(4),r.ri=e,r.url=o;var a=t.WebSocket||t.MozWebSocket;r.ws=new a(r.url),r.ws.onmessage=function(e){r.ri._didMessage(e.data)},r.unload_ref=n.unload_add(function(){r.ws.close()}),r.ws.onclose=function(){r.ri._didMessage(n.closeFrame(1006,"WebSocket connection broken"))}};x.prototype.doSend=function(e){this.ws.send("["+e+"]")},x.prototype.doCleanup=function(){var e=this,t=e.ws;t&&(t.onmessage=t.onclose=null,t.close(),n.unload_del(e.unload_ref),e.unload_ref=e.ri=e.ws=null)},x.enabled=function(){return!(!t.WebSocket&&!t.MozWebSocket)},x.roundTrips=2;var P=function(){};P.prototype.send_constructor=function(e){var t=this;t.send_buffer=[],t.sender=e},P.prototype.doSend=function(e){var t=this;t.send_buffer.push(e),t.send_stop||t.send_schedule()},P.prototype.send_schedule_wait=function(){var e,t=this;t.send_stop=function(){t.send_stop=null,clearTimeout(e)},e=n.delay(25,function(){t.send_stop=null,t.send_schedule()})},P.prototype.send_schedule=function(){var e=this;if(e.send_buffer.length>0){var t="["+e.send_buffer.join(",")+"]";e.send_stop=e.sender(e.trans_url,t,function(t,n){e.send_stop=null,t===!1?e.ri._didClose(1006,"Sending error "+n):e.send_schedule_wait()}),e.send_buffer=[]}},P.prototype.send_destructor=function(){var e=this;e._send_stop&&e._send_stop(),e._send_stop=null};var M=function(t,i,r){var o=this;if(!("_send_form"in o)){var a=o._send_form=e.createElement("form"),s=o._send_area=e.createElement("textarea");s.name="d",a.style.display="none",a.style.position="absolute",a.method="POST",a.enctype="application/x-www-form-urlencoded",a.acceptCharset="UTF-8",a.appendChild(s),e.body.appendChild(a)}var a=o._send_form,s=o._send_area,c="a"+n.random_string(8);a.target=c,a.action=t+"/jsonp_send?i="+c;var l;try{l=e.createElement('<iframe name="'+c+'">')}catch(u){l=e.createElement("iframe"),l.name=c}l.id=c,a.appendChild(l),l.style.display="none";try{s.value=i}catch(d){n.log("Your browser is seriously broken. Go home! "+d.message)}a.submit();var f=function(){l.onerror&&(l.onreadystatechange=l.onerror=l.onload=null,n.delay(500,function(){l.parentNode.removeChild(l),l=null}),s.value="",r(!0))};return l.onerror=l.onload=f,l.onreadystatechange=function(){"complete"==l.readyState&&f()},f},D=function(e){return function(t,n,i){var r=new e("POST",t+"/xhr_send",n);return r.onfinish=function(e){i(200===e||204===e,"http status "+e)},function(e){i(!1,e)}}},I=function(t,i){var r,o,a=e.createElement("script"),s=function(e){o&&(o.parentNode.removeChild(o),o=null),a&&(clearTimeout(r),a.parentNode.removeChild(a),a.onreadystatechange=a.onerror=a.onload=a.onclick=null,a=null,i(e),i=null)},c=!1,l=null;if(a.id="a"+n.random_string(8),a.src=t,a.type="text/javascript",a.charset="UTF-8",a.onerror=function(){l||(l=setTimeout(function(){c||s(n.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},a.onload=function(){s(n.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},a.onreadystatechange=function(){if(/loaded|closed/.test(a.readyState)){if(a&&a.htmlFor&&a.onclick){c=!0;try{a.onclick()}catch(e){}}a&&s(n.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof a.async&&e.attachEvent)if(/opera/i.test(navigator.userAgent))o=e.createElement("script"),o.text="try{var a = document.getElementById('"+a.id+"'); if(a)a.onerror();}catch(x){};",a.async=o.async=!1;else{try{a.htmlFor=a.id,a.event="onclick"}catch(u){}a.async=!0}"undefined"!=typeof a.async&&(a.async=!0),r=setTimeout(function(){s(n.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var d=e.getElementsByTagName("head")[0];return d.insertBefore(a,d.firstChild),o&&d.insertBefore(o,d.firstChild),s},E=C["jsonp-polling"]=function(e,t){n.polluteGlobalNamespace();var i=this;i.ri=e,i.trans_url=t,i.send_constructor(M),i._schedule_recv()};E.prototype=new P,E.prototype._schedule_recv=function(){var e=this,t=function(t){e._recv_stop=null,t&&(e._is_closing||e.ri._didMessage(t)),e._is_closing||e._schedule_recv()};e._recv_stop=L(e.trans_url+"/jsonp",I,t)},E.enabled=function(){return!0},E.need_body=!0,E.prototype.doCleanup=function(){var e=this;e._is_closing=!0,e._recv_stop&&e._recv_stop(),e.ri=e._recv_stop=null,e.send_destructor()};var L=function(e,i,r){var o="a"+n.random_string(6),a=e+"?c="+escape(s+"."+o),c=0,l=function(e){switch(c){case 0:delete t[s][o],r(e);break;case 1:r(e),c=2;break;case 2:delete t[s][o]}},u=i(a,l);t[s][o]=u;var d=function(){t[s][o]&&(c=1,t[s][o](n.closeFrame(1e3,"JSONP user aborted read")))};return d},H=function(){};H.prototype=new P,H.prototype.run=function(e,t,n,i,r){var o=this;o.ri=e,o.trans_url=t,o.send_constructor(D(r)),o.poll=new Z(e,i,t+n,r)},H.prototype.doCleanup=function(){var e=this;e.poll&&(e.poll.abort(),e.poll=null)};var z=C["xhr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",rt,n.XHRCorsObject)};z.prototype=new H,z.enabled=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},z.roundTrips=2,z.need_body=!0;var N=C["xdr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",rt,n.XDRObject)};N.prototype=new H,N.enabled=function(){return!!t.XDomainRequest},N.roundTrips=2;var O=C["xhr-polling"]=function(e,t){this.run(e,t,"/xhr",rt,n.XHRCorsObject)};O.prototype=new H,O.enabled=z.enabled,O.roundTrips=2;var R=C["xdr-polling"]=function(e,t){this.run(e,t,"/xhr",rt,n.XDRObject)};R.prototype=new H,R.enabled=N.enabled,R.roundTrips=2;var A=function(){};A.prototype.i_constructor=function(e,t,i){var r=this;r.ri=e,r.origin=n.getOrigin(i),r.base_url=i,r.trans_url=t;var o=i+"/iframe.html";r.ri._options.devel&&(o+="?t="+ +new Date),r.window_id=n.random_string(8),o+="#"+r.window_id,r.iframeObj=n.createIframe(o,function(e){r.ri._didClose(1006,"Unable to load an iframe ("+e+")")}),r.onmessage_cb=n.bind(r.onmessage,r),n.attachMessage(r.onmessage_cb)},A.prototype.doCleanup=function(){var e=this;if(e.iframeObj){n.detachMessage(e.onmessage_cb);try{e.iframeObj.iframe.contentWindow&&e.postMessage("c")}catch(t){}e.iframeObj.cleanup(),e.iframeObj=null,e.onmessage_cb=e.iframeObj=null}},A.prototype.onmessage=function(e){var t=this;if(e.origin===t.origin){var n=e.data.slice(0,8),i=e.data.slice(8,9),r=e.data.slice(9);if(n===t.window_id)switch(i){case"s":t.iframeObj.loaded(),t.postMessage("s",p.stringify([C.version,t.protocol,t.trans_url,t.base_url]));break;case"t":t.ri._didMessage(r)}}},A.prototype.postMessage=function(e,t){var n=this;n.iframeObj.post(n.window_id+e+(t||""),n.origin)},A.prototype.doSend=function(e){this.postMessage("m",e)},A.enabled=function(){var e=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof t.postMessage||"object"==typeof t.postMessage)&&!e};var $,j=function(e,i){parent!==t?parent.postMessage($+e+(i||""),"*"):n.log("Can't postMessage, no parent window.",e,i)},U=function(){};U.prototype._didClose=function(e,t){j("t",n.closeFrame(e,t))},U.prototype._didMessage=function(e){j("t",e)},U.prototype._doSend=function(e){this._transport.doSend(e)},U.prototype._doCleanup=function(){this._transport.doCleanup()},n.parent_origin=void 0,C.bootstrap_iframe=function(){var i;$=e.location.hash.slice(1);var r=function(e){if(e.source===parent&&("undefined"==typeof n.parent_origin&&(n.parent_origin=e.origin),e.origin===n.parent_origin)){var r=e.data.slice(0,8),o=e.data.slice(8,9),a=e.data.slice(9);if(r===$)switch(o){case"s":var s=p.parse(a),c=s[0],l=s[1],u=s[2],d=s[3];if(c!==C.version&&n.log('Incompatibile SockJS! Main site uses: "'+c+'", the iframe: "'+C.version+'".'),!n.flatUrl(u)||!n.flatUrl(d))return n.log("Only basic urls are supported in SockJS"),void 0;if(!n.isSameOriginUrl(u)||!n.isSameOriginUrl(d))return n.log("Can't connect to different domain from within an iframe. ("+p.stringify([t.location.href,u,d])+")"),void 0;i=new U,i._transport=new U[l](i,u,d);break;case"m":i._doSend(a);break;case"c":i&&i._doCleanup(),i=null}}};n.attachMessage(r),j("s")};var B=function(e,t){var i=this;n.delay(function(){i.doXhr(e,t)})};B.prototype=new o(["finish"]),B.prototype.doXhr=function(e,t){var i=this,r=(new Date).getTime(),o=new t("GET",e+"/info?cb="+n.random_string(10)),a=n.delay(8e3,function(){o.ontimeout()});o.onfinish=function(e,t){if(clearTimeout(a),a=null,200===e){var n=(new Date).getTime()-r,o=p.parse(t);"object"!=typeof o&&(o={}),i.emit("finish",o,n)}else i.emit("finish")},o.ontimeout=function(){o.close(),i.emit("finish")}};var F=function(t){var i=this,r=function(){var e=new A;e.protocol="w-iframe-info-receiver";var n=function(t){if("string"==typeof t&&"m"===t.substr(0,1)){var n=p.parse(t.substr(1)),r=n[0],o=n[1];i.emit("finish",r,o)}else i.emit("finish");e.doCleanup(),e=null},r={_options:{},_didClose:n,_didMessage:n};e.i_constructor(r,t,t)};e.body?r():n.attachEvent("load",r)};F.prototype=new o(["finish"]);var W=function(){var e=this;n.delay(function(){e.emit("finish",{},2e3)})};W.prototype=new o(["finish"]);var q=function(e){if(n.isSameOriginUrl(e))return new B(e,n.XHRLocalObject);switch(n.isXHRCorsCapable()){case 1:return new B(e,n.XHRLocalObject);case 2:return n.isSameOriginScheme(e)?new B(e,n.XDRObject):new W;case 3:return new F(e);default:return new W}},V=U["w-iframe-info-receiver"]=function(e,t,i){var r=new B(i,n.XHRLocalObject);r.onfinish=function(t,n){e._didMessage("m"+p.stringify([t,n])),e._didClose()}};V.prototype.doCleanup=function(){};var Y=C["iframe-eventsource"]=function(){var e=this;e.protocol="w-iframe-eventsource",e.i_constructor.apply(e,arguments)};Y.prototype=new A,Y.enabled=function(){return"EventSource"in t&&A.enabled()},Y.need_body=!0,Y.roundTrips=3;var X=U["w-iframe-eventsource"]=function(e,t){this.run(e,t,"/eventsource",et,n.XHRLocalObject)};X.prototype=new H;var J=C["iframe-xhr-polling"]=function(){var e=this;e.protocol="w-iframe-xhr-polling",e.i_constructor.apply(e,arguments)};J.prototype=new A,J.enabled=function(){return t.XMLHttpRequest&&A.enabled()},J.need_body=!0,J.roundTrips=3;var G=U["w-iframe-xhr-polling"]=function(e,t){this.run(e,t,"/xhr",rt,n.XHRLocalObject)};G.prototype=new H;var K=C["iframe-htmlfile"]=function(){var e=this;e.protocol="w-iframe-htmlfile",e.i_constructor.apply(e,arguments)};K.prototype=new A,K.enabled=function(){return A.enabled()},K.need_body=!0,K.roundTrips=3;var Q=U["w-iframe-htmlfile"]=function(e,t){this.run(e,t,"/htmlfile",it,n.XHRLocalObject)};Q.prototype=new H;var Z=function(e,t,n,i){var r=this;r.ri=e,r.Receiver=t,r.recv_url=n,r.AjaxObject=i,r._scheduleRecv()};Z.prototype._scheduleRecv=function(){var e=this,t=e.poll=new e.Receiver(e.recv_url,e.AjaxObject),n=0;t.onmessage=function(t){n+=1,e.ri._didMessage(t.data)},t.onclose=function(n){e.poll=t=t.onmessage=t.onclose=null,e.poll_is_closing||("permanent"===n.reason?e.ri._didClose(1006,"Polling error ("+n.reason+")"):e._scheduleRecv())}},Z.prototype.abort=function(){var e=this;e.poll_is_closing=!0,e.poll&&e.poll.abort()};var et=function(e){var t=this,i=new EventSource(e);i.onmessage=function(e){t.dispatchEvent(new r("message",{data:unescape(e.data)}))},t.es_close=i.onerror=function(e,o){var a=o?"user":2!==i.readyState?"network":"permanent";t.es_close=i.onmessage=i.onerror=null,i.close(),i=null,n.delay(200,function(){t.dispatchEvent(new r("close",{reason:a}))})}};et.prototype=new i,et.prototype.abort=function(){var e=this;e.es_close&&e.es_close({},!0)};var tt,nt=function(){if(void 0===tt)if("ActiveXObject"in t)try{tt=!!new ActiveXObject("htmlfile")}catch(e){}else tt=!1;return tt},it=function(e){var i=this;n.polluteGlobalNamespace(),i.id="a"+n.random_string(6,26),e+=(-1===e.indexOf("?")?"?":"&")+"c="+escape(s+"."+i.id);var o,a=nt()?n.createHtmlfile:n.createIframe;t[s][i.id]={start:function(){o.loaded()},message:function(e){i.dispatchEvent(new r("message",{data:e}))},stop:function(){i.iframe_close({},"network")}},i.iframe_close=function(e,n){o.cleanup(),i.iframe_close=o=null,delete t[s][i.id],i.dispatchEvent(new r("close",{reason:n}))},o=a(e,function(){i.iframe_close({},"permanent")})};it.prototype=new i,it.prototype.abort=function(){var e=this;e.iframe_close&&e.iframe_close({},"user")};var rt=function(e,t){var n=this,i=0;n.xo=new t("POST",e,null),n.xo.onchunk=function(e,t){if(200===e)for(;;){var o=t.slice(i),a=o.indexOf("\n");if(-1===a)break;i+=a+1;var s=o.slice(0,a);n.dispatchEvent(new r("message",{data:s}))}},n.xo.onfinish=function(e,t){n.xo.onchunk(e,t),n.xo=null;var i=200===e?"network":"permanent";n.dispatchEvent(new r("close",{reason:i}))}};return rt.prototype=new i,rt.prototype.abort=function(){var e=this;e.xo&&(e.xo.close(),e.dispatchEvent(new r("close",{reason:"user"})),e.xo=null)},C.getUtils=function(){return n},C.getIframeTransport=function(){return A},C}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),"function"==typeof define&&define.amd&&define("sockjs",[],function(){return i})}.call(this),function(){t.ClientStream=function(e,t){var n=this;n.options=m.extend({retry:!0},t),n._initCommon(),n.HEARTBEAT_TIMEOUT=6e4,n.rawUrl=e,n.socket=null,n.heartbeatTimer=null,"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("online",m.bind(n._online,n),!1),n._launchConnection()},m.extend(t.ClientStream.prototype,{send:function(e){var t=this;t.currentStatus.connected&&t.socket.send(e)},_changeUrl:function(e){var t=this;t.rawUrl=e},_connected:function(){var e=this;e.connectionTimer&&(clearTimeout(e.connectionTimer),e.connectionTimer=null),e.currentStatus.connected||(e.currentStatus.status="connected",e.currentStatus.connected=!0,e.currentStatus.retryCount=0,e.statusChanged(),m.each(e.eventCallbacks.reset,function(e){e()}))},_cleanup:function(){var e=this;e._clearConnectionAndHeartbeatTimers(),e.socket&&(e.socket.onmessage=e.socket.onclose=e.socket.onerror=e.socket.onheartbeat=function(){},e.socket.close(),e.socket=null)},_clearConnectionAndHeartbeatTimers:function(){var e=this;e.connectionTimer&&(clearTimeout(e.connectionTimer),e.connectionTimer=null),e.heartbeatTimer&&(clearTimeout(e.heartbeatTimer),e.heartbeatTimer=null)},_heartbeat_timeout:function(){var e=this;d._debug("Connection timeout. No heartbeat received."),e._lostConnection()},_heartbeat_received:function(){var e=this;e._forcedToDisconnect||(e.heartbeatTimer&&clearTimeout(e.heartbeatTimer),e.heartbeatTimer=setTimeout(m.bind(e._heartbeat_timeout,e),e.HEARTBEAT_TIMEOUT))},_sockjsProtocolsWhitelist:function(){var e=["xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"],t=navigator&&/iPhone|iPad|iPod/.test(navigator.userAgent)&&/OS 4_|OS 5_/.test(navigator.userAgent);return t||(e=["websocket"].concat(e)),e},_launchConnection:function(){var e=this;e._cleanup(),e.socket=new i(r(e.rawUrl),void 0,{debug:!1,protocols_whitelist:e._sockjsProtocolsWhitelist()}),e.socket.onopen=function(){e._connected()},e.socket.onmessage=function(t){e._heartbeat_received(),e.currentStatus.connected&&m.each(e.eventCallbacks.message,function(e){e(t.data)})},e.socket.onclose=function(){e._lostConnection()},e.socket.onerror=function(){d._debug("stream error",m.toArray(arguments),(new Date).toDateString())},e.socket.onheartbeat=function(){e._heartbeat_received()},e.connectionTimer&&clearTimeout(e.connectionTimer),e.connectionTimer=setTimeout(m.bind(e._lostConnection,e),e.CONNECT_TIMEOUT)}})}.call(this),function(){var e=function(e,t){return e.length>=t.length&&e.substring(0,t.length)===t},i=function(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t},a=function(t,n,r){n||(n="http");var o,a=t.match(/^ddp(i?)\+sockjs:\/\//),s=t.match(/^http(s?):\/\//);if(a){var c=t.substr(a[0].length);o="i"===a[1]?n:n+"s";var l=c.indexOf("/"),u=-1===l?c:c.substr(0,l),h=-1===l?"":c.substr(l);return u=u.replace(/\*/g,function(){return Math.floor(10*f.fraction())}),o+"://"+u+h}if(s){o=s[1]?n+"s":n;var p=t.substr(s[0].length);t=o+"://"+p}return-1!==t.indexOf("://")||e(t,"/")||(t=n+"://"+t),t=d._relativeToSiteRootUrl(t),i(t,"/")?t+r:t+"/"+r};r=function(e){return a(e,"http","sockjs")},o=function(e){var t=a(e,"ws","websocket");return t},t.toSockjsUrl=r,m.extend(t.ClientStream.prototype,{on:function(e,t){var n=this;if("message"!==e&&"reset"!==e)throw new Error("unknown event type: "+e);n.eventCallbacks[e]||(n.eventCallbacks[e]=[]),n.eventCallbacks[e].push(t)},_initCommon:function(){var e=this;e.CONNECT_TIMEOUT=1e4,e.eventCallbacks={},e._forcedToDisconnect=!1,e.currentStatus={status:"connecting",connected:!1,retryCount:0},e.statusListeners="undefined"!=typeof g&&new g.Dependency,e.statusChanged=function(){e.statusListeners&&e.statusListeners.changed()},e._retry=new n,e.connectionTimer=null},reconnect:function(e){var t=this;return e=e||{},e.url&&t._changeUrl(e.url),t.currentStatus.connected?((e._force||e.url)&&t._lostConnection(),void 0):("connecting"===t.currentStatus.status&&t._lostConnection(),t._retry.clear(),t.currentStatus.retryCount-=1,t._retryNow(),void 0)},disconnect:function(e){var t=this;e=e||{},t._forcedToDisconnect||(e._permanent&&(t._forcedToDisconnect=!0),t._cleanup(),t._retry.clear(),t.currentStatus={status:e._permanent?"failed":"offline",connected:!1,retryCount:0},e._permanent&&e._error&&(t.currentStatus.reason=e._error),t.statusChanged())},_lostConnection:function(){var e=this;e._cleanup(),e._retryLater()},_online:function(){"offline"!=this.currentStatus.status&&this.reconnect()},_retryLater:function(){var e=this,t=0;e.options.retry&&(t=e._retry.retryLater(e.currentStatus.retryCount,m.bind(e._retryNow,e))),e.currentStatus.status="waiting",e.currentStatus.connected=!1,e.currentStatus.retryTime=(new Date).getTime()+t,e.statusChanged()},_retryNow:function(){var e=this;e._forcedToDisconnect||(e.currentStatus.retryCount+=1,e.currentStatus.status="connecting",e.currentStatus.connected=!1,delete e.currentStatus.retryTime,e.statusChanged(),e._launchConnection())},status:function(){var e=this;return e.statusListeners&&e.statusListeners.depend(),e.currentStatus}})}.call(this),function(){e={},a=["pre1"],t.SUPPORTED_DDP_VERSIONS=a,s=function(e){this.isSimulation=e.isSimulation,this._unblock=e.unblock||function(){},this._calledUnblock=!1,this.userId=e.userId,this._setUserId=e.setUserId||function(){},this.connection=e.connection},m.extend(s.prototype,{unblock:function(){var e=this;e._calledUnblock=!0,e._unblock()},setUserId:function(e){var t=this;if(t._calledUnblock)throw new Error("Can't call setUserId in a method after calling unblock");t.userId=e,t._setUserId(e)}}),c=function(e){try{var t=p.parse(e)}catch(n){return d._debug("Discarding message with invalid JSON",e),null}return null===t||"object"!=typeof t?(d._debug("Discarding non-object DDP message",e),null):(m.has(t,"cleared")&&(m.has(t,"fields")||(t.fields={}),m.each(t.cleared,function(e){t.fields[e]=void 0}),delete t.cleared),m.each(["fields","params","result"],function(e){m.has(t,e)&&(t[e]=h._adjustTypesFromJSONValue(t[e]))}),t)},l=function(e){var t=h.clone(e);if(m.has(e,"fields")){var n=[];m.each(e.fields,function(e,i){void 0===e&&(n.push(i),delete t.fields[i])}),m.isEmpty(n)||(t.cleared=n),m.isEmpty(t.fields)&&delete t.fields}if(m.each(["fields","params","result"],function(e){m.has(t,e)&&(t[e]=h._adjustTypesToJSONValue(t[e]))}),e.id&&"string"!=typeof e.id)throw new Error("Message id is not a string");return p.stringify(t)},e._CurrentInvocation=new d.EnvironmentVariable,e._Retry=n}.call(this),function(){if(d.isServer)var n=Npm.require("path"),i=(Npm.require("fibers"),Npm.require(n.join("fibers","future")));var r=function(e,n){var i=this;n=m.extend({onConnected:function(){},onDDPVersionNegotiationFailure:function(e){d._debug(e)},reloadWithOutstanding:!1,supportedDDPVersions:a,retry:!0},n),i.onReconnect=null,i._stream="object"==typeof e?e:new t.ClientStream(e,{retry:n.retry}),i._lastSessionId=null,i._versionSuggestion=null,i._version=null,i._stores={},i._methodHandlers={},i._nextMethodId=1,i._supportedDDPVersions=n.supportedDDPVersions,i._methodInvokers={},i._outstandingMethodBlocks=[],i._documentsWrittenByStub={},i._serverDocuments={},i._afterUpdateCallbacks=[],i._messagesBufferedUntilQuiescence=[],i._methodsBlockingQuiescence={},i._subsBeingRevived={},i._resetStores=!1,i._updatesForUnknownStores={},i._retryMigrate=null,i._subscriptions={},i._userId=null,i._userIdDeps="undefined"!=typeof g&&new g.Dependency,d.isClient&&Package.reload&&!n.reloadWithOutstanding&&Package.reload.Reload._onMigrate(function(e){if(i._readyToMigrate())return[!0];if(i._retryMigrate)throw new Error("Two migrations in progress?");return i._retryMigrate=e,!1});var r=function(e){try{var t=c(e)}catch(r){return d._debug("Exception while parsing DDP",r),void 0}if(null===t||!t.msg)return t&&t.server_id||d._debug("discarding invalid livedata message",t),void 0;if("connected"===t.msg)i._version=i._versionSuggestion,n.onConnected(),i._livedata_connected(t);else if("failed"==t.msg)if(m.contains(i._supportedDDPVersions,t.version))i._versionSuggestion=t.version,i._stream.reconnect({_force:!0});else{var o="DDP version negotiation failed; server requested version "+t.version;i._stream.disconnect({_permanent:!0,_error:o}),n.onDDPVersionNegotiationFailure(o)}else m.include(["added","changed","removed","ready","updated"],t.msg)?i._livedata_data(t):"nosub"===t.msg?i._livedata_nosub(t):"result"===t.msg?i._livedata_result(t):"error"===t.msg?i._livedata_error(t):d._debug("discarding unknown livedata message type",t)},o=function(){var e={msg:"connect"};i._lastSessionId&&(e.session=i._lastSessionId),e.version=i._versionSuggestion||i._supportedDDPVersions[0],i._versionSuggestion=e.version,e.support=i._supportedDDPVersions,i._send(e),!m.isEmpty(i._outstandingMethodBlocks)&&m.isEmpty(i._outstandingMethodBlocks[0].methods)&&i._outstandingMethodBlocks.shift(),m.each(i._methodInvokers,function(e){e.sentMessage=!1}),i.onReconnect?i._callOnReconnectAndSendAppropriateOutstandingMethods():i._sendOutstandingMethods(),m.each(i._subscriptions,function(e,t){i._send({msg:"sub",id:t,name:e.name,params:e.params})})};d.isServer?(i._stream.on("message",d.bindEnvironment(r,d._debug)),i._stream.on("reset",d.bindEnvironment(o,d._debug))):(i._stream.on("message",r),i._stream.on("reset",o))},o=function(e){var t=this;t.methodId=e.methodId,t.sentMessage=!1,t._callback=e.callback,t._connection=e.connection,t._message=e.message,t._onResultReceived=e.onResultReceived||function(){},t._wait=e.wait,t._methodResult=null,t._dataVisible=!1,t._connection._methodInvokers[t.methodId]=t};m.extend(o.prototype,{sendMessage:function(){var e=this;if(e.gotResult())throw new Error("sendingMethod is called on method with result");e._dataVisible=!1,e.sentMessage=!0,e._wait&&(e._connection._methodsBlockingQuiescence[e.methodId]=!0),e._connection._send(e._message)},_maybeInvokeCallback:function(){var e=this;e._methodResult&&e._dataVisible&&(e._callback(e._methodResult[0],e._methodResult[1]),delete e._connection._methodInvokers[e.methodId],e._connection._outstandingMethodFinished())},receiveResult:function(e,t){var n=this;if(n.gotResult())throw new Error("Methods should only receive results once");n._methodResult=[e,t],n._onResultReceived(e,t),n._maybeInvokeCallback()},dataVisible:function(){var e=this;e._dataVisible=!0,e._maybeInvokeCallback()},gotResult:function(){var e=this;return!!e._methodResult}}),m.extend(r.prototype,{registerStore:function(e,t){var n=this;if(e in n._stores)return!1;var i={};m.each(["update","beginUpdate","endUpdate","saveOriginals","retrieveOriginals"],function(e){i[e]=function(){return t[e]?t[e].apply(t,arguments):void 0}}),n._stores[e]=i;var r=n._updatesForUnknownStores[e];return r&&(i.beginUpdate(r.length,!1),m.each(r,function(e){i.update(e)}),i.endUpdate(),delete n._updatesForUnknownStores[e]),!0},subscribe:function(e){var t=this,n=Array.prototype.slice.call(arguments,1),i={};if(n.length){var r=n[n.length-1];"function"==typeof r?i.onReady=n.pop():!r||"function"!=typeof r.onReady&&"function"!=typeof r.onError||(i=n.pop())}var o,a=m.find(t._subscriptions,function(t){return t.inactive&&t.name===e&&h.equals(t.params,n)});a?(o=a.id,a.inactive=!1,i.onReady&&(a.ready||(a.readyCallback=i.onReady)),i.onError&&(a.errorCallback=i.onError)):(o=f.id(),t._subscriptions[o]={id:o,name:e,params:n,inactive:!1,ready:!1,readyDeps:"undefined"!=typeof g&&new g.Dependency,readyCallback:i.onReady,errorCallback:i.onError},t._send({msg:"sub",id:o,name:e,params:n}));var s={stop:function(){m.has(t._subscriptions,o)&&(t._send({msg:"unsub",id:o}),delete t._subscriptions[o])
},ready:function(){if(!m.has(t._subscriptions,o))return!1;var e=t._subscriptions[o];return e.readyDeps&&e.readyDeps.depend(),e.ready}};return g.active&&g.onInvalidate(function(){m.has(t._subscriptions,o)&&(t._subscriptions[o].inactive=!0),g.afterFlush(function(){m.has(t._subscriptions,o)&&t._subscriptions[o].inactive&&s.stop()})}),s},_subscribeAndWait:function(e,t,n){var r=this,o=new i,a=!1;t=t||[],t.push({onReady:function(){a=!0,o["return"]()},onError:function(e){a?n&&n.onLateError&&n.onLateError(e):o["throw"](e)}}),r.subscribe.apply(r,[e].concat(t)),o.wait()},methods:function(e){var t=this;m.each(e,function(e,n){if(t._methodHandlers[n])throw new Error("A method named '"+n+"' is already defined");t._methodHandlers[n]=e})},call:function(e){var t=Array.prototype.slice.call(arguments,1);if(t.length&&"function"==typeof t[t.length-1])var n=t.pop();return this.apply(e,t,n)},apply:function(t,n,r,a){var c=this;a||"function"!=typeof r||(a=r,r={}),r=r||{},a&&(a=d.bindEnvironment(a,"delivering result of invoking '"+t+"'"));var l=function(){var e;return function(){return void 0===e&&(e=""+c._nextMethodId++),e}}(),u=e._CurrentInvocation.get(),f=u&&u.isSimulation,p=c._methodHandlers[t];if(p){var g=function(e){c.setUserId(e)},v=new s({isSimulation:!0,userId:c.userId(),setUserId:g});f||c._saveOriginals();try{var y=e._CurrentInvocation.withValue(v,function(){return d.isServer?d._noYieldsAllowed(function(){return p.apply(v,h.clone(n))}):p.apply(v,h.clone(n))})}catch(b){var _=b}f||c._retrieveAndStoreOriginals(l())}if(f){if(a)return a(_,y),void 0;if(_)throw _;return y}if(_&&!_.expected&&d._debug("Exception while simulating the effect of invoking '"+t+"'",_,_.stack),!a)if(d.isClient)a=function(){};else{var w=new i;a=w.resolver()}var k=new o({methodId:l(),callback:a,connection:c,onResultReceived:r.onResultReceived,wait:!!r.wait,message:{msg:"method",method:t,params:n,id:l()}});return r.wait?c._outstandingMethodBlocks.push({wait:!0,methods:[k]}):((m.isEmpty(c._outstandingMethodBlocks)||m.last(c._outstandingMethodBlocks).wait)&&c._outstandingMethodBlocks.push({wait:!1,methods:[]}),m.last(c._outstandingMethodBlocks).methods.push(k)),1===c._outstandingMethodBlocks.length&&k.sendMessage(),w?w.wait():void 0},_saveOriginals:function(){var e=this;m.each(e._stores,function(e){e.saveOriginals()})},_retrieveAndStoreOriginals:function(e){var t=this;if(t._documentsWrittenByStub[e])throw new Error("Duplicate methodId in _retrieveAndStoreOriginals");var n=[];m.each(t._stores,function(i,r){var o=i.retrieveOriginals();m.each(o,function(i,o){if("string"!=typeof o)throw new Error("id is not a string");n.push({collection:r,id:o});var a=d._ensure(t._serverDocuments,r,o);a.writtenByStubs?a.writtenByStubs[e]=!0:(a.document=i,a.flushCallbacks=[],a.writtenByStubs={},a.writtenByStubs[e]=!0)})}),m.isEmpty(n)||(t._documentsWrittenByStub[e]=n)},_unsubscribeAll:function(){var e=this;m.each(m.clone(e._subscriptions),function(t,n){"meteor_autoupdate_clientVersions"!==t.name&&(e._send({msg:"unsub",id:n}),delete e._subscriptions[n])})},_send:function(e){var t=this;t._stream.send(l(e))},status:function(){var e=this;return e._stream.status.apply(e._stream,arguments)},reconnect:function(){var e=this;return e._stream.reconnect.apply(e._stream,arguments)},disconnect:function(){var e=this;return e._stream.disconnect.apply(e._stream,arguments)},close:function(){var e=this;return e._stream.disconnect({_permanent:!0})},userId:function(){var e=this;return e._userIdDeps&&e._userIdDeps.depend(),e._userId},setUserId:function(e){var t=this;t._userId!==e&&(t._userId=e,t._userIdDeps&&t._userIdDeps.changed())},_waitingForQuiescence:function(){var e=this;return!m.isEmpty(e._subsBeingRevived)||!m.isEmpty(e._methodsBlockingQuiescence)},_anyMethodsAreOutstanding:function(){var e=this;return m.any(m.pluck(e._methodInvokers,"sentMessage"))},_livedata_connected:function(e){var t=this;if(t._lastSessionId&&(t._resetStores=!0),"string"==typeof e.session){var n=t._lastSessionId===e.session;t._lastSessionId=e.session}n||(t._updatesForUnknownStores={},t._resetStores&&(t._documentsWrittenByStub={},t._serverDocuments={}),t._afterUpdateCallbacks=[],t._subsBeingRevived={},m.each(t._subscriptions,function(e,n){e.ready&&(t._subsBeingRevived[n]=!0)}),t._methodsBlockingQuiescence={},t._resetStores&&m.each(t._methodInvokers,function(e){e.gotResult()?t._afterUpdateCallbacks.push(m.bind(e.dataVisible,e)):e.sentMessage&&(t._methodsBlockingQuiescence[e.methodId]=!0)}),t._messagesBufferedUntilQuiescence=[],t._waitingForQuiescence()||(t._resetStores&&(m.each(t._stores,function(e){e.beginUpdate(0,!0),e.endUpdate()}),t._resetStores=!1),t._runAfterUpdateCallbacks()))},_processOneDataMessage:function(e,t){var n=this;n["_process_"+e.msg](e,t)},_livedata_data:function(e){var t=this,n={};if(t._waitingForQuiescence()){if(t._messagesBufferedUntilQuiescence.push(e),"nosub"===e.msg&&delete t._subsBeingRevived[e.id],m.each(e.subs||[],function(e){delete t._subsBeingRevived[e]}),m.each(e.methods||[],function(e){delete t._methodsBlockingQuiescence[e]}),t._waitingForQuiescence())return;m.each(t._messagesBufferedUntilQuiescence,function(e){t._processOneDataMessage(e,n)}),t._messagesBufferedUntilQuiescence=[]}else t._processOneDataMessage(e,n);(t._resetStores||!m.isEmpty(n))&&(m.each(t._stores,function(e,i){e.beginUpdate(m.has(n,i)?n[i].length:0,t._resetStores)}),t._resetStores=!1,m.each(n,function(e,n){var i=t._stores[n];i?m.each(e,function(e){i.update(e)}):(m.has(t._updatesForUnknownStores,n)||(t._updatesForUnknownStores[n]=[]),Array.prototype.push.apply(t._updatesForUnknownStores[n],e))}),m.each(t._stores,function(e){e.endUpdate()})),t._runAfterUpdateCallbacks()},_runAfterUpdateCallbacks:function(){var e=this,t=e._afterUpdateCallbacks;e._afterUpdateCallbacks=[],m.each(t,function(e){e()})},_pushUpdate:function(e,t,n){m.has(e,t)||(e[t]=[]),e[t].push(n)},_process_added:function(e,t){var n=this,i=d._get(n._serverDocuments,e.collection,e.id);if(i){if(void 0!==i.document)throw new Error("It doesn't make sense to be adding something we know exists: "+e.id);i.document=e.fields||{},i.document._id=v._idParse(e.id)}else n._pushUpdate(t,e.collection,e)},_process_changed:function(e,t){var n=this,i=d._get(n._serverDocuments,e.collection,e.id);if(i){if(void 0===i.document)throw new Error("It doesn't make sense to be changing something we don't think exists: "+e.id);v._applyChanges(i.document,e.fields)}else n._pushUpdate(t,e.collection,e)},_process_removed:function(e,t){var n=this,i=d._get(n._serverDocuments,e.collection,e.id);if(i){if(void 0===i.document)throw new Error("It doesn't make sense to be deleting something we don't know exists: "+e.id);i.document=void 0}else n._pushUpdate(t,e.collection,{msg:"removed",collection:e.collection,id:e.id})},_process_updated:function(e,t){var n=this;m.each(e.methods,function(e){m.each(n._documentsWrittenByStub[e],function(i){var r=d._get(n._serverDocuments,i.collection,i.id);if(!r)throw new Error("Lost serverDoc for "+p.stringify(i));if(!r.writtenByStubs[e])throw new Error("Doc "+p.stringify(i)+" not written by  method "+e);delete r.writtenByStubs[e],m.isEmpty(r.writtenByStubs)&&(n._pushUpdate(t,i.collection,{msg:"replace",id:i.id,replace:r.document}),m.each(r.flushCallbacks,function(e){e()}),delete n._serverDocuments[i.collection][i.id])}),delete n._documentsWrittenByStub[e];var i=n._methodInvokers[e];if(!i)throw new Error("No callback invoker for method "+e);n._runWhenAllServerDocsAreFlushed(m.bind(i.dataVisible,i))})},_process_ready:function(e){var t=this;m.each(e.subs,function(e){t._runWhenAllServerDocsAreFlushed(function(){var n=t._subscriptions[e];n&&(n.ready||(n.readyCallback&&n.readyCallback(),n.ready=!0,n.readyDeps&&n.readyDeps.changed()))})})},_runWhenAllServerDocsAreFlushed:function(e){var t=this,n=function(){t._afterUpdateCallbacks.push(e)},i=0,r=function(){--i,0===i&&n()};m.each(t._serverDocuments,function(e){m.each(e,function(e){var n=m.any(e.writtenByStubs,function(e,n){var i=t._methodInvokers[n];return i&&i.sentMessage});n&&(++i,e.flushCallbacks.push(r))})}),0===i&&n()},_livedata_nosub:function(e){var t=this;if(t._livedata_data(e),m.has(t._subscriptions,e.id)){var n=t._subscriptions[e.id].errorCallback;delete t._subscriptions[e.id],n&&e.error&&n(new d.Error(e.error.error,e.error.reason,e.error.details))}},_process_nosub:function(){},_livedata_result:function(e){var t=this;if(m.isEmpty(t._outstandingMethodBlocks))return d._debug("Received method result but no methods outstanding"),void 0;for(var n,i=t._outstandingMethodBlocks[0].methods,r=0;r<i.length&&(n=i[r],n.methodId!==e.id);r++);return n?(i.splice(r,1),m.has(e,"error")?n.receiveResult(new d.Error(e.error.error,e.error.reason,e.error.details)):n.receiveResult(void 0,e.result),void 0):(d._debug("Can't match method response to original method call",e),void 0)},_outstandingMethodFinished:function(){var e=this;if(!e._anyMethodsAreOutstanding()){if(!m.isEmpty(e._outstandingMethodBlocks)){var t=e._outstandingMethodBlocks.shift();if(!m.isEmpty(t.methods))throw new Error("No methods outstanding but nonempty block: "+p.stringify(t));m.isEmpty(e._outstandingMethodBlocks)||e._sendOutstandingMethods()}e._maybeMigrate()}},_sendOutstandingMethods:function(){var e=this;m.isEmpty(e._outstandingMethodBlocks)||m.each(e._outstandingMethodBlocks[0].methods,function(e){e.sendMessage()})},_livedata_error:function(e){d._debug("Received error from server: ",e.reason),e.offendingMessage&&d._debug("For: ",e.offendingMessage)},_callOnReconnectAndSendAppropriateOutstandingMethods:function(){var e=this,t=e._outstandingMethodBlocks;if(e._outstandingMethodBlocks=[],e.onReconnect(),!m.isEmpty(t)){if(m.isEmpty(e._outstandingMethodBlocks))return e._outstandingMethodBlocks=t,e._sendOutstandingMethods(),void 0;m.last(e._outstandingMethodBlocks).wait||t[0].wait||(m.each(t[0].methods,function(t){m.last(e._outstandingMethodBlocks).methods.push(t),1===e._outstandingMethodBlocks.length&&t.sendMessage()}),t.shift()),m.each(t,function(t){e._outstandingMethodBlocks.push(t)})}},_readyToMigrate:function(){var e=this;return m.isEmpty(e._methodInvokers)},_maybeMigrate:function(){var e=this;e._retryMigrate&&e._readyToMigrate()&&(e._retryMigrate(),e._retryMigrate=null)}}),t.Connection=r,e.connect=function(e,t){var n=new r(e,t);return u.push(n),n},u=[],e._allSubscriptionsReady=function(){return m.all(u,function(e){return m.all(e._subscriptions,function(e){return e.ready})})}}.call(this),function(){if(d.refresh=function(){},d.isClient){var t="/";"undefined"!=typeof __meteor_runtime_config__&&__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL&&(t=__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL);var i=new n,r=function(e){if(d._debug(e),Package.reload){var t=Package.reload.Reload._migrationData("livedata")||{},n=t.DDPVersionNegotiationFailures||0;++n,Package.reload.Reload._onMigrate("livedata",function(){return[!0,{DDPVersionNegotiationFailures:n}]}),i.retryLater(n,function(){Package.reload.Reload._reload()})}};d.connection=e.connect(t,{onDDPVersionNegotiationFailure:r}),m.each(["subscribe","methods","call","apply","status","reconnect","disconnect"],function(e){d[e]=m.bind(d.connection[e],d.connection)})}else d.connection=null;d.default_connection=d.connection,d.connect=e.connect}.call(this),"undefined"==typeof Package&&(Package={}),Package.livedata={DDP:e,LivedataTest:t}}(),function(){{var e;Package.meteor.Meteor,Package.logging.Log,Package.underscore._,Package.livedata.DDP,Package.ejson.EJSON}"undefined"==typeof Package&&(Package={}),Package["follower-livedata"]={Follower:e}}(),function(){Package.meteor.Meteor,Package.logging.Log,Package.underscore._,Package.livedata.DDP,Package.ejson.EJSON,Package["follower-livedata"].Follower;"undefined"==typeof Package&&(Package={}),Package["application-configuration"]={}}(),function(){var e,t=Package.meteor.Meteor,n=Package.random.Random,i=Package.ejson.EJSON,r=(Package.json.JSON,Package.underscore._),o=Package.minimongo.LocalCollection,a=(Package.logging.Log,Package.livedata.DDP),s=Package.deps.Deps,c=Package.check.check,l=Package.check.Match;(function(){e=function(){var e=this;e.noConnCollections={}};var t=function(e,t){return e in t||(t[e]=new o(e)),t[e]};r.extend(e.prototype,{open:function(e,n){var i=this;return e?n?(n._mongo_livedata_collections||(n._mongo_livedata_collections={}),t(e,n._mongo_livedata_collections)):t(e,i.noConnCollections):new o}}),e=new e}).call(this),function(){t.Collection=function(i,a){var c=this;if(!(c instanceof t.Collection))throw new Error('use "new" to construct a Meteor.Collection');switch(a&&a.methods&&(a={connection:a}),a&&a.manager&&!a.connection&&(a.connection=a.manager),a=r.extend({connection:void 0,idGeneration:"STRING",transform:null,_driver:void 0,_preventAutopublish:!1},a),a.idGeneration){case"MONGO":c._makeNewID=function(){return new t.Collection.ObjectID};break;case"STRING":default:c._makeNewID=function(){return n.id()}}if(c._transform=a.transform?s._makeNonreactive(Package.minimongo.LocalCollection.wrapTransform(a.transform)):null,i||null===i||t._debug("Warning: creating anonymous collection. It will not be saved or synchronized over the network. (Pass null for the collection name to turn off this warning.)"),c._connection=i&&null!==a.connection?a.connection?a.connection:t.isClient?t.connection:t.server:null,a._driver||(a._driver=i&&c._connection===t.server&&"undefined"!=typeof MongoInternals&&MongoInternals.defaultRemoteCollectionDriver?MongoInternals.defaultRemoteCollectionDriver():e),c._collection=a._driver.open(i,c._connection),c._name=i,c._connection&&c._connection.registerStore){var l=c._connection.registerStore(i,{beginUpdate:function(e,t){(e>1||t)&&c._collection.pauseObservers(),t&&c._collection.remove({})},update:function(e){var t=o._idParse(e.id),n=c._collection.findOne(t);if("replace"===e.msg){var i=e.replace;return i?n?c._collection.update(t,i):c._collection.insert(i):n&&c._collection.remove(t),void 0}if("added"===e.msg){if(n)throw new Error("Expected not to find a document already present for an add");c._collection.insert(r.extend({_id:t},e.fields))}else if("removed"===e.msg){if(!n)throw new Error("Expected to find a document already present for removed");c._collection.remove(t)}else{if("changed"!==e.msg)throw new Error("I don't know how to deal with this message");if(!n)throw new Error("Expected to find a document to change");if(!r.isEmpty(e.fields)){var a={};r.each(e.fields,function(e,t){void 0===e?(a.$unset||(a.$unset={}),a.$unset[t]=1):(a.$set||(a.$set={}),a.$set[t]=e)}),c._collection.update(t,a)}}},endUpdate:function(){c._collection.resumeObservers()},saveOriginals:function(){c._collection.saveOriginals()},retrieveOriginals:function(){return c._collection.retrieveOriginals()}});if(!l)throw new Error("There is already a collection named '"+i+"'")}c._defineMutationMethods(),Package.autopublish&&!a._preventAutopublish&&c._connection&&c._connection.publish&&c._connection.publish(null,function(){return c.find()},{is_auto:!0})},r.extend(t.Collection.prototype,{_getFindSelector:function(e){return 0==e.length?{}:e[0]},_getFindOptions:function(e){var t=this;return e.length<2?{transform:t._transform}:r.extend({transform:t._transform},e[1])},find:function(){var e=this,t=r.toArray(arguments);return e._collection.find(e._getFindSelector(t),e._getFindOptions(t))},findOne:function(){var e=this,t=r.toArray(arguments);return e._collection.findOne(e._getFindSelector(t),e._getFindOptions(t))}}),t.Collection._publishCursor=function(e,t,n){var i=e.observeChanges({added:function(e,i){t.added(n,e,i)},changed:function(e,i){t.changed(n,e,i)},removed:function(e){t.removed(n,e)}});t.onStop(function(){i.stop()})},t.Collection._rewriteSelector=function(e){if(o._selectorIsId(e)&&(e={_id:e}),!e||"_id"in e&&!e._id)return{_id:n.id()};var i={};return r.each(e,function(e,n){e instanceof RegExp?i[n]=u(e):e&&e.$regex instanceof RegExp?(i[n]=u(e.$regex),void 0!==e.$options&&(i[n].$options=e.$options)):i[n]=r.contains(["$or","$and","$nor"],n)?r.map(e,function(e){return t.Collection._rewriteSelector(e)}):e}),i};var u=function(e){c(e,RegExp);var t={$regex:e.source},n="";return e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),n&&(t.$options=n),t},d=function(e,n){if(!o._selectorIsIdPerhapsAsObject(e))throw new t.Error(403,"Not permitted. Untrusted code may only "+n+" documents by ID.")};r.each(["insert","update","remove"],function(e){t.Collection.prototype[e]=function(){var n,i,o,s=this,c=r.toArray(arguments);if(c.length&&c[c.length-1]instanceof Function&&(n=c.pop()),"insert"===e){if(!c.length)throw new Error("insert requires an argument");if(c[0]=r.extend({},c[0]),"_id"in c[0]){if(i=c[0]._id,!i||!("string"==typeof i||i instanceof t.Collection.ObjectID))throw new Error("Meteor requires document _id fields to be non-empty strings or ObjectIDs")}else i=c[0]._id=s._makeNewID()}else if(c[0]=t.Collection._rewriteSelector(c[0]),"update"===e){var l=c[2]=r.clone(c[2])||{};if(l&&"function"!=typeof l&&l.upsert)if(l.insertedId){if(!("string"==typeof l.insertedId||l.insertedId instanceof t.Collection.ObjectID))throw new Error("insertedId must be string or ObjectID")}else l.insertedId=s._makeNewID()}var u,f=function(t){return"insert"===e?i:t};if(n&&(u=function(e,t){n(e,!e&&f(t))}),s._connection&&s._connection!==t.server){var h=a._CurrentInvocation.get(),p=h&&h.isSimulation;!t.isClient||u||p||(u=function(n){n&&t._debug(e+" failed: "+(n.reason||n.stack))}),p||"insert"===e||d(c[0],e),o=f(s._connection.apply(s._prefix+e,c,u))}else{c.push(u);try{var m=s._collection[e].apply(s._collection,c);o=f(m)}catch(g){if(n)return n(g),null;throw g}}return o}}),t.Collection.prototype.upsert=function(e,t,n,i){var o=this;return i||"function"!=typeof n||(i=n,n={}),o.update(e,t,r.extend({},n,{_returnObject:!0,upsert:!0}),i)},t.Collection.prototype._ensureIndex=function(e,t){var n=this;if(!n._collection._ensureIndex)throw new Error("Can only call _ensureIndex on server collections");n._collection._ensureIndex(e,t)},t.Collection.prototype._dropIndex=function(e){var t=this;if(!t._collection._dropIndex)throw new Error("Can only call _dropIndex on server collections");t._collection._dropIndex(e)},t.Collection.prototype._dropCollection=function(){var e=this;if(!e._collection.dropCollection)throw new Error("Can only call _dropCollection on server collections");e._collection.dropCollection()},t.Collection.prototype._createCappedCollection=function(e){var t=this;if(!t._collection._createCappedCollection)throw new Error("Can only call _createCappedCollection on server collections");t._collection._createCappedCollection(e)},t.Collection.ObjectID=o._ObjectID,function(){var e=function(e,t){var n=["insert","update","remove","fetch","transform"];r.each(r.keys(t),function(t){if(!r.contains(n,t))throw new Error(e+": Invalid key: "+t)});var i=this;if(i._restricted=!0,r.each(["insert","update","remove"],function(n){if(t[n]){if(!(t[n]instanceof Function))throw new Error(e+": Value for `"+n+"` must be a function");i._transform&&null!==t.transform&&(t[n].transform=i._transform),t.transform&&(t[n].transform=s._makeNonreactive(t.transform)),t[n].transform&&(t[n].transform=Package.minimongo.LocalCollection.wrapTransform(t[n].transform)),i._validators[n][e].push(t[n])}}),t.update||t.remove||t.fetch){if(t.fetch&&!(t.fetch instanceof Array))throw new Error(e+": Value for `fetch` must be an array");i._updateFetch(t.fetch)}};t.Collection.prototype.allow=function(t){e.call(this,"allow",t)},t.Collection.prototype.deny=function(t){e.call(this,"deny",t)}}(),t.Collection.prototype._defineMutationMethods=function(){var e=this;if(e._restricted=!1,e._insecure=void 0,e._validators={insert:{allow:[],deny:[]},update:{allow:[],deny:[]},remove:{allow:[],deny:[]},upsert:{allow:[],deny:[]},fetch:[],fetchAllFields:!1},e._name&&(e._prefix="/"+e._name+"/",e._connection)){var n={};r.each(["insert","update","remove"],function(i){n[e._prefix+i]=function(){c(arguments,[l.Any]);try{if(this.isSimulation)return e._collection[i].apply(e._collection,r.toArray(arguments));if("insert"!==i&&d(arguments[0],i),e._restricted){if(0===e._validators[i].allow.length)throw new t.Error(403,"Access denied. No allow validators set on restricted collection for method '"+i+"'.");var n="_validated"+i.charAt(0).toUpperCase()+i.slice(1),o=[this.userId].concat(r.toArray(arguments));return e[n].apply(e,o)}if(e._isInsecure())return e._collection[i].apply(e._collection,r.toArray(arguments));throw new t.Error(403,"Access denied")}catch(a){throw"MongoError"===a.name||"MinimongoError"===a.name?new t.Error(409,a.toString()):a}}}),(t.isClient||e._connection===t.server)&&e._connection.methods(n)}},t.Collection.prototype._updateFetch=function(e){var t=this;t._validators.fetchAllFields||(e?t._validators.fetch=r.union(t._validators.fetch,e):(t._validators.fetchAllFields=!0,t._validators.fetch=null))},t.Collection.prototype._isInsecure=function(){var e=this;return void 0===e._insecure?!!Package.insecure:e._insecure};var f=function(e,t){var n=t;return e.transform&&(n=e.transform(i.clone(t))),n};t.Collection.prototype._validatedInsert=function(e,n){var i=this;if(r.any(i._validators.insert.deny,function(t){return t(e,f(t,n))}))throw new t.Error(403,"Access denied");if(r.all(i._validators.insert.allow,function(t){return!t(e,f(t,n))}))throw new t.Error(403,"Access denied");i._collection.insert.call(i._collection,n)};var h=function(e,t){return e.transform?e.transform(t):t};t.Collection.prototype._validatedUpdate=function(e,n,i,a){var s=this;if(a=a||{},!o._selectorIsIdPerhapsAsObject(n))throw new Error("validated update should be of a single ID");if(a.upsert)throw new t.Error(403,"Access denied. Upserts not allowed in a restricted collection.");var c=[];r.each(i,function(e,n){if("$"!==n.charAt(0))throw new t.Error(403,"Access denied. In a restricted collection you can only update documents, not replace them. Use a Mongo update operator, such as '$set'.");if(!r.has(p,n))throw new t.Error(403,"Access denied. Operator "+n+" not allowed in a restricted collection.");r.each(r.keys(e),function(e){-1!==e.indexOf(".")&&(e=e.substring(0,e.indexOf("."))),r.contains(c,e)||c.push(e)})});var l={transform:null};s._validators.fetchAllFields||(l.fields={},r.each(s._validators.fetch,function(e){l.fields[e]=1}));var u=s._collection.findOne(n,l);if(u){var d;if(r.any(s._validators.update.deny,function(t){return d||(d=h(t,u)),t(e,d,c,i)}))throw new t.Error(403,"Access denied");if(r.all(s._validators.update.allow,function(t){return d||(d=h(t,u)),!t(e,d,c,i)}))throw new t.Error(403,"Access denied");s._collection.update.call(s._collection,n,i,a)}};var p={$inc:1,$set:1,$unset:1,$addToSet:1,$pop:1,$pullAll:1,$pull:1,$pushAll:1,$push:1,$bit:1};t.Collection.prototype._validatedRemove=function(e,n){var i=this,o={transform:null};i._validators.fetchAllFields||(o.fields={},r.each(i._validators.fetch,function(e){o.fields[e]=1}));var a=i._collection.findOne(n,o);if(a){if(r.any(i._validators.remove.deny,function(t){return t(e,h(t,a))}))throw new t.Error(403,"Access denied");if(r.all(i._validators.remove.allow,function(t){return!t(e,h(t,a))}))throw new t.Error(403,"Access denied");i._collection.remove.call(i._collection,n)}}}.call(this),"undefined"==typeof Package&&(Package={}),Package["mongo-livedata"]={}}(),function(){var e,t=Package.meteor.Meteor,n=Package.deps.Deps,i=Package.livedata.DDP;(function(){var r=__meteor_runtime_config__.autoupdateVersion||"unknown",o=new t.Collection("meteor_autoupdate_clientVersions");e={},e.newClientAvailable=function(){return!!o.findOne({$and:[{current:!0},{_id:{$ne:r}}]})};var a=new i._Retry({minCount:0,baseTimeout:3e4}),s=0;e._retrySubscription=function(){t.subscribe("meteor_autoupdate_clientVersions",{onError:function(n){t._debug("autoupdate subscription failed:",n),s++,a.retryLater(s,function(){e._retrySubscription()})},onReady:function(){Package.reload&&n.autorun(function(e){o.findOne({current:!0})&&!o.findOne({_id:r})&&(e.stop(),Package.reload.Reload._reload())})}})},e._retrySubscription()}).call(this),"undefined"==typeof Package&&(Package={}),Package.autoupdate={Autoupdate:e}}(),function(){Package.meteor.Meteor,Package.reload.Reload,Package.autoupdate.Autoupdate;"undefined"==typeof Package&&(Package={}),Package["standard-app-packages"]={}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.less={}}(),function(){{var e,t;Package.meteor.Meteor}(function(){!function(e,t){function n(e){var t=e.length,n=ut.type(e);return ut.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e){var t=Ct[e]={};return ut.each(e.match(ft)||[],function(e,n){t[n]=!0}),t}function r(e,n,i,r){if(ut.acceptData(e)){var o,a,s=ut.expando,c=e.nodeType,l=c?ut.cache:e,u=c?e[s]:e[s]&&s;if(u&&l[u]&&(r||l[u].data)||i!==t||"string"!=typeof n)return u||(u=c?e[s]=tt.pop()||ut.guid++:s),l[u]||(l[u]=c?{}:{toJSON:ut.noop}),("object"==typeof n||"function"==typeof n)&&(r?l[u]=ut.extend(l[u],n):l[u].data=ut.extend(l[u].data,n)),a=l[u],r||(a.data||(a.data={}),a=a.data),i!==t&&(a[ut.camelCase(n)]=i),"string"==typeof n?(o=a[n],null==o&&(o=a[ut.camelCase(n)])):o=a,o}}function o(e,t,n){if(ut.acceptData(e)){var i,r,o=e.nodeType,a=o?ut.cache:e,c=o?e[ut.expando]:ut.expando;if(a[c]){if(t&&(i=n?a[c]:a[c].data)){ut.isArray(t)?t=t.concat(ut.map(t,ut.camelCase)):t in i?t=[t]:(t=ut.camelCase(t),t=t in i?[t]:t.split(" ")),r=t.length;for(;r--;)delete i[t[r]];if(n?!s(i):!ut.isEmptyObject(i))return}(n||(delete a[c].data,s(a[c])))&&(o?ut.cleanData([e],!0):ut.support.deleteExpando||a!=a.window?delete a[c]:a[c]=null)}}}function a(e,n,i){if(i===t&&1===e.nodeType){var r="data-"+n.replace(Pt,"-$1").toLowerCase();if(i=e.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:xt.test(i)?ut.parseJSON(i):i}catch(o){}ut.data(e,n,i)}else i=t}return i}function s(e){var t;for(t in e)if(("data"!==t||!ut.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function c(){return!0}function l(){return!1}function u(){try{return G.activeElement}catch(e){}}function d(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function f(e,t,n){if(ut.isFunction(t))return ut.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return ut.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Bt.test(t))return ut.filter(t,e,n);t=ut.filter(t,e)}return ut.grep(e,function(e){return ut.inArray(e,t)>=0!==n})}function h(e){var t=Vt.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function p(e,t){return ut.nodeName(e,"table")&&ut.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function m(e){return e.type=(null!==ut.find.attr(e,"type"))+"/"+e.type,e}function g(e){var t=on.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function v(e,t){for(var n,i=0;null!=(n=e[i]);i++)ut._data(n,"globalEval",!t||ut._data(t[i],"globalEval"))}function y(e,t){if(1===t.nodeType&&ut.hasData(e)){var n,i,r,o=ut._data(e),a=ut._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(i=0,r=s[n].length;r>i;i++)ut.event.add(t,n,s[n][i])}a.data&&(a.data=ut.extend({},a.data))}}function b(e,t){var n,i,r;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ut.support.noCloneEvent&&t[ut.expando]){r=ut._data(t);for(i in r.events)ut.removeEvent(t,i,r.handle);t.removeAttribute(ut.expando)}"script"===n&&t.text!==e.text?(m(t).text=e.text,g(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ut.support.html5Clone&&e.innerHTML&&!ut.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&tn.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function _(e,n){var i,r,o=0,a=typeof e.getElementsByTagName!==X?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==X?e.querySelectorAll(n||"*"):t;if(!a)for(a=[],i=e.childNodes||e;null!=(r=i[o]);o++)!n||ut.nodeName(r,n)?a.push(r):ut.merge(a,_(r,n));return n===t||n&&ut.nodeName(e,n)?ut.merge([e],a):a}function w(e){tn.test(e.type)&&(e.defaultChecked=e.checked)}function k(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=Cn.length;r--;)if(t=Cn[r]+n,t in e)return t;return i}function S(e,t){return e=t||e,"none"===ut.css(e,"display")||!ut.contains(e.ownerDocument,e)}function T(e,t){for(var n,i,r,o=[],a=0,s=e.length;s>a;a++)i=e[a],i.style&&(o[a]=ut._data(i,"olddisplay"),n=i.style.display,t?(o[a]||"none"!==n||(i.style.display=""),""===i.style.display&&S(i)&&(o[a]=ut._data(i,"olddisplay",M(i.nodeName)))):o[a]||(r=S(i),(n&&"none"!==n||!r)&&ut._data(i,"olddisplay",r?n:ut.css(i,"display"))));for(a=0;s>a;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[a]||"":"none"));return e}function C(e,t,n){var i=yn.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function x(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=ut.css(e,n+Tn[o],!0,r)),i?("content"===n&&(a-=ut.css(e,"padding"+Tn[o],!0,r)),"margin"!==n&&(a-=ut.css(e,"border"+Tn[o]+"Width",!0,r))):(a+=ut.css(e,"padding"+Tn[o],!0,r),"padding"!==n&&(a+=ut.css(e,"border"+Tn[o]+"Width",!0,r)));return a}function P(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=dn(e),a=ut.support.boxSizing&&"border-box"===ut.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=fn(e,t,o),(0>r||null==r)&&(r=e.style[t]),bn.test(r))return r;i=a&&(ut.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+x(e,t,n||(a?"border":"content"),i,o)+"px"}function M(e){var t=G,n=wn[e];return n||(n=D(e,t),"none"!==n&&n||(un=(un||ut("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(un[0].contentWindow||un[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=D(e,t),un.detach()),wn[e]=n),n}function D(e,t){var n=ut(t.createElement(e)).appendTo(t.body),i=ut.css(n[0],"display");return n.remove(),i}function I(e,t,n,i){var r;if(ut.isArray(t))ut.each(t,function(t,r){n||Pn.test(e)?i(e,r):I(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==ut.type(t))i(e,t);else for(r in t)I(e+"["+r+"]",t[r],n,i)}function E(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(ft)||[];if(ut.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function L(e,t,n,i){function r(s){var c;return o[s]=!0,ut.each(e[s]||[],function(e,s){var l=s(t,n,i);return"string"!=typeof l||a||o[l]?a?!(c=l):void 0:(t.dataTypes.unshift(l),r(l),!1)}),c}var o={},a=e===Wn;return r(t.dataTypes[0])||!o["*"]&&r("*")}function H(e,n){var i,r,o=ut.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((o[r]?e:i||(i={}))[r]=n[r]);return i&&ut.extend(!0,e,i),e}function z(e,n,i){for(var r,o,a,s,c=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in c)if(c[s]&&c[s].test(o)){l.unshift(s);break}if(l[0]in i)a=l[0];else{for(s in i){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}r||(r=s)}a=a||r}return a?(a!==l[0]&&l.unshift(a),i[a]):void 0}function N(e,t,n,i){var r,o,a,s,c,l={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=u.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(a=l[c+" "+o]||l["* "+o],!a)for(r in l)if(s=r.split(" "),s[1]===o&&(a=l[c+" "+s[0]]||l["* "+s[0]])){a===!0?a=l[r]:l[r]!==!0&&(o=s[0],u.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}function O(){try{return new e.XMLHttpRequest}catch(t){}}function R(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function A(){return setTimeout(function(){Zn=t
}),Zn=ut.now()}function $(e,t,n){for(var i,r=(oi[t]||[]).concat(oi["*"]),o=0,a=r.length;a>o;o++)if(i=r[o].call(n,t,e))return i}function j(e,t,n){var i,r,o=0,a=ri.length,s=ut.Deferred().always(function(){delete c.elem}),c=function(){if(r)return!1;for(var t=Zn||A(),n=Math.max(0,l.startTime+l.duration-t),i=n/l.duration||0,o=1-i,a=0,c=l.tweens.length;c>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&c?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:ut.extend({},t),opts:ut.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Zn||A(),duration:n.duration,tweens:[],createTween:function(t,n){var i=ut.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,i=t?l.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),u=l.props;for(U(u,l.opts.specialEasing);a>o;o++)if(i=ri[o].call(l,e,u,l.opts))return i;return ut.map(u,$,l),ut.isFunction(l.opts.start)&&l.opts.start.call(e,l),ut.fx.timer(ut.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function U(e,t){var n,i,r,o,a;for(n in e)if(i=ut.camelCase(n),r=t[i],o=e[n],ut.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),a=ut.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function B(e,t,n){var i,r,o,a,s,c,l=this,u={},d=e.style,f=e.nodeType&&S(e),h=ut._data(e,"fxshow");n.queue||(s=ut._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,c=s.empty.fire,s.empty.fire=function(){s.unqueued||c()}),s.unqueued++,l.always(function(){l.always(function(){s.unqueued--,ut.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===ut.css(e,"display")&&"none"===ut.css(e,"float")&&(ut.support.inlineBlockNeedsLayout&&"inline"!==M(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",ut.support.shrinkWrapBlocks||l.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],ti.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(f?"hide":"show"))continue;u[i]=h&&h[i]||ut.style(e,i)}if(!ut.isEmptyObject(u)){h?"hidden"in h&&(f=h.hidden):h=ut._data(e,"fxshow",{}),o&&(h.hidden=!f),f?ut(e).show():l.done(function(){ut(e).hide()}),l.done(function(){var t;ut._removeData(e,"fxshow");for(t in u)ut.style(e,t,u[t])});for(i in u)a=$(f?h[i]:0,i,l),i in h||(h[i]=a.start,f&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function F(e,t,n,i,r){return new F.prototype.init(e,t,n,i,r)}function W(e,t){var n,i={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)n=Tn[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function q(e){return ut.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var V,Y,X=typeof t,J=e.location,G=e.document,K=G.documentElement,Q=e.jQuery,Z=e.$,et={},tt=[],nt="1.10.2",it=tt.concat,rt=tt.push,ot=tt.slice,at=tt.indexOf,st=et.toString,ct=et.hasOwnProperty,lt=nt.trim,ut=function(e,t){return new ut.fn.init(e,t,Y)},dt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ft=/\S+/g,ht=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,pt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,mt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,gt=/^[\],:{}\s]*$/,vt=/(?:^|:|,)(?:\s*\[)+/g,yt=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,bt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,_t=/^-ms-/,wt=/-([\da-z])/gi,kt=function(e,t){return t.toUpperCase()},St=function(e){(G.addEventListener||"load"===e.type||"complete"===G.readyState)&&(Tt(),ut.ready())},Tt=function(){G.addEventListener?(G.removeEventListener("DOMContentLoaded",St,!1),e.removeEventListener("load",St,!1)):(G.detachEvent("onreadystatechange",St),e.detachEvent("onload",St))};ut.fn=ut.prototype={jquery:nt,constructor:ut,init:function(e,n,i){var r,o;if(!e)return this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:pt.exec(e),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(r[1]){if(n=n instanceof ut?n[0]:n,ut.merge(this,ut.parseHTML(r[1],n&&n.nodeType?n.ownerDocument||n:G,!0)),mt.test(r[1])&&ut.isPlainObject(n))for(r in n)ut.isFunction(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}if(o=G.getElementById(r[2]),o&&o.parentNode){if(o.id!==r[2])return i.find(e);this.length=1,this[0]=o}return this.context=G,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ut.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),ut.makeArray(e,this))},selector:"",length:0,toArray:function(){return ot.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=ut.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ut.each(this,e,t)},ready:function(e){return ut.ready.promise().done(e),this},slice:function(){return this.pushStack(ot.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(ut.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:rt,sort:[].sort,splice:[].splice},ut.fn.init.prototype=ut.fn,ut.extend=ut.fn.extend=function(){var e,n,i,r,o,a,s=arguments[0]||{},c=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},c=2),"object"==typeof s||ut.isFunction(s)||(s={}),l===c&&(s=this,--c);l>c;c++)if(null!=(o=arguments[c]))for(r in o)e=s[r],i=o[r],s!==i&&(u&&i&&(ut.isPlainObject(i)||(n=ut.isArray(i)))?(n?(n=!1,a=e&&ut.isArray(e)?e:[]):a=e&&ut.isPlainObject(e)?e:{},s[r]=ut.extend(u,a,i)):i!==t&&(s[r]=i));return s},ut.extend({expando:"jQuery"+(nt+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===ut&&(e.$=Z),t&&e.jQuery===ut&&(e.jQuery=Q),ut},isReady:!1,readyWait:1,holdReady:function(e){e?ut.readyWait++:ut.ready(!0)},ready:function(e){if(e===!0?!--ut.readyWait:!ut.isReady){if(!G.body)return setTimeout(ut.ready);ut.isReady=!0,e!==!0&&--ut.readyWait>0||(V.resolveWith(G,[ut]),ut.fn.trigger&&ut(G).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===ut.type(e)},isArray:Array.isArray||function(e){return"array"===ut.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?et[st.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||"object"!==ut.type(e)||e.nodeType||ut.isWindow(e))return!1;try{if(e.constructor&&!ct.call(e,"constructor")&&!ct.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(ut.support.ownLast)for(n in e)return ct.call(e,n);for(n in e);return n===t||ct.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||G;var i=mt.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=ut.buildFragment([e],t,r),r&&ut(r).remove(),ut.merge([],i.childNodes))},parseJSON:function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t):null===t?t:"string"==typeof t&&(t=ut.trim(t),t&&gt.test(t.replace(yt,"@").replace(bt,"]").replace(vt,"")))?new Function("return "+t)():(ut.error("Invalid JSON: "+t),void 0)},parseXML:function(n){var i,r;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(r=new DOMParser,i=r.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(o){i=t}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||ut.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&ut.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(_t,"ms-").replace(wt,kt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,o=0,a=e.length,s=n(e);if(i){if(s)for(;a>o&&(r=t.apply(e[o],i),r!==!1);o++);else for(o in e)if(r=t.apply(e[o],i),r===!1)break}else if(s)for(;a>o&&(r=t.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=t.call(e[o],o,e[o]),r===!1)break;return e},trim:lt&&!lt.call("﻿ ")?function(e){return null==e?"":lt.call(e)}:function(e){return null==e?"":(e+"").replace(ht,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?ut.merge(i,"string"==typeof e?[e]:e):rt.call(i,e)),i},inArray:function(e,t,n){var i;if(t){if(at)return at.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var i=n.length,r=e.length,o=0;if("number"==typeof i)for(;i>o;o++)e[r++]=n[o];else for(;n[o]!==t;)e[r++]=n[o++];return e.length=r,e},grep:function(e,t,n){var i,r=[],o=0,a=e.length;for(n=!!n;a>o;o++)i=!!t(e[o],o),n!==i&&r.push(e[o]);return r},map:function(e,t,i){var r,o=0,a=e.length,s=n(e),c=[];if(s)for(;a>o;o++)r=t(e[o],o,i),null!=r&&(c[c.length]=r);else for(o in e)r=t(e[o],o,i),null!=r&&(c[c.length]=r);return it.apply([],c)},guid:1,proxy:function(e,n){var i,r,o;return"string"==typeof n&&(o=e[n],n=e,e=o),ut.isFunction(e)?(i=ot.call(arguments,2),r=function(){return e.apply(n||this,i.concat(ot.call(arguments)))},r.guid=e.guid=e.guid||ut.guid++,r):t},access:function(e,n,i,r,o,a,s){var c=0,l=e.length,u=null==i;if("object"===ut.type(i)){o=!0;for(c in i)ut.access(e,n,c,i[c],!0,a,s)}else if(r!==t&&(o=!0,ut.isFunction(r)||(s=!0),u&&(s?(n.call(e,r),n=null):(u=n,n=function(e,t,n){return u.call(ut(e),n)})),n))for(;l>c;c++)n(e[c],i,s?r:r.call(e[c],c,n(e[c],i)));return o?e:u?n.call(e):l?n(e[0],i):a},now:function(){return(new Date).getTime()},swap:function(e,t,n,i){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=a[o];return r}}),ut.ready.promise=function(t){if(!V)if(V=ut.Deferred(),"complete"===G.readyState)setTimeout(ut.ready);else if(G.addEventListener)G.addEventListener("DOMContentLoaded",St,!1),e.addEventListener("load",St,!1);else{G.attachEvent("onreadystatechange",St),e.attachEvent("onload",St);var n=!1;try{n=null==e.frameElement&&G.documentElement}catch(i){}n&&n.doScroll&&!function r(){if(!ut.isReady){try{n.doScroll("left")}catch(e){return setTimeout(r,50)}Tt(),ut.ready()}}()}return V.promise(t)},ut.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){et["[object "+t+"]"]=t.toLowerCase()}),Y=ut(G),function(e,t){function n(e,t,n,i){var r,o,a,s,c,l,u,d,p,m;if((t?t.ownerDocument||t:j)!==L&&E(t),t=t||L,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(z&&!i){if(r=bt.exec(e))if(a=r[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&A(t,o)&&o.id===a)return n.push(o),n}else{if(r[2])return et.apply(n,t.getElementsByTagName(e)),n;if((a=r[3])&&S.getElementsByClassName&&t.getElementsByClassName)return et.apply(n,t.getElementsByClassName(a)),n}if(S.qsa&&(!N||!N.test(e))){if(d=u=$,p=t,m=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=f(e),(u=t.getAttribute("id"))?d=u.replace(kt,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",c=l.length;c--;)l[c]=d+h(l[c]);p=ht.test(e)&&t.parentNode||t,m=l.join(",")}if(m)try{return et.apply(n,p.querySelectorAll(m)),n}catch(g){}finally{u||t.removeAttribute("id")}}}return w(e.replace(lt,"$1"),t,n,i)}function i(){function e(n,i){return t.push(n+=" ")>C.cacheLength&&delete e[t.shift()],e[n]=i}var t=[];return e}function r(e){return e[$]=!0,e}function o(e){var t=L.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),i=e.length;i--;)C.attrHandle[n[i]]=t}function s(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||J)-(~e.sourceIndex||J);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function c(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return r(function(t){return t=+t,r(function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function d(){}function f(e,t){var i,r,o,a,s,c,l,u=W[e+" "];if(u)return t?0:u.slice(0);for(s=e,c=[],l=C.preFilter;s;){(!i||(r=dt.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),c.push(o=[])),i=!1,(r=ft.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(lt," ")}),s=s.slice(i.length));for(a in C.filter)!(r=vt[a].exec(s))||l[a]&&!(r=l[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return t?s.length:s?n.error(e):W(e,c).slice(0)}function h(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function p(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=B++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,a){var s,c,l,u=U+" "+o;if(a){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||r)if(l=t[$]||(t[$]={}),(c=l[i])&&c[0]===u){if((s=c[1])===!0||s===T)return s===!0}else if(c=l[i]=[u],c[1]=e(t,n,a)||T,c[1]===!0)return!0}}function m(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function g(e,t,n,i,r){for(var o,a=[],s=0,c=e.length,l=null!=t;c>s;s++)(o=e[s])&&(!n||n(o,i,r))&&(a.push(o),l&&t.push(s));return a}function v(e,t,n,i,o,a){return i&&!i[$]&&(i=v(i)),o&&!o[$]&&(o=v(o,a)),r(function(r,a,s,c){var l,u,d,f=[],h=[],p=a.length,m=r||_(t||"*",s.nodeType?[s]:s,[]),v=!e||!r&&t?m:g(m,f,e,s,c),y=n?o||(r?e:p||i)?[]:a:v;if(n&&n(v,y,s,c),i)for(l=g(y,h),i(l,[],s,c),u=l.length;u--;)(d=l[u])&&(y[h[u]]=!(v[h[u]]=d));if(r){if(o||e){if(o){for(l=[],u=y.length;u--;)(d=y[u])&&l.push(v[u]=d);o(null,y=[],l,c)}for(u=y.length;u--;)(d=y[u])&&(l=o?nt.call(r,d):f[u])>-1&&(r[l]=!(a[l]=d))}}else y=g(y===a?y.splice(p,y.length):y),o?o(null,a,y,c):et.apply(a,y)})}function y(e){for(var t,n,i,r=e.length,o=C.relative[e[0].type],a=o||C.relative[" "],s=o?1:0,c=p(function(e){return e===t},a,!0),l=p(function(e){return nt.call(t,e)>-1},a,!0),u=[function(e,n,i){return!o&&(i||n!==D)||((t=n).nodeType?c(e,n,i):l(e,n,i))}];r>s;s++)if(n=C.relative[e[s].type])u=[p(m(u),n)];else{if(n=C.filter[e[s].type].apply(null,e[s].matches),n[$]){for(i=++s;r>i&&!C.relative[e[i].type];i++);return v(s>1&&m(u),s>1&&h(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(lt,"$1"),n,i>s&&y(e.slice(s,i)),r>i&&y(e=e.slice(i)),r>i&&h(e))}u.push(n)}return m(u)}function b(e,t){var i=0,o=t.length>0,a=e.length>0,s=function(r,s,c,l,u){var d,f,h,p=[],m=0,v="0",y=r&&[],b=null!=u,_=D,w=r||a&&C.find.TAG("*",u&&s.parentNode||s),k=U+=null==_?1:Math.random()||.1;for(b&&(D=s!==L&&s,T=i);null!=(d=w[v]);v++){if(a&&d){for(f=0;h=e[f++];)if(h(d,s,c)){l.push(d);break}b&&(U=k,T=++i)}o&&((d=!h&&d)&&m--,r&&y.push(d))}if(m+=v,o&&v!==m){for(f=0;h=t[f++];)h(y,p,s,c);if(r){if(m>0)for(;v--;)y[v]||p[v]||(p[v]=Q.call(l));p=g(p)}et.apply(l,p),b&&!r&&p.length>0&&m+t.length>1&&n.uniqueSort(l)}return b&&(U=k,D=_),y};return o?r(s):s}function _(e,t,i){for(var r=0,o=t.length;o>r;r++)n(e,t[r],i);return i}function w(e,t,n,i){var r,o,a,s,c,l=f(e);if(!i&&1===l.length){if(o=l[0]=l[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&S.getById&&9===t.nodeType&&z&&C.relative[o[1].type]){if(t=(C.find.ID(a.matches[0].replace(St,Tt),t)||[])[0],!t)return n;e=e.slice(o.shift().value.length)}for(r=vt.needsContext.test(e)?0:o.length;r--&&(a=o[r],!C.relative[s=a.type]);)if((c=C.find[s])&&(i=c(a.matches[0].replace(St,Tt),ht.test(o[0].type)&&t.parentNode||t))){if(o.splice(r,1),e=i.length&&h(o),!e)return et.apply(n,i),n;break}}return M(e,l)(i,t,!z,n,ht.test(e)),n}var k,S,T,C,x,P,M,D,I,E,L,H,z,N,O,R,A,$="sizzle"+-new Date,j=e.document,U=0,B=0,F=i(),W=i(),q=i(),V=!1,Y=function(e,t){return e===t?(V=!0,0):0},X=typeof t,J=1<<31,G={}.hasOwnProperty,K=[],Q=K.pop,Z=K.push,et=K.push,tt=K.slice,nt=K.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",rt="[\\x20\\t\\r\\n\\f]",ot="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",at=ot.replace("w","w#"),st="\\["+rt+"*("+ot+")"+rt+"*(?:([*^$|!~]?=)"+rt+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+at+")|)|)"+rt+"*\\]",ct=":("+ot+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+st.replace(3,8)+")*)|.*)\\)|)",lt=new RegExp("^"+rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+rt+"+$","g"),dt=new RegExp("^"+rt+"*,"+rt+"*"),ft=new RegExp("^"+rt+"*([>+~]|"+rt+")"+rt+"*"),ht=new RegExp(rt+"*[+~]"),pt=new RegExp("="+rt+"*([^\\]'\"]*)"+rt+"*\\]","g"),mt=new RegExp(ct),gt=new RegExp("^"+at+"$"),vt={ID:new RegExp("^#("+ot+")"),CLASS:new RegExp("^\\.("+ot+")"),TAG:new RegExp("^("+ot.replace("w","w*")+")"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+ct),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+rt+"*(even|odd|(([+-]|)(\\d*)n|)"+rt+"*(?:([+-]|)"+rt+"*(\\d+)|))"+rt+"*\\)|)","i"),bool:new RegExp("^(?:"+it+")$","i"),needsContext:new RegExp("^"+rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+rt+"*((?:-\\d)?\\d*)"+rt+"*\\)|)(?=[^-]|$)","i")},yt=/^[^{]+\{\s*\[native \w/,bt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_t=/^(?:input|select|textarea|button)$/i,wt=/^h\d$/i,kt=/'|\\/g,St=new RegExp("\\\\([\\da-f]{1,6}"+rt+"?|("+rt+")|.)","ig"),Tt=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{et.apply(K=tt.call(j.childNodes),j.childNodes),K[j.childNodes.length].nodeType}catch(Ct){et={apply:K.length?function(e,t){Z.apply(e,tt.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}P=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},S=n.support={},E=n.setDocument=function(e){var t=e?e.ownerDocument||e:j,n=t.defaultView;return t!==L&&9===t.nodeType&&t.documentElement?(L=t,H=t.documentElement,z=!P(t),n&&n.attachEvent&&n!==n.top&&n.attachEvent("onbeforeunload",function(){E()}),S.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),S.getElementsByTagName=o(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),S.getElementsByClassName=o(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),S.getById=o(function(e){return H.appendChild(e).id=$,!t.getElementsByName||!t.getElementsByName($).length}),S.getById?(C.find.ID=function(e,t){if(typeof t.getElementById!==X&&z){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(e){var t=e.replace(St,Tt);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(St,Tt);return function(e){var n=typeof e.getAttributeNode!==X&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=S.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==X?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},C.find.CLASS=S.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==X&&z?t.getElementsByClassName(e):void 0},O=[],N=[],(S.qsa=yt.test(t.querySelectorAll))&&(o(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||N.push("\\["+rt+"*(?:value|"+it+")"),e.querySelectorAll(":checked").length||N.push(":checked")}),o(function(e){var n=t.createElement("input");n.setAttribute("type","hidden"),e.appendChild(n).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&N.push("[*^$]="+rt+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),N.push(",.*:")})),(S.matchesSelector=yt.test(R=H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&o(function(e){S.disconnectedMatch=R.call(e,"div"),R.call(e,"[s!='']:x"),O.push("!=",ct)}),N=N.length&&new RegExp(N.join("|")),O=O.length&&new RegExp(O.join("|")),A=yt.test(H.contains)||H.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Y=H.compareDocumentPosition?function(e,n){if(e===n)return V=!0,0;var i=n.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(n);return i?1&i||!S.sortDetached&&n.compareDocumentPosition(e)===i?e===t||A(j,e)?-1:n===t||A(j,n)?1:I?nt.call(I,e)-nt.call(I,n):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,n){var i,r=0,o=e.parentNode,a=n.parentNode,c=[e],l=[n];if(e===n)return V=!0,0;if(!o||!a)return e===t?-1:n===t?1:o?-1:a?1:I?nt.call(I,e)-nt.call(I,n):0;if(o===a)return s(e,n);for(i=e;i=i.parentNode;)c.unshift(i);for(i=n;i=i.parentNode;)l.unshift(i);for(;c[r]===l[r];)r++;return r?s(c[r],l[r]):c[r]===j?-1:l[r]===j?1:0},t):L},n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){if((e.ownerDocument||e)!==L&&E(e),t=t.replace(pt,"='$1']"),!(!S.matchesSelector||!z||O&&O.test(t)||N&&N.test(t)))try{var i=R.call(e,t);if(i||S.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return n(t,L,null,[e]).length>0},n.contains=function(e,t){return(e.ownerDocument||e)!==L&&E(e),A(e,t)},n.attr=function(e,n){(e.ownerDocument||e)!==L&&E(e);var i=C.attrHandle[n.toLowerCase()],r=i&&G.call(C.attrHandle,n.toLowerCase())?i(e,n,!z):t;return r===t?S.attributes||!z?e.getAttribute(n):(r=e.getAttributeNode(n))&&r.specified?r.value:null:r},n.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},n.uniqueSort=function(e){var t,n=[],i=0,r=0;if(V=!S.detectDuplicates,I=!S.sortStable&&e.slice(0),e.sort(Y),V){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return e},x=n.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=x(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i];i++)n+=x(t);return n},C=n.selectors={cacheLength:50,createPseudo:r,match:vt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(St,Tt),e[3]=(e[4]||e[5]||"").replace(St,Tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||n.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&n.error(e[0]),e},PSEUDO:function(e){var n,i=!e[5]&&e[2];return vt.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:i&&mt.test(i)&&(n=f(i,!0))&&(n=i.indexOf(")",i.length-n)-i.length)&&(e[0]=e[0].slice(0,n),e[2]=i.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(St,Tt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=F[e+" "];return t||(t=new RegExp("(^|"+rt+")"+e+"("+rt+"|$)"))&&F(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==X&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(r){var o=n.attr(r,e);return null==o?"!="===t:t?(o+="","="===t?o===i:"!="===t?o!==i:"^="===t?i&&0===o.indexOf(i):"*="===t?i&&o.indexOf(i)>-1:"$="===t?i&&o.slice(-i.length)===i:"~="===t?(" "+o+" ").indexOf(i)>-1:"|="===t?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,c){var l,u,d,f,h,p,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!c&&!s;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&y){for(u=g[$]||(g[$]={}),l=u[e]||[],h=l[0]===U&&l[1],f=l[0]===U&&l[2],d=h&&g.childNodes[h];d=++h&&d&&d[m]||(f=h=0)||p.pop();)if(1===d.nodeType&&++f&&d===t){u[e]=[U,h,f];break}}else if(y&&(l=(t[$]||(t[$]={}))[e])&&l[0]===U)f=l[1];else for(;(d=++h&&d&&d[m]||(f=h=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(y&&((d[$]||(d[$]={}))[e]=[U,f]),d!==t)););return f-=r,f===i||f%i===0&&f/i>=0}}},PSEUDO:function(e,t){var i,o=C.pseudos[e]||C.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return o[$]?o(t):o.length>1?(i=[e,e,"",t],C.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,n){for(var i,r=o(e,t),a=r.length;a--;)i=nt.call(e,r[a]),e[i]=!(n[i]=r[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=M(e.replace(lt,"$1"));return i[$]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),!n.pop()}}),has:r(function(e){return function(t){return n(e,t).length>0}}),contains:r(function(e){return function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:r(function(e){return gt.test(e||"")||n.error("unsupported lang: "+e),e=e.replace(St,Tt).toLowerCase(),function(t){var n;do if(n=z?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===H},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return wt.test(e.nodeName)},input:function(e){return _t.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:u(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},C.pseudos.nth=C.pseudos.eq;for(k in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[k]=c(k);for(k in{submit:!0,reset:!0})C.pseudos[k]=l(k);d.prototype=C.filters=C.pseudos,C.setFilters=new d,M=n.compile=function(e,t){var n,i=[],r=[],o=q[e+" "];if(!o){for(t||(t=f(e)),n=t.length;n--;)o=y(t[n]),o[$]?i.push(o):r.push(o);o=q(e,b(r,i))}return o},S.sortStable=$.split("").sort(Y).join("")===$,S.detectDuplicates=V,E(),S.sortDetached=o(function(e){return 1&e.compareDocumentPosition(L.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),S.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||a(it,function(e,t,n){var i;return n?void 0:(i=e.getAttributeNode(t))&&i.specified?i.value:e[t]===!0?t.toLowerCase():null}),ut.find=n,ut.expr=n.selectors,ut.expr[":"]=ut.expr.pseudos,ut.unique=n.uniqueSort,ut.text=n.getText,ut.isXMLDoc=n.isXML,ut.contains=n.contains}(e);var Ct={};ut.Callbacks=function(e){e="string"==typeof e?Ct[e]||i(e):ut.extend({},e);var n,r,o,a,s,c,l=[],u=!e.once&&[],d=function(t){for(r=e.memory&&t,o=!0,s=c||0,c=0,a=l.length,n=!0;l&&a>s;s++)if(l[s].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,l&&(u?u.length&&d(u.shift()):r?l=[]:f.disable())},f={add:function(){if(l){var t=l.length;!function i(t){ut.each(t,function(t,n){var r=ut.type(n);"function"===r?e.unique&&f.has(n)||l.push(n):n&&n.length&&"string"!==r&&i(n)})}(arguments),n?a=l.length:r&&(c=t,d(r))}return this},remove:function(){return l&&ut.each(arguments,function(e,t){for(var i;(i=ut.inArray(t,l,i))>-1;)l.splice(i,1),n&&(a>=i&&a--,s>=i&&s--)}),this},has:function(e){return e?ut.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=u=r=t,this},disabled:function(){return!l},lock:function(){return u=t,r||f.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||o&&!u||(t=t||[],t=[e,t.slice?t.slice():t],n?u.push(t):d(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},ut.extend({Deferred:function(e){var t=[["resolve","done",ut.Callbacks("once memory"),"resolved"],["reject","fail",ut.Callbacks("once memory"),"rejected"],["notify","progress",ut.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ut.Deferred(function(n){ut.each(t,function(t,o){var a=o[0],s=ut.isFunction(e[t])&&e[t];r[o[1]](function(){var e=s&&s.apply(this,arguments);e&&ut.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===i?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ut.extend(e,i):i}},r={};return i.pipe=i.then,ut.each(t,function(e,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=a.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=ot.call(arguments),a=o.length,s=1!==a||e&&ut.isFunction(e.promise)?a:0,c=1===s?e:ut.Deferred(),l=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?ot.call(arguments):r,i===t?c.notifyWith(n,i):--s||c.resolveWith(n,i)}};if(a>1)for(t=new Array(a),n=new Array(a),i=new Array(a);a>r;r++)o[r]&&ut.isFunction(o[r].promise)?o[r].promise().done(l(r,i,o)).fail(c.reject).progress(l(r,n,t)):--s;return s||c.resolveWith(i,o),c.promise()}}),ut.support=function(t){var n,i,r,o,a,s,c,l,u,d=G.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*")||[],i=d.getElementsByTagName("a")[0],!i||!i.style||!n.length)return t;o=G.createElement("select"),s=o.appendChild(G.createElement("option")),r=d.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==d.className,t.leadingWhitespace=3===d.firstChild.nodeType,t.tbody=!d.getElementsByTagName("tbody").length,t.htmlSerialize=!!d.getElementsByTagName("link").length,t.style=/top/.test(i.getAttribute("style")),t.hrefNormalized="/a"===i.getAttribute("href"),t.opacity=/^0.5/.test(i.style.opacity),t.cssFloat=!!i.style.cssFloat,t.checkOn=!!r.value,t.optSelected=s.selected,t.enctype=!!G.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==G.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,r.checked=!0,t.noCloneChecked=r.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!s.disabled;
try{delete d.test}catch(f){t.deleteExpando=!1}r=G.createElement("input"),r.setAttribute("value",""),t.input=""===r.getAttribute("value"),r.value="t",r.setAttribute("type","radio"),t.radioValue="t"===r.value,r.setAttribute("checked","t"),r.setAttribute("name","t"),a=G.createDocumentFragment(),a.appendChild(r),t.appendChecked=r.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(u in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+u,"t"),t[u+"Bubbles"]=c in e||d.attributes[c].expando===!1;d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip;for(u in ut(t))break;return t.ownLast="0"!==u,ut(function(){var n,i,r,o="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=G.getElementsByTagName("body")[0];a&&(n=G.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=d.getElementsByTagName("td"),r[0].style.cssText="padding:0;margin:0;border:0;display:none",l=0===r[0].offsetHeight,r[0].style.display="",r[1].style.display="none",t.reliableHiddenOffsets=l&&0===r[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ut.swap(a,null!=a.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===d.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,i=d.appendChild(G.createElement("div")),i.style.cssText=d.style.cssText=o,i.style.marginRight=i.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),typeof d.style.zoom!==X&&(d.innerHTML="",d.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=d=r=i=null)}),n=o=a=s=i=r=null,t}({});var xt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Pt=/([A-Z])/g;ut.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?ut.cache[e[ut.expando]]:e[ut.expando],!!e&&!s(e)},data:function(e,t,n){return r(e,t,n)},removeData:function(e,t){return o(e,t)},_data:function(e,t,n){return r(e,t,n,!0)},_removeData:function(e,t){return o(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&ut.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),ut.fn.extend({data:function(e,n){var i,r,o=null,s=0,c=this[0];if(e===t){if(this.length&&(o=ut.data(c),1===c.nodeType&&!ut._data(c,"parsedAttrs"))){for(i=c.attributes;s<i.length;s++)r=i[s].name,0===r.indexOf("data-")&&(r=ut.camelCase(r.slice(5)),a(c,r,o[r]));ut._data(c,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){ut.data(this,e)}):arguments.length>1?this.each(function(){ut.data(this,e,n)}):c?a(c,e,ut.data(c,e)):null},removeData:function(e){return this.each(function(){ut.removeData(this,e)})}}),ut.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=ut._data(e,t),n&&(!i||ut.isArray(n)?i=ut._data(e,t,ut.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=ut.queue(e,t),i=n.length,r=n.shift(),o=ut._queueHooks(e,t),a=function(){ut.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ut._data(e,n)||ut._data(e,n,{empty:ut.Callbacks("once memory").add(function(){ut._removeData(e,t+"queue"),ut._removeData(e,n)})})}}),ut.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),arguments.length<i?ut.queue(this[0],e):n===t?this:this.each(function(){var t=ut.queue(this,e,n);ut._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&ut.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ut.dequeue(this,e)})},delay:function(e,t){return e=ut.fx?ut.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,r=1,o=ut.Deferred(),a=this,s=this.length,c=function(){--r||o.resolveWith(a,[a])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";s--;)i=ut._data(a[s],e+"queueHooks"),i&&i.empty&&(r++,i.empty.add(c));return c(),o.promise(n)}});var Mt,Dt,It=/[\t\r\n\f]/g,Et=/\r/g,Lt=/^(?:input|select|textarea|button|object)$/i,Ht=/^(?:a|area)$/i,zt=/^(?:checked|selected)$/i,Nt=ut.support.getSetAttribute,Ot=ut.support.input;ut.fn.extend({attr:function(e,t){return ut.access(this,ut.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ut.removeAttr(this,e)})},prop:function(e,t){return ut.access(this,ut.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ut.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,i,r,o,a=0,s=this.length,c="string"==typeof e&&e;if(ut.isFunction(e))return this.each(function(t){ut(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(ft)||[];s>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(It," "):" ")){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");n.className=ut.trim(i)}return this},removeClass:function(e){var t,n,i,r,o,a=0,s=this.length,c=0===arguments.length||"string"==typeof e&&e;if(ut.isFunction(e))return this.each(function(t){ut(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(ft)||[];s>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(It," "):"")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");n.className=e?ut.trim(i):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ut.isFunction(e)?this.each(function(n){ut(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,i=0,r=ut(this),o=e.match(ft)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===X||"boolean"===n)&&(this.className&&ut._data(this,"__className__",this.className),this.className=this.className||e===!1?"":ut._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(It," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,i,r,o=this[0];{if(arguments.length)return r=ut.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=r?e.call(this,n,ut(this).val()):e,null==o?o="":"number"==typeof o?o+="":ut.isArray(o)&&(o=ut.map(o,function(e){return null==e?"":e+""})),i=ut.valHooks[this.type]||ut.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,o,"value")!==t||(this.value=o))});if(o)return i=ut.valHooks[o.type]||ut.valHooks[o.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(Et,""):null==n?"":n)}}}),ut.extend({valHooks:{option:{get:function(e){var t=ut.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,a=o?null:[],s=o?r+1:i.length,c=0>r?s:o?r:0;s>c;c++)if(n=i[c],!(!n.selected&&c!==r||(ut.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&ut.nodeName(n.parentNode,"optgroup"))){if(t=ut(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,o=ut.makeArray(t),a=r.length;a--;)i=r[a],(i.selected=ut.inArray(ut(i).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,n,i){var r,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===X?ut.prop(e,n,i):(1===a&&ut.isXMLDoc(e)||(n=n.toLowerCase(),r=ut.attrHooks[n]||(ut.expr.match.bool.test(n)?Dt:Mt)),i===t?r&&"get"in r&&null!==(o=r.get(e,n))?o:(o=ut.find.attr(e,n),null==o?t:o):null!==i?r&&"set"in r&&(o=r.set(e,i,n))!==t?o:(e.setAttribute(n,i+""),i):(ut.removeAttr(e,n),void 0))},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(ft);if(o&&1===e.nodeType)for(;n=o[r++];)i=ut.propFix[n]||n,ut.expr.match.bool.test(n)?Ot&&Nt||!zt.test(n)?e[i]=!1:e[ut.camelCase("default-"+n)]=e[i]=!1:ut.attr(e,n,""),e.removeAttribute(Nt?n:i)},attrHooks:{type:{set:function(e,t){if(!ut.support.radioValue&&"radio"===t&&ut.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,i){var r,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!ut.isXMLDoc(e),a&&(n=ut.propFix[n]||n,o=ut.propHooks[n]),i!==t?o&&"set"in o&&(r=o.set(e,i,n))!==t?r:e[n]=i:o&&"get"in o&&null!==(r=o.get(e,n))?r:e[n]},propHooks:{tabIndex:{get:function(e){var t=ut.find.attr(e,"tabindex");return t?parseInt(t,10):Lt.test(e.nodeName)||Ht.test(e.nodeName)&&e.href?0:-1}}}}),Dt={set:function(e,t,n){return t===!1?ut.removeAttr(e,n):Ot&&Nt||!zt.test(n)?e.setAttribute(!Nt&&ut.propFix[n]||n,n):e[ut.camelCase("default-"+n)]=e[n]=!0,n}},ut.each(ut.expr.match.bool.source.match(/\w+/g),function(e,n){var i=ut.expr.attrHandle[n]||ut.find.attr;ut.expr.attrHandle[n]=Ot&&Nt||!zt.test(n)?function(e,n,r){var o=ut.expr.attrHandle[n],a=r?t:(ut.expr.attrHandle[n]=t)!=i(e,n,r)?n.toLowerCase():null;return ut.expr.attrHandle[n]=o,a}:function(e,n,i){return i?t:e[ut.camelCase("default-"+n)]?n.toLowerCase():null}}),Ot&&Nt||(ut.attrHooks.value={set:function(e,t,n){return ut.nodeName(e,"input")?(e.defaultValue=t,void 0):Mt&&Mt.set(e,t,n)}}),Nt||(Mt={set:function(e,n,i){var r=e.getAttributeNode(i);return r||e.setAttributeNode(r=e.ownerDocument.createAttribute(i)),r.value=n+="","value"===i||n===e.getAttribute(i)?n:t}},ut.expr.attrHandle.id=ut.expr.attrHandle.name=ut.expr.attrHandle.coords=function(e,n,i){var r;return i?t:(r=e.getAttributeNode(n))&&""!==r.value?r.value:null},ut.valHooks.button={get:function(e,n){var i=e.getAttributeNode(n);return i&&i.specified?i.value:t},set:Mt.set},ut.attrHooks.contenteditable={set:function(e,t,n){Mt.set(e,""===t?!1:t,n)}},ut.each(["width","height"],function(e,t){ut.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),ut.support.hrefNormalized||ut.each(["href","src"],function(e,t){ut.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ut.support.style||(ut.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),ut.support.optSelected||(ut.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ut.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ut.propFix[this.toLowerCase()]=this}),ut.support.enctype||(ut.propFix.enctype="encoding"),ut.each(["radio","checkbox"],function(){ut.valHooks[this]={set:function(e,t){return ut.isArray(t)?e.checked=ut.inArray(ut(e).val(),t)>=0:void 0}},ut.support.checkOn||(ut.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Rt=/^(?:input|select|textarea)$/i,At=/^key/,$t=/^(?:mouse|contextmenu)|click/,jt=/^(?:focusinfocus|focusoutblur)$/,Ut=/^([^.]*)(?:\.(.+)|)$/;ut.event={global:{},add:function(e,n,i,r,o){var a,s,c,l,u,d,f,h,p,m,g,v=ut._data(e);if(v){for(i.handler&&(l=i,i=l.handler,o=l.selector),i.guid||(i.guid=ut.guid++),(s=v.events)||(s=v.events={}),(d=v.handle)||(d=v.handle=function(e){return typeof ut===X||e&&ut.event.triggered===e.type?t:ut.event.dispatch.apply(d.elem,arguments)},d.elem=e),n=(n||"").match(ft)||[""],c=n.length;c--;)a=Ut.exec(n[c])||[],p=g=a[1],m=(a[2]||"").split(".").sort(),p&&(u=ut.event.special[p]||{},p=(o?u.delegateType:u.bindType)||p,u=ut.event.special[p]||{},f=ut.extend({type:p,origType:g,data:r,handler:i,guid:i.guid,selector:o,needsContext:o&&ut.expr.match.needsContext.test(o),namespace:m.join(".")},l),(h=s[p])||(h=s[p]=[],h.delegateCount=0,u.setup&&u.setup.call(e,r,m,d)!==!1||(e.addEventListener?e.addEventListener(p,d,!1):e.attachEvent&&e.attachEvent("on"+p,d))),u.add&&(u.add.call(e,f),f.handler.guid||(f.handler.guid=i.guid)),o?h.splice(h.delegateCount++,0,f):h.push(f),ut.event.global[p]=!0);e=null}},remove:function(e,t,n,i,r){var o,a,s,c,l,u,d,f,h,p,m,g=ut.hasData(e)&&ut._data(e);if(g&&(u=g.events)){for(t=(t||"").match(ft)||[""],l=t.length;l--;)if(s=Ut.exec(t[l])||[],h=m=s[1],p=(s[2]||"").split(".").sort(),h){for(d=ut.event.special[h]||{},h=(i?d.delegateType:d.bindType)||h,f=u[h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=o=f.length;o--;)a=f[o],!r&&m!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,d.remove&&d.remove.call(e,a));c&&!f.length&&(d.teardown&&d.teardown.call(e,p,g.handle)!==!1||ut.removeEvent(e,h,g.handle),delete u[h])}else for(h in u)ut.event.remove(e,h+t[l],n,i,!0);ut.isEmptyObject(u)&&(delete g.handle,ut._removeData(e,"events"))}},trigger:function(n,i,r,o){var a,s,c,l,u,d,f,h=[r||G],p=ct.call(n,"type")?n.type:n,m=ct.call(n,"namespace")?n.namespace.split("."):[];if(c=d=r=r||G,3!==r.nodeType&&8!==r.nodeType&&!jt.test(p+ut.event.triggered)&&(p.indexOf(".")>=0&&(m=p.split("."),p=m.shift(),m.sort()),s=p.indexOf(":")<0&&"on"+p,n=n[ut.expando]?n:new ut.Event(p,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=r),i=null==i?[n]:ut.makeArray(i,[n]),u=ut.event.special[p]||{},o||!u.trigger||u.trigger.apply(r,i)!==!1)){if(!o&&!u.noBubble&&!ut.isWindow(r)){for(l=u.delegateType||p,jt.test(l+p)||(c=c.parentNode);c;c=c.parentNode)h.push(c),d=c;d===(r.ownerDocument||G)&&h.push(d.defaultView||d.parentWindow||e)}for(f=0;(c=h[f++])&&!n.isPropagationStopped();)n.type=f>1?l:u.bindType||p,a=(ut._data(c,"events")||{})[n.type]&&ut._data(c,"handle"),a&&a.apply(c,i),a=s&&c[s],a&&ut.acceptData(c)&&a.apply&&a.apply(c,i)===!1&&n.preventDefault();if(n.type=p,!o&&!n.isDefaultPrevented()&&(!u._default||u._default.apply(h.pop(),i)===!1)&&ut.acceptData(r)&&s&&r[p]&&!ut.isWindow(r)){d=r[s],d&&(r[s]=null),ut.event.triggered=p;try{r[p]()}catch(g){}ut.event.triggered=t,d&&(r[s]=d)}return n.result}},dispatch:function(e){e=ut.event.fix(e);var n,i,r,o,a,s=[],c=ot.call(arguments),l=(ut._data(this,"events")||{})[e.type]||[],u=ut.event.special[e.type]||{};if(c[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(s=ut.event.handlers.call(this,e,l),n=0;(o=s[n++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,a=0;(r=o.handlers[a++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(r.namespace))&&(e.handleObj=r,e.data=r.data,i=((ut.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,c),i!==t&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,n){var i,r,o,a,s=[],c=n.delegateCount,l=e.target;if(c&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(o=[],a=0;c>a;a++)r=n[a],i=r.selector+" ",o[i]===t&&(o[i]=r.needsContext?ut(i,this).index(l)>=0:ut.find(i,this,null,[l]).length),o[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return c<n.length&&s.push({elem:this,handlers:n.slice(c)}),s},fix:function(e){if(e[ut.expando])return e;var t,n,i,r=e.type,o=e,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=$t.test(r)?this.mouseHooks:At.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new ut.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=o.srcElement||G),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,r,o,a=n.button,s=n.fromElement;return null==e.pageX&&null!=n.clientX&&(r=e.target.ownerDocument||G,o=r.documentElement,i=r.body,e.pageX=n.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?n.toElement:s),e.which||a===t||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==u()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ut.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return ut.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=ut.extend(new ut.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?ut.event.trigger(r,null,t):ut.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},ut.removeEvent=G.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===X&&(e[i]=null),e.detachEvent(i,n))},ut.Event=function(e,t){return this instanceof ut.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?c:l):this.type=e,t&&ut.extend(this,t),this.timeStamp=e&&e.timeStamp||ut.now(),this[ut.expando]=!0,void 0):new ut.Event(e,t)},ut.Event.prototype={isDefaultPrevented:l,isPropagationStopped:l,isImmediatePropagationStopped:l,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=c,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=c,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=c,this.stopPropagation()}},ut.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){ut.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==i&&!ut.contains(i,r))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),ut.support.submitBubbles||(ut.event.special.submit={setup:function(){return ut.nodeName(this,"form")?!1:(ut.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,i=ut.nodeName(n,"input")||ut.nodeName(n,"button")?n.form:t;i&&!ut._data(i,"submitBubbles")&&(ut.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),ut._data(i,"submitBubbles",!0))}),void 0)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ut.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return ut.nodeName(this,"form")?!1:(ut.event.remove(this,"._submit"),void 0)}}),ut.support.changeBubbles||(ut.event.special.change={setup:function(){return Rt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ut.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ut.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ut.event.simulate("change",this,e,!0)})),!1):(ut.event.add(this,"beforeactivate._change",function(e){var t=e.target;Rt.test(t.nodeName)&&!ut._data(t,"changeBubbles")&&(ut.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ut.event.simulate("change",this.parentNode,e,!0)}),ut._data(t,"changeBubbles",!0))}),void 0)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ut.event.remove(this,"._change"),!Rt.test(this.nodeName)}}),ut.support.focusinBubbles||ut.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){ut.event.simulate(t,e.target,ut.event.fix(e),!0)};ut.event.special[t]={setup:function(){0===n++&&G.addEventListener(e,i,!0)},teardown:function(){0===--n&&G.removeEventListener(e,i,!0)}}}),ut.fn.extend({on:function(e,n,i,r,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(a in e)this.on(a,n,i,e[a],o);return this}if(null==i&&null==r?(r=n,i=n=t):null==r&&("string"==typeof n?(r=i,i=t):(r=i,i=n,n=t)),r===!1)r=l;else if(!r)return this;return 1===o&&(s=r,r=function(e){return ut().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=ut.guid++)),this.each(function(){ut.event.add(this,e,r,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ut(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=l),this.each(function(){ut.event.remove(this,e,i,n)})},trigger:function(e,t){return this.each(function(){ut.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?ut.event.trigger(e,t,n,!0):void 0}});var Bt=/^.[^:#\[\.,]*$/,Ft=/^(?:parents|prev(?:Until|All))/,Wt=ut.expr.match.needsContext,qt={children:!0,contents:!0,next:!0,prev:!0};ut.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(ut(e).filter(function(){for(t=0;r>t;t++)if(ut.contains(i[t],this))return!0}));for(t=0;r>t;t++)ut.find(e,i[t],n);return n=this.pushStack(r>1?ut.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=ut(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(ut.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(f(this,e||[],!0))},filter:function(e){return this.pushStack(f(this,e||[],!1))},is:function(e){return!!f(this,"string"==typeof e&&Wt.test(e)?ut(e):e||[],!1).length},closest:function(e,t){for(var n,i=0,r=this.length,o=[],a=Wt.test(e)||"string"!=typeof e?ut(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&ut.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?ut.unique(o):o)},index:function(e){return e?"string"==typeof e?ut.inArray(this[0],ut(e)):ut.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?ut(e,t):ut.makeArray(e&&e.nodeType?[e]:e),i=ut.merge(this.get(),n);return this.pushStack(ut.unique(i))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ut.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ut.dir(e,"parentNode")},parentsUntil:function(e,t,n){return ut.dir(e,"parentNode",n)},next:function(e){return d(e,"nextSibling")},prev:function(e){return d(e,"previousSibling")},nextAll:function(e){return ut.dir(e,"nextSibling")},prevAll:function(e){return ut.dir(e,"previousSibling")},nextUntil:function(e,t,n){return ut.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return ut.dir(e,"previousSibling",n)},siblings:function(e){return ut.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ut.sibling(e.firstChild)},contents:function(e){return ut.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ut.merge([],e.childNodes)}},function(e,t){ut.fn[e]=function(n,i){var r=ut.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=ut.filter(i,r)),this.length>1&&(qt[e]||(r=ut.unique(r)),Ft.test(e)&&(r=r.reverse())),this.pushStack(r)}}),ut.extend({filter:function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?ut.find.matchesSelector(i,e)?[i]:[]:ut.find.matches(e,ut.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,i){for(var r=[],o=e[n];o&&9!==o.nodeType&&(i===t||1!==o.nodeType||!ut(o).is(i));)1===o.nodeType&&r.push(o),o=o[n];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Vt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Yt=/ jQuery\d+="(?:null|\d+)"/g,Xt=new RegExp("<(?:"+Vt+")[\\s/>]","i"),Jt=/^\s+/,Gt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Kt=/<([\w:]+)/,Qt=/<tbody/i,Zt=/<|&#?\w+;/,en=/<(?:script|style|link)/i,tn=/^(?:checkbox|radio)$/i,nn=/checked\s*(?:[^=]|=\s*.checked.)/i,rn=/^$|\/(?:java|ecma)script/i,on=/^true\/(.*)/,an=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,sn={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ut.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},cn=h(G),ln=cn.appendChild(G.createElement("div"));sn.optgroup=sn.option,sn.tbody=sn.tfoot=sn.colgroup=sn.caption=sn.thead,sn.th=sn.td,ut.fn.extend({text:function(e){return ut.access(this,function(e){return e===t?ut.text(this):this.empty().append((this[0]&&this[0].ownerDocument||G).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?ut.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||ut.cleanData(_(n)),n.parentNode&&(t&&ut.contains(n.ownerDocument,n)&&v(_(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ut.cleanData(_(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ut.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ut.clone(this,e,t)})},html:function(e){return ut.access(this,function(e){var n=this[0]||{},i=0,r=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(Yt,""):t;if(!("string"!=typeof e||en.test(e)||!ut.support.htmlSerialize&&Xt.test(e)||!ut.support.leadingWhitespace&&Jt.test(e)||sn[(Kt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Gt,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(ut.cleanData(_(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=ut.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var i=e[t++],r=e[t++];r&&(i&&i.parentNode!==r&&(i=this.nextSibling),ut(this).remove(),r.insertBefore(n,i))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=it.apply([],e);var i,r,o,a,s,c,l=0,u=this.length,d=this,f=u-1,h=e[0],p=ut.isFunction(h);if(p||!(1>=u||"string"!=typeof h||ut.support.checkClone)&&nn.test(h))return this.each(function(i){var r=d.eq(i);p&&(e[0]=h.call(this,i,r.html())),r.domManip(e,t,n)});if(u&&(c=ut.buildFragment(e,this[0].ownerDocument,!1,!n&&this),i=c.firstChild,1===c.childNodes.length&&(c=i),i)){for(a=ut.map(_(c,"script"),m),o=a.length;u>l;l++)r=c,l!==f&&(r=ut.clone(r,!0,!0),o&&ut.merge(a,_(r,"script"))),t.call(this[l],r,l);if(o)for(s=a[a.length-1].ownerDocument,ut.map(a,g),l=0;o>l;l++)r=a[l],rn.test(r.type||"")&&!ut._data(r,"globalEval")&&ut.contains(s,r)&&(r.src?ut._evalUrl(r.src):ut.globalEval((r.text||r.textContent||r.innerHTML||"").replace(an,"")));c=i=null}return this}}),ut.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ut.fn[e]=function(e){for(var n,i=0,r=[],o=ut(e),a=o.length-1;a>=i;i++)n=i===a?this:this.clone(!0),ut(o[i])[t](n),rt.apply(r,n.get());return this.pushStack(r)}}),ut.extend({clone:function(e,t,n){var i,r,o,a,s,c=ut.contains(e.ownerDocument,e);if(ut.support.html5Clone||ut.isXMLDoc(e)||!Xt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(ln.innerHTML=e.outerHTML,ln.removeChild(o=ln.firstChild)),!(ut.support.noCloneEvent&&ut.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ut.isXMLDoc(e)))for(i=_(o),s=_(e),a=0;null!=(r=s[a]);++a)i[a]&&b(r,i[a]);if(t)if(n)for(s=s||_(e),i=i||_(o),a=0;null!=(r=s[a]);a++)y(r,i[a]);else y(e,o);return i=_(o,"script"),i.length>0&&v(i,!c&&_(e,"script")),i=s=r=null,o},buildFragment:function(e,t,n,i){for(var r,o,a,s,c,l,u,d=e.length,f=h(t),p=[],m=0;d>m;m++)if(o=e[m],o||0===o)if("object"===ut.type(o))ut.merge(p,o.nodeType?[o]:o);else if(Zt.test(o)){for(s=s||f.appendChild(t.createElement("div")),c=(Kt.exec(o)||["",""])[1].toLowerCase(),u=sn[c]||sn._default,s.innerHTML=u[1]+o.replace(Gt,"<$1></$2>")+u[2],r=u[0];r--;)s=s.lastChild;if(!ut.support.leadingWhitespace&&Jt.test(o)&&p.push(t.createTextNode(Jt.exec(o)[0])),!ut.support.tbody)for(o="table"!==c||Qt.test(o)?"<table>"!==u[1]||Qt.test(o)?0:s:s.firstChild,r=o&&o.childNodes.length;r--;)ut.nodeName(l=o.childNodes[r],"tbody")&&!l.childNodes.length&&o.removeChild(l);for(ut.merge(p,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else p.push(t.createTextNode(o));for(s&&f.removeChild(s),ut.support.appendChecked||ut.grep(_(p,"input"),w),m=0;o=p[m++];)if((!i||-1===ut.inArray(o,i))&&(a=ut.contains(o.ownerDocument,o),s=_(f.appendChild(o),"script"),a&&v(s),n))for(r=0;o=s[r++];)rn.test(o.type||"")&&n.push(o);return s=null,f},cleanData:function(e,t){for(var n,i,r,o,a=0,s=ut.expando,c=ut.cache,l=ut.support.deleteExpando,u=ut.event.special;null!=(n=e[a]);a++)if((t||ut.acceptData(n))&&(r=n[s],o=r&&c[r])){if(o.events)for(i in o.events)u[i]?ut.event.remove(n,i):ut.removeEvent(n,i,o.handle);c[r]&&(delete c[r],l?delete n[s]:typeof n.removeAttribute!==X?n.removeAttribute(s):n[s]=null,tt.push(r))}},_evalUrl:function(e){return ut.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),ut.fn.extend({wrapAll:function(e){if(ut.isFunction(e))return this.each(function(t){ut(this).wrapAll(e.call(this,t))});if(this[0]){var t=ut(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return ut.isFunction(e)?this.each(function(t){ut(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ut(this),n=t.contents();
n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ut.isFunction(e);return this.each(function(n){ut(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ut.nodeName(this,"body")||ut(this).replaceWith(this.childNodes)}).end()}});var un,dn,fn,hn=/alpha\([^)]*\)/i,pn=/opacity\s*=\s*([^)]*)/,mn=/^(top|right|bottom|left)$/,gn=/^(none|table(?!-c[ea]).+)/,vn=/^margin/,yn=new RegExp("^("+dt+")(.*)$","i"),bn=new RegExp("^("+dt+")(?!px)[a-z%]+$","i"),_n=new RegExp("^([+-])=("+dt+")","i"),wn={BODY:"block"},kn={position:"absolute",visibility:"hidden",display:"block"},Sn={letterSpacing:0,fontWeight:400},Tn=["Top","Right","Bottom","Left"],Cn=["Webkit","O","Moz","ms"];ut.fn.extend({css:function(e,n){return ut.access(this,function(e,n,i){var r,o,a={},s=0;if(ut.isArray(n)){for(o=dn(e),r=n.length;r>s;s++)a[n[s]]=ut.css(e,n[s],!1,o);return a}return i!==t?ut.style(e,n,i):ut.css(e,n)},e,n,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){S(this)?ut(this).show():ut(this).hide()})}}),ut.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=fn(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ut.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,c=ut.camelCase(n),l=e.style;if(n=ut.cssProps[c]||(ut.cssProps[c]=k(l,c)),s=ut.cssHooks[n]||ut.cssHooks[c],i===t)return s&&"get"in s&&(o=s.get(e,!1,r))!==t?o:l[n];if(a=typeof i,"string"===a&&(o=_n.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(ut.css(e,n)),a="number"),!(null==i||"number"===a&&isNaN(i)||("number"!==a||ut.cssNumber[c]||(i+="px"),ut.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(l[n]="inherit"),s&&"set"in s&&(i=s.set(e,i,r))===t)))try{l[n]=i}catch(u){}}},css:function(e,n,i,r){var o,a,s,c=ut.camelCase(n);return n=ut.cssProps[c]||(ut.cssProps[c]=k(e.style,c)),s=ut.cssHooks[n]||ut.cssHooks[c],s&&"get"in s&&(a=s.get(e,!0,i)),a===t&&(a=fn(e,n,r)),"normal"===a&&n in Sn&&(a=Sn[n]),""===i||i?(o=parseFloat(a),i===!0||ut.isNumeric(o)?o||0:a):a}}),e.getComputedStyle?(dn=function(t){return e.getComputedStyle(t,null)},fn=function(e,n,i){var r,o,a,s=i||dn(e),c=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(""!==c||ut.contains(e.ownerDocument,e)||(c=ut.style(e,n)),bn.test(c)&&vn.test(n)&&(r=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=c,c=s.width,l.width=r,l.minWidth=o,l.maxWidth=a)),c}):G.documentElement.currentStyle&&(dn=function(e){return e.currentStyle},fn=function(e,n,i){var r,o,a,s=i||dn(e),c=s?s[n]:t,l=e.style;return null==c&&l&&l[n]&&(c=l[n]),bn.test(c)&&!mn.test(n)&&(r=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left="fontSize"===n?"1em":c,c=l.pixelLeft+"px",l.left=r,a&&(o.left=a)),""===c?"auto":c}),ut.each(["height","width"],function(e,t){ut.cssHooks[t]={get:function(e,n,i){return n?0===e.offsetWidth&&gn.test(ut.css(e,"display"))?ut.swap(e,kn,function(){return P(e,t,i)}):P(e,t,i):void 0},set:function(e,n,i){var r=i&&dn(e);return C(e,n,i?x(e,t,i,ut.support.boxSizing&&"border-box"===ut.css(e,"boxSizing",!1,r),r):0)}}}),ut.support.opacity||(ut.cssHooks.opacity={get:function(e,t){return pn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=ut.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===ut.trim(o.replace(hn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=hn.test(o)?o.replace(hn,r):o+" "+r)}}),ut(function(){ut.support.reliableMarginRight||(ut.cssHooks.marginRight={get:function(e,t){return t?ut.swap(e,{display:"inline-block"},fn,[e,"marginRight"]):void 0}}),!ut.support.pixelPosition&&ut.fn.position&&ut.each(["top","left"],function(e,t){ut.cssHooks[t]={get:function(e,n){return n?(n=fn(e,t),bn.test(n)?ut(e).position()[t]+"px":n):void 0}}})}),ut.expr&&ut.expr.filters&&(ut.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ut.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||ut.css(e,"display"))},ut.expr.filters.visible=function(e){return!ut.expr.filters.hidden(e)}),ut.each({margin:"",padding:"",border:"Width"},function(e,t){ut.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+Tn[i]+t]=o[i]||o[i-2]||o[0];return r}},vn.test(e)||(ut.cssHooks[e+t].set=C)});var xn=/%20/g,Pn=/\[\]$/,Mn=/\r?\n/g,Dn=/^(?:submit|button|image|reset|file)$/i,In=/^(?:input|select|textarea|keygen)/i;ut.fn.extend({serialize:function(){return ut.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ut.prop(this,"elements");return e?ut.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ut(this).is(":disabled")&&In.test(this.nodeName)&&!Dn.test(e)&&(this.checked||!tn.test(e))}).map(function(e,t){var n=ut(this).val();return null==n?null:ut.isArray(n)?ut.map(n,function(e){return{name:t.name,value:e.replace(Mn,"\r\n")}}):{name:t.name,value:n.replace(Mn,"\r\n")}}).get()}}),ut.param=function(e,n){var i,r=[],o=function(e,t){t=ut.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=ut.ajaxSettings&&ut.ajaxSettings.traditional),ut.isArray(e)||e.jquery&&!ut.isPlainObject(e))ut.each(e,function(){o(this.name,this.value)});else for(i in e)I(i,e[i],n,o);return r.join("&").replace(xn,"+")},ut.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ut.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ut.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var En,Ln,Hn=ut.now(),zn=/\?/,Nn=/#.*$/,On=/([?&])_=[^&]*/,Rn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,An=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,$n=/^(?:GET|HEAD)$/,jn=/^\/\//,Un=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Bn=ut.fn.load,Fn={},Wn={},qn="*/".concat("*");try{Ln=J.href}catch(Vn){Ln=G.createElement("a"),Ln.href="",Ln=Ln.href}En=Un.exec(Ln.toLowerCase())||[],ut.fn.load=function(e,n,i){if("string"!=typeof e&&Bn)return Bn.apply(this,arguments);var r,o,a,s=this,c=e.indexOf(" ");return c>=0&&(r=e.slice(c,e.length),e=e.slice(0,c)),ut.isFunction(n)?(i=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&ut.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,s.html(r?ut("<div>").append(ut.parseHTML(e)).find(r):e)}).complete(i&&function(e,t){s.each(i,o||[e.responseText,t,e])}),this},ut.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ut.fn[t]=function(e){return this.on(t,e)}}),ut.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ln,type:"GET",isLocal:An.test(En[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ut.parseJSON,"text xml":ut.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?H(H(e,ut.ajaxSettings),t):H(ut.ajaxSettings,e)},ajaxPrefilter:E(Fn),ajaxTransport:E(Wn),ajax:function(e,n){function i(e,n,i,r){var o,d,y,b,w,S=n;2!==_&&(_=2,c&&clearTimeout(c),u=t,s=r||"",k.readyState=e>0?4:0,o=e>=200&&300>e||304===e,i&&(b=z(f,k,i)),b=N(f,b,k,o),o?(f.ifModified&&(w=k.getResponseHeader("Last-Modified"),w&&(ut.lastModified[a]=w),w=k.getResponseHeader("etag"),w&&(ut.etag[a]=w)),204===e||"HEAD"===f.type?S="nocontent":304===e?S="notmodified":(S=b.state,d=b.data,y=b.error,o=!y)):(y=S,(e||!S)&&(S="error",0>e&&(e=0))),k.status=e,k.statusText=(n||S)+"",o?m.resolveWith(h,[d,S,k]):m.rejectWith(h,[k,S,y]),k.statusCode(v),v=t,l&&p.trigger(o?"ajaxSuccess":"ajaxError",[k,f,o?d:y]),g.fireWith(h,[k,S]),l&&(p.trigger("ajaxComplete",[k,f]),--ut.active||ut.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,o,a,s,c,l,u,d,f=ut.ajaxSetup({},n),h=f.context||f,p=f.context&&(h.nodeType||h.jquery)?ut(h):ut.event,m=ut.Deferred(),g=ut.Callbacks("once memory"),v=f.statusCode||{},y={},b={},_=0,w="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!d)for(d={};t=Rn.exec(s);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return _||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return _||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>_)for(t in e)v[t]=[v[t],e[t]];else k.always(e[k.status]);return this},abort:function(e){var t=e||w;return u&&u.abort(t),i(0,t),this}};if(m.promise(k).complete=g.add,k.success=k.done,k.error=k.fail,f.url=((e||f.url||Ln)+"").replace(Nn,"").replace(jn,En[1]+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=ut.trim(f.dataType||"*").toLowerCase().match(ft)||[""],null==f.crossDomain&&(r=Un.exec(f.url.toLowerCase()),f.crossDomain=!(!r||r[1]===En[1]&&r[2]===En[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(En[3]||("http:"===En[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=ut.param(f.data,f.traditional)),L(Fn,f,n,k),2===_)return k;l=f.global,l&&0===ut.active++&&ut.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!$n.test(f.type),a=f.url,f.hasContent||(f.data&&(a=f.url+=(zn.test(a)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=On.test(a)?a.replace(On,"$1_="+Hn++):a+(zn.test(a)?"&":"?")+"_="+Hn++)),f.ifModified&&(ut.lastModified[a]&&k.setRequestHeader("If-Modified-Since",ut.lastModified[a]),ut.etag[a]&&k.setRequestHeader("If-None-Match",ut.etag[a])),(f.data&&f.hasContent&&f.contentType!==!1||n.contentType)&&k.setRequestHeader("Content-Type",f.contentType),k.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+qn+"; q=0.01":""):f.accepts["*"]);for(o in f.headers)k.setRequestHeader(o,f.headers[o]);if(f.beforeSend&&(f.beforeSend.call(h,k,f)===!1||2===_))return k.abort();w="abort";for(o in{success:1,error:1,complete:1})k[o](f[o]);if(u=L(Wn,f,n,k)){k.readyState=1,l&&p.trigger("ajaxSend",[k,f]),f.async&&f.timeout>0&&(c=setTimeout(function(){k.abort("timeout")},f.timeout));try{_=1,u.send(y,i)}catch(S){if(!(2>_))throw S;i(-1,S)}}else i(-1,"No Transport");return k},getJSON:function(e,t,n){return ut.get(e,t,n,"json")},getScript:function(e,n){return ut.get(e,t,n,"script")}}),ut.each(["get","post"],function(e,n){ut[n]=function(e,i,r,o){return ut.isFunction(i)&&(o=o||r,r=i,i=t),ut.ajax({url:e,type:n,dataType:o,data:i,success:r})}}),ut.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ut.globalEval(e),e}}}),ut.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ut.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=G.head||ut("head")[0]||G.documentElement;return{send:function(t,r){n=G.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||r(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Yn=[],Xn=/(=)\?(?=&|$)|\?\?/;ut.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yn.pop()||ut.expando+"_"+Hn++;return this[e]=!0,e}}),ut.ajaxPrefilter("json jsonp",function(n,i,r){var o,a,s,c=n.jsonp!==!1&&(Xn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Xn.test(n.data)&&"data");return c||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=ut.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,c?n[c]=n[c].replace(Xn,"$1"+o):n.jsonp!==!1&&(n.url+=(zn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||ut.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},r.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=i.jsonpCallback,Yn.push(o)),s&&ut.isFunction(a)&&a(s[0]),s=a=t}),"script"):void 0});var Jn,Gn,Kn=0,Qn=e.ActiveXObject&&function(){var e;for(e in Jn)Jn[e](t,!0)};ut.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&O()||R()}:O,Gn=ut.ajaxSettings.xhr(),ut.support.cors=!!Gn&&"withCredentials"in Gn,Gn=ut.support.ajax=!!Gn,Gn&&ut.ajaxTransport(function(n){if(!n.crossDomain||ut.support.cors){var i;return{send:function(r,o){var a,s,c=n.xhr();if(n.username?c.open(n.type,n.url,n.async,n.username,n.password):c.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)c[s]=n.xhrFields[s];n.mimeType&&c.overrideMimeType&&c.overrideMimeType(n.mimeType),n.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");try{for(s in r)c.setRequestHeader(s,r[s])}catch(l){}c.send(n.hasContent&&n.data||null),i=function(e,r){var s,l,u,d;try{if(i&&(r||4===c.readyState))if(i=t,a&&(c.onreadystatechange=ut.noop,Qn&&delete Jn[a]),r)4!==c.readyState&&c.abort();else{d={},s=c.status,l=c.getAllResponseHeaders(),"string"==typeof c.responseText&&(d.text=c.responseText);try{u=c.statusText}catch(f){u=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=d.text?200:404}}catch(h){r||o(-1,h)}d&&o(s,u,d,l)},n.async?4===c.readyState?setTimeout(i):(a=++Kn,Qn&&(Jn||(Jn={},ut(e).unload(Qn)),Jn[a]=i),c.onreadystatechange=i):i()},abort:function(){i&&i(t,!0)}}}});var Zn,ei,ti=/^(?:toggle|show|hide)$/,ni=new RegExp("^(?:([+-])=|)("+dt+")([a-z%]*)$","i"),ii=/queueHooks$/,ri=[B],oi={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=ni.exec(t),o=r&&r[3]||(ut.cssNumber[e]?"":"px"),a=(ut.cssNumber[e]||"px"!==o&&+i)&&ni.exec(ut.css(n.elem,e)),s=1,c=20;if(a&&a[3]!==o){o=o||a[3],r=r||[],a=+i||1;do s=s||".5",a/=s,ut.style(n.elem,e,a+o);while(s!==(s=n.cur()/i)&&1!==s&&--c)}return r&&(a=n.start=+a||+i||0,n.unit=o,n.end=r[1]?a+(r[1]+1)*r[2]:+r[2]),n}]};ut.Animation=ut.extend(j,{tweener:function(e,t){ut.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],oi[n]=oi[n]||[],oi[n].unshift(t)},prefilter:function(e,t){t?ri.unshift(e):ri.push(e)}}),ut.Tween=F,F.prototype={constructor:F,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(ut.cssNumber[n]?"":"px")},cur:function(){var e=F.propHooks[this.prop];return e&&e.get?e.get(this):F.propHooks._default.get(this)},run:function(e){var t,n=F.propHooks[this.prop];return this.pos=t=this.options.duration?ut.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):F.propHooks._default.set(this),this}},F.prototype.init.prototype=F.prototype,F.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ut.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ut.fx.step[e.prop]?ut.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ut.cssProps[e.prop]]||ut.cssHooks[e.prop])?ut.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},F.propHooks.scrollTop=F.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ut.each(["toggle","show","hide"],function(e,t){var n=ut.fn[t];ut.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(W(t,!0),e,i,r)}}),ut.fn.extend({fadeTo:function(e,t,n,i){return this.filter(S).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=ut.isEmptyObject(e),o=ut.speed(t,n,i),a=function(){var t=j(this,ut.extend({},e),o);(r||ut._data(this,"finish"))&&t.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,i){var r=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=ut.timers,a=ut._data(this);if(n)a[n]&&a[n].stop&&r(a[n]);else for(n in a)a[n]&&a[n].stop&&ii.test(n)&&r(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(i),t=!1,o.splice(n,1));(t||!i)&&ut.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ut._data(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=ut.timers,a=i?i.length:0;for(n.finish=!0,ut.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),ut.each({slideDown:W("show"),slideUp:W("hide"),slideToggle:W("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ut.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),ut.speed=function(e,t,n){var i=e&&"object"==typeof e?ut.extend({},e):{complete:n||!n&&t||ut.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ut.isFunction(t)&&t};return i.duration=ut.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in ut.fx.speeds?ut.fx.speeds[i.duration]:ut.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){ut.isFunction(i.old)&&i.old.call(this),i.queue&&ut.dequeue(this,i.queue)},i},ut.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ut.timers=[],ut.fx=F.prototype.init,ut.fx.tick=function(){var e,n=ut.timers,i=0;for(Zn=ut.now();i<n.length;i++)e=n[i],e()||n[i]!==e||n.splice(i--,1);n.length||ut.fx.stop(),Zn=t},ut.fx.timer=function(e){e()&&ut.timers.push(e)&&ut.fx.start()},ut.fx.interval=13,ut.fx.start=function(){ei||(ei=setInterval(ut.fx.tick,ut.fx.interval))},ut.fx.stop=function(){clearInterval(ei),ei=null},ut.fx.speeds={slow:600,fast:200,_default:400},ut.fx.step={},ut.expr&&ut.expr.filters&&(ut.expr.filters.animated=function(e){return ut.grep(ut.timers,function(t){return e===t.elem}).length}),ut.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){ut.offset.setOffset(this,e,t)});var n,i,r={top:0,left:0},o=this[0],a=o&&o.ownerDocument;if(a)return n=a.documentElement,ut.contains(n,o)?(typeof o.getBoundingClientRect!==X&&(r=o.getBoundingClientRect()),i=q(a),{top:r.top+(i.pageYOffset||n.scrollTop)-(n.clientTop||0),left:r.left+(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):r},ut.offset={setOffset:function(e,t,n){var i=ut.css(e,"position");"static"===i&&(e.style.position="relative");var r,o,a=ut(e),s=a.offset(),c=ut.css(e,"top"),l=ut.css(e,"left"),u=("absolute"===i||"fixed"===i)&&ut.inArray("auto",[c,l])>-1,d={},f={};u?(f=a.position(),r=f.top,o=f.left):(r=parseFloat(c)||0,o=parseFloat(l)||0),ut.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(d.top=t.top-s.top+r),null!=t.left&&(d.left=t.left-s.left+o),"using"in t?t.using.call(e,d):a.css(d)}},ut.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===ut.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ut.nodeName(e[0],"html")||(n=e.offset()),n.top+=ut.css(e[0],"borderTopWidth",!0),n.left+=ut.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-ut.css(i,"marginTop",!0),left:t.left-n.left-ut.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||K;e&&!ut.nodeName(e,"html")&&"static"===ut.css(e,"position");)e=e.offsetParent;return e||K})}}),ut.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i=/Y/.test(n);ut.fn[e]=function(r){return ut.access(this,function(e,r,o){var a=q(e);return o===t?a?n in a?a[n]:a.document.documentElement[r]:e[r]:(a?a.scrollTo(i?ut(a).scrollLeft():o,i?o:ut(a).scrollTop()):e[r]=o,void 0)},e,r,arguments.length,null)}}),ut.each({Height:"height",Width:"width"},function(e,n){ut.each({padding:"inner"+e,content:n,"":"outer"+e},function(i,r){ut.fn[r]=function(r,o){var a=arguments.length&&(i||"boolean"!=typeof r),s=i||(r===!0||o===!0?"margin":"border");return ut.access(this,function(n,i,r){var o;return ut.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):r===t?ut.css(n,i,s):ut.style(n,i,r,s)},n,a?r:t,a,null)}})}),ut.fn.size=function(){return this.length},ut.fn.andSelf=ut.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=ut:(e.jQuery=e.$=ut,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ut}))}(window)}).call(this),function(){e=t=window.jQuery.noConflict()}.call(this),"undefined"==typeof Package&&(Package={}),Package.jquery={$:e,jQuery:t}}(),function(){{var e=Package.meteor.Meteor,t=Package.jquery.$;Package.jquery.jQuery}(function(){if(window.localStorage)e._localStorage={getItem:function(e){return window.localStorage.getItem(e)},setItem:function(e,t){window.localStorage.setItem(e,t)},removeItem:function(e){window.localStorage.removeItem(e)}};else if(t.browser.msie){var n=document.createElement("span");n.style.behavior='url("#default#userData")',n.id="localstorage-helper",n.style.display="none",document.getElementsByTagName("head")[0].appendChild(n);var i="localStorage";n.load(i),e._localStorage={setItem:function(e,t){n.setAttribute(e,t),n.save(i)},removeItem:function(e){n.removeAttribute(e),n.save(i)},getItem:function(e){return n.load(i),n.getAttribute(e)}}}else e._debug("You are running a browser with no localStorage or userData support. Logging in from one tab will not cause another tab to be logged in."),e._localStorage={_data:{},setItem:function(e,t){this._data[e]=t},removeItem:function(e){delete this._data[e]},getItem:function(e){var t=this._data[e];return void 0===t?null:t}}}).call(this),"undefined"==typeof Package&&(Package={}),Package.localstorage={}}(),function(){var e,t=Package.meteor.Meteor;(function(){"undefined"==typeof e&&(e={}),e.configurations=new t.Collection("meteor_accounts_loginServiceConfiguration",{_preventAutopublish:!0}),e.ConfigError=function(e){this.message=e},e.ConfigError.prototype=new Error,e.ConfigError.prototype.name="ServiceConfiguration.ConfigError"}).call(this),"undefined"==typeof Package&&(Package={}),Package["service-configuration"]={ServiceConfiguration:e}}(),function(){var e,t=(Package.meteor.Meteor,Package.deps.Deps);(function(){e={observe:function(e,r){var o=null,a=null,s=[],c=t.autorun(function(){var c=e();t.nonreactive(function(){var e;if(a&&(s=_.map(a._fetch(),function(e){return{_id:e._id,item:e}}),a.stop(),a=null),c)if(c instanceof Array)e=_.map(c,function(e){return{_id:e&&e._id||Random.id(),item:e}}),i(s,e,r);else{if(!n(c))throw new Error("Not a recognized sequence type. Currently only arrays, cursors or falsey values accepted.");var t=c;t.rewind(),e=_.map(t.fetch(),function(e){return{_id:e&&e._id,item:e}}),t.rewind(),i(s,e,r);var l=!0;a=t.observe({addedAt:function(e,t,n){l||r.addedAt(e._id,e,t,n)},changed:function(e,t){r.changed(e._id,e,t)},removed:function(e){r.removed(e._id,e)},movedTo:function(e,t,n,i){r.movedTo(e._id,e,t,n,i)}}),l=!1}else e=[],i(s,e,r);o=c,s=e})});return{stop:function(){c.stop(),a&&a.stop()}}},fetch:function(e){if(e){if(e instanceof Array)return e;if(n(e))return e.fetch();throw new Error("Not a recognized sequence type. Currently only arrays, cursors or falsey values accepted.")}return[]}};var n=function(e){var t=Package.minimongo;return!!t&&e instanceof t.LocalCollection.Cursor},i=function(e,t,n){var i=Package.minimongo.LocalCollection._diffQueryOrderedChanges,r=[],o=[],a={},s={};_.each(t,function(e,t){o.push(_.pick(e,"_id")),s[e._id]=t}),_.each(e,function(e,t){r.push(_.pick(e,"_id")),a[e._id]=t}),i(r,o,{addedBefore:function(e,i,r){n.addedAt(e,t[s[e]].item,s[e],r)},movedBefore:function(e,i){n.movedTo(e,t[s[e]].item,a[e],s[e],i)},removed:function(t){n.removed(t,e[a[t]].item)}}),_.each(s,function(i,r){_.has(a,r)&&n.changed(r,t[i].item,e[a[r]].item)})}}).call(this),"undefined"==typeof Package&&(Package={}),Package["observe-sequence"]={ObserveSequence:e}}(),function(){{var e;Package.meteor.Meteor}(function(){e={},e.isNully=function(t){if(null==t)return!0;if(t instanceof Array){for(var n=0;n<t.length;n++)if(!e.isNully(t[n]))return!1;return!0}return!1},e.asciiLowerCase=function(e){return e.replace(/[A-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+32)})},e.escapeData=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;")};var t="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef glyphRef gradientTransform gradientTransform gradientUnits gradientUnits kernelMatrix kernelUnitLength kernelUnitLength kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent specularExponent spreadMethod spreadMethod startOffset stdDeviation stitchTiles surfaceScale surfaceScale systemLanguage tableValues targetX targetY textLength textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),n="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),i=function(n){for(var i=0;i<t.length;i++){var r=t[i];n[e.asciiLowerCase(r)]=r}return n}({}),r=function(t){for(var i=0;i<n.length;i++){var r=n[i];t[e.asciiLowerCase(r)]=r}return t}({});e.properCaseTagName=function(t){var n=e.asciiLowerCase(t);return r.hasOwnProperty(n)?r[n]:n},e.properCaseAttributeName=function(t){var n=e.asciiLowerCase(t);return i.hasOwnProperty(n)?i[n]:n},e.isValidAttributeName=function(e){return/^[:_A-Za-z][:_A-Za-z0-9.\-]*/.test(e)},e.knownElementNames="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol optgroup option p param pre q s samp script select small span strike strong style sub sup table tbody td textarea tfoot th thead title tr tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" "),e.voidElementNames="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),e.knownSVGElementNames="a altGlyph altGlyphDef altGlyphItem animate animateColor animateMotion animateTransform circle clipPath color-profile cursor defs desc ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter font font-face font-face-format font-face-name font-face-src font-face-uri foreignObject g glyph glyphRef hkern image line linearGradient marker mask metadata missing-glyph path pattern polygon polyline radialGradient rect script set stop style svg switch symbol text textPath title tref tspan use view vkern".split(" ");var o={yes:!0},a=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=o;return t},s=a(e.voidElementNames),c=a(e.knownElementNames),l=a(e.knownSVGElementNames);e.isKnownElement=function(t){return c[e.properCaseTagName(t)]===o},e.isVoidElement=function(t){return s[e.properCaseTagName(t)]===o},e.isKnownSVGElement=function(t){return l[e.properCaseTagName(t)]===o}}).call(this),function(){e.Tag=function(e){this.tagName=e,this.attrs=null,this.children=[]},e.evaluate=function(t,n){if(null==t)return t;if("function"==typeof t)return t();if(t instanceof Array){for(var i=[],r=0;r<t.length;r++)i.push(e.evaluate(t[r],n));return i}if("function"==typeof t.instantiate){var o=t.instantiate(n||null),a=o.render();return e.evaluate(a,o)}if(t instanceof e.Tag){for(var s=[],r=0;r<t.children.length;r++)s.push(e.evaluate(t.children[r],n));var c=e.getTag(t.tagName).apply(null,s);c.attrs={};for(var l in t.attrs)c.attrs[l]=e.evaluate(t.attrs[l],n);return c}return t};var t=function(t,n,i){for(var r in n)if("$dynamic"!==r){if(!e.isValidAttributeName(r))throw new Error("Illegal HTML attribute name: "+r);var o=e.evaluate(n[r],i);e.isNully(o)||(t[r]=o)}};e.evaluateDynamicAttributes=function(e,n){if(e&&e.$dynamic instanceof Array){var i={};t(i,e,n);for(var r=e.$dynamic,o=0;o<r.length;o++){var a=r[o];"function"==typeof a&&(a=a()),t(i,a,n)}return i}return e},e.Tag.prototype.evaluateDynamicAttributes=function(t){return e.evaluateDynamicAttributes(this.attrs,t)};var n=function(t){var n=String(t).replace(/^[^a-zA-Z_]|[^a-zA-Z_0-9]/g,"_")||"Tag",r=new Function("_constructTag","var Tag; return (Tag = function "+n+"_Tag(/*arguments*/) { return _constructTag(Tag, this, arguments); });")(i);return r.prototype=new e.Tag(t),r.prototype.constructor=r,r};e.getTag=function(t){return t=t.toUpperCase(),e[t]||(e[t]=n(t)),e[t]},e.ensureTag=function(t){e.getTag(t)};var i=function(t,n,i){n instanceof e.Tag||(n=new t);var r=0,o=i.length&&i[0];return o&&"object"==typeof o&&o.constructor===Object&&(n.attrs=o,r++),n.children=Array.prototype.slice.call(i,r),n};e.CharRef=function(t){if(!(this instanceof e.CharRef))return new e.CharRef(t);if(!(t&&t.html&&t.str))throw new Error("HTML.CharRef must be constructed with ({html:..., str:...})");this.html=t.html,this.str=t.str},e.Comment=function(t){if(!(this instanceof e.Comment))return new e.Comment(t);if("string"!=typeof t)throw new Error("HTML.Comment must be constructed with a string");this.value=t,this.sanitizedValue=t.replace(/^-|--+|-$/g,"")},e.Raw=function(t){if(!(this instanceof e.Raw))return new e.Raw(t);if("string"!=typeof t)throw new Error("HTML.Raw must be constructed with a string");this.value=t},e.EmitCode=function(t){if(!(this instanceof e.EmitCode))return new e.EmitCode(t);if("string"!=typeof t)throw new Error("HTML.EmitCode must be constructed with a string");this.value=t},e.isTagEnsured=function(t){return e.isKnownElement(t)||e.isKnownSVGElement(t)},function(){for(var t=0;t<e.knownElementNames.length;t++)e.ensureTag(e.knownElementNames[t]);for(var t=0;t<e.knownSVGElementNames.length;t++)e.ensureTag(e.knownSVGElementNames[t])
}()}.call(this),function(){e.toHTML=function(t,n){if(null==t)return"";if("string"==typeof t||"boolean"==typeof t||"number"==typeof t)return e.escapeData(String(t));if(t instanceof Array){for(var i=[],r=0;r<t.length;r++)i.push(e.toHTML(t[r],n));return i.join("")}if("function"==typeof t.instantiate){var o=t.instantiate(n||null),a=o.render("STATIC");return e.toHTML(a,o)}if("function"==typeof t)return e.toHTML(t(),n);if(t.toHTML)return t.toHTML(n);throw new Error("Expected tag, string, array, component, null, undefined, or object with a toHTML method; found: "+t)},e.Comment.prototype.toHTML=function(){return"<!--"+this.sanitizedValue+"-->"},e.CharRef.prototype.toHTML=function(){return this.html},e.Raw.prototype.toHTML=function(){return this.value},e.Tag.prototype.toHTML=function(t){var n=[],i=this.evaluateDynamicAttributes(t);if(i)for(var r in i){r=e.properCaseAttributeName(r);var o=e.toText(i[r],e.TEXTMODE.ATTRIBUTE,t);n.push(" "+r+'="'+o+'"')}var a,s=this.tagName,c="<"+e.properCaseTagName(s)+n.join("")+">",l=[];if("TEXTAREA"===s){for(var u=0;u<this.children.length;u++)l.push(e.toText(this.children[u],e.TEXTMODE.RCDATA,t));a=l.join(""),"\n"===a.slice(0,1)&&(a="\n"+a)}else{for(var u=0;u<this.children.length;u++)l.push(e.toHTML(this.children[u],t));a=l.join("")}var d=c+a;return(this.children.length||!e.isVoidElement(s))&&(d+="</"+e.properCaseTagName(s)+">"),d},e.TEXTMODE={ATTRIBUTE:1,RCDATA:2,STRING:3},e.toText=function(t,n,i){if(null==t)return"";if("string"==typeof t||"boolean"==typeof t||"number"==typeof t){if(t=String(t),n===e.TEXTMODE.STRING)return t;if(n===e.TEXTMODE.RCDATA)return e.escapeData(t);if(n===e.TEXTMODE.ATTRIBUTE)return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;");throw new Error("Unknown TEXTMODE: "+n)}if(t instanceof Array){for(var r=[],o=0;o<t.length;o++)r.push(e.toText(t[o],n,i));return r.join("")}if("function"==typeof t)return e.toText(t(),n,i);if("function"==typeof t.instantiate){var a=t.instantiate(i||null),s=a.render("STATIC");return e.toText(s,n,a)}if(t.toText)return t.toText(n,n,i);throw new Error("Expected tag, string, array, component, null, undefined, or object with a toText method; found: "+t)},e.CharRef.prototype.toText=function(t){if(t===e.TEXTMODE.STRING)return this.str;if(t===e.TEXTMODE.RCDATA)return this.html;if(t===e.TEXTMODE.ATTRIBUTE)return this.html;throw new Error("Unknown TEXTMODE: "+t)}}.call(this),"undefined"==typeof Package&&(Package={}),Package.htmljs={HTML:e}}(),function(){var e,t,n,i,r,o,a,s,c,l,u=Package.meteor.Meteor,d=Package.jquery.$,f=(Package.jquery.jQuery,Package.deps.Deps),h=(Package.random.Random,Package.ejson.EJSON,Package.underscore._),p=(Package["ordered-dict"].OrderedDict,Package.minimongo.LocalCollection),m=Package["observe-sequence"].ObserveSequence,g=Package.htmljs.HTML;(function(){var e;n=function(t,n){e||(e=function(){return"undefined"!=typeof u?u._debug:"undefined"!=typeof console&&console.log?console.log:function(){}}),e()(n||"Exception in Meteor UI:",t.stack||t.message)}}).call(this),function(){e={},i=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e};var t=function(e,t,n){try{Object.defineProperty(e,t,{value:n})}catch(i){e[t]=n}return e},n=function(e){return String(e).replace(/^[^a-zA-Z_]|[^a-zA-Z_0-9]+/g,"")||"Component"};!function(){e.Component=function(e){var n=new e;return t(n,"_constr",e),t(n,"_super",null),n}(function(){})}(),i(e,{nextGuid:2,isComponent:function(t){return t&&e.isKindOf(t,e.Component)},isKindOf:function(e,t){for(;e;){if(e===t)return!0;e=e._super}return!1},_requireNotDestroyed:function(e){if(e.isDestroyed)throw new Error("Component has been destroyed; can't perform this operation")},_requireInited:function(e){if(!e.isInited)throw new Error("Component must be inited to perform this operation")},_requireDom:function(e){if(!e.dom)throw new Error("Component must be built into DOM to perform this operation")}}),r=e.Component,i(e.Component,{kind:"Component",guid:"1",dom:null,isInited:!1,isDestroyed:!1,parent:null,withData:function(e){return this.extend({data:e})},extend:function(r){if(this.isInited)throw new Error("Can't extend an inited Component");var o,a=!1;r&&r.kind?(o=Function("return function "+n(r.kind)+"() {};")(),a=!0):o=this._constr,o.prototype=this;var s=new o;return a&&(s._constr=o),r&&i(s,r),t(s,"_super",this),s.guid=String(e.nextGuid++),s}});o=function(e,t){for(;t;){if(t[e])return t;t=t.parent}return null},a=function(e){return e=o("data",e),e?"function"==typeof e.data?e.data():e.data:null},s=function(e){var t=e.templateInstance;t.data=a(e),e.dom&&!e.isDestroyed?(t.firstNode=e.dom.startNode().nextSibling,t.lastNode=e.dom.endNode().previousSibling,t.lastNode&&t.lastNode.nextSibling===t.firstNode&&(t.lastNode=t.firstNode)):(t.firstNode=null,t.lastNode=null)},i(e.Component,{helpers:function(e){i(this,e)},events:function(e){var t;t=this.hasOwnProperty("_events")?this._events:this._events=[],h.each(e,function(e,n){var i=n.split(/,\s+/);h.each(i,function(n){var i=n.split(/\s+/);if(0!==i.length){var r=i.shift(),o=i.join(" ");t.push({events:r,selector:o,handler:e})}})})}}),e.Component.notifyParented=function(){for(var t=this,n=t;n;n=n._super){var i=n.hasOwnProperty("_events")&&n._events||null;!i&&n.hasOwnProperty("events")&&"object"==typeof n.events&&(e.Component.events.call(n,n.events),i=n._events),h.each(i,function(n){var i=function(i){var r=e.DomRange.getContainingComponent(i.currentTarget),o=r&&a(r);s(t),f.nonreactive(function(){n.handler.call(o,i,t.templateInstance)})};t.dom.on(n.events,n.selector,i)})}t.parented&&f.nonreactive(function(){s(t),t.parented.call(t.templateInstance)}),t.rendered&&f.afterFlush(function(){t.isDestroyed||(s(t),t.rendered.call(t.templateInstance))})},e.Component.removed=function(){var e=this;e.isDestroyed=!0,e.destroyed&&f.nonreactive(function(){s(e),e.destroyed.call(e.templateInstance)})},e.Component.preserve=function(){}}.call(this),function(){if(u.isClient){if(!Package.jquery)throw new Error("Meteor UI jQuery adapter: jQuery not found.");var t=Package.jquery.jQuery,n={};e.DomBackend=n;var i="meteor_ui_removal_watcher",r="$meteor_ui_removal_callbacks",o=function(){};n.removeElement=function(e){t(e).remove()},n.onRemoveElement=function(e,n){e[r]||(e[r]=[],t(e).on(i,o)),e[r].push(n)},t.event.special[i]={teardown:function(){var e=this,t=e[r];if(t){for(var n=0;n<t.length;n++)t[n](e);e[r]=null}}},n.parseHTML=function(e){return t.parseHTML(e)||[]},n.findBySelector=function(e,n){return t.find(e,n)},n.newFragment=function(e){return t.buildFragment(e,document)},n.delegateEvents=function(e,t,n,i){d(e).on(t,n,i)},n.undelegateEvents=function(e,t,n){d(e).off(t,n)},n.bindEventCapturer=function(e,n,i){var r=function(n){n=t.event.fix(n),n.currentTarget=n.target,i.call(e,n)};i._meteorui_wrapper=r,n=this.parseEventType(n),e.addEventListener(n,r,!0)},n.unbindEventCapturer=function(e,t,n){t=this.parseEventType(t),e.removeEventListener(t,n._meteorui_wrapper,!0)},n.parseEventType=function(e){var t=e.indexOf(".");return t>=0?e.slice(0,t):e}}}.call(this),function(){var t=e.DomBackend,n=function(e){e.parentNode.removeChild(e)},i=function(e,t,n){t.insertBefore(e,n||null)},r=function(e,t,n){t.insertBefore(e,n||null)},o=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},a=function(e,t){if(!e)return!1;for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return!0;return!1},s=function(e){return!("number"!=typeof e.length||!e.sort&&!e.splice)},c=function(e){return!(3===e.nodeType&&(!e.nodeValue||/^\s+$/.test(e.nodeValue)))},l=function(e){if("string"!=typeof e)throw new Error("id must be a string");if(!e)throw new Error("id may not be empty")},u=function(){var e=document.createTextNode("");try{return e.blahblah=!0,!0}catch(t){return!1}}(),d=u?function(){return document.createTextNode("")}:function(){return document.createComment("IE")},f=function(e){if(!e.isParented){if(e.isParented=!0,!e.owner){var n=e.parentNode(),i=n.$_uiranges||(n.$_uiranges={});i[e._rangeId]=e,e._rangeDict=i,t.onRemoveElement(n,function(){h(e)})}e.component.notifyParented&&e.component.notifyParented();var r=e.members;for(var o in r){var a=r[o];"dom"in a&&f(a.dom)}}},h=function(e){e.isRemoved||(e.isRemoved=!0,e._rangeDict&&delete e._rangeDict[e._rangeId],e.component.removed&&e.component.removed(),m(e))},p=function(e,n){if(1===e.nodeType){for(var i=v.getComponents(e),r=0,o=i.length;o>r;r++)h(i[r].dom);n||t.removeElement(e)}},m=function(e){var t=e.members;for(var n in t){var i=t[n];"dom"in i?h(i.dom):p(i)}},g=1,v=function(e){var n=d(),i=d(),r=t.newFragment([n,i]);r.$_uiIsOffscreen=!0,e?(this.component=e,e.dom=this):(this.component=this,this.dom=this),this.start=n,this.end=i,n.$ui=this.component,i.$ui=this.component,this.members={},this.nextMemberId=1,this.owner=null,this._rangeId=g++,this._rangeDict=null,this.isParented=!1,this.isRemoved=!1};o(v.prototype,{getNodes:function(){if(!this.parentNode())return[];this.refresh();for(var e=this.end.nextSibling,t=[],n=this.start;n&&n!==e;n=n.nextSibling)t.push(n);return t},removeAll:function(){if(this.parentNode()){this.refresh();for(var e=this.end,t=[],i=this.start.nextSibling;i&&i!==e;i=i.nextSibling)t.push(i);for(var r=0,o=t.length;o>r;r++)n(t[r]);m(this),this.members={}}},add:function(e,t,n,r){if(null!=e&&"string"!=typeof e){if("object"!=typeof e)throw new Error("id must be a string");n=t,t=e,e=null}if(!t||"object"!=typeof t)throw new Error("Expected component, node, or array");if(s(t)){if(1!==t.length){if(null!=e)throw new Error("Can only add one node or one component if id is given");var o=t;r=this.getInsertionPoint(n);for(var a=0;a<o.length;a++)this.add(null,o[a],n,r);return}t=t[0]}var c=this.parentNode();if(c){var u=r||this.getInsertionPoint(n),d=t;null==e?e=this.nextMemberId++:(l(e),e=" "+e);var m=this.members;if(m.hasOwnProperty(e)){var g=m[e];if("dom"in g){var v=g.dom;if(v.start.parentNode===c)throw new Error("Member already exists: "+e.slice(1));delete m[e],v.owner=null,h(v)}else{var b=g;if(b.parentNode===c)throw new Error("Member already exists: "+e.slice(1));p(b),delete m[e]}}if("dom"in d){if(!d.dom)throw new Error("Component not built");var w=d.dom;w.owner=this.component;var k=w.getNodes();y(k,c)&&(c=_(this)),m[e]=d;for(var a=0;a<k.length;a++)i(k[a],c,u);this.isParented&&f(w)}else{if("number"!=typeof d.nodeType)throw new Error("Expected Component or Node");var S=d;3!==S.nodeType&&(S.$ui=this.component),y(S,c)&&(c=_(this)),m[e]=d,i(S,c,u)}}},remove:function(e){if(null==e)return this.removeAll(),n(this.start),n(this.end),this.owner=null,h(this),void 0;l(e),e=" "+e;var t=this.members,i=t.hasOwnProperty(e)&&t[e];if(delete t[e],i){var r=this.parentNode();if(r)if("dom"in i){var o=i.dom;o.owner=null,o.start.parentNode===r&&i.dom.remove()}else{var a=i;a.parentNode===r&&n(a)}}},moveBefore:function(e,t){var n=this.getInsertionPoint(t);l(e),e=" "+e;var i=this.members,o=i.hasOwnProperty(e)&&i[e];if(o){var a=this.parentNode();if(a)if("dom"in o){var s=o.dom;if(s.start.parentNode===a){s.refresh();for(var c=s.getNodes(),u=0;u<c.length;u++)r(c[u],a,n)}}else{var d=o;r(d,a,n)}}},get:function(e){l(e),e=" "+e;var t=this.members;return t.hasOwnProperty(e)?t[e]:null},parentNode:function(){return this.start.parentNode},startNode:function(){return this.start},endNode:function(){return this.end},eachMember:function(e,t){var n=this.members,i=this.parentNode();for(var r in n){var o=n[r];if("dom"in o){var a=o.dom;a.start.parentNode===i?t&&t(a):(a.owner=null,delete n[r],h(a))}else{var s=o;s.parentNode===i?e&&e(s):(delete n[r],p(s))}}},refresh:function(){var e=this.parentNode();if(e){var t=null,n=null,r=0,o=null;this.eachMember(function(e){t=e,r++,3===e.nodeType&&(o=o||[],o.push(e))},function(e){e.refresh(),n=e,r++});var s=null,l=null;if(0===r);else if(1===r)t?(s=t,l=t):n&&(s=n.start,l=n.end);else for(var u=e.firstChild;u;u=u.nextSibling){var d;if(u.$ui&&(d=u.$ui.dom)&&(d===this&&u!==this.start&&u!==this.end&&c(u)||d!==this&&d.owner&&d.owner.dom===this&&d.start===u)){if(s)for(var f=s.previousSibling;f&&!f.$ui;f=f.previousSibling)this.members[this.nextMemberId++]=f,3!==f.nodeType&&(f.$ui=this.component);u.$ui.dom===this?(s=s||u,l=u):(s=s||u,u=u.$ui.dom.end,l=u)}}if(s){for(var f;(f=s.previousSibling)&&(f.$ui&&f.$ui.dom===this||a(o,f));)s=f;for(var f;(f=l.nextSibling)&&(f.$ui&&f.$ui.dom===this||a(o,f));)l=f;s!==this.start&&i(this.start,e,s),l!==this.end&&i(this.end,e,l.nextSibling)}}},getInsertionPoint:function(e){var t=this.members,n=this.parentNode();if(!e)return this.end;l(e),e=" "+e;var i=t[e];if("dom"in i){var r=i.dom;if(r.start.parentNode===n)return r.refresh(),r.start;r.owner=null,h(r)}else{var o=i;if(o.parentNode===n)return o;p(o)}return delete t[e],this.end}}),v.prototype.elements=function(e){return e=e||[],this.eachMember(function(t){1===t.nodeType&&e.push(t)},function(t){t.elements(e)}),e},v.refresh=function(e){for(var t=v.getComponents(e),n=0,i=t.length;i>n;n++)t[n].dom.refresh()},v.getComponents=function(e){for(var t=[],n=e.firstChild;n;n=n.nextSibling)n.$ui&&n===n.$ui.dom.start&&!n.$ui.dom.owner&&t.push(n.$ui);return t},v.insert=function(e,t,n){var r=e.dom;if(!r)throw new Error("Expected a component with a DomRange");var o=r.getNodes();y(o,t)&&(t=b(t,n));for(var a=0;a<o.length;a++)i(o[a],t,n);f(r)},v.getContainingComponent=function(e){for(;e&&!e.$ui;)e=e.parentNode;return e&&e.$ui||null};var y=function(e,t){if("TABLE"!==t.nodeName)return!1;if(s(e)){for(var n=!1,i=0,r=e.length;r>i;i++){var o=e[i];if(1===o.nodeType&&"TR"===o.nodeName){n=!0;break}}if(!n)return!1}else{var o=e;if(1!==o.nodeType||"TR"!==o.nodeName)return!1}return!0},b=function(e,t){var n=e.getElementsByTagName("tbody")[0];return n||(n=e.ownerDocument.createElement("tbody"),e.insertBefore(n,t||null)),n},_=function(e){for(;e.owner;)e=e.owner.dom;for(var t=e.getNodes(),n=b(e.parentNode(),e.end.nextSibling),i=0;i<t.length;i++)n.appendChild(t[i]);return n};v.prototype.contains=function(e){if(!e)throw new Error("Expected Component or Node");var t=this.parentNode();if(!t)return!1;var n;if("dom"in e){n=e.dom;var i=n.parentNode();if(!i)return!1;if(i!==t)return this.contains(i);if(n===this)return!1}else{var r=e;if(!x(t,r))return!1;for(;r.parentNode!==t;)r=r.parentNode;n=r.$ui&&r.$ui.dom}for(;n&&n!==this;)n=n.owner&&n.owner.dom;return n===this},v.prototype.$=function(e){var n=this,i=this.parentNode();if(!i)throw new Error("Can't select in removed DomRange");if(11===i.nodeType||i.$_uiIsOffscreen)throw new Error("Can't use $ on an offscreen component");var r=t.findBySelector(e,i),o=function(e){return"number"==typeof e&&(e=this),n.contains(e)};if(r.filter)r=r.filter(o);else{for(var a=[],s=0;s<r.length;s++){var c=r[s];o(c)&&a.push(c)}r=a}return r};var w={blur:1,change:1,click:1,focus:1,focusin:1,focusout:1,reset:1,submit:1},k=0,S=1,T=2,C=function(e,n,i,r,o){this.elem=e,this.type=n,this.selector=i,this.handler=r,this.$ui=o,this.mode=k,this.delegatedHandler=function(e){return function(t){return(e.selector||t.currentTarget===t.target)&&e.$ui.dom.contains(t.currentTarget)?e.handler.call(e.$ui,t):void 0}}(this);var a=e.addEventListener&&!w.hasOwnProperty(t.parseEventType(n));a?this.capturingHandler=function(e){return function(n){if(e.mode===k){if(n.bubbles)return e.mode=S,t.unbindEventCapturer(e.elem,e.type,e.capturingHandler),void 0;e.mode=T,t.undelegateEvents(e.elem,e.type,e.delegatedHandler)}e.delegatedHandler(n)}}(this):this.mode=S};C.prototype.bind=function(){this.mode!==S&&t.bindEventCapturer(this.elem,this.type,this.capturingHandler),this.mode!==T&&t.delegateEvents(this.elem,this.type,this.selector||"*",this.delegatedHandler)},C.prototype.unbind=function(){this.mode!==S&&t.unbindEventCapturer(this.elem,this.type,this.capturingHandler),this.mode!==T&&t.undelegateEvents(this.elem,this.type,this.delegatedHandler)},v.prototype.on=function(e,t,n){var i=this.parentNode();if(i){if(i.$_uiIsOffscreen)throw new Error("Can't bind events before DomRange is inserted");var r=[];e.replace(/[^ /]+/g,function(e){r.push(e)}),n||"function"!=typeof t?t||(t=null):(n=t,t=null);for(var o=0,a=r.length;a>o;o++){var s=r[o],c=i.$_uievents;c||(c=i.$_uievents={});var l=c[s];l||(l=c[s]={},l.handlers=[]);var u=l.handlers,d=new C(i,s,t,n,this.component);d.bind(),u.push(d);for(var f=this.owner&&this.owner.dom;f;f=f.owner&&f.owner.dom)for(var h=0,p=u.length;p>h;h++){var m=u[h];m.$ui&&m.$ui.dom===f&&(m.unbind(),m.bind(),u.splice(h,1),u.push(m),h--,p--)}}}};var x=function(e,t){return 1!==e.nodeType?!1:e===t?!1:e.compareDocumentPosition?16&e.compareDocumentPosition(t):(t=t.parentNode,t&&1===t.nodeType?e===t?!0:e.contains(t):!1)};e.DomRange=v}.call(this),function(){c=function(e,t){this.name=e,this.value=t},h.extend(c.prototype,{update:function(e,t,n){null===n?null!==t&&e.removeAttribute(this.name):e.setAttribute(this.name,this.value)}}),c.extend=function(e){var t=this,n=function(){c.apply(this,arguments)};return n.prototype=new t,n.extend=t.extend,e&&h.extend(n.prototype,e),n};var e=c.extend({update:function(e,t,n){if(!this.getCurrentValue||!this.setValue)throw new Error("Missing methods in subclass of 'BaseClassHandler'");var i=t?h.compact(t.split(" ")):[],r=n?h.compact(n.split(" ")):[],o=h.compact(this.getCurrentValue(e).split(" "));h.each(i,function(e){h.indexOf(r,e)<0&&(o=h.without(o,e))}),h.each(r,function(e){h.indexOf(i,e)<0&&h.indexOf(o,e)<0&&o.push(e)}),this.setValue(e,o.join(" "))}}),t=e.extend({getCurrentValue:function(e){return e.className},setValue:function(e,t){e.className=t}}),n=e.extend({getCurrentValue:function(e){return e.className.baseVal},setValue:function(e,t){e.setAttribute("class",t)}}),i=c.extend({update:function(e,t,n){var i=this.name;null==n?null!=t&&(e[i]=!1):e[i]=!0}}),r=c.extend({update:function(e,t,n){e.value=n}}),o=function(e){return"ownerSVGElement"in e};l=function(e,a,s){return"class"===a?o(e)?new n(a,s):new t(a,s):"selected"===a?new i(a,s):"TEXTAREA"===e.tagName&&"value"===a?new r(a,s):new c(a,s)}}.call(this),function(){e.Component.instantiate=function(t){var n=this;if(!e.isComponent(n))throw new Error("Expected Component kind");if(n.isInited)throw new Error("A component kind is required, not an instance");var i=n.extend();return i.isInited=!0,i.templateInstance={findAll:function(e){return i.dom.$(e)},find:function(e){var t=this.findAll(e);return t[0]||null},firstNode:null,lastNode:null,data:null,__component__:i},i.parent=t||null,i.init&&i.init(),i.created&&(s(i),i.created.call(i.templateInstance)),i},e.Component.render=function(){return null},e.emboxValue=function(e,t){if("function"==typeof e){var n=e,i=null,r=null,o=null;return function(){if(!o){if(!f.active)return n();r=new f.Dependency,o=f.nonreactive(function(){return f.autorun(function(e){var o=i;i=n(),e.firstRun||(t?t(i,o):i===o)||r.changed()})})}if(f.active){var e=r.depend();e&&f.onInvalidate(function(){r&&!r.hasDependents()&&f.afterFlush(function(){f.afterFlush(function(){r&&!r.hasDependents()&&(o.stop(),o=null,r=null)})})})}return i}}var a=e,s=function(){return a};return s._isEmboxedConstant=!0,s},e.insert=e.DomRange&&e.DomRange.insert;var t=function(t,n,i){if(!n)throw new Error("Materialization parent required");n.component&&n.component.dom?n.add(t.component||t,i):t.component&&t.component.dom?e.insert(t.component,n,i):n.insertBefore(t,i||null)},i=function(e,t,n){if(n)for(var i in n)if(!t.hasOwnProperty(i)){var r=n[i],o=r.value;r.value=null,r.update(e,o,null),delete n[i]}for(var i in t){var o,r=null,a=t[i];n&&n.hasOwnProperty(i)?(r=n[i],o=r.value):null!==a&&(r=l(e,i,a),n&&(n[i]=r),o=null),r&&(r.value=a,r.update(e,o,a),null===a&&delete n[i])}};e.render=function(t,n){if(t.isInited)throw new Error("Can't render component instance, only component kind");var i=t.instantiate(n),o=o=i.render&&i.render(),a=new e.DomRange(i);return r(o,a,null,i),i.removed=function(){i.isDestroyed=!0,i.destroyed&&(s(i),i.destroyed.call(i.templateInstance))},i};var r=function(o,a,s,c){if(null==o);else if("string"==typeof o||"boolean"==typeof o||"number"==typeof o)o=String(o),t(document.createTextNode(o),a,s);else if(o instanceof Array)for(var l=0;l<o.length;l++)r(o[l],a,s,c);else if("function"==typeof o){var u=new e.DomRange,d=f.autorun(function(e){e.firstRun||u.removeAll();var t=o();f.nonreactive(function(){r(t,u,null,c)})});u.removed=function(){d.stop()},t(u,a,s)}else if(o instanceof g.Tag){var h,p=g.properCaseTagName(o.tagName);h=g.isKnownSVGElement(p)&&!g.isKnownElement(p)&&document.createElementNS?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(o.tagName);var m=o.attrs,v=o.children;if("TEXTAREA"===o.tagName&&(m=m||{},m.value=v,v=[]),m){var y=f.autorun(function(e){e.handlers||(e.handlers={});try{var t=g.evaluateDynamicAttributes(m,c),r={};if(t){for(var o in t)r[o]=g.toText(t[o],g.TEXTMODE.STRING,c);i(h,r,e.handlers)}}catch(a){n(a)}});e.DomBackend.onRemoveElement(h,function(){y.stop()})}r(v,h,null,c),t(h,a,s)}else if("function"==typeof o.instantiate){var b=e.render(o,c);t(b.dom,a,s)}else if(o instanceof g.CharRef)t(document.createTextNode(o.str),a,s);else if(o instanceof g.Comment)t(document.createComment(o.sanitizedValue),a,s);else{if(!(o instanceof g.Raw))throw o instanceof g.Special?new Error("Can't materialize Special tag, it's just an intermediate rep"):new Error("Unexpected node in htmljs: "+o);for(var _=e.DomBackend.parseHTML(o.value),l=0;l<_.length;l++)t(_[l],a,s)}};e.materialize=r,e.body=e.Component.extend({kind:"body",contentParts:[],render:function(){return this.contentParts},INSTANTIATED:!1}),e.block=function(t){return e.Component.extend({render:t})},e.toHTML=function(e,t){return g.toHTML(e,t)},e.toRawText=function(e,t){return g.toText(e,g.TEXTMODE.STRING,t)}}.call(this),function(){e.If=r.extend({kind:"If",init:function(){this.condition=this.data,this.data=void 0},render:function(){var e=this;return function(){var n=t(e);return n?e.__content:e.__elseContent}}});var t=function(e){return f.isolateValue(function(){var t=e.condition();return t instanceof Array&&0===t.length?!1:!!t})};e.Unless=r.extend({kind:"Unless",init:function(){this.condition=this.data,this.data=void 0},render:function(){var e=this;return function(){var n=t(e);return n?e.__elseContent:e.__content}}}),e.With=r.extend({kind:"With",init:function(){this.condition=this.data},render:function(){var e=this;return function(){var n=t(e);return n?e.__content:e.__elseContent}}})}.call(this),function(){e.Each=r.extend({typeName:"Each",init:function(){this.sequence=this.data,this.data=void 0},render:function(e){var t=this,n=t.__content,i=t.__elseContent;if("STATIC"===e){var r=h.map(m.fetch(t.get("sequence")),function(e){return n.withData(function(){return e})});return r.length?r:i}return null},parented:function(){var t=this.__component__,n=t.dom,i=t.__content,r=t.__elseContent,o=0,a=function(i){if(r){if(0>o+i)throw new Error("count should never become negative");0===o&&n.removeAll(),o+=i,0===o&&e.materialize(r,n,null,t)}};this.observeHandle=m.observe(function(){return t.get("sequence")},{addedAt:function(r,o,s,c){a(1),r=p._idStringify(r);var l=o,u=new f.Dependency,d=function(){return u.depend(),l};d.$set=function(e){l=e,u.changed()},c&&(c=p._idStringify(c));var h=e.render(i.withData(d),t);n.add(r,h,c)},removed:function(e){a(-1),n.remove(p._idStringify(e))},movedTo:function(e,t,i,r,o){n.moveBefore(p._idStringify(e),o&&p._idStringify(o))},changed:function(e,t){n.get(p._idStringify(e)).data.$set(t)}}),a(0)},destroyed:function(){this.observeHandle&&this.observeHandle.stop()}})}.call(this),function(){var n=(function(){return this}(),r.extend({kind:"NoOp",render:function(){return this.__content}})),s={constant:n,isolate:n};i(e.Component,{lookup:function(e){var n,i,r=this;if(!e)throw new Error("must pass id to lookup");if(/^\./.test(e)){if(!/^(\.)+$/.test(e))throw new Error("id starting with dot must be a series of dots");for(var c=o("data",r),l=1;l<e.length;l++)c=c?o("data",c.parent):null;return c?c.data:null}if(i=o(e,r))var n=i[e];else{if(h.has(s,e))return s[e];if(!t._globalHelpers[e])return function(){var t=a(r);if(!t)return t;var n=t[e];return"function"==typeof n?n.apply(t,arguments):n};n=t._globalHelpers[e]}return"function"!=typeof n||n._isEmboxedConstant?n:function(){var e=a(r);return n.apply(e,arguments)}},get:function(e){void 0===e&&(e=".");var t=this.lookup(e);return"function"==typeof t?t():t},set:function(e,t){var n=o(e,this);if(!n||!n[e])throw new Error("Can't find field: "+e);if("function"!=typeof n[e])throw new Error("Not a settable field: "+e);n[e](t)}})}.call(this),function(){t={_globalHelpers:{},registerHelper:function(e,t){this._globalHelpers[e]=t}},t._escape=function(){var e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","&":"&amp;"},t=function(t){return e[t]};return function(e){return e.replace(/[&<>"'`]/g,t)}}(),t.SafeString=function(e){this.string=e},t.SafeString.prototype.toString=function(){return this.string.toString()}}.call(this),"undefined"==typeof Package&&(Package={}),Package.ui={UI:e,Handlebars:t}}(),function(){{var e,t,n,i,r,o,a,s,c,l,u,d=Package.meteor.Meteor,f=Package.underscore._,h=Package.deps.Deps,p=Package.random.Random,m=Package["service-configuration"].ServiceConfiguration;Package.livedata.DDP}(function(){e={},e._options={};var r=90,o=3600;t=6e5,n=1e4,e.config=function(t){d.isServer?__meteor_runtime_config__.accountsConfigCalled=!0:__meteor_runtime_config__.accountsConfigCalled||d._debug("Accounts.config was called on the client but not on the server; some configuration options may not take effect.");var n=["sendVerificationEmail","forbidClientAccountCreation","restrictCreationByEmailDomain","loginExpirationInDays"];f.each(f.keys(t),function(e){if(!f.contains(n,e))throw new Error("Accounts.config: Invalid key: "+e)}),f.each(n,function(n){if(n in t){if(n in e._options)throw new Error("Can't set `"+n+"` more than once");e._options[n]=t[n]}}),d.isServer&&maybeStopExpireTokensInterval()},d.users=new d.Collection("users",{_preventAutopublish:!0}),e.loginServiceConfiguration=m.configurations,e.ConfigError=m.ConfigError,e.LoginCancelledError=function(e){this.message=e},e.LoginCancelledError.numericError=145546287,e.LoginCancelledError.prototype=new Error,e.LoginCancelledError.prototype.name="Accounts.LoginCancelledError",i=function(){return 24*(e._options.loginExpirationInDays||r)*60*60*1e3},e._tokenExpiration=function(e){return new Date(new Date(e).getTime()+i())},e._tokenExpiresSoon=function(e){var t=.1*i(),n=1e3*o;return t>n&&(t=n),new Date>new Date(e)-t}}).call(this),function(){r=!0;var t;t=window.location.hash.match(/^\#\/reset-password\/(.*)$/),t&&(r=!1,e._resetPasswordToken=t[1],window.location.hash=""),t=window.location.hash.match(/^\#\/verify-email\/(.*)$/),t&&(r=!1,e._verifyEmailToken=t[1],window.location.hash=""),t=window.location.hash.match(/^\#\/enroll-account\/(.*)$/),t&&(r=!1,e._enrollAccountToken=t[1],window.location.hash="")}.call(this),function(){d.userId=function(){return d.connection.userId()};var t=!1,n=new h.Dependency;e._setLoggingIn=function(e){t!==e&&(t=e,n.changed())},d.loggingIn=function(){return n.depend(),t},d.user=function(){var e=d.userId();return e?d.users.findOne(e):null},e.callLoginMethod=function(t){t=f.extend({methodName:"login",methodArguments:[],_suppressLoggingIn:!1},t),f.each(["validateResult","userCallback"],function(e){t[e]||(t[e]=function(){})});var n=f.once(t.userCallback),i=!1,r=function(t,r){d.connection.onReconnect=!t&&r&&r.token?function(){i=!0;var t=l();t&&(r={token:t,tokenExpires:u()}),r.tokenExpires||(r.tokenExpires=e._tokenExpiration(new Date)),e._tokenExpiresSoon(r.tokenExpires)?o():e.callLoginMethod({methodArguments:[{resume:r.token}],_suppressLoggingIn:!0,userCallback:function(e){e&&o(),n(e)}})}:null},s=function(r,o){if(!i){if(e._setLoggingIn(!1),r||!o)return r=r||new Error("No result from call to "+t.methodName),n(r),void 0;try{t.validateResult(o)}catch(s){return n(s),void 0}a(o.id,o.token,o.tokenExpires),n()}};t._suppressLoggingIn||e._setLoggingIn(!0),d.apply(t.methodName,t.methodArguments,{wait:!0,onResultReceived:r},s)},o=function(){c(),d.connection.setUserId(null),d.connection.onReconnect=null},a=function(e,t,n){s(e,t,n),d.connection.setUserId(e)},d.logout=function(e){d.apply("logout",[],{wait:!0},function(t){t?e&&e(t):(o(),e&&e())})},d.logoutOtherClients=function(e){var t=d.connection.onReconnect,n=d.userId();d.connection.onReconnect=null,d.apply("logoutOtherClients",[],{wait:!0},function(i,r){d.connection.onReconnect=t,i||s(n,r.token,r.tokenExpires),d.connection.onReconnect(),e&&e(i)})};var i=d.subscribe("meteor.loginServiceConfiguration");e.loginServicesConfigured=function(){return i.ready()},Package.ui&&(Package.ui.Handlebars.registerHelper("currentUser",function(){return d.user()}),Package.ui.Handlebars.registerHelper("loggingIn",function(){return d.loggingIn()}))}.call(this),function(){var t;d.loginWithToken=function(t,n){e.callLoginMethod({methodArguments:[{resume:t}],userCallback:n})},e._enableAutoLogin=function(){r=!0,v()};var n="Meteor.loginToken",i="Meteor.loginTokenExpires",a="Meteor.userId";e._isolateLoginTokenForTest=function(){n+=p.id(),a+=p.id()},s=function(r,o,s){d._localStorage.setItem(a,r),d._localStorage.setItem(n,o),s||(s=e._tokenExpiration(new Date)),d._localStorage.setItem(i,s),t=o},c=function(){d._localStorage.removeItem(a),d._localStorage.removeItem(n),d._localStorage.removeItem(i),t=null},l=e._storedLoginToken=function(){return d._localStorage.getItem(n)},u=function(){return d._localStorage.getItem(i)};var f=function(){return d._localStorage.getItem(a)},h=function(){var t=d._localStorage.getItem(i);t&&e._tokenExpiresSoon(new Date(t))&&c()};if(r){h();var m=l();if(m){var g=f();g&&d.connection.setUserId(g),d.loginWithToken(m,function(e){e&&(d._debug("Error logging in with token: "+e),o())})}}t=m;var v=function(){if(r){var e=l();t!=e&&(e?d.loginWithToken(e):d.logout()),t=e}};setInterval(v,3e3)}.call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-base"]={Accounts:e}}(),function(){var e=Package.meteor.Meteor,t=Package.underscore._,n=(Package.random.Random,Package.check.check,Package.check.Match,Package["accounts-base"].Accounts);(function(){n.oauth={};var i={};n.oauth.registerService=function(n){if(t.has(i,n))throw new Error("Duplicate service: "+n);i[n]=!0,e.server&&e.users._ensureIndex("services."+n+".id",{unique:1,sparse:1})},n.oauth.serviceNames=function(){return t.keys(i)}}).call(this),function(){n.oauth.tryLoginAfterPopupClosed=function(t,i){n.callLoginMethod({methodArguments:[{oauth:{credentialToken:t}}],userCallback:i&&function(t){t&&t instanceof e.Error&&t.error===n.LoginCancelledError.numericError?i(new n.LoginCancelledError(t.details)):i(t)}})},n.oauth.credentialRequestCompleteHandler=function(e){return function(t){t&&t instanceof Error?e&&e(t):n.oauth.tryLoginAfterPopupClosed(t,e)}}}.call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-oauth"]={}}(),function(){{var e;Package.meteor.Meteor}(function(){e={},e.initiateLogin=function(e,n,i,r){var o=t(n,r&&r.width||650,r&&r.height||331),a=setInterval(function(){try{var t=o.closed||void 0===o.closed}catch(n){return}t&&(clearInterval(a),i(e))},100)};var t=function(e,t,n){var i="undefined"!=typeof window.screenX?window.screenX:window.screenLeft,r="undefined"!=typeof window.screenY?window.screenY:window.screenTop,o="undefined"!=typeof window.outerWidth?window.outerWidth:document.body.clientWidth,a="undefined"!=typeof window.outerHeight?window.outerHeight:document.body.clientHeight-22,s=i+(o-t)/2,c=r+(a-n)/2,l="width="+t+",height="+n+",left="+s+",top="+c+",scrollbars=yes",u=window.open(e,"Login",l);return u.focus&&u.focus(),u}}).call(this),"undefined"==typeof Package&&(Package={}),Package.oauth={Oauth:e}}(),function(){Package.meteor.Meteor,Package["service-configuration"].ServiceConfiguration,Package.oauth.Oauth;"undefined"==typeof Package&&(Package={}),Package.oauth2={}}(),function(){{var e,t=(Package.meteor.Meteor,Package.ui.UI);Package.ui.Handlebars,Package.htmljs.HTML}(function(){e={},e.__define__=function(n,i){if(e.hasOwnProperty(n))throw new Error("There are multiple templates named '"+n+"'. Each template needs a unique name.");e[n]=t.Component.extend({kind:"Template_"+n,render:i})
}}).call(this),"undefined"==typeof Package&&(Package={}),Package.templating={Template:e}}(),function(){var e,t=Package.meteor.Meteor,n=Package.oauth.Oauth,i=Package.templating.Template,r=Package.random.Random,o=Package["service-configuration"].ServiceConfiguration,a=(Package.ui.UI,Package.ui.Handlebars,Package.htmljs.HTML);(function(){i.__define__("configureLoginServiceDialogForFacebook",function(){{var e=this;e.__content,e.__elseContent}return[a.Raw("<p>\n    First, you'll need to register your app on Facebook. Follow these steps:\n  </p>\n  "),a.OL(a.Raw('\n    <li>\n      Visit <a href="https://developers.facebook.com/apps" target="_blank">https://developers.facebook.com/apps</a>\n    </li>\n    <li>\n      Create New App (Only a name is required.)\n    </li>\n    <li>\n      Set "Sandbox Mode" to "Disabled"\n    </li>\n    <li>\n      Under "Select how your app integrates with Facebook", expand "Website with Facebook Login".\n    </li>\n    '),a.LI("\n      Set Site URL to: ",a.SPAN({"class":"url"},function(){return Spacebars.mustache(e.lookup("siteUrl"))}),"\n    "),"\n  ")]})}).call(this),function(){i.configureLoginServiceDialogForFacebook.siteUrl=function(){return t.absoluteUrl()},i.configureLoginServiceDialogForFacebook.fields=function(){return[{property:"appId",label:"App ID"},{property:"secret",label:"App Secret"}]}}.call(this),function(){e={},e.requestCredential=function(e,i){i||"function"!=typeof e||(i=e,e={});var a=o.configurations.findOne({service:"facebook"});if(!a)return i&&i(new o.ConfigError("Service not configured")),void 0;var s=r.id(),c=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),l=c?"touch":"popup",u="email";e&&e.requestPermissions&&(u=e.requestPermissions.join(","));var d="https://www.facebook.com/dialog/oauth?client_id="+a.appId+"&redirect_uri="+t.absoluteUrl("_oauth/facebook?close")+"&display="+l+"&scope="+u+"&state="+s;n.initiateLogin(s,d,i)}}.call(this),"undefined"==typeof Package&&(Package={}),Package.facebook={Facebook:e}}(),function(){var e=Package.meteor.Meteor,t=Package["accounts-base"].Accounts,n=Package.facebook.Facebook;(function(){t.oauth.registerService("facebook"),e.isClient?e.loginWithFacebook=function(e,i){i||"function"!=typeof e||(i=e,e=null);var r=t.oauth.credentialRequestCompleteHandler(i);n.requestCredential(e,r)}:t.addAutopublishFields({forLoggedInUser:["services.facebook"],forOtherUsers:["services.facebook.id","services.facebook.username","services.facebook.gender"]})}).call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-facebook"]={}}(),function(){var e,t=Package.meteor.Meteor,n=Package.oauth.Oauth,i=Package.underscore._,r=Package["service-configuration"].ServiceConfiguration,o=Package.random.Random,a=Package.templating.Template,s=(Package.ui.UI,Package.ui.Handlebars,Package.htmljs.HTML);(function(){a.__define__("configureLoginServiceDialogForGoogle",function(){{var e=this;e.__content,e.__elseContent}return[s.Raw("<p>\n    First, you'll need to get a Google Client ID. Follow these steps:\n  </p>\n  "),s.OL(s.Raw('\n    <li>\n      Visit <a href="https://code.google.com/apis/console/" target="blank">https://code.google.com/apis/console/</a>\n    </li>\n    <li>\n      If necessary, "Create Project"\n    </li>\n    <li>\n      Click "APIs &amp; auth" and "Registered apps" on the left\n    </li>\n    <li>\n      Click the "Register App" button\n    </li>\n    <li>\n      Choose "Web application" as the type\n    </li>\n    <li>\n      Click "Register"\n    </li>\n    <li>\n      Expand the "OAuth 2.0 Client ID section"\n    </li>\n    '),s.LI("\n      Set Web Origin to: ",s.SPAN({"class":"url"},function(){return Spacebars.mustache(e.lookup("siteUrl"))}),"\n    "),"\n    ",s.LI("\n      Set Redirect URI to: ",s.SPAN({"class":"url"},function(){return Spacebars.mustache(e.lookup("siteUrl"))},"_oauth/google?close"),"\n    "),s.Raw('\n    <li>\n      Click "Generate"\n    </li>\n  '))]})}).call(this),function(){a.configureLoginServiceDialogForGoogle.siteUrl=function(){return t.absoluteUrl()},a.configureLoginServiceDialogForGoogle.fields=function(){return[{property:"clientId",label:"Client ID"},{property:"secret",label:"Client secret"}]}}.call(this),function(){e={},e.requestCredential=function(e,a){a||"function"!=typeof e?e||(e={}):(a=e,e={});var s=r.configurations.findOne({service:"google"});if(!s)return a&&a(new r.ConfigError("Service not configured")),void 0;var c=o.id(),l=["https://www.googleapis.com/auth/userinfo.profile"],u=["https://www.googleapis.com/auth/userinfo.email"];e.requestPermissions&&(u=e.requestPermissions),u=i.union(u,l);var d=i.map(u,encodeURIComponent).join("+"),f=e.requestOfflineToken?"offline":"online",h=e.forceApprovalPrompt?"force":"auto",p="https://accounts.google.com/o/oauth2/auth?response_type=code&client_id="+s.clientId+"&scope="+d+"&redirect_uri="+t.absoluteUrl("_oauth/google?close")+"&state="+c+"&access_type="+f+"&approval_prompt="+h;"string"==typeof Accounts._options.restrictCreationByEmailDomain&&(p+="&hd="+encodeURIComponent(Accounts._options.restrictCreationByEmailDomain)),n.initiateLogin(c,p,a,{height:406})}}.call(this),"undefined"==typeof Package&&(Package={}),Package.google={Google:e}}(),function(){var e=Package.meteor.Meteor,t=Package.underscore._,n=(Package.random.Random,Package["accounts-base"].Accounts),i=Package.google.Google;(function(){n.oauth.registerService("google"),e.isClient?e.loginWithGoogle=function(e,t){t||"function"!=typeof e||(t=e,e=null);var r=n.oauth.credentialRequestCompleteHandler(t);i.requestCredential(e,r)}:n.addAutopublishFields({forLoggedInUser:t.map(i.whitelistedFields.concat(["accessToken","expiresAt"]),function(e){return"services.google."+e}),forOtherUsers:t.map(t.without(i.whitelistedFields,"email","verified_email"),function(e){return"services.google."+e})})}).call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-google"]={}}(),function(){var e,t,n,i=(Package.meteor.Meteor,Package.random.Random),r=(Package.check.check,Package.check.Match,Package.underscore._);(function(){t=function(){function e(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function t(){return new e(null)}function n(e,t,n,i,r,o){for(var a=16383&t,s=t>>14;--o>=0;){var c=16383&this[e],l=this[e++]>>14,u=s*c+l*a;c=a*c+((16383&u)<<14)+n[i]+r,r=(c>>28)+(u>>14)+s*l,n[i++]=268435455&c}return r}function i(e){return Zt.charAt(e)}function r(e,t){var n=en[e.charCodeAt(t)];return null==n?-1:n}function o(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function a(e){this.t=1,this.s=0>e?-1:0,e>0?this[0]=e:-1>e?this[0]=e+DV:this.t=0}function s(e){var n=t();return n.fromInt(e),n}function c(t,n){var i;if(16==n)i=4;else if(8==n)i=3;else if(256==n)i=8;else if(2==n)i=1;else if(32==n)i=5;else{if(4!=n)return this.fromRadix(t,n),void 0;i=2}this.t=0,this.s=0;for(var o=t.length,a=!1,s=0;--o>=0;){var c=8==i?255&t[o]:r(t,o);0>c?"-"==t.charAt(o)&&(a=!0):(a=!1,0==s?this[this.t++]=c:s+i>this.DB?(this[this.t-1]|=(c&(1<<this.DB-s)-1)<<s,this[this.t++]=c>>this.DB-s):this[this.t-1]|=c<<s,s+=i,s>=this.DB&&(s-=this.DB))}8==i&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),a&&e.ZERO.subTo(this,this)}function l(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function u(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,o=!1,a="",s=this.t,c=this.DB-s*this.DB%t;if(s-->0)for(c<this.DB&&(n=this[s]>>c)>0&&(o=!0,a=i(n));s>=0;)t>c?(n=(this[s]&(1<<c)-1)<<t-c,n|=this[--s]>>(c+=this.DB-t)):(n=this[s]>>(c-=t)&r,0>=c&&(c+=this.DB,--s)),n>0&&(o=!0),o&&(a+=i(n));return o?a:"0"}function d(){var n=t();return e.ZERO.subTo(this,n),n}function f(){return this.s<0?this.negate():this}function h(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(t=n-e.t,0!=t)return t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0}function p(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function m(){return this.t<=0?0:this.DB*(this.t-1)+p(this[this.t-1]^this.s&this.DM)}function g(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function v(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function y(e,t){var n,i=e%this.DB,r=this.DB-i,o=(1<<r)-1,a=Math.floor(e/this.DB),s=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)t[n+a+1]=this[n]>>r|s,s=(this[n]&o)<<i;for(n=a-1;n>=0;--n)t[n]=0;t[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()}function b(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)return t.t=0,void 0;var i=e%this.DB,r=this.DB-i,o=(1<<i)-1;t[0]=this[n]>>i;for(var a=n+1;a<this.t;++a)t[a-n-1]|=(this[a]&o)<<r,t[a-n]=this[a]>>i;i>0&&(t[this.t-n-1]|=(this.s&o)<<r),t.t=this.t-n,t.clamp()}function _(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);r>n;)i+=this[n]-e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i-=e[n],t[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=0>i?-1:0,-1>i?t[n++]=this.DV+i:i>0&&(t[n++]=i),t.t=n,t.clamp()}function w(t,n){var i=this.abs(),r=t.abs(),o=i.t;for(n.t=o+r.t;--o>=0;)n[o]=0;for(o=0;o<r.t;++o)n[o+i.t]=i.am(0,r[o],n,o,0,i.t);n.s=0,n.clamp(),this.s!=t.s&&e.ZERO.subTo(n,n)}function k(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var i=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function S(n,i,r){var o=n.abs();if(!(o.t<=0)){var a=this.abs();if(a.t<o.t)return null!=i&&i.fromInt(0),null!=r&&this.copyTo(r),void 0;null==r&&(r=t());var s=t(),c=this.s,l=n.s,u=this.DB-p(o[o.t-1]);u>0?(o.lShiftTo(u,s),a.lShiftTo(u,r)):(o.copyTo(s),a.copyTo(r));var d=s.t,f=s[d-1];if(0!=f){var h=f*(1<<this.F1)+(d>1?s[d-2]>>this.F2:0),m=this.FV/h,g=(1<<this.F1)/h,v=1<<this.F2,y=r.t,b=y-d,_=null==i?t():i;for(s.dlShiftTo(b,_),r.compareTo(_)>=0&&(r[r.t++]=1,r.subTo(_,r)),e.ONE.dlShiftTo(d,_),_.subTo(s,s);s.t<d;)s[s.t++]=0;for(;--b>=0;){var w=r[--y]==f?this.DM:Math.floor(r[y]*m+(r[y-1]+v)*g);if((r[y]+=s.am(0,w,r,b,0,d))<w)for(s.dlShiftTo(b,_),r.subTo(_,r);r[y]<--w;)r.subTo(_,r)}null!=i&&(r.drShiftTo(d,i),c!=l&&e.ZERO.subTo(i,i)),r.t=d,r.clamp(),u>0&&r.rShiftTo(u,r),0>c&&e.ZERO.subTo(r,r)}}}function T(n){var i=t();return this.abs().divRemTo(n,null,i),this.s<0&&i.compareTo(e.ZERO)>0&&n.subTo(i,i),i}function C(e){this.m=e}function x(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function P(e){return e}function M(e){e.divRemTo(this.m,null,e)}function D(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function I(e,t){e.squareTo(t),this.reduce(t)}function E(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function L(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function H(n){var i=t();return n.abs().dlShiftTo(this.m.t,i),i.divRemTo(this.m,null,i),n.s<0&&i.compareTo(e.ZERO)>0&&this.m.subTo(i,i),i}function z(e){var n=t();return e.copyTo(n),this.reduce(n),n}function N(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],i=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,i,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function O(e,t){e.squareTo(t),this.reduce(t)}function R(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function A(){return 0==(this.t>0?1&this[0]:this.s)}function $(n,i){if(n>4294967295||1>n)return e.ONE;var r=t(),o=t(),a=i.convert(this),s=p(n)-1;for(a.copyTo(r);--s>=0;)if(i.sqrTo(r,o),(n&1<<s)>0)i.mulTo(o,a,r);else{var c=r;r=o,o=c}return i.revert(r)}function j(e,t){var n;return n=256>e||t.isEven()?new C(t):new L(t),this.exp(e,n)}function U(){var e=t();return this.copyTo(e),e}function B(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function F(){return 0==this.t?this.s:this[0]<<24>>24}function W(){return 0==this.t?this.s:this[0]<<16>>16}function q(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function V(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function Y(e){if(null==e&&(e=10),0==this.signum()||2>e||e>36)return"0";var n=this.chunkSize(e),i=Math.pow(e,n),r=s(i),o=t(),a=t(),c="";for(this.divRemTo(r,o,a);o.signum()>0;)c=(i+a.intValue()).toString(e).substr(1)+c,o.divRemTo(r,o,a);return a.intValue().toString(e)+c}function X(t,n){this.fromInt(0),null==n&&(n=10);for(var i=this.chunkSize(n),o=Math.pow(n,i),a=!1,s=0,c=0,l=0;l<t.length;++l){var u=r(t,l);0>u?"-"==t.charAt(l)&&0==this.signum()&&(a=!0):(c=n*c+u,++s>=i&&(this.dMultiply(o),this.dAddOffset(c,0),s=0,c=0))}s>0&&(this.dMultiply(Math.pow(n,s)),this.dAddOffset(c,0)),a&&e.ZERO.subTo(this,this)}function J(t,n,i){if("number"==typeof n)if(2>t)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),it,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(e.ONE.shiftLeft(t-1),this);else{var r=new Array,o=7&t;r.length=(t>>3)+1,n.nextBytes(r),o>0?r[0]&=(1<<o)-1:r[0]=0,this.fromString(r,256)}}function G(){var e=this.t,t=new Array;t[0]=this.s;var n,i=this.DB-e*this.DB%8,r=0;if(e-->0)for(i<this.DB&&(n=this[e]>>i)!=(this.s&this.DM)>>i&&(t[r++]=n|this.s<<this.DB-i);e>=0;)8>i?(n=(this[e]&(1<<i)-1)<<8-i,n|=this[--e]>>(i+=this.DB-8)):(n=this[e]>>(i-=8)&255,0>=i&&(i+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==r&&(128&this.s)!=(128&n)&&++r,(r>0||n!=this.s)&&(t[r++]=n);return t}function K(e){return 0==this.compareTo(e)}function Q(e){return this.compareTo(e)<0?this:e}function Z(e){return this.compareTo(e)>0?this:e}function et(e,t,n){var i,r,o=Math.min(e.t,this.t);for(i=0;o>i;++i)n[i]=t(this[i],e[i]);if(e.t<this.t){for(r=e.s&this.DM,i=o;i<this.t;++i)n[i]=t(this[i],r);n.t=this.t}else{for(r=this.s&this.DM,i=o;i<e.t;++i)n[i]=t(r,e[i]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function tt(e,t){return e&t}function nt(e){var n=t();return this.bitwiseTo(e,tt,n),n}function it(e,t){return e|t}function rt(e){var n=t();return this.bitwiseTo(e,it,n),n}function ot(e,t){return e^t}function at(e){var n=t();return this.bitwiseTo(e,ot,n),n}function st(e,t){return e&~t}function ct(e){var n=t();return this.bitwiseTo(e,st,n),n}function lt(){for(var e=t(),n=0;n<this.t;++n)e[n]=this.DM&~this[n];return e.t=this.t,e.s=~this.s,e}function ut(e){var n=t();return 0>e?this.rShiftTo(-e,n):this.lShiftTo(e,n),n}function dt(e){var n=t();return 0>e?this.lShiftTo(-e,n):this.rShiftTo(e,n),n}function ft(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function ht(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+ft(this[e]);return this.s<0?this.t*this.DB:-1}function pt(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function mt(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=pt(this[n]^t);return e}function gt(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)}function vt(t,n){var i=e.ONE.shiftLeft(t);return this.bitwiseTo(i,n,i),i}function yt(e){return this.changeBit(e,it)}function bt(e){return this.changeBit(e,st)}function _t(e){return this.changeBit(e,ot)}function wt(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);r>n;)i+=this[n]+e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i+=e[n],t[n++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=0>i?-1:0,i>0?t[n++]=i:-1>i&&(t[n++]=this.DV+i),t.t=n,t.clamp()}function kt(e){var n=t();return this.addTo(e,n),n}function St(e){var n=t();return this.subTo(e,n),n}function Tt(e){var n=t();return this.multiplyTo(e,n),n}function Ct(e){var n=t();return this.divRemTo(e,n,null),n}function xt(e){var n=t();return this.divRemTo(e,null,n),n}function Pt(e){var n=t(),i=t();return this.divRemTo(e,n,i),new Array(n,i)}function Mt(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function Dt(e,t){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}function It(){}function Et(e){return e}function Lt(e,t,n){e.multiplyTo(t,n)}function Ht(e,t){e.squareTo(t)}function zt(e){return this.exp(e,new It)}function Nt(e,t,n){var i=Math.min(this.t+e.t,t);for(n.s=0,n.t=i;i>0;)n[--i]=0;var r;for(r=n.t-this.t;r>i;++i)n[i+this.t]=this.am(0,e[i],n,i,0,this.t);for(r=Math.min(e.t,t);r>i;++i)this.am(0,e[i],n,i,0,t-i);n.clamp()}function Ot(e,t,n){--t;var i=n.t=this.t+e.t-t;for(n.s=0;--i>=0;)n[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)n[this.t+i-t]=this.am(t-i,e[i],n,0,0,this.t+i-t);n.clamp(),n.drShiftTo(1,n)}function Rt(n){this.r2=t(),this.q3=t(),e.ONE.dlShiftTo(2*n.t,this.r2),this.mu=this.r2.divide(n),this.m=n}function At(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var n=t();return e.copyTo(n),this.reduce(n),n}function $t(e){return e}function jt(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function Ut(e,t){e.squareTo(t),this.reduce(t)}function Bt(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function Ft(e,n){var i,r,o=e.bitLength(),a=s(1);if(0>=o)return a;i=18>o?1:48>o?3:144>o?4:768>o?5:6,r=8>o?new C(n):n.isEven()?new Rt(n):new L(n);var c=new Array,l=3,u=i-1,d=(1<<i)-1;if(c[1]=r.convert(this),i>1){var f=t();for(r.sqrTo(c[1],f);d>=l;)c[l]=t(),r.mulTo(f,c[l-2],c[l]),l+=2}var h,m,g=e.t-1,v=!0,y=t();for(o=p(e[g])-1;g>=0;){for(o>=u?h=e[g]>>o-u&d:(h=(e[g]&(1<<o+1)-1)<<u-o,g>0&&(h|=e[g-1]>>this.DB+o-u)),l=i;0==(1&h);)h>>=1,--l;if((o-=l)<0&&(o+=this.DB,--g),v)c[h].copyTo(a),v=!1;else{for(;l>1;)r.sqrTo(a,y),r.sqrTo(y,a),l-=2;l>0?r.sqrTo(a,y):(m=a,a=y,y=m),r.mulTo(y,c[h],a)}for(;g>=0&&0==(e[g]&1<<o);)r.sqrTo(a,y),m=a,a=y,y=m,--o<0&&(o=this.DB-1,--g)}return r.revert(a)}function Wt(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var i=t;t=n,n=i}var r=t.getLowestSetBit(),o=n.getLowestSetBit();if(0>o)return t;for(o>r&&(o=r),o>0&&(t.rShiftTo(o,t),n.rShiftTo(o,n));t.signum()>0;)(r=t.getLowestSetBit())>0&&t.rShiftTo(r,t),(r=n.getLowestSetBit())>0&&n.rShiftTo(r,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}function qt(e){if(0>=e)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var i=this.t-1;i>=0;--i)n=(t*n+this[i])%e;return n}function Vt(t){var n=t.isEven();if(this.isEven()&&n||0==t.signum())return e.ZERO;for(var i=t.clone(),r=this.clone(),o=s(1),a=s(0),c=s(0),l=s(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),n?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;r.isEven();)r.rShiftTo(1,r),n?(c.isEven()&&l.isEven()||(c.addTo(this,c),l.subTo(t,l)),c.rShiftTo(1,c)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);i.compareTo(r)>=0?(i.subTo(r,i),n&&o.subTo(c,o),a.subTo(l,a)):(r.subTo(i,r),n&&c.subTo(o,c),l.subTo(a,l))}return 0!=r.compareTo(e.ONE)?e.ZERO:l.compareTo(t)>=0?l.subtract(t):l.signum()<0?(l.addTo(t,l),l.signum()<0?l.add(t):l):l}function Yt(e){var t,n=this.abs();if(1==n.t&&n[0]<=tn[tn.length-1]){for(t=0;t<tn.length;++t)if(n[0]==tn[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<tn.length;){for(var i=tn[t],r=t+1;r<tn.length&&nn>i;)i*=tn[r++];for(i=n.modInt(i);r>t;)if(i%tn[t++]==0)return!1}return n.millerRabin(e)}function Xt(n){var i=this.subtract(e.ONE),r=i.getLowestSetBit();if(0>=r)return!1;var o=i.shiftRight(r);n=n+1>>1,n>tn.length&&(n=tn.length);for(var a=t(),s=0;n>s;++s){a.fromInt(tn[s]);var c=a.modPow(o,this);if(0!=c.compareTo(e.ONE)&&0!=c.compareTo(i)){for(var l=1;l++<r&&0!=c.compareTo(i);)if(c=c.modPowInt(2,this),0==c.compareTo(e.ONE))return!1;if(0!=c.compareTo(i))return!1}}return!0}var Jt;e.prototype.am=n,Jt=28,e.prototype.DB=Jt,e.prototype.DM=(1<<Jt)-1,e.prototype.DV=1<<Jt;var Gt=52;e.prototype.FV=Math.pow(2,Gt),e.prototype.F1=Gt-Jt,e.prototype.F2=2*Jt-Gt;var Kt,Qt,Zt="0123456789abcdefghijklmnopqrstuvwxyz",en=new Array;for(Kt="0".charCodeAt(0),Qt=0;9>=Qt;++Qt)en[Kt++]=Qt;for(Kt="a".charCodeAt(0),Qt=10;36>Qt;++Qt)en[Kt++]=Qt;for(Kt="A".charCodeAt(0),Qt=10;36>Qt;++Qt)en[Kt++]=Qt;C.prototype.convert=x,C.prototype.revert=P,C.prototype.reduce=M,C.prototype.mulTo=D,C.prototype.sqrTo=I,L.prototype.convert=H,L.prototype.revert=z,L.prototype.reduce=N,L.prototype.mulTo=R,L.prototype.sqrTo=O,e.prototype.copyTo=o,e.prototype.fromInt=a,e.prototype.fromString=c,e.prototype.clamp=l,e.prototype.dlShiftTo=g,e.prototype.drShiftTo=v,e.prototype.lShiftTo=y,e.prototype.rShiftTo=b,e.prototype.subTo=_,e.prototype.multiplyTo=w,e.prototype.squareTo=k,e.prototype.divRemTo=S,e.prototype.invDigit=E,e.prototype.isEven=A,e.prototype.exp=$,e.prototype.toString=u,e.prototype.negate=d,e.prototype.abs=f,e.prototype.compareTo=h,e.prototype.bitLength=m,e.prototype.mod=T,e.prototype.modPowInt=j,e.ZERO=s(0),e.ONE=s(1),It.prototype.convert=Et,It.prototype.revert=Et,It.prototype.mulTo=Lt,It.prototype.sqrTo=Ht,Rt.prototype.convert=At,Rt.prototype.revert=$t,Rt.prototype.reduce=jt,Rt.prototype.mulTo=Bt,Rt.prototype.sqrTo=Ut;var tn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],nn=(1<<26)/tn[tn.length-1];return e.prototype.chunkSize=q,e.prototype.toRadix=Y,e.prototype.fromRadix=X,e.prototype.fromNumber=J,e.prototype.bitwiseTo=et,e.prototype.changeBit=vt,e.prototype.addTo=wt,e.prototype.dMultiply=Mt,e.prototype.dAddOffset=Dt,e.prototype.multiplyLowerTo=Nt,e.prototype.multiplyUpperTo=Ot,e.prototype.modInt=qt,e.prototype.millerRabin=Xt,e.prototype.clone=U,e.prototype.intValue=B,e.prototype.byteValue=F,e.prototype.shortValue=W,e.prototype.signum=V,e.prototype.toByteArray=G,e.prototype.equals=K,e.prototype.min=Q,e.prototype.max=Z,e.prototype.and=nt,e.prototype.or=rt,e.prototype.xor=at,e.prototype.andNot=ct,e.prototype.not=lt,e.prototype.shiftLeft=ut,e.prototype.shiftRight=dt,e.prototype.getLowestSetBit=ht,e.prototype.bitCount=mt,e.prototype.testBit=gt,e.prototype.setBit=yt,e.prototype.clearBit=bt,e.prototype.flipBit=_t,e.prototype.add=kt,e.prototype.subtract=St,e.prototype.multiply=Tt,e.prototype.divide=Ct,e.prototype.remainder=xt,e.prototype.divideAndRemainder=Pt,e.prototype.modPow=Ft,e.prototype.modInverse=Vt,e.prototype.pow=zt,e.prototype.gcd=Wt,e.prototype.isProbablePrime=Yt,e}()}).call(this),function(){n=function(){function e(e){function t(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}function n(e,t){return e>>>t|e<<32-t}function i(e,t){return e>>>t}function r(e,t,n){return e&t^~e&n}function o(e,t,n){return e&t^e&n^t&n}function a(e){return n(e,2)^n(e,13)^n(e,22)}function s(e){return n(e,6)^n(e,11)^n(e,25)}function c(e){return n(e,7)^n(e,18)^i(e,3)}function l(e){return n(e,17)^n(e,19)^i(e,10)}function u(e,n){var i,u,d,f,h,p,m,g,v,y,b,_,w=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),k=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),S=new Array(64);e[n>>5]|=128<<24-n%32,e[(n+64>>9<<4)+15]=n;for(var v=0;v<e.length;v+=16){i=k[0],u=k[1],d=k[2],f=k[3],h=k[4],p=k[5],m=k[6],g=k[7];for(var y=0;64>y;y++)S[y]=16>y?e[y+v]:t(t(t(l(S[y-2]),S[y-7]),c(S[y-15])),S[y-16]),b=t(t(t(t(g,s(h)),r(h,p,m)),w[y]),S[y]),_=t(a(i),o(i,u,d)),g=m,m=p,p=h,h=t(f,b),f=d,d=u,u=i,i=t(b,_);k[0]=t(i,k[0]),k[1]=t(u,k[1]),k[2]=t(d,k[2]),k[3]=t(f,k[3]),k[4]=t(h,k[4]),k[5]=t(p,k[5]),k[6]=t(m,k[6]),k[7]=t(g,k[7])}return k}function d(e){for(var t=Array(),n=(1<<p)-1,i=0;i<e.length*p;i+=p)t[i>>5]|=(e.charCodeAt(i/p)&n)<<24-i%32;return t}function f(e){for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);128>i?t+=String.fromCharCode(i):i>127&&2048>i?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}function h(e){for(var t=m?"0123456789ABCDEF":"0123456789abcdef",n="",i=0;i<4*e.length;i++)n+=t.charAt(e[i>>2]>>8*(3-i%4)+4&15)+t.charAt(e[i>>2]>>8*(3-i%4)&15);return n}var p=8,m=0;return e=f(e),h(u(d(e),e.length*p))}return e}()}.call(this),function(){e={},e.generateVerifier=function(e,n){var r=a(n),o=n&&n.identity||i.id(),s=n&&n.salt||i.id(),c=r.hash(s+r.hash(o+":"+e)),l=new t(c,16),u=r.g.modPow(l,r.N);return{identity:o,salt:s,verifier:u.toString(16)}},e.matchVerifier={identity:String,salt:String,verifier:String},e.Client=function(e,n){var i=this;i.params=a(n),i.password=e;var r,o,c=i.params.N,l=i.params.g;if(n&&n.a){if("string"==typeof n.a)r=new t(n.a,16);else{if(!(n.a instanceof t))throw new Error("Invalid parameter: a");r=n.a}if(o=l.modPow(r,c),0===o.mod(c))throw new Error("Invalid parameter: a: A mod N == 0.")}else for(;!o||0===o.mod(c);)r=s(),o=l.modPow(r,c);i.a=r,i.A=o,i.Astr=o.toString(16)},e.Client.prototype.startExchange=function(){var e=this;return{A:e.Astr}},e.Client.prototype.respondToChallenge=function(e){var n=this,i=n.params.N,r=n.params.g,o=n.params.k,a=n.params.hash;if(n.identity=e.identity,n.salt=e.salt,n.Bstr=e.B,n.B=new t(n.Bstr,16),0===n.B.mod(i))throw new Error("Server sent invalid key: B mod N == 0.");var s=new t(a(n.Astr+n.Bstr),16),c=new t(a(n.salt+a(n.identity+":"+n.password)),16),l=o.multiply(r.modPow(c,i)),u=n.a.add(s.multiply(c)),d=n.B.subtract(l).modPow(u,i),f=a(n.Astr+n.Bstr+d.toString(16)),h=a(n.Astr+f+d.toString(16));return n.S=d,n.HAMK=h,{M:f}},e.Client.prototype.verifyConfirmation=function(e){var t=this;return t.HAMK&&e.HAMK===t.HAMK},e.Server=function(e,n){var i=this;i.params=a(n),i.verifier=e;var r,o,c=i.params.N,l=i.params.g,u=i.params.k,d=new t(i.verifier.verifier,16);if(n&&n.b){if("string"==typeof n.b)r=new t(n.b,16);else{if(!(n.b instanceof t))throw new Error("Invalid parameter: b");r=n.b}if(o=u.multiply(d).add(l.modPow(r,c)).mod(c),0===o.mod(c))throw new Error("Invalid parameter: b: B mod N == 0.")}else for(;!o||0===o.mod(c);)r=s(),o=u.multiply(d).add(l.modPow(r,c)).mod(c);i.b=r,i.B=o,i.Bstr=o.toString(16)},e.Server.prototype.issueChallenge=function(e){var n=this;if(n.Astr=e.A,n.A=new t(n.Astr,16),0===n.A.mod(n.params.N))throw new Error("Client sent invalid key: A mod N == 0.");var i=n.params.N,r=n.params.hash,o=new t(r(n.Astr+n.Bstr),16),a=new t(n.verifier.verifier,16),s=n.A.multiply(a.modPow(o,i));return n.S=s.modPow(n.b,i),n.M=r(n.Astr+n.Bstr+n.S.toString(16)),n.HAMK=r(n.Astr+n.M+n.S.toString(16)),{identity:n.verifier.identity,salt:n.verifier.salt,B:n.Bstr}},e.Server.prototype.verifyResponse=function(e){var t=this;return e.M!==t.M?null:{HAMK:t.HAMK}};var o={hash:function(e){return n(e).toLowerCase()},N:new t("EEAF0AB9ADB38DD69C33F80AFA8FC5E86072618775FF3C0B9EA2314C9C256576D674DF7496EA81D3383B4813D692C6E0E0D5D8E250B98BE48E495C1D6089DAD15DC7D7B46154D6B6CE8EF4AD69B15D4982559B297BCF1885C529F566660E57EC68EDBC3C05726CC02FD4CBF4976EAA9AFD5138FE8376435B9FC61D2FC0EB06E3",16),g:new t("2")};o.k=new t(o.hash(o.N.toString(16)+o.g.toString(16)),16);var a=function(e){if(!e)return o;var n=r.extend({},o);return r.each(["N","g","k"],function(i){if(e[i])if("string"==typeof e[i])n[i]=new t(e[i],16);else{if(!(e[i]instanceof t))throw new Error("Invalid parameter: "+i);n[i]=e[i]}}),e.hash&&(n.hash=function(t){return e.hash(t).toLowerCase()}),!e.k&&(e.N||e.g||e.hash)&&(n.k=n.hash(n.N.toString(16)+n.g.toString(16))),n},s=function(){return new t(i.hexString(36),16)}}.call(this),"undefined"==typeof Package&&(Package={}),Package.srp={SRP:e}}(),function(){{var e=Package.meteor.Meteor,t=Package["accounts-base"].Accounts,n=Package.srp.SRP,i=Package.underscore._;Package.livedata.DDP}(function(){e.loginWithPassword=function(i,r,o){var a=new n.Client(r),s=a.startExchange();"string"==typeof i&&(i=-1===i.indexOf("@")?{username:i}:{email:i}),s.user=i,t._setLoggingIn(!0),e.apply("beginPasswordExchange",[s],function(e,n){if(e||!n)return t._setLoggingIn(!1),e=e||new Error("No result from call to beginPasswordExchange"),o&&o(e),void 0;var i=a.respondToChallenge(n);t.callLoginMethod({methodArguments:[{srp:i}],validateResult:function(e){if(!a.verifyConfirmation({HAMK:e.HAMK}))throw new Error("Server is cheating!")},userCallback:o})})},t.createUser=function(e,r){if(e=i.clone(e),!e.password)throw new Error("Must set options.password");var o=n.generateVerifier(e.password);delete e.password,e.srp=o,t.callLoginMethod({methodName:"createUser",methodArguments:[e],userCallback:r})},t.changePassword=function(t,i,r){if(!e.user())return r&&r(new Error("Must be logged in to change password.")),void 0;var o=n.generateVerifier(i);if(t){var a=new n.Client(t),s=a.startExchange();s.user={id:e.user()._id},e.apply("beginPasswordExchange",[s],function(t,n){if(t||!n)return r&&r(t||new Error("No result from call to beginPasswordExchange")),void 0;var i=a.respondToChallenge(n);i.srp=o,e.apply("changePassword",[i],function(e,t){e||!t?r&&r(e||new Error("No result from changePassword.")):a.verifyConfirmation(t)?r&&r():r&&r(new Error("Old password verification failed."))})})}else e.apply("changePassword",[{srp:o}],function(e,t){e||!t?r&&r(e||new Error("No result from changePassword.")):r&&r()})},t.forgotPassword=function(t,n){if(!t.email)throw new Error("Must pass options.email");e.call("forgotPassword",t,n)},t.resetPassword=function(e,i,r){if(!e)throw new Error("Need to pass token");if(!i)throw new Error("Need to pass newPassword");var o=n.generateVerifier(i);t.callLoginMethod({methodName:"resetPassword",methodArguments:[e,o],userCallback:r})},t.verifyEmail=function(e,n){if(!e)throw new Error("Need to pass token");t.callLoginMethod({methodName:"verifyEmail",methodArguments:[e],userCallback:n})}}).call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-password"]={}}(),function(){var Meteor=Package.meteor.Meteor,$=Package.jquery.$,jQuery=Package.jquery.jQuery,s,ar;(function(){!function($){var min=Math.min,max=Math.max,round=Math.floor,isStr=function(e){return"string"===$.type(e)},runPluginCallbacks=function(Instance,a_fn){function g(e){return e}if($.isArray(a_fn))for(var i=0,c=a_fn.length;c>i;i++){var fn=a_fn[i];try{isStr(fn)&&(fn=eval(fn)),$.isFunction(fn)&&g(fn)(Instance)}catch(ex){}}};$.layout={version:"1.3.rc30.79",revision:.033007,browser:{},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects,panes,north,south,west,east,center".split(","),allPanes:"north,south,west,east,center".split(","),borderPanes:"north,south,west,east".split(","),oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(e){var t=$(e),n=t.data("layout")||t.data("parentLayout");
if(n){var i=n.container;if(i.data("layoutPane"))return i;var r=i.closest("."+$.layout.defaults.panes.paneClass);if(r.data("layoutPane"))return r}return null},getParentPaneInstance:function(e){var t=$.layout.getParentPaneElem(e);return t?t.data("layoutPane"):null},getParentLayoutInstance:function(e){var t=$.layout.getParentPaneElem(e);return t?t.data("parentLayout"):null},getEventObject:function(e){return"object"==typeof e&&e.stopPropagation?e:null},parsePaneName:function(e){var t=$.layout.getEventObject(e),n=e;return t&&(t.stopPropagation(),n=$(this).data("layoutEdge")),n&&!/^(west|east|north|south|center)$/.test(n)&&($.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+n+'"'),n="error"),n},plugins:{draggable:!!$.fn.draggable,effects:{core:!!$.effects,slide:$.effects&&($.effects.slide||$.effects.effect&&$.effects.effect.slide)}},onCreate:[],onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||$.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||$.layout.getScrollbarSize("height")},getScrollbarSize:function(e){var t=$('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body"),n={width:t.css("width")-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),window.scrollbarWidth=n.width,window.scrollbarHeight=n.height,e.match(/^(width|height)$/)?n[e]:n},showInvisibly:function(e,t){if(e&&e.length&&(t||"none"===e.css("display"))){var n=e[0].style,i={display:n.display||"",visibility:n.visibility||""};return e.css({display:"block",visibility:"hidden"}),i}return{}},getElementDimensions:function(e,t){var n,i,r,o={css:{},inset:{}},a=o.css,s={bottom:0},c=$.layout.cssNum,l=e.offset();return o.offsetLeft=l.left,o.offsetTop=l.top,t||(t={}),$.each("Left,Right,Top,Bottom".split(","),function(c,l){n=a["border"+l]=$.layout.borderWidth(e,l),i=a["padding"+l]=$.layout.cssNum(e,"padding"+l),r=l.toLowerCase(),o.inset[r]=t[r]>=0?t[r]:i,s[r]=o.inset[r]+n}),a.width=e.width(),a.height=e.height(),a.top=c(e,"top",!0),a.bottom=c(e,"bottom",!0),a.left=c(e,"left",!0),a.right=c(e,"right",!0),o.outerWidth=e.outerWidth(),o.outerHeight=e.outerHeight(),o.innerWidth=max(0,o.outerWidth-s.left-s.right),o.innerHeight=max(0,o.outerHeight-s.top-s.bottom),o.layoutWidth=e.innerWidth(),o.layoutHeight=e.innerHeight(),o},getElementStyles:function(e,t){var n,i,r,o,a,s,c={},l=e[0].style,u=t.split(","),d="Top,Bottom,Left,Right".split(","),f="Color,Style,Width".split(",");for(o=0;o<u.length;o++)if(n=u[o],n.match(/(border|padding|margin)$/))for(a=0;4>a;a++)if(i=d[a],"border"===n)for(s=0;3>s;s++)r=f[s],c[n+i+r]=l[n+i+r];else c[n+i]=l[n+i];else c[n]=l[n];return c},cssWidth:function(e,t){if(0>=t)return 0;var n=$.layout.browser.boxModel?$.support.boxSizing?e.css("boxSizing"):"content-box":"border-box",i=$.layout.borderWidth,r=$.layout.cssNum,o=t;return"border-box"!==n&&(o-=i(e,"Left")+i(e,"Right")),"content-box"===n&&(o-=r(e,"paddingLeft")+r(e,"paddingRight")),max(0,o)},cssHeight:function(e,t){if(0>=t)return 0;var n=$.layout.browser.boxModel?$.support.boxSizing?e.css("boxSizing"):"content-box":"border-box",i=$.layout.borderWidth,r=$.layout.cssNum,o=t;return"border-box"!==n&&(o-=i(e,"Top")+i(e,"Bottom")),"content-box"===n&&(o-=r(e,"paddingTop")+r(e,"paddingBottom")),max(0,o)},cssNum:function(e,t,n){e.jquery||(e=$(e));var i=$.layout.showInvisibly(e),r=$.css(e[0],t,!0),o=n&&"auto"==r?r:Math.round(parseFloat(r)||0);return e.css(i),o},borderWidth:function(e,t){e.jquery&&(e=e[0]);var n="border"+t.substr(0,1).toUpperCase()+t.substr(1);return"none"===$.css(e,n+"Style",!0)?0:Math.round(parseFloat($.css(e,n+"Width",!0))||0)},isMouseOverElem:function(e,t){var n=$(t||this),i=n.offset(),r=i.top,o=i.left,a=o+n.outerWidth(),s=r+n.outerHeight(),c=e.pageX,l=e.pageY;return $.layout.browser.msie&&0>c&&0>l||c>=o&&a>=c&&l>=r&&s>=l},msg:function(e,t,n,i){function r(){var e=$.support.fixedPosition?"fixed":"absolute",t=$('<div id="layoutLogger" style="position: '+e+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body");return t.css("left",$(window).width()-t.outerWidth()-5),$.ui.draggable&&t.draggable({handle:":first-child"}),t}if($.isPlainObject(e)&&window.debugData){"string"==typeof t?(i=n,n=t):"object"==typeof n&&(i=n,n=null);var o=n||"log( <object> )",a=$.extend({sort:!1,returnHTML:!1,display:!1},i);t===!0||a.display?debugData(e,o,a):window.console&&console.log(debugData(e,o,a))}else if(t)alert(e);else if(window.console)console.log(e);else{var s="#layoutLogger",c=$(s);c.length||(c=r()),c.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>")}}};var u=navigator.userAgent.toLowerCase(),m=/(chrome)[ \/]([\w.]+)/.exec(u)||/(webkit)[ \/]([\w.]+)/.exec(u)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(u)||/(msie) ([\w.]+)/.exec(u)||u.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(u)||[],b=m[1]||"",v=m[2]||0,ie="msie"===b;$.layout.browser={version:v,safari:"webkit"===b,webkit:"chrome"===b,msie:ie,isIE6:ie&&6==v,boxModel:!ie||$.support.boxModel!==!1},b&&($.layout.browser[b]=!0),ie&&$(function(){$.layout.browser.boxModel=$.support.boxModel}),$.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,maskPanesEarly:!1,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1e3,resizer_drag:1e4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button\nInvalid ",containerMissing:"UI Layout Initialization Error\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element.",noContainerHeight:"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:$.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:!0,animatePaneSizing:!1,children:null,containerSelector:"",initChildren:!0,destroyChildren:!0,resizeChildren:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}},$.layout.optionsMap={layout:"name,instanceKey,stateManagement,effects,inset,zIndexes,errors,zIndex,scrollToBookmarkOnLoad,showErrorMessages,maskPanesEarly,outset,resizeWithWindow,resizeWithWindowDelay,resizeWithWindowMaxDelay,onresizeall,onresizeall_start,onresizeall_end,onload,onload_start,onload_end,onunload,onunload_start,onunload_end".split(","),center:"paneClass,contentSelector,contentIgnoreSelector,findNestedContent,applyDemoStyles,triggerEventsOnLoad,showOverflowOnHover,maskContents,maskObjects,liveContentResizing,containerSelector,children,initChildren,resizeChildren,destroyChildren,onresize,onresize_start,onresize_end,onsizecontent,onsizecontent_start,onsizecontent_end".split(","),noDefault:"paneSelector,resizerCursor,customHotkey".split(",")},$.layout.transformData=function(e,t){var n,i,r,o,a,s,c,l=t?{panes:{},center:{}}:{};if("object"!=typeof e)return l;for(i in e)for(n=l,a=e[i],r=i.split("__"),c=r.length-1,s=0;c>=s;s++)o=r[s],s===c?n[o]=$.isPlainObject(a)?$.layout.transformData(a):a:(n[o]||(n[o]={}),n=n[o]);return l},$.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(e){function t(t,n){for(var i,r=t.split("."),o=r.length-1,a={branch:e,key:r[o]},s=0;o>s;s++)i=r[s],a.branch=void 0==a.branch[i]?n?a.branch[i]={}:{}:a.branch[i];return a}var n,i,r,o=$.layout.backwardCompatibility.map;for(var a in o)n=t(a),r=n.branch[n.key],void 0!==r&&(i=t(o[a],!0),i.branch[i.key]=r,delete n.branch[n.key])},renameAllOptions:function(e){var t=$.layout.backwardCompatibility.renameOptions;return t(e),e.defaults&&("object"!=typeof e.panes&&(e.panes={}),$.extend(!0,e.panes,e.defaults),delete e.defaults),e.panes&&t(e.panes),$.each($.layout.config.allPanes,function(n,i){e[i]&&t(e[i])}),e}},$.fn.layout=function(opts){function keyDown(e){if(!e)return!0;var t=e.keyCode;if(33>t)return!0;var n,i,r,o,a={38:"north",40:"south",37:"west",39:"east"},s=(e.altKey,e.shiftKey),c=e.ctrlKey,l=c&&t>=37&&40>=t;return l&&options[a[t]].enableCursorHotkey?o=a[t]:(c||s)&&$.each(_c.borderPanes,function(e,a){return n=options[a],i=n.customHotkey,r=n.customHotkeyModifier,(s&&"SHIFT"==r||c&&"CTRL"==r||c&&s)&&i&&t===(isNaN(i)||9>=i?i.toUpperCase().charCodeAt(0):i)?(o=a,!1):void 0}),o&&$Ps[o]&&options[o].closable&&!state[o].isHidden?(toggle(o),e.stopPropagation(),e.returnValue=!1,!1):!0}function allowOverflow(e){if(isInitialized()){this&&this.tagName&&(e=this);var t;if(isStr(e)?t=$Ps[e]:$(e).data("layoutRole")?t=$(e):$(e).parents().each(function(){return $(this).data("layoutRole")?(t=$(this),!1):void 0}),t&&t.length){var n=t.data("layoutEdge"),i=state[n];if(i.cssSaved&&resetOverflow(n),i.isSliding||i.isResizing||i.isClosed)return i.cssSaved=!1,void 0;var r={zIndex:options.zIndexes.resizer_normal+1},o={},a=t.css("overflow"),s=t.css("overflowX"),c=t.css("overflowY");"visible"!=a&&(o.overflow=a,r.overflow="visible"),s&&!s.match(/(visible|auto)/)&&(o.overflowX=s,r.overflowX="visible"),c&&!c.match(/(visible|auto)/)&&(o.overflowY=s,r.overflowY="visible"),i.cssSaved=o,t.css(r),$.each(_c.allPanes,function(e,t){t!=n&&resetOverflow(t)})}}}function resetOverflow(e){if(isInitialized()){this&&this.tagName&&(e=this);var t;if(isStr(e)?t=$Ps[e]:$(e).data("layoutRole")?t=$(e):$(e).parents().each(function(){return $(this).data("layoutRole")?(t=$(this),!1):void 0}),t&&t.length){var n=t.data("layoutEdge"),i=state[n],r=i.cssSaved||{};i.isSliding||i.isResizing||t.css("zIndex",options.zIndexes.pane_normal),t.css(r),i.cssSaved=!1}}}var browser=$.layout.browser,_c=$.layout.config,cssW=$.layout.cssWidth,cssH=$.layout.cssHeight,elDims=$.layout.getElementDimensions,styles=$.layout.getElementStyles,evtObj=$.layout.getEventObject,evtPane=$.layout.parsePaneName,options=$.extend(!0,{},$.layout.defaults),effects=options.effects=$.extend(!0,{},$.layout.effects),state={id:"layout"+$.now(),initialized:!1,paneResizing:!1,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},children={north:null,south:null,east:null,west:null,center:null},timer={data:{},set:function(e,t,n){timer.clear(e),timer.data[e]=setTimeout(t,n)},clear:function(e){var t=timer.data;t[e]&&(clearTimeout(t[e]),delete t[e])}},_log=function(e,t,n){var i=options;return(i.showErrorMessages&&!n||n&&i.showDebugMessages)&&$.layout.msg(i.name+" / "+e,t!==!1),!1},_runCallbacks=function(evtName,pane,skipBoundEvents){function g(e){return e}var hasPane=pane&&isStr(pane),s=hasPane?state[pane]:state,o=hasPane?options[pane]:options,lName=options.name,lng=evtName+(evtName.match(/_/)?"":"_end"),shrt=lng.match(/_end$/)?lng.substr(0,lng.length-4):"",fn=o[lng]||o[shrt],retVal="NC",args=[],$P;if(hasPane||"boolean"!==$.type(pane)||(skipBoundEvents=pane,pane=""),fn)try{isStr(fn)&&(fn.match(/,/)?(args=fn.split(","),fn=eval(args[0])):fn=eval(fn)),$.isFunction(fn)&&(retVal=args.length?g(fn)(args[1]):hasPane?g(fn)(pane,$Ps[pane],s,o,lName):g(fn)(Instance,s,o,lName))}catch(ex){_log(options.errors.callbackError.replace(/EVENT/,$.trim((pane||"")+" "+lng)),!1),"string"===$.type(ex)&&string.length&&_log("Exception:  "+ex,!1)}return skipBoundEvents||retVal===!1||(hasPane?($P=$Ps[pane],o=options[pane],s=state[pane],$P.triggerHandler("layoutpane"+lng,[pane,$P,s,o,lName]),shrt&&$P.triggerHandler("layoutpane"+shrt,[pane,$P,s,o,lName])):($N.triggerHandler("layout"+lng,[Instance,s,o,lName]),shrt&&$N.triggerHandler("layout"+shrt,[Instance,s,o,lName]))),hasPane&&"onresize_end"===evtName&&resizeChildren(pane+"",!0),retVal},_fixIframe=function(e){if(!browser.mozilla){var t=$Ps[e];"IFRAME"===state[e].tagName?t.css(_c.hidden).css(_c.visible):t.find("IFRAME").css(_c.hidden).css(_c.visible)}},cssSize=function(e,t){var n="horz"==_c[e].dir?cssH:cssW;return n($Ps[e],t)},cssMinDims=function(e){var t=$Ps[e],n=_c[e].dir,i={minWidth:1001-cssW(t,1e3),minHeight:1001-cssH(t,1e3)};return"horz"===n&&(i.minSize=i.minHeight),"vert"===n&&(i.minSize=i.minWidth),i},setOuterWidth=function(e,t,n){var i,r=e;isStr(e)?r=$Ps[e]:e.jquery||(r=$(e)),i=cssW(r,t),r.css({width:i}),i>0?n&&r.data("autoHidden")&&r.innerHeight()>0&&(r.show().data("autoHidden",!1),browser.mozilla||r.css(_c.hidden).css(_c.visible)):n&&!r.data("autoHidden")&&r.hide().data("autoHidden",!0)},setOuterHeight=function(e,t,n){var i,r=e;isStr(e)?r=$Ps[e]:e.jquery||(r=$(e)),i=cssH(r,t),r.css({height:i,visibility:"visible"}),i>0&&r.innerWidth()>0?n&&r.data("autoHidden")&&(r.show().data("autoHidden",!1),browser.mozilla||r.css(_c.hidden).css(_c.visible)):n&&!r.data("autoHidden")&&r.hide().data("autoHidden",!0)},_parseSize=function(e,t,n){if(n||(n=_c[e].dir),isStr(t)&&t.match(/%/)&&(t="100%"===t?-1:parseInt(t,10)/100),0===t)return 0;if(t>=1)return parseInt(t,10);var i=options,r=0;if("horz"==n?r=sC.innerHeight-($Ps.north?i.north.spacing_open:0)-($Ps.south?i.south.spacing_open:0):"vert"==n&&(r=sC.innerWidth-($Ps.west?i.west.spacing_open:0)-($Ps.east?i.east.spacing_open:0)),-1===t)return r;if(t>0)return round(r*t);if("center"==e)return 0;var o="horz"===n?"height":"width",a=$Ps[e],s="height"===o?$Cs[e]:!1,c=$.layout.showInvisibly(a),l=a.css(o),u=s?s.css(o):0;return a.css(o,"auto"),s&&s.css(o,"auto"),t="height"===o?a.outerHeight():a.outerWidth(),a.css(o,l).css(c),s&&s.css(o,u),t},getPaneSize=function(e,t){var n=$Ps[e],i=options[e],r=state[e],o=t?i.spacing_open:0,a=t?i.spacing_closed:0;return!n||r.isHidden?0:r.isClosed||r.isSliding&&t?a:"horz"===_c[e].dir?n.outerHeight()+o:n.outerWidth()+o},setSizeLimits=function(e,t){if(isInitialized()){var n=options[e],i=state[e],r=_c[e],o=r.dir,a=(r.sizeType.toLowerCase(),void 0!=t?t:i.isSliding),s=($Ps[e],n.spacing_open),c=_c.oppositeEdge[e],l=state[c],u=$Ps[c],d=!u||l.isVisible===!1||l.isSliding?0:"horz"==o?u.outerHeight():u.outerWidth(),f=(!u||l.isHidden?0:options[c][l.isClosed!==!1?"spacing_closed":"spacing_open"])||0,h="horz"==o?sC.innerHeight:sC.innerWidth,p=cssMinDims("center"),m="horz"==o?max(options.center.minHeight,p.minHeight):max(options.center.minWidth,p.minWidth),g=h-s-(a?0:_parseSize("center",m,o)+d+f),v=i.minSize=max(_parseSize(e,n.minSize),cssMinDims(e).minSize),y=i.maxSize=min(n.maxSize?_parseSize(e,n.maxSize):1e5,g),b=i.resizerPosition={},_=sC.inset.top,w=sC.inset.left,k=sC.innerWidth,S=sC.innerHeight,T=n.spacing_open;switch(e){case"north":b.min=_+v,b.max=_+y;break;case"west":b.min=w+v,b.max=w+y;break;case"south":b.min=_+S-y-T,b.max=_+S-v-T;break;case"east":b.min=w+k-y-T,b.max=w+k-v-T}}},calcNewCenterPaneDims=function(){var e={top:getPaneSize("north",!0),bottom:getPaneSize("south",!0),left:getPaneSize("west",!0),right:getPaneSize("east",!0),width:0,height:0};return e.width=sC.innerWidth-e.left-e.right,e.height=sC.innerHeight-e.bottom-e.top,e.top+=sC.inset.top,e.bottom+=sC.inset.bottom,e.left+=sC.inset.left,e.right+=sC.inset.right,e},getHoverClasses=function(e,t){var n=$(e),i=n.data("layoutRole"),r=n.data("layoutEdge"),o=options[r],a=o[i+"Class"],s="-"+r,c="-open",l="-closed",u="-sliding",d="-hover ",f=n.hasClass(a+l)?l:c,h=f===l?c:l,p=a+d+(a+s+d)+(a+f+d)+(a+s+f+d);return t&&(p+=a+h+d+(a+s+h+d)),"resizer"==i&&n.hasClass(a+u)&&(p+=a+u+d+(a+s+u+d)),$.trim(p)},addHover=function(e,t){var n=$(t||this);e&&"toggler"===n.data("layoutRole")&&e.stopPropagation(),n.addClass(getHoverClasses(n))},removeHover=function(e,t){var n=$(t||this);n.removeClass(getHoverClasses(n,!0))},onResizerEnter=function(){var e=$(this).data("layoutEdge"),t=state[e];t.isClosed||t.isResizing||state.paneResizing||($.fn.disableSelection&&$("body").disableSelection(),options.maskPanesEarly&&showMasks(e,{resizing:!0}))},onResizerLeave=function(e,t){var n=t||this,i=$(n).data("layoutEdge"),r=i+"ResizerLeave";timer.clear(i+"_openSlider"),timer.clear(r),t?state.paneResizing||($.fn.enableSelection&&$("body").enableSelection(),options.maskPanesEarly&&hideMasks()):timer.set(r,function(){onResizerLeave(e,n)},200)},_create=function(){initOptions();var e=options,t=state;return t.creatingLayout=!0,runPluginCallbacks(Instance,$.layout.onCreate),!1===_runCallbacks("onload_start")?"cancel":(_initContainer(),initHotkeys(),$(window).bind("unload."+sID,unload),runPluginCallbacks(Instance,$.layout.onLoad),e.initPanes&&_initLayoutElements(),delete t.creatingLayout,state.initialized)},isInitialized=function(){return state.initialized||state.creatingLayout?!0:_initLayoutElements()},_initLayoutElements=function(e){var t=options;if(!$N.is(":visible"))return!e&&browser.webkit&&"BODY"===$N[0].tagName&&setTimeout(function(){_initLayoutElements(!0)},50),!1;if(!getPane("center").length)return _log(t.errors.centerPaneMissing);if(state.creatingLayout=!0,$.extend(sC,elDims($N,t.inset)),initPanes(),t.scrollToBookmarkOnLoad){var n=self.location;n.hash&&n.replace(n.hash)}return Instance.hasParentLayout?t.resizeWithWindow=!1:t.resizeWithWindow&&$(window).bind("resize."+sID,windowResize),delete state.creatingLayout,state.initialized=!0,runPluginCallbacks(Instance,$.layout.onReady),_runCallbacks("onload_end"),!0},createChildren=function(e,t){var n=evtPane.call(this,e),i=$Ps[n];if(i){var r=$Cs[n],o=state[n],a=options[n],s=options.stateManagement||{},c=t?a.children=t:a.children;if($.isPlainObject(c))c=[c];else if(!c||!$.isArray(c))return;$.each(c,function(e,t){if($.isPlainObject(t)){var a=t.containerSelector?i.find(t.containerSelector):r||i;a.each(function(){var e=$(this),i=e.data("layout");if(!i){if(setInstanceKey({container:e,options:t},o),s.includeChildren&&state.stateData[n]){var r=state.stateData[n].children||{},a=r[t.instanceKey],c=t.stateManagement||(t.stateManagement={autoLoad:!0});c.autoLoad===!0&&a&&(c.autoSave=!1,c.includeChildren=!0,c.autoLoad=$.extend(!0,{},a))}i=e.layout(t),i&&refreshChildren(n,i)}})}})}},setInstanceKey=function(e,t){var n=e.container,i=e.options,r=i.stateManagement,o=i.instanceKey||n.data("layoutInstanceKey");return o||(o=(r&&r.cookie?r.cookie.name:"")||i.name),o=o?o.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,"_"):"layout"+ ++t.childIdx,i.instanceKey=o,n.data("layoutInstanceKey",o),o},refreshChildren=function(e,t){var n,i=$Ps[e],r=children[e],o=state[e];$.isPlainObject(r)&&($.each(r,function(e,t){t.destroyed&&delete r[e]}),$.isEmptyObject(r)&&(r=children[e]=null)),t||r||(t=i.data("layout")),t&&(t.hasParentLayout=!0,n=t.options,setInstanceKey(t,o),r||(r=children[e]={}),r[n.instanceKey]=t.container.data("layout")),Instance[e].children=children[e],t||createChildren(e)},windowResize=function(){var e=options,t=Number(e.resizeWithWindowDelay);10>t&&(t=100),timer.clear("winResize"),timer.set("winResize",function(){timer.clear("winResize"),timer.clear("winResizeRepeater");var t=elDims($N,e.inset);(t.innerWidth!==sC.innerWidth||t.innerHeight!==sC.innerHeight)&&resizeAll()},t),timer.data.winResizeRepeater||setWindowResizeRepeater()},setWindowResizeRepeater=function(){var e=Number(options.resizeWithWindowMaxDelay);e>0&&timer.set("winResizeRepeater",function(){setWindowResizeRepeater(),resizeAll()},e)},unload=function(){_runCallbacks("onunload_start"),runPluginCallbacks(Instance,$.layout.onUnload),_runCallbacks("onunload_end")},_initContainer=function(){var e,t,n=$N[0],i=$("html"),r=sC.tagName=n.tagName,o=sC.id=n.id,a=sC.className=n.className,s=options,c=s.name,l="position,margin,padding,border",u="layoutCSS",d={},f="hidden",h=$N.data("parentLayout"),p=$N.data("layoutEdge"),m=h&&p,g=$.layout.cssNum;sC.selector=$N.selector.split(".slice")[0],sC.ref=(s.name?s.name+" layout / ":"")+r+(o?"#"+o:a?".["+a+"]":""),sC.isBody="BODY"===r,m||sC.isBody||(e=$N.closest("."+$.layout.defaults.panes.paneClass),h=e.data("parentLayout"),p=e.data("layoutEdge"),m=h&&p),$N.data({layout:Instance,layoutContainer:sID}).addClass(s.containerClass);var v={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(c in v)$N.bind("layout"+c.toLowerCase()+"."+sID,Instance[v[c]||c]);m&&(Instance.hasParentLayout=!0,h.refreshChildren(p,Instance)),$N.data(u)||(sC.isBody?($N.data(u,$.extend(styles($N,l),{height:$N.css("height"),overflow:$N.css("overflow"),overflowX:$N.css("overflowX"),overflowY:$N.css("overflowY")})),i.data(u,$.extend(styles(i,"padding"),{height:"auto",overflow:i.css("overflow"),overflowX:i.css("overflowX"),overflowY:i.css("overflowY")}))):$N.data(u,styles($N,l+",top,bottom,left,right,width,height,overflow,overflowX,overflowY")));try{if(d={overflow:f,overflowX:f,overflowY:f},$N.css(d),s.inset&&!$.isPlainObject(s.inset)&&(t=parseInt(s.inset,10)||0,s.inset={top:t,bottom:t,left:t,right:t}),sC.isBody)s.outset?$.isPlainObject(s.outset)||(t=parseInt(s.outset,10)||0,s.outset={top:t,bottom:t,left:t,right:t}):s.outset={top:g(i,"paddingTop"),bottom:g(i,"paddingBottom"),left:g(i,"paddingLeft"),right:g(i,"paddingRight")},i.css(d).css({height:"100%",border:"none",padding:0,margin:0}),browser.isIE6?($N.css({width:"100%",height:"100%",border:"none",padding:0,margin:0,position:"relative"}),s.inset||(s.inset=elDims($N).inset)):($N.css({width:"auto",height:"auto",margin:0,position:"absolute"}),$N.css(s.outset)),$.extend(sC,elDims($N,s.inset));else{var y=$N.css("position");y&&y.match(/(fixed|absolute|relative)/)||$N.css("position","relative"),$N.is(":visible")&&($.extend(sC,elDims($N,s.inset)),sC.innerHeight<1&&_log(s.errors.noContainerHeight.replace(/CONTAINER/,sC.ref)))}g($N,"minWidth")&&$N.parent().css("overflowX","auto"),g($N,"minHeight")&&$N.parent().css("overflowY","auto")}catch(b){}},initHotkeys=function(e){e=e?e.split(","):_c.borderPanes,$.each(e,function(e,t){var n=options[t];return n.enableCursorHotkey||n.customHotkey?($(document).bind("keydown."+sID,keyDown),!1):void 0})},initOptions=function(){function e(e){var t=options[e],n=options.panes;t.fxSettings||(t.fxSettings={}),n.fxSettings||(n.fxSettings={}),$.each(["_open","_close","_size"],function(i,r){var o="fxName"+r,a="fxSpeed"+r,s="fxSettings"+r,c=t[o]=t[o]||n[o]||t.fxName||n.fxName||"none",l=$.effects&&($.effects[c]||$.effects.effect&&$.effects.effect[c]);"none"!==c&&options.effects[c]&&l||(c=t[o]="none");var u=options.effects[c]||{},d=u.all||null,f=u[e]||null;t[a]=t[a]||n[a]||t.fxSpeed||n.fxSpeed||null,t[s]=$.extend(!0,{},d,f,n.fxSettings,t.fxSettings,n[s],t[s])}),delete t.fxName,delete t.fxSpeed,delete t.fxSettings}var t,n,i,r,o,a,s;if(opts=$.layout.transformData(opts,!0),opts=$.layout.backwardCompatibility.renameAllOptions(opts),!$.isEmptyObject(opts.panes)){for(t=$.layout.optionsMap.noDefault,o=0,a=t.length;a>o;o++)i=t[o],delete opts.panes[i];for(t=$.layout.optionsMap.layout,o=0,a=t.length;a>o;o++)i=t[o],delete opts.panes[i]}t=$.layout.optionsMap.layout;var c=$.layout.config.optionRootKeys;for(i in opts)r=opts[i],$.inArray(i,c)<0&&$.inArray(i,t)<0&&(opts.panes[i]||(opts.panes[i]=$.isPlainObject(r)?$.extend(!0,{},r):r),delete opts[i]);$.extend(!0,options,opts),$.each(_c.allPanes,function(r,o){if(_c[o]=$.extend(!0,{},_c.panes,_c[o]),n=options.panes,s=options[o],"center"===o)for(t=$.layout.optionsMap.center,r=0,a=t.length;a>r;r++)i=t[r],opts.center[i]||!opts.panes[i]&&s[i]||(s[i]=n[i]);else s=options[o]=$.extend(!0,{},n,s),e(o),s.resizerClass||(s.resizerClass="ui-layout-resizer"),s.togglerClass||(s.togglerClass="ui-layout-toggler");s.paneClass||(s.paneClass="ui-layout-pane")});var l=opts.zIndex,u=options.zIndexes;l>0&&(u.pane_normal=l,u.content_mask=max(l+1,u.content_mask),u.resizer_normal=max(l+2,u.resizer_normal)),delete options.panes},getPane=function(e){var t=options[e].paneSelector;if("#"===t.substr(0,1))return $N.find(t).eq(0);var n=$N.children(t).eq(0);return n.length?n:$N.children("form:first").children(t).eq(0)},initPanes=function(e){evtPane(e),$.each(_c.allPanes,function(e,t){addPane(t,!0)}),initHandles(),$.each(_c.borderPanes,function(e,t){$Ps[t]&&state[t].isVisible&&(setSizeLimits(t),makePaneFit(t))}),sizeMidPanes("center"),$.each(_c.allPanes,function(e,t){afterInitPane(t)})},addPane=function(e,t){if(t||isInitialized()){var n,i,r,o=options[e],a=state[e],s=_c[e],c=s.dir,l=(a.fx,o.spacing_open||0,"center"===e),u={},d=$Ps[e];if(d?removePane(e,!1,!0,!1):$Cs[e]=!1,d=$Ps[e]=getPane(e),!d.length)return $Ps[e]=!1,void 0;if(!d.data("layoutCSS")){var f="position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border";d.data("layoutCSS",styles(d,f))}Instance[e]={name:e,pane:$Ps[e],content:$Cs[e],options:options[e],state:state[e],children:children[e]},d.data({parentLayout:Instance,layoutPane:Instance[e],layoutEdge:e,layoutRole:"pane"}).css(s.cssReq).css("zIndex",options.zIndexes.pane_normal).css(o.applyDemoStyles?s.cssDemo:{}).addClass(o.paneClass+" "+o.paneClass+"-"+e).bind("mouseenter."+sID,addHover).bind("mouseleave."+sID,removeHover);var h,p={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"};for(h in p)d.bind("layoutpane"+h.toLowerCase()+"."+sID,Instance[p[h]||h]);initContent(e,!1),l||(n=a.size=_parseSize(e,o.size),i=_parseSize(e,o.minSize)||1,r=_parseSize(e,o.maxSize)||1e5,n>0&&(n=max(min(n,r),i)),a.autoResize=o.autoResize,a.isClosed=!1,a.isSliding=!1,a.isResizing=!1,a.isHidden=!1,a.pins||(a.pins=[])),a.tagName=d[0].tagName,a.edge=e,a.noRoom=!1,a.isVisible=!0,setPanePosition(e),"horz"===c?u.height=cssH(d,n):"vert"===c&&(u.width=cssW(d,n)),d.css(u),"horz"!=c&&sizeMidPanes(e,!0),state.initialized&&(initHandles(e),initHotkeys(e)),o.initClosed&&o.closable&&!o.initHidden?close(e,!0,!0):o.initHidden||o.initClosed?hide(e):a.noRoom||d.css("display","block"),d.css("visibility","visible"),o.showOverflowOnHover&&d.hover(allowOverflow,resetOverflow),state.initialized&&afterInitPane(e)}},afterInitPane=function(e){var t=$Ps[e],n=state[e],i=options[e];t&&(t.data("layout")&&refreshChildren(e,t.data("layout")),n.isVisible&&(state.initialized?resizeAll():sizeContent(e),i.triggerEventsOnLoad?_runCallbacks("onresize_end",e):resizeChildren(e,!0)),i.initChildren&&i.children&&createChildren(e))},setPanePosition=function(e){e=e?e.split(","):_c.borderPanes,$.each(e,function(e,t){var n=$Ps[t],i=$Rs[t],r=(options[t],state[t]),o=_c[t].side,a={};if(n){switch(t){case"north":a.top=sC.inset.top,a.left=sC.inset.left,a.right=sC.inset.right;break;case"south":a.bottom=sC.inset.bottom,a.left=sC.inset.left,a.right=sC.inset.right;break;case"west":a.left=sC.inset.left;break;case"east":a.right=sC.inset.right;break;case"center":}n.css(a),i&&r.isClosed?i.css(o,sC.inset[o]):i&&!r.isHidden&&i.css(o,sC.inset[o]+getPaneSize(t))}})},initHandles=function(e){e=e?e.split(","):_c.borderPanes,$.each(e,function(e,t){var n=$Ps[t];if($Rs[t]=!1,$Ts[t]=!1,n){var i=options[t],r=state[t],o=(_c[t],"#"===i.paneSelector.substr(0,1)?i.paneSelector.substr(1):""),a=i.resizerClass,s=i.togglerClass,c=(r.isVisible?i.spacing_open:i.spacing_closed,"-"+t),l=(r.isVisible?"-open":"-closed",Instance[t]),u=l.resizer=$Rs[t]=$("<div></div>"),d=l.toggler=i.closable?$Ts[t]=$("<div></div>"):!1;!r.isVisible&&i.slidable&&u.attr("title",i.tips.Slide).css("cursor",i.sliderCursor),u.attr("id",o?o+"-resizer":"").data({parentLayout:Instance,layoutPane:Instance[t],layoutEdge:t,layoutRole:"resizer"}).css(_c.resizers.cssReq).css("zIndex",options.zIndexes.resizer_normal).css(i.applyDemoStyles?_c.resizers.cssDemo:{}).addClass(a+" "+a+c).hover(addHover,removeHover).hover(onResizerEnter,onResizerLeave).appendTo($N),i.resizerDblClickToggle&&u.bind("dblclick."+sID,toggle),d&&(d.attr("id",o?o+"-toggler":"").data({parentLayout:Instance,layoutPane:Instance[t],layoutEdge:t,layoutRole:"toggler"}).css(_c.togglers.cssReq).css(i.applyDemoStyles?_c.togglers.cssDemo:{}).addClass(s+" "+s+c).hover(addHover,removeHover).bind("mouseenter",onResizerEnter).appendTo(u),i.togglerContent_open&&$("<span>"+i.togglerContent_open+"</span>").data({layoutEdge:t,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",t).addClass("content content-open").css("display","none").appendTo(d),i.togglerContent_closed&&$("<span>"+i.togglerContent_closed+"</span>").data({layoutEdge:t,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(d),enableClosable(t)),initResizable(t),r.isVisible?setAsOpen(t):(setAsClosed(t),bindStartSlidingEvents(t,!0))
}}),sizeHandles()},initContent=function(e,t){if(isInitialized()){var n,i=options[e],r=i.contentSelector,o=Instance[e],a=$Ps[e];r&&(n=o.content=$Cs[e]=i.findNestedContent?a.find(r).eq(0):a.children(r).eq(0)),n&&n.length?(n.data("layoutRole","content"),n.data("layoutCSS")||n.data("layoutCSS",styles(n,"height")),n.css(_c.content.cssReq),i.applyDemoStyles&&(n.css(_c.content.cssDemo),a.css(_c.content.cssDemoPane)),a.css("overflowX").match(/(scroll|auto)/)&&a.css("overflow","hidden"),state[e].content={},t!==!1&&sizeContent(e)):o.content=$Cs[e]=!1}},initResizable=function(e){var t=$.layout.plugins.draggable;e=e?e.split(","):_c.borderPanes,$.each(e,function(e,i){var r=options[i];if(!t||!$Ps[i]||!r.resizable)return r.resizable=!1,!0;var o,a,s=state[i],c=options.zIndexes,l=_c[i],u="horz"==l.dir?"top":"left",d=($Ps[i],$Rs[i]),f=r.resizerClass,h=0,p=f+"-drag",m=f+"-"+i+"-drag",g=f+"-dragging",v=f+"-"+i+"-dragging",y=f+"-dragging-limit",b=f+"-"+i+"-dragging-limit",_=!1;s.isClosed||d.attr("title",r.tips.Resize).css("cursor",r.resizerCursor),d.draggable({containment:$N[0],axis:"horz"==l.dir?"y":"x",delay:0,distance:1,grid:r.resizingGrid,helper:"clone",opacity:r.resizerDragOpacity,addClasses:!1,zIndex:c.resizer_drag,start:function(e,t){return r=options[i],s=state[i],a=r.livePaneResizing,!1===_runCallbacks("ondrag_start",i)?!1:(s.isResizing=!0,state.paneResizing=i,timer.clear(i+"_closeSlider"),setSizeLimits(i),o=s.resizerPosition,h=t.position[u],d.addClass(p+" "+m),_=!1,$("body").disableSelection(),showMasks(i,{resizing:!0}),void 0)},drag:function(e,t){_||(t.helper.addClass(g+" "+v).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),_=!0,s.isSliding&&$Ps[i].css("zIndex",c.pane_sliding));var l=0;t.position[u]<o.min?(t.position[u]=o.min,l=-1):t.position[u]>o.max&&(t.position[u]=o.max,l=1),l?(t.helper.addClass(y+" "+b),window.defaultStatus=l>0&&i.match(/(north|west)/)||0>l&&i.match(/(south|east)/)?r.tips.maxSizeWarning:r.tips.minSizeWarning):(t.helper.removeClass(y+" "+b),window.defaultStatus=""),a&&Math.abs(t.position[u]-h)>=r.liveResizingTolerance&&(h=t.position[u],n(e,t,i))},stop:function(e,t){$("body").enableSelection(),window.defaultStatus="",d.removeClass(p+" "+m),s.isResizing=!1,state.paneResizing=!1,n(e,t,i,!0)}})});var n=function(e,t,n,i){var r,o=t.position,a=_c[n],s=options[n],c=state[n];switch(n){case"north":r=o.top;break;case"west":r=o.left;break;case"south":r=sC.layoutHeight-o.top-s.spacing_open;break;case"east":r=sC.layoutWidth-o.left-s.spacing_open}var l=r-sC.inset[a.side];if(i)!1!==_runCallbacks("ondrag_end",n)&&manualSizePane(n,l,!1,!0),hideMasks(!0),c.isSliding&&showMasks(n,{resizing:!0});else{if(Math.abs(l-c.size)<s.liveResizingTolerance)return;manualSizePane(n,l,!1,!0),sizeMasks()}}},sizeMask=function(){var e=$(this),t=e.data("layoutMask"),n=state[t];"IFRAME"==n.tagName&&n.isVisible&&e.css({top:n.offsetTop,left:n.offsetLeft,width:n.outerWidth,height:n.outerHeight})},sizeMasks=function(){$Ms.each(sizeMask)},showMasks=function(e,t){var n,i,r=_c[e],o=["center"],a=options.zIndexes,s=$.extend({objectsOnly:!1,animation:!1,resizing:!0,sliding:state[e].isSliding},t);s.resizing&&o.push(e),s.sliding&&o.push(_c.oppositeEdge[e]),"horz"===r.dir&&(o.push("west"),o.push("east")),$.each(o,function(e,t){i=state[t],n=options[t],i.isVisible&&(n.maskObjects||!s.objectsOnly&&n.maskContents)&&getMasks(t).each(function(){sizeMask.call(this),this.style.zIndex=i.isSliding?a.pane_sliding+1:a.pane_normal+1,this.style.display="block"})})},hideMasks=function(e){if(e||!state.paneResizing)$Ms.hide();else if(!e&&!$.isEmptyObject(state.panesSliding))for(var t,n,i=$Ms.length-1;i>=0;i--)n=$Ms.eq(i),t=n.data("layoutMask"),options[t].maskObjects||n.hide()},getMasks=function(e){for(var t,n=$([]),i=0,r=$Ms.length;r>i;i++)t=$Ms.eq(i),t.data("layoutMask")===e&&(n=n.add(t));return n.length?n:createMasks(e)},createMasks=function(e){var t,n,i,r,o,a=$Ps[e],s=state[e],c=options[e],l=options.zIndexes,u=$([]);if(!c.maskContents&&!c.maskObjects)return u;for(o=0;o<(c.maskObjects?2:1);o++)t=c.maskObjects&&0==o,n=document.createElement(t?"iframe":"div"),i=$(n).data("layoutMask",e),n.className="ui-layout-mask ui-layout-mask-"+e,r=n.style,r.display="block",r.position="absolute",r.background="#FFF",t&&(n.frameborder=0,n.src="about:blank",r.opacity=0,r.filter="Alpha(Opacity='0')",r.border=0),"IFRAME"==s.tagName?(r.zIndex=l.pane_normal+1,$N.append(n)):(i.addClass("ui-layout-mask-inside-pane"),r.zIndex=c.maskZindex||l.content_mask,r.top=0,r.left=0,r.width="100%",r.height="100%",a.append(n)),u=u.add(n),$Ms=$Ms.add(n);return u},destroy=function(e,t){$(window).unbind("."+sID),$(document).unbind("."+sID),"object"==typeof e?evtPane(e):t=e,$N.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(options.containerClass).unbind("."+sID),$Ms.remove(),$.each(_c.allPanes,function(e,n){removePane(n,!1,!0,t)});var n="layoutCSS";$N.data(n)&&!$N.data("layoutRole")&&$N.css($N.data(n)).removeData(n),"BODY"===sC.tagName&&($N=$("html")).data(n)&&$N.css($N.data(n)).removeData(n),runPluginCallbacks(Instance,$.layout.onDestroy),unload();for(var i in Instance)i.match(/^(container|options)$/)||delete Instance[i];return Instance.destroyed=!0,Instance},removePane=function(e,t,n,i){if(isInitialized()){var r=evtPane.call(this,e),o=$Ps[r],a=$Cs[r],s=$Rs[r],c=$Ts[r];o&&$.isEmptyObject(o.data())&&(o=!1),a&&$.isEmptyObject(a.data())&&(a=!1),s&&$.isEmptyObject(s.data())&&(s=!1),c&&$.isEmptyObject(c.data())&&(c=!1),o&&o.stop(!0,!0);var l=options[r],u=state[r],d="layout",f="layoutCSS",h=children[r],p=$.isPlainObject(h)&&!$.isEmptyObject(h),m=void 0!==i?i:l.destroyChildren;if(p&&m&&($.each(h,function(e,t){t.destroyed||t.destroy(!0),t.destroyed&&delete h[e]}),$.isEmptyObject(h)&&(h=children[r]=null,p=!1)),o&&t&&!p)o.remove();else if(o&&o[0]){var g=l.paneClass,v=g+"-"+r,y="-open",b="-sliding",_="-closed",w=[g,g+y,g+_,g+b,v,v+y,v+_,v+b];$.merge(w,getHoverClasses(o,!0)),o.removeClass(w.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+sID),p&&a?(a.width(a.width()),$.each(h,function(e,t){t.resizeAll()})):a&&a.css(a.data(f)).removeData(f).removeData("layoutRole"),o.data(d)||o.css(o.data(f)).removeData(f)}c&&c.remove(),s&&s.remove(),Instance[r]=$Ps[r]=$Cs[r]=$Rs[r]=$Ts[r]=!1,u={removed:!0},n||resizeAll()}},_hidePane=function(e){var t=$Ps[e],n=options[e],i=t[0].style;n.useOffscreenClose?(t.data(_c.offscreenReset)||t.data(_c.offscreenReset,{left:i.left,right:i.right}),t.css(_c.offscreenCSS)):t.hide().removeData(_c.offscreenReset)},_showPane=function(e){var t=$Ps[e],n=options[e],i=_c.offscreenCSS,r=t.data(_c.offscreenReset),o=t[0].style;t.show().removeData(_c.offscreenReset),n.useOffscreenClose&&r&&(o.left==i.left&&(o.left=r.left),o.right==i.right&&(o.right=r.right))},hide=function(e,t){if(isInitialized()){var n=evtPane.call(this,e),i=options[n],r=state[n],o=$Ps[n],a=$Rs[n];o&&!r.isHidden&&(state.initialized&&!1===_runCallbacks("onhide_start",n)||(r.isSliding=!1,delete state.panesSliding[n],a&&a.hide(),!state.initialized||r.isClosed?(r.isClosed=!0,r.isHidden=!0,r.isVisible=!1,state.initialized||_hidePane(n),sizeMidPanes("horz"===_c[n].dir?"":"center"),(state.initialized||i.triggerEventsOnLoad)&&_runCallbacks("onhide_end",n)):(r.isHiding=!0,close(n,!1,t))))}},show=function(e,t,n,i){if(isInitialized()){{var r=evtPane.call(this,e),o=(options[r],state[r]),a=$Ps[r];$Rs[r]}a&&o.isHidden&&!1!==_runCallbacks("onshow_start",r)&&(o.isShowing=!0,o.isSliding=!1,delete state.panesSliding[r],t===!1?close(r,!0):open(r,!1,n,i))}},toggle=function(e,t){if(isInitialized()){var n=evtObj(e),i=evtPane.call(this,e),r=state[i];n&&n.stopImmediatePropagation(),r.isHidden?show(i):r.isClosed?open(i,!!t):close(i)}},_closePane=function(e,t){var n=($Ps[e],state[e]);_hidePane(e),n.isClosed=!0,n.isVisible=!1,t&&setAsClosed(e)},close=function(e,t,n,i){function r(){f.isMoving=!1,bindStartSlidingEvents(o,!0);var e=_c.oppositeEdge[o];state[e].noRoom&&(setSizeLimits(e),makePaneFit(e)),i||!state.initialized&&!d.triggerEventsOnLoad||(s||_runCallbacks("onclose_end",o),s&&_runCallbacks("onshow_end",o),c&&_runCallbacks("onhide_end",o))}var o=evtPane.call(this,e);if(!state.initialized&&$Ps[o])return _closePane(o,!0),void 0;if(isInitialized()){{var a,s,c,l,u=$Ps[o],d=($Rs[o],$Ts[o],options[o]),f=state[o];_c[o]}$N.queue(function(e){if(!u||!d.closable&&!f.isShowing&&!f.isHiding||!t&&f.isClosed&&!f.isShowing)return e();var i=!f.isShowing&&!1===_runCallbacks("onclose_start",o);return s=f.isShowing,c=f.isHiding,l=f.isSliding,delete f.isShowing,delete f.isHiding,i?e():(a=!n&&!f.isClosed&&"none"!=d.fxName_close,f.isMoving=!0,f.isClosed=!0,f.isVisible=!1,c?f.isHidden=!0:s&&(f.isHidden=!1),f.isSliding?bindStopSlidingEvents(o,!1):sizeMidPanes("horz"===_c[o].dir?"":"center",!1),setAsClosed(o),a?(lockPaneForFX(o,!0),u.hide(d.fxName_close,d.fxSettings_close,d.fxSpeed_close,function(){lockPaneForFX(o,!1),f.isClosed&&r(),e()})):(_hidePane(o),r(),e()),void 0)})}},setAsClosed=function(e){if($Rs[e]){var t=($Ps[e],$Rs[e]),n=$Ts[e],i=options[e],r=(state[e],_c[e].side),o=i.resizerClass,a=i.togglerClass,s="-"+e,c="-open",l="-sliding",u="-closed";t.css(r,sC.inset[r]).removeClass(o+c+" "+o+s+c).removeClass(o+l+" "+o+s+l).addClass(o+u+" "+o+s+u),i.resizable&&$.layout.plugins.draggable&&t.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title",""),n&&(n.removeClass(a+c+" "+a+s+c).addClass(a+u+" "+a+s+u).attr("title",i.tips.Open),n.children(".content-open").hide(),n.children(".content-closed").css("display","block")),syncPinBtns(e,!1),state.initialized&&sizeHandles()}},open=function(e,t,n,i){function r(){u.isMoving=!1,_fixIframe(s),u.isSliding||sizeMidPanes("vert"==_c[s].dir?"center":"",!1),setAsOpen(s)}if(isInitialized()){{var o,a,s=evtPane.call(this,e),c=$Ps[s],l=($Rs[s],$Ts[s],options[s]),u=state[s];_c[s]}$N.queue(function(e){if(!c||!l.resizable&&!l.closable&&!u.isShowing||u.isVisible&&!u.isSliding)return e();if(u.isHidden&&!u.isShowing)return e(),show(s,!0),void 0;u.autoResize&&u.size!=l.size?sizePane(s,l.size,!0,!0,!0):setSizeLimits(s,t);var d=_runCallbacks("onopen_start",s);return"abort"===d?e():("NC"!==d&&setSizeLimits(s,t),u.minSize>u.maxSize?(syncPinBtns(s,!1),!i&&l.tips.noRoomToOpen&&alert(l.tips.noRoomToOpen),e()):(t?bindStopSlidingEvents(s,!0):u.isSliding?bindStopSlidingEvents(s,!1):l.slidable&&bindStartSlidingEvents(s,!1),u.noRoom=!1,makePaneFit(s),a=u.isShowing,delete u.isShowing,o=!n&&u.isClosed&&"none"!=l.fxName_open,u.isMoving=!0,u.isVisible=!0,u.isClosed=!1,a&&(u.isHidden=!1),o?(lockPaneForFX(s,!0),c.show(l.fxName_open,l.fxSettings_open,l.fxSpeed_open,function(){lockPaneForFX(s,!1),u.isVisible&&r(),e()})):(_showPane(s),r(),e()),void 0))})}},setAsOpen=function(e,t){var n=$Ps[e],i=$Rs[e],r=$Ts[e],o=options[e],a=state[e],s=_c[e].side,c=o.resizerClass,l=o.togglerClass,u="-"+e,d="-open",f="-closed",h="-sliding";i.css(s,sC.inset[s]+getPaneSize(e)).removeClass(c+f+" "+c+u+f).addClass(c+d+" "+c+u+d),a.isSliding?i.addClass(c+h+" "+c+u+h):i.removeClass(c+h+" "+c+u+h),removeHover(0,i),o.resizable&&$.layout.plugins.draggable?i.draggable("enable").css("cursor",o.resizerCursor).attr("title",o.tips.Resize):a.isSliding||i.css("cursor","default"),r&&(r.removeClass(l+f+" "+l+u+f).addClass(l+d+" "+l+u+d).attr("title",o.tips.Close),removeHover(0,r),r.children(".content-closed").hide(),r.children(".content-open").css("display","block")),syncPinBtns(e,!a.isSliding),$.extend(a,elDims(n)),state.initialized&&(sizeHandles(),sizeContent(e,!0)),!t&&(state.initialized||o.triggerEventsOnLoad)&&n.is(":visible")&&(_runCallbacks("onopen_end",e),a.isShowing&&_runCallbacks("onshow_end",e),state.initialized&&_runCallbacks("onresize_end",e))},slideOpen=function(e){function t(){r.isClosed?r.isMoving||open(i,!0):bindStopSlidingEvents(i,!0)}if(isInitialized()){var n=evtObj(e),i=evtPane.call(this,e),r=state[i],o=options[i].slideDelay_open;n&&n.stopImmediatePropagation(),r.isClosed&&n&&"mouseenter"===n.type&&o>0?timer.set(i+"_openSlider",t,o):t()}},slideClose=function(e){function t(){o.isClosed?bindStopSlidingEvents(i,!1):o.isMoving||close(i)}if(isInitialized()){var n=evtObj(e),i=evtPane.call(this,e),r=options[i],o=state[i],a=o.isMoving?1e3:300;if(!o.isClosed&&!o.isResizing)if("click"===r.slideTrigger_close)t();else{if(r.preventQuickSlideClose&&o.isMoving)return;if(r.preventPrematureSlideClose&&n&&$.layout.isMouseOverElem(n,$Ps[i]))return;n?timer.set(i+"_closeSlider",t,max(r.slideDelay_close,a)):t()}}},slideToggle=function(e){var t=evtPane.call(this,e);toggle(t,!0)},lockPaneForFX=function(e,t){var n=$Ps[e],i=state[e],r=options[e],o=options.zIndexes;t?(showMasks(e,{animation:!0,objectsOnly:!0}),n.css({zIndex:o.pane_animate}),"south"==e?n.css({top:sC.inset.top+sC.innerHeight-n.outerHeight()}):"east"==e&&n.css({left:sC.inset.left+sC.innerWidth-n.outerWidth()})):(hideMasks(),n.css({zIndex:i.isSliding?o.pane_sliding:o.pane_normal}),"south"==e?n.css({top:"auto"}):"east"!=e||n.css("left").match(/\-99999/)||n.css({left:"auto"}),browser.msie&&r.fxOpacityFix&&"slide"!=r.fxName_open&&n.css("filter")&&1==n.css("opacity")&&n[0].style.removeAttribute("filter"))},bindStartSlidingEvents=function(e,t){var n=options[e],i=($Ps[e],$Rs[e]),r=n.slideTrigger_open.toLowerCase();!i||t&&!n.slidable||(r.match(/mouseover/)?r=n.slideTrigger_open="mouseenter":r.match(/(click|dblclick|mouseenter)/)||(r=n.slideTrigger_open="click"),n.resizerDblClickToggle&&r.match(/click/)&&i[t?"unbind":"bind"]("dblclick."+sID,toggle),i[t?"bind":"unbind"](r+"."+sID,slideOpen).css("cursor",t?n.sliderCursor:"default").attr("title",t?n.tips.Slide:""))},bindStopSlidingEvents=function(e,t){function n(t){timer.clear(e+"_closeSlider"),t.stopPropagation()}var i=options[e],r=state[e],o=(_c[e],options.zIndexes),a=i.slideTrigger_close.toLowerCase(),s=t?"bind":"unbind",c=$Ps[e],l=$Rs[e];timer.clear(e+"_closeSlider"),t?(r.isSliding=!0,state.panesSliding[e]=!0,bindStartSlidingEvents(e,!1)):(r.isSliding=!1,delete state.panesSliding[e]),c.css("zIndex",t?o.pane_sliding:o.pane_normal),l.css("zIndex",t?o.pane_sliding+2:o.resizer_normal),a.match(/(click|mouseleave)/)||(a=i.slideTrigger_close="mouseleave"),l[s](a,slideClose),"mouseleave"===a&&(c[s]("mouseleave."+sID,slideClose),l[s]("mouseenter."+sID,n),c[s]("mouseenter."+sID,n)),t?"click"!==a||i.resizable||(l.css("cursor",t?i.sliderCursor:"default"),l.attr("title",t?i.tips.Close:"")):timer.clear(e+"_closeSlider")},makePaneFit=function(e,t,n,i){var r=options[e],o=state[e],a=_c[e],s=$Ps[e],c=$Rs[e],l="vert"===a.dir,u=!1;if(("center"===e||l&&o.noVerticalRoom)&&(u=o.maxHeight>=0,u&&o.noRoom?(_showPane(e),c&&c.show(),o.isVisible=!0,o.noRoom=!1,l&&(o.noVerticalRoom=!1),_fixIframe(e)):u||o.noRoom||(_hidePane(e),c&&c.hide(),o.isVisible=!1,o.noRoom=!0)),"center"===e);else if(o.minSize<=o.maxSize){if(u=!0,o.size>o.maxSize)sizePane(e,o.maxSize,n,!0,i);else if(o.size<o.minSize)sizePane(e,o.minSize,n,!0,i);else if(c&&o.isVisible&&s.is(":visible")){var d=o.size+sC.inset[a.side];$.layout.cssNum(c,a.side)!=d&&c.css(a.side,d)}o.noRoom&&(o.wasOpen&&r.closable?r.autoReopen?open(e,!1,!0,!0):o.noRoom=!1:show(e,o.wasOpen,!0,!0))}else o.noRoom||(o.noRoom=!0,o.wasOpen=!o.isClosed&&!o.isSliding,o.isClosed||(r.closable?close(e,!0,!0):hide(e,!0)))},manualSizePane=function(e,t,n,i,r){if(isInitialized()){var o=evtPane.call(this,e),a=options[o],s=state[o],c=r||a.livePaneResizing&&!s.isResizing;s.autoResize=!1,sizePane(o,t,n,i,c)}},sizePane=function(e,t,n,i,r){function o(){for(var e="width"===p?d.outerWidth():d.outerHeight(),i=[{pane:c,count:1,target:t,actual:e,correct:t===e,attempt:t,cssSize:s}],o=i[0],l={},g="Inaccurate size after resizing the "+c+"-pane.";!(o.correct||(l={pane:c,count:o.count+1,target:t},l.attempt=o.actual>t?max(0,o.attempt-(o.actual-t)):max(0,o.attempt+(t-o.actual)),l.cssSize=cssSize(c,l.attempt),d.css(p,l.cssSize),l.actual="width"==p?d.outerWidth():d.outerHeight(),l.correct=t===l.actual,1===i.length&&(_log(g,!1,!0),_log(o,!1,!0)),_log(l,!1,!0),i.length>3));)i.push(l),o=i[i.length-1];u.size=t,$.extend(u,elDims(d)),u.isVisible&&d.is(":visible")&&(f&&f.css(h,t+sC.inset[h]),sizeContent(c)),!n&&!m&&state.initialized&&u.isVisible&&_runCallbacks("onresize_end",c),n||(u.isSliding||sizeMidPanes("horz"==_c[c].dir?"":"center",m,r),sizeHandles());var v=_c.oppositeEdge[c];a>t&&state[v].noRoom&&(setSizeLimits(v),makePaneFit(v,!1,n)),i.length>1&&_log(g+"\nSee the Error Console for details.",!0,!0)}if(isInitialized()){var a,s,c=evtPane.call(this,e),l=options[c],u=state[c],d=$Ps[c],f=$Rs[c],h=_c[c].side,p=_c[c].sizeType.toLowerCase(),m=u.isResizing&&!l.triggerEventsDuringLiveResize,g=i!==!0&&l.animatePaneSizing;$N.queue(function(e){if(setSizeLimits(c),a=u.size,t=_parseSize(c,t),t=max(t,_parseSize(c,l.minSize)),t=min(t,u.maxSize),t<u.minSize)return e(),makePaneFit(c,!1,n),void 0;if(!r&&t===a)return e();if(u.newSize=t,!n&&state.initialized&&u.isVisible&&_runCallbacks("onresize_start",c),s=cssSize(c,t),g&&d.is(":visible")){var i=$.layout.effects.size[c]||$.layout.effects.size.all,f=l.fxSettings_size.easing||i.easing,h=options.zIndexes,m={};m[p]=s+"px",u.isMoving=!0,d.css({zIndex:h.pane_animate}).show().animate(m,l.fxSpeed_size,f,function(){d.css({zIndex:u.isSliding?h.pane_sliding:h.pane_normal}),u.isMoving=!1,delete u.newSize,o(),e()})}else d.css(p,s),delete u.newSize,d.is(":visible")?o():(u.size=t,$.extend(u,elDims(d))),e()})}},sizeMidPanes=function(e,t,n){e=(e?e:"east,west,center").split(","),$.each(e,function(e,i){if($Ps[i]){var r=options[i],o=state[i],a=$Ps[i],s=($Rs[i],!0),c={},l=$.layout.showInvisibly(a),u=calcNewCenterPaneDims();if($.extend(o,elDims(a)),"center"===i){if(!n&&o.isVisible&&u.width===o.outerWidth&&u.height===o.outerHeight)return a.css(l),!0;if($.extend(o,cssMinDims(i),{maxWidth:u.width,maxHeight:u.height}),c=u,o.newWidth=c.width,o.newHeight=c.height,c.width=cssW(a,c.width),c.height=cssH(a,c.height),s=c.width>=0&&c.height>=0,!state.initialized&&r.minWidth>u.width){var d=r.minWidth-o.outerWidth,f=options.east.minSize||0,h=options.west.minSize||0,p=state.east.size,m=state.west.size,g=p,v=m;if(d>0&&state.east.isVisible&&p>f&&(g=max(p-f,p-d),d-=p-g),d>0&&state.west.isVisible&&m>h&&(v=max(m-h,m-d),d-=m-v),0===d)return p&&p!=f&&sizePane("east",g,!0,!0,n),m&&m!=h&&sizePane("west",v,!0,!0,n),sizeMidPanes("center",t,n),a.css(l),void 0}}else{if(o.isVisible&&!o.noVerticalRoom&&$.extend(o,elDims(a),cssMinDims(i)),!n&&!o.noVerticalRoom&&u.height===o.outerHeight)return a.css(l),!0;c.top=u.top,c.bottom=u.bottom,o.newSize=u.height,c.height=cssH(a,u.height),o.maxHeight=c.height,s=o.maxHeight>=0,s||(o.noVerticalRoom=!0)}if(s?(!t&&state.initialized&&_runCallbacks("onresize_start",i),a.css(c),"center"!==i&&sizeHandles(i),!o.noRoom||o.isClosed||o.isHidden||makePaneFit(i),o.isVisible&&($.extend(o,elDims(a)),state.initialized&&sizeContent(i))):!o.noRoom&&o.isVisible&&makePaneFit(i),a.css(l),delete o.newSize,delete o.newWidth,delete o.newHeight,!o.isVisible)return!0;if("center"===i){var y=browser.isIE6||!browser.boxModel;$Ps.north&&(y||"IFRAME"==state.north.tagName)&&$Ps.north.css("width",cssW($Ps.north,sC.innerWidth)),$Ps.south&&(y||"IFRAME"==state.south.tagName)&&$Ps.south.css("width",cssW($Ps.south,sC.innerWidth))}!t&&state.initialized&&_runCallbacks("onresize_end",i)}})},resizeAll=function(e){var t=sC.innerWidth,n=sC.innerHeight;if(evtPane(e),$N.is(":visible")){if(!state.initialized)return _initLayoutElements(),void 0;if(e===!0&&$.isPlainObject(options.outset)&&$N.css(options.outset),$.extend(sC,elDims($N,options.inset)),sC.outerHeight){if(e===!0&&setPanePosition(),!1===_runCallbacks("onresizeall_start"))return!1;{var i,r,o;sC.innerHeight<n,sC.innerWidth<t}$.each(["south","north","east","west"],function(e,t){$Ps[t]&&(r=options[t],o=state[t],o.autoResize&&o.size!=r.size?sizePane(t,r.size,!0,!0,!0):(setSizeLimits(t),makePaneFit(t,!1,!0,!0)))}),sizeMidPanes("",!0,!0),sizeHandles(),$.each(_c.allPanes,function(e,t){i=$Ps[t],i&&state[t].isVisible&&_runCallbacks("onresize_end",t)}),_runCallbacks("onresizeall_end")}}},resizeChildren=function(e,t){var n=evtPane.call(this,e);if(options[n].resizeChildren){t||refreshChildren(n);var i=children[n];$.isPlainObject(i)&&$.each(i,function(e,t){t.destroyed||t.resizeAll()})}},sizeContent=function(e,t){if(isInitialized()){var n=evtPane.call(this,e);n=n?n.split(","):_c.allPanes,$.each(n,function(e,n){function i(e){return max(c.css.paddingBottom,parseInt(e.css("marginBottom"),10)||0)}function r(){var e=options[n].contentIgnoreSelector,t=a.nextAll().not(".ui-layout-mask").not(e||":lt(0)"),r=t.filter(":visible"),o=r.filter(":last");l={top:a[0].offsetTop,height:a.outerHeight(),numFooters:t.length,hiddenFooters:t.length-r.length,spaceBelow:0},l.spaceAbove=l.top,l.bottom=l.top+l.height,l.spaceBelow=o.length?o[0].offsetTop+o.outerHeight()-l.bottom+i(o):i(a)}var o=$Ps[n],a=$Cs[n],s=options[n],c=state[n],l=c.content;if(!o||!a||!o.is(":visible"))return!0;if((a.length||(initContent(n,!1),a))&&!1!==_runCallbacks("onsizecontent_start",n)){(!c.isMoving&&!c.isResizing||s.liveContentResizing||t||void 0==l.top)&&(r(),l.hiddenFooters>0&&"hidden"===o.css("overflow")&&(o.css("overflow","visible"),r(),o.css("overflow","hidden")));var u=c.innerHeight-(l.spaceAbove-c.css.paddingTop)-(l.spaceBelow-c.css.paddingBottom);a.is(":visible")&&l.height==u||(setOuterHeight(a,u,!0),l.height=u),state.initialized&&_runCallbacks("onsizecontent_end",n)}})}},sizeHandles=function(e){var t=evtPane.call(this,e);t=t?t.split(","):_c.borderPanes,$.each(t,function(e,t){var n,i=options[t],r=state[t],o=$Ps[t],a=$Rs[t],s=$Ts[t];if(o&&a){var c,l,u,d=_c[t].dir,f=r.isClosed?"_closed":"_open",h=i["spacing"+f],p=i["togglerAlign"+f],m=i["togglerLength"+f];if(0===h)return a.hide(),void 0;if(r.noRoom||r.isHidden||a.show(),"horz"===d?(c=sC.innerWidth,r.resizerLength=c,l=$.layout.cssNum(o,"left"),a.css({width:cssW(a,c),height:cssH(a,h),left:l>-9999?l:sC.inset.left})):(c=o.outerHeight(),r.resizerLength=c,a.css({height:cssH(a,c),width:cssW(a,h),top:sC.inset.top+getPaneSize("north",!0)})),removeHover(i,a),s){if(0===m||r.isSliding&&i.hideTogglerOnSlide)return s.hide(),void 0;if(s.show(),!(m>0)||"100%"===m||m>c)m=c,u=0;else if(isStr(p))switch(p){case"top":case"left":u=0;break;case"bottom":case"right":u=c-m;break;case"middle":case"center":default:u=round((c-m)/2)}else{var g=parseInt(p,10);u=p>=0?g:c-m+g}if("horz"===d){var v=cssW(s,m);s.css({width:v,height:cssH(s,h),left:u,top:0}),s.children(".content").each(function(){n=$(this),n.css("marginLeft",round((v-n.outerWidth())/2))})}else{var y=cssH(s,m);s.css({height:y,width:cssW(s,h),top:u,left:0}),s.children(".content").each(function(){n=$(this),n.css("marginTop",round((y-n.outerHeight())/2))})}removeHover(0,s)}state.initialized||!i.initHidden&&!r.isHidden||(a.hide(),s&&s.hide())}})},enableClosable=function(e){if(isInitialized()){var t=evtPane.call(this,e),n=$Ts[t],i=options[t];n&&(i.closable=!0,n.bind("click."+sID,function(e){e.stopPropagation(),toggle(t)}).css("visibility","visible").css("cursor","pointer").attr("title",state[t].isClosed?i.tips.Open:i.tips.Close).show())}},disableClosable=function(e,t){if(isInitialized()){var n=evtPane.call(this,e),i=$Ts[n];i&&(options[n].closable=!1,state[n].isClosed&&open(n,!1,!0),i.unbind("."+sID).css("visibility",t?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable=function(e){if(isInitialized()){var t=evtPane.call(this,e),n=$Rs[t];n&&n.data("draggable")&&(options[t].slidable=!0,state[t].isClosed&&bindStartSlidingEvents(t,!0))}},disableSlidable=function(e){if(isInitialized()){var t=evtPane.call(this,e),n=$Rs[t];n&&(options[t].slidable=!1,state[t].isSliding?close(t,!1,!0):(bindStartSlidingEvents(t,!1),n.css("cursor","default").attr("title",""),removeHover(null,n[0])))}},enableResizable=function(e){if(isInitialized()){var t=evtPane.call(this,e),n=$Rs[t],i=options[t];n&&n.data("draggable")&&(i.resizable=!0,n.draggable("enable"),state[t].isClosed||n.css("cursor",i.resizerCursor).attr("title",i.tips.Resize))}},disableResizable=function(e){if(isInitialized()){var t=evtPane.call(this,e),n=$Rs[t];n&&n.data("draggable")&&(options[t].resizable=!1,n.draggable("disable").css("cursor","default").attr("title",""),removeHover(null,n[0]))}},swapPanes=function(e,t){function n(e){var t=$Ps[e],n=$Cs[e];return t?{pane:e,P:t?t[0]:!1,C:n?n[0]:!1,state:$.extend(!0,{},state[e]),options:$.extend(!0,{},options[e])}:!1}function i(e,t){if(e){var n,i,r=e.P,o=e.C,a=e.pane,c=_c[t],l=$.extend(!0,{},state[t]),u=options[t],d={resizerCursor:u.resizerCursor};$.each("fxName,fxSpeed,fxSettings".split(","),function(e,t){d[t+"_open"]=u[t+"_open"],d[t+"_close"]=u[t+"_close"],d[t+"_size"]=u[t+"_size"]}),$Ps[t]=$(r).data({layoutPane:Instance[t],layoutEdge:t}).css(_c.hidden).css(c.cssReq),$Cs[t]=o?$(o):!1,options[t]=$.extend(!0,{},e.options,d),state[t]=$.extend(!0,{},e.state),n=new RegExp(u.paneClass+"-"+a,"g"),r.className=r.className.replace(n,u.paneClass+"-"+t),initHandles(t),c.dir!=_c[a].dir?(i=s[t]||0,setSizeLimits(t),i=max(i,state[t].minSize),manualSizePane(t,i,!0,!0)):$Rs[t].css(c.side,sC.inset[c.side]+(state[t].isVisible?getPaneSize(t):0)),e.state.isVisible&&!l.isVisible?setAsOpen(t,!0):(setAsClosed(t),bindStartSlidingEvents(t,!0)),e=null}}if(isInitialized()){var r=evtPane.call(this,e);if(state[r].edge=t,state[t].edge=r,!1===_runCallbacks("onswap_start",r)||!1===_runCallbacks("onswap_start",t))return state[r].edge=r,state[t].edge=t,void 0;var o=n(r),a=n(t),s={};s[r]=o?o.state.size:0,s[t]=a?a.state.size:0,$Ps[r]=!1,$Ps[t]=!1,state[r]={},state[t]={},$Ts[r]&&$Ts[r].remove(),$Ts[t]&&$Ts[t].remove(),$Rs[r]&&$Rs[r].remove(),$Rs[t]&&$Rs[t].remove(),$Rs[r]=$Rs[t]=$Ts[r]=$Ts[t]=!1,i(o,t),i(a,r),o=a=s=null,$Ps[r]&&$Ps[r].css(_c.visible),$Ps[t]&&$Ps[t].css(_c.visible),resizeAll(),_runCallbacks("onswap_end",r),_runCallbacks("onswap_end",t)}},syncPinBtns=function(e,t){$.layout.plugins.buttons&&$.each(state[e].pins,function(n,i){$.layout.buttons.setPinState(Instance,$(i),e,t)})},$N=$(this).eq(0);if(!$N.length)return _log(options.errors.containerMissing);if($N.data("layoutContainer")&&$N.data("layout"))return $N.data("layout");var $Ps={},$Cs={},$Rs={},$Ts={},$Ms=$([]),sC=state.container,sID=state.id,Instance={options:options,state:state,container:$N,panes:$Ps,contents:$Cs,resizers:$Rs,togglers:$Ts,hide:hide,show:show,toggle:toggle,open:open,close:close,slideOpen:slideOpen,slideClose:slideClose,slideToggle:slideToggle,setSizeLimits:setSizeLimits,_sizePane:sizePane,sizePane:manualSizePane,sizeContent:sizeContent,swapPanes:swapPanes,showMasks:showMasks,hideMasks:hideMasks,initContent:initContent,addPane:addPane,removePane:removePane,createChildren:createChildren,refreshChildren:refreshChildren,enableClosable:enableClosable,disableClosable:disableClosable,enableSlidable:enableSlidable,disableSlidable:disableSlidable,enableResizable:enableResizable,disableResizable:disableResizable,allowOverflow:allowOverflow,resetOverflow:resetOverflow,destroy:destroy,initPanes:isInitialized,resizeAll:resizeAll,runCallbacks:_runCallbacks,hasParentLayout:!1,children:children,north:!1,south:!1,west:!1,east:!1,center:!1};return"cancel"===_create()?null:Instance}}(jQuery),function(e){e.ui||(e.ui={}),e.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(t){for(var n,i=document.cookie,r=i?i.split(";"):[],o=0,a=r.length;a>o;o++)if(n=e.trim(r[o]).split("="),n[0]==t)return decodeURIComponent(n[1]);return null},write:function(t,n,i){var r="",o="",a=!1,s=i||{},c=s.expires||null,l=e.type(c);"date"===l?o=c:"string"===l&&c>0&&(c=parseInt(c,10),l="number"),"number"===l&&(o=new Date,c>0?o.setDate(o.getDate()+c):(o.setFullYear(1970),a=!0)),o&&(r+=";expires="+o.toUTCString()),s.path&&(r+=";path="+s.path),s.domain&&(r+=";domain="+s.domain),s.secure&&(r+=";secure"),document.cookie=t+"="+(a?"":encodeURIComponent(n))+r},clear:function(t){e.ui.cookie.write(t,"",{expires:-1})}},e.cookie||(e.cookie=function(t,n,i){var r=e.ui.cookie;if(null===n)r.clear(t);else{if(void 0===n)return r.read(t);r.write(t,n,i)}}),e.layout.plugins.stateManagement=!0,e.layout.config.optionRootKeys.push("stateManagement"),e.layout.defaults.stateManagement={enabled:!1,autoSave:!0,autoLoad:!0,animateLoad:!0,includeChildren:!0,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:!1}},e.layout.optionsMap.layout.push("stateManagement"),e.layout.state={saveCookie:function(t,n,i){var r=t.options,o=r.stateManagement,a=e.extend(!0,{},o.cookie,i||null),s=t.state.stateData=t.readState(n||o.stateKeys);return e.ui.cookie.write(a.name||r.name||"Layout",e.layout.state.encodeJSON(s),a),e.extend(!0,{},s)},deleteCookie:function(t){var n=t.options;e.ui.cookie.clear(n.stateManagement.cookie.name||n.name||"Layout")},readCookie:function(t){var n=t.options,i=e.ui.cookie.read(n.stateManagement.cookie.name||n.name||"Layout");return i?e.layout.state.decodeJSON(i):{}},loadCookie:function(t){var n=e.layout.state.readCookie(t);return n&&(t.state.stateData=e.extend(!0,{},n),t.loadState(n)),n},loadState:function(t,n,i){if(e.isPlainObject(n)&&!e.isEmptyObject(n)){n=t.state.stateData=e.layout.transformData(n);var r=t.options.stateManagement;if(i=e.extend({animateLoad:!1,includeChildren:r.includeChildren},i),t.state.initialized){var o,a,c,l,u,d=!i.animateLoad;if(e.each(e.layout.config.borderPanes,function(i,r){o=n[r],e.isPlainObject(o)&&(s=o.size,a=o.initClosed,c=o.initHidden,ar=o.autoResize,l=t.state[r],u=l.isVisible,ar&&(l.autoResize=ar),u||t._sizePane(r,s,!1,!1,!1),c===!0?t.hide(r,d):a===!0?t.close(r,!1,d):a===!1?t.open(r,!1,d):c===!1&&t.show(r,!1,d),u&&t._sizePane(r,s,!1,!1,d))}),i.includeChildren){var f,h;e.each(t.children,function(t,i){f=n[t]?n[t].children:0,f&&i&&e.each(i,function(e,t){h=f[e],t&&h&&t.loadState(h)})})}}else{var o=e.extend(!0,{},n);e.each(e.layout.config.allPanes,function(e,t){o[t]&&delete o[t].children}),e.extend(!0,t.options,o)}}},readState:function(t,n){"string"===e.type(n)&&(n={keys:n}),n||(n={});var i,r,o,a,s,c,l,u=t.options.stateManagement,d=n.includeChildren,f=void 0!==d?d:u.includeChildren,h=n.stateKeys||u.stateKeys,p={isClosed:"initClosed",isHidden:"initHidden"},m=t.state,g=e.layout.config.allPanes,v={};e.isArray(h)&&(h=h.join(",")),h=h.replace(/__/g,".").split(",");for(var y=0,b=h.length;b>y;y++)i=h[y].split("."),r=i[0],o=i[1],e.inArray(r,g)<0||(a=m[r][o],void 0!=a&&("isClosed"==o&&m[r].isSliding&&(a=!0),(v[r]||(v[r]={}))[p[o]?p[o]:o]=a));return f&&e.each(g,function(n,i){c=t.children[i],s=m.stateData[i],e.isPlainObject(c)&&!e.isEmptyObject(c)&&(l=v[i]||(v[i]={}),l.children||(l.children={}),e.each(c,function(t,n){n.state.initialized?l.children[t]=e.layout.state.readState(n):s&&s.children&&s.children[t]&&(l.children[t]=e.extend(!0,{},s.children[t]))}))}),v},encodeJSON:function(t){function n(t){var i,r,o,a=[],s=0,c=e.isArray(t);for(i in t)r=t[i],o=typeof r,"string"==o?r='"'+r+'"':"object"==o&&(r=n(r)),a[s++]=(c?"":'"'+i+'":')+r;return(c?"[":"{")+a.join(",")+(c?"]":"}")}return n(t)},decodeJSON:function(t){try{return e.parseJSON?e.parseJSON(t):window.eval("("+t+")")||{}}catch(n){return{}}},_create:function(t){var n=e.layout.state,i=t.options,r=i.stateManagement;if(e.extend(t,{readCookie:function(){return n.readCookie(t)},deleteCookie:function(){n.deleteCookie(t)},saveCookie:function(e,i){return n.saveCookie(t,e,i)},loadCookie:function(){return n.loadCookie(t)},loadState:function(e,i){n.loadState(t,e,i)},readState:function(e){return n.readState(t,e)},encodeJSON:n.encodeJSON,decodeJSON:n.decodeJSON}),t.state.stateData={},r.autoLoad)if(e.isPlainObject(r.autoLoad))e.isEmptyObject(r.autoLoad)||t.loadState(r.autoLoad);else if(r.enabled)if(e.isFunction(r.autoLoad)){var o={};try{o=r.autoLoad(t,t.state,t.options,t.options.name||"")}catch(a){}o&&e.isPlainObject(o)&&!e.isEmptyObject(o)&&t.loadState(o)}else t.loadCookie()},_unload:function(t){var n=t.options.stateManagement;if(n.enabled&&n.autoSave)if(e.isFunction(n.autoSave))try{n.autoSave(t,t.state,t.options,t.options.name||"")
}catch(i){}else t.saveCookie()}},e.layout.onCreate.push(e.layout.state._create),e.layout.onUnload.push(e.layout.state._unload),e.layout.plugins.buttons=!0,e.layout.defaults.autoBindCustomButtons=!1,e.layout.optionsMap.layout.push("autoBindCustomButtons"),e.layout.buttons={init:function(t){var n,i="ui-layout-button-",r=t.options.name||"";e.each("toggle,open,close,pin,toggle-slide,open-slide".split(","),function(o,a){e.each(e.layout.config.borderPanes,function(o,s){e("."+i+a+"-"+s).each(function(){n=e(this).data("layoutName")||e(this).attr("layoutName"),(void 0==n||n===r)&&t.bindButton(this,a,s)})})})},get:function(t,n,i,r){var o=e(n),a=t.options,s=a.errors.addButtonError;if(o.length)if(e.inArray(i,e.layout.config.borderPanes)<0)e.layout.msg(s+" "+a.errors.pane+": "+i,!0),o=e("");else{var c=a[i].buttonClass+"-"+r;o.addClass(c+" "+c+"-"+i).data("layoutName",a.name)}else e.layout.msg(s+" "+a.errors.selector+": "+n,!0);return o},bind:function(t,n,i,r){var o=e.layout.buttons;switch(i.toLowerCase()){case"toggle":o.addToggle(t,n,r);break;case"open":o.addOpen(t,n,r);break;case"close":o.addClose(t,n,r);break;case"pin":o.addPin(t,n,r);break;case"toggle-slide":o.addToggle(t,n,r,!0);break;case"open-slide":o.addOpen(t,n,r,!0)}return t},addToggle:function(t,n,i,r){return e.layout.buttons.get(t,n,i,"toggle").click(function(e){t.toggle(i,!!r),e.stopPropagation()}),t},addOpen:function(t,n,i,r){return e.layout.buttons.get(t,n,i,"open").attr("title",t.options[i].tips.Open).click(function(e){t.open(i,!!r),e.stopPropagation()}),t},addClose:function(t,n,i){return e.layout.buttons.get(t,n,i,"close").attr("title",t.options[i].tips.Close).click(function(e){t.close(i),e.stopPropagation()}),t},addPin:function(t,n,i){var r=e.layout.buttons,o=r.get(t,n,i,"pin");if(o.length){var a=t.state[i];o.click(function(n){r.setPinState(t,e(this),i,a.isSliding||a.isClosed),a.isSliding||a.isClosed?t.open(i):t.close(i),n.stopPropagation()}),r.setPinState(t,o,i,!a.isClosed&&!a.isSliding),a.pins.push(n)}return t},setPinState:function(e,t,n,i){var r=t.attr("pin");if(!r||i!==("down"==r)){var o=e.options[n],a=o.buttonClass+"-pin",s=a+"-"+n,c=a+"-up "+s+"-up",l=a+"-down "+s+"-down";t.attr("pin",i?"down":"up").attr("title",i?o.tips.Unpin:o.tips.Pin).removeClass(i?c:l).addClass(i?l:c)}},syncPinBtns:function(t,n,i){e.each(t.state[n].pins,function(r,o){e.layout.buttons.setPinState(t,e(o),n,i)})},_load:function(t){var n=e.layout.buttons;e.extend(t,{bindButton:function(e,i,r){return n.bind(t,e,i,r)},addToggleBtn:function(e,i,r){return n.addToggle(t,e,i,r)},addOpenBtn:function(e,i,r){return n.addOpen(t,e,i,r)},addCloseBtn:function(e,i){return n.addClose(t,e,i)},addPinBtn:function(e,i){return n.addPin(t,e,i)}});for(var i=0;4>i;i++){var r=e.layout.config.borderPanes[i];t.state[r].pins=[]}t.options.autoBindCustomButtons&&n.init(t)},_unload:function(){}},e.layout.onLoad.push(e.layout.buttons._load),e.layout.plugins.browserZoom=!0,e.layout.defaults.browserZoomCheckInterval=1e3,e.layout.optionsMap.layout.push("browserZoomCheckInterval"),e.layout.browserZoom={_init:function(t){e.layout.browserZoom.ratio()!==!1&&e.layout.browserZoom._setTimer(t)},_setTimer:function(t){if(!t.destroyed){var n=t.options,i=t.state,r=t.hasParentLayout?5e3:Math.max(n.browserZoomCheckInterval,100);setTimeout(function(){if(!t.destroyed&&n.resizeWithWindow){var r=e.layout.browserZoom.ratio();r!==i.browserZoom&&(i.browserZoom=r,t.resizeAll()),e.layout.browserZoom._setTimer(t)}},r)}},ratio:function(){function t(e,t){return(parseInt(e,10)/parseInt(t,10)*100).toFixed()}var n,i,r,o=window,a=screen,s=document,c=s.documentElement||s.body,l=e.layout.browser,u=l.version;return l.msie&&u>8||!l.msie?!1:a.deviceXDPI&&a.systemXDPI?t(a.deviceXDPI,a.systemXDPI):l.webkit&&(n=s.body.getBoundingClientRect)?t(n.left-n.right,s.body.offsetWidth):l.webkit&&(i=o.outerWidth)?t(i,o.innerWidth):(i=a.width)&&(r=c.clientWidth)?t(i,r):!1}},e.layout.onReady.push(e.layout.browserZoom._init)}(jQuery)}).call(this),"undefined"==typeof Package&&(Package={}),Package["jquery-layout"]={}}(),function(){var e,t=Package.meteor.Meteor,n=Package.underscore._,i=Package.deps.Deps,r=Package.ejson.EJSON;(function(){var o=function(e){return void 0===e?"undefined":r.stringify(e)},a=function(e){return void 0===e||"undefined"===e?void 0:r.parse(e)};e=function(e){this.keys=e||{},this.keyDeps={},this.keyValueDeps={}},n.extend(e.prototype,{set:function(e,t){var i=this;t=o(t);var r="undefined";if(n.has(i.keys,e)&&(r=i.keys[e]),t!==r){i.keys[e]=t;var a=function(e){e&&e.changed()};a(i.keyDeps[e]),i.keyValueDeps[e]&&(a(i.keyValueDeps[e][r]),a(i.keyValueDeps[e][t]))}},setDefault:function(e,t){var n=this;void 0===n.keys[e]&&n.set(e,t)},get:function(e){var t=this;return t._ensureKey(e),t.keyDeps[e].depend(),a(t.keys[e])},equals:function(e,s){var c=this,l=Package["mongo-livedata"]&&t.Collection.ObjectID;if(!("string"==typeof s||"number"==typeof s||"boolean"==typeof s||"undefined"==typeof s||s instanceof Date||l&&s instanceof l||null===s))throw new Error("ReactiveDict.equals: value must be scalar");var u=o(s);if(i.active){c._ensureKey(e),n.has(c.keyValueDeps[e],u)||(c.keyValueDeps[e][u]=new i.Dependency);var d=c.keyValueDeps[e][u].depend();d&&i.onInvalidate(function(){c.keyValueDeps[e][u].hasDependents()||delete c.keyValueDeps[e][u]})}var f=void 0;return n.has(c.keys,e)&&(f=a(c.keys[e])),r.equals(f,s)},_ensureKey:function(e){var t=this;e in t.keyDeps||(t.keyDeps[e]=new i.Dependency,t.keyValueDeps[e]={})},getMigrationData:function(){return this.keys}})}).call(this),"undefined"==typeof Package&&(Package={}),Package["reactive-dict"]={ReactiveDict:e}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.handlebars={}}(),function(){{var e,t,n,i,r,o,a,s,c,l,u,d,f,h=Package.meteor.Meteor,p=(Package["reactive-dict"].ReactiveDict,Package.deps.Deps),m=Package.underscore._,g=Package.ejson.EJSON,v=Package.templating.Template,y=Package.jquery.$,b=(Package.jquery.jQuery,Package.ui.UI),_=Package.ui.Handlebars;Package.htmljs.HTML}(function(){o={},o.global=function(){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:null},o.resolveValue=function(e){var t,n,i=o.global();if(m.isString(e)){t=e.split("."),n=i;for(var r=0;r<t.length;r++)if(n=n[t[r]],!n)return void 0}else n=e;return n},o.hasOwnProperty=function(e,t){var n={}.hasOwnProperty;return n.call(e,t)},o.inherits=function(e,t){function n(){this.constructor=e}if("[object Function]"!==o.typeOf(e))throw new Error("First parameter to Utils.inherits must be a function");if("[object Function]"!==o.typeOf(t))throw new Error("Second parameter to Utils.inherits must be a function");for(var i in t)o.hasOwnProperty(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},o.toArray=function(e){return e?"[object Array]"!==o.typeOf(e)?[e]:e:[]},o.typeOf=function(e){return e&&e.typeName?e.typeName:Object.prototype.toString.call(e)},o.extend=function(e,t,n){return 1===arguments.length?t=e:(t=t||{},t.extend=e),o.create(t,{onBeforeExtendPrototype:n})},o.create=function(e,t){var n,i;t=t||{},e=e||{},n=o.hasOwnProperty(e,"constructor")?e.constructor:function(){return n.__super__&&n.__super__.constructor?n.__super__.constructor.apply(this,arguments):void 0},i=e.extend,e.extend&&delete e.extend;var r=function(e,t,n){o.inherits(e,o.resolveValue(t)),n&&m.extend(e.prototype,n)};return i&&r(n,i),t.onBeforeExtendPrototype&&t.onBeforeExtendPrototype.call(n,e),m.extend(n.prototype,e),n},o.assert=function(e,t){if(!e)throw new Error(t)},o.warn=function(e,t){e||console&&console.warn&&console.warn(t)},o.capitalize=function(e){return e[0].toUpperCase()+e.slice(1,e.length)},o.classify=function(e){var t=/_|-|\./;return m.map(e.split(t),function(e){return o.capitalize(e)}).join("")},o.pick=function(){for(var e,t=m.toArray(arguments),n=0;n<t.length;n++)if(e=t[n],"undefined"!=typeof e&&null!==e)return e;return null}}).call(this),function(){t=function(e,t,n){var i;o.assert(e instanceof s),o.assert(m.isString(t),"Route constructor requires a name as the second parameter"),m.isFunction(n)&&(n={handler:n}),n=this.options=n||{},i=n.path||"/"+t,this.router=e,this.originalPath=i,m.isString(this.originalPath)&&"/"!==this.originalPath.charAt(0)&&(this.originalPath="/"+this.originalPath),this.name=t,this.where=n.where||"client",this.controller=n.controller,this.isReactive="undefined"!=typeof n.reactive?n.reactive:!0,this.compile()},t.prototype={constructor:t,compile:function(){var e,t=this,n=t.options;return this.keys=[],t.originalPath instanceof RegExp?t.re=t.originalPath:(e=t.originalPath.replace(/(.)\/$/,"$1").concat(n.strict?"":"/?").replace(/\/\(/g,"(?:/").replace(/#/,"/?#").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(e,n,i,r,o,a){return t.keys.push({name:r,optional:!!a}),n=n||"",""+(a?"":n)+"(?:"+(a?n:"")+(i||"")+(o||i&&"([^/.]+?)"||"([^/]+?)")+")"+(a||"")}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.*)"),t.re=new RegExp("^"+e+"$",n.sensitive?"":"i")),this},params:function(e){if(!e)return null;var t,n,i,r=[],o=this.exec(e),a=this.keys;if(!o)throw new Error('The route named "'+this.name+'" does not match the path "'+e+'"');for(var s=1,c=o.length;c>s;++s)n=a[s-1],i="string"==typeof o[s]?decodeURIComponent(o[s]):o[s],n?r[n.name]=void 0!==r[n.name]?r[n.name]:i:r.push(i);return e=decodeURI(e),t=e.split("?")[1],t&&(t=t.split("#")[0]),r.hash=e.split("#")[1],t&&m.each(t.split("&"),function(e){l=e.split("="),r[l[0]]=decodeURIComponent(l[1])}),r},normalizePath:function(e){var t=h.absoluteUrl();e=e.replace(t,"");var n=e.indexOf("?");e=~n?e.slice(0,n):e;var i=e.indexOf("#");return e=~i?e.slice(0,i):e,"/"!==e.charAt(0)&&(e="/"+e),e},test:function(e){return this.re.test(this.normalizePath(e))},exec:function(e){return this.re.exec(this.normalizePath(e))},resolve:function(e,t){var n,i,r,o,a=0,s=this.originalPath,c=!1;if(t=t||{},e=e||[],o=t.query,r=t.hash,s instanceof RegExp)throw new Error("Cannot currently resolve a regular expression path");return s=this.originalPath.replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(t,r,o,a,s,l){if(r=r||"",n=e[a],i="undefined"!=typeof n,l&&!i)r="",n="";else if(!i)return c=!0,console.warn('You called Route.prototype.resolve with a missing parameter. "'+a+'" not found in params'),void 0;n=m.isFunction(n)?n.call(e):n;var u=m.map(String(n).split("/"),function(e){return encodeURIComponent(e)}).join("/");return r+u}).replace(/\*/g,function(){if("undefined"==typeof e[a])throw new Error("You are trying to access a wild card parameter at index "+a+" but the value of params at that index is undefined");var t=String(e[a++]);return m.map(t.split("/"),function(e){return encodeURIComponent(e)}).join("/")}),m.isObject(o)&&(o=m.map(m.pairs(o),function(e){return e[0]+"="+encodeURIComponent(e[1])}).join("&"),o&&o.length&&(s=s+"/?"+o)),r&&(r=encodeURI(r.replace("#","")),s=o?s+"#"+r:s+"/#"+r),c?"/":s},path:function(e,t){return this.resolve(e,t)},url:function(e,t){var n=this.path(e,t);return"/"===n[0]&&(n=n.slice(1,n.length)),h.absoluteUrl()+n},getController:function(t,n){var i,r,a,s=o.resolveValue,c=o.classify,l=o.toArray,u=function(e){var t=s(e);if("undefined"==typeof t)throw new Error('controller "'+e+'" is not defined');return t};return n=m.extend({},this.router.options,this.options,n||{},{before:l(this.options.before),after:l(this.options.after),unload:l(this.options.unload),waitOn:l(this.router.options.waitOn).concat(l(this.options.waitOn)),path:t,route:this,router:this.router,params:this.params(t)}),this.controller?(i=m.isString(this.controller)?u(this.controller):this.controller,r=new i(n)):(a=this.name,a&&(i=s(c(a+"Controller")))?r=new i(n):new e(n))}}}.call(this),function(){a=function(e){e=this.options=e||{};this.router=e.router,this.route=e.route,this.path=e.path,this.params=e.params||[],this.where=e.where||"client",this.action=e.action||this.action,this.hooks={},e.load=o.toArray(e.load),e.before=o.toArray(e.before),e.after=o.toArray(e.after),e.unload=o.toArray(e.unload)},a.prototype={constructor:a,runHooks:function(e,t){for(var n,t=(this.constructor,o.toArray(t)),i=function(t){var n=[];return t.__super__&&(n=n.concat(i(t.__super__.constructor))),t.prototype[e]?n.concat(t.prototype[e]):n},r=i(this.constructor),a=this.options[e],s=this.route?this.router.getHooks(e,this.route.name):[],c=s.concat(a).concat(r).concat(t),l=0;(n=c[l])&&!this.stopped;l++)n.call(this)},run:function(){throw new Error("not implemented")},action:function(){throw new Error("not implemented")},stop:function(){this.stopped=!0}},m.extend(a,{extend:function(e){return o.extend(this,e,function(){})}})}.call(this),function(){s=function(e){var t=this;this.configure(e),this.routes=[],this._globalHooks={},m.each(s.HOOK_TYPES,function(e){t._globalHooks[e]=[]})},s.HOOK_TYPES=["load","before","after","unload"],s.prototype={constructor:s,configure:function(e){var t=this;return this.options=this.options||{},m.extend(this.options,e),m.each(s.HOOK_TYPES,function(e){t.options[e]&&(m.each(o.toArray(t.options[e]),function(n){t.addHook(e,n)}),delete t.options[e])}),this},addHook:function(e,t,n){return n=n||{},n.only&&(n.only=o.toArray(n.only)),n.except&&(n.except=o.toArray(n.except)),this._globalHooks[e].push({options:n,hook:t}),this},load:function(e,t){return this.addHook("load",e,t)},before:function(e,t){return this.addHook("before",e,t)},after:function(e,t){return this.addHook("after",e,t)},unload:function(e,t){return this.addHook("unload",e,t)},getHooks:function(e,t){var n=[];return m.each(this._globalHooks[e],function(e){var i=e.options;i.except&&m.include(i.except,t)||(!i.only||m.include(i.only,t))&&n.push(e.hook)}),n},map:function(e){return o.assert(m.isFunction(e),"map requires a function as the first parameter"),e.call(this),this},route:function(e,n){var i;return o.assert(m.isString(e),"name is a required parameter"),i=n instanceof t?n:new t(this,e,n),this.routes[e]=i,this.routes.push(i),i},path:function(e,t,n){var i=this.routes[e];return o.warn(i,"You called Router.path for a route named "+e+" but that that route doesn't seem to exist. Are you sure you created it?"),i&&i.path(t,n)},url:function(e,t,n){var i=this.routes[e];return o.warn(i,'You called Router.url for a route named "'+e+"\" but that route doesn't seem to exist. Are you sure you created it?"),i&&i.url(t,n)},dispatch:function(e,t,n){function i(){if(r=a[c++],!r)return o.onRouteNotFound(e,t);if(r.test(e)){if(r.where!==s)return o.onUnhandled(e,t);var l=r.getController(e,t);o.run(l,n)}else i()}var r,o=this,a=o.routes,s=h.isClient?"client":"server",c=0;i()},run:function(){throw new Error("run not implemented")},onUnhandled:function(){throw new Error("onUnhandled not implemented")},onRouteNotFound:function(e){throw new Error('Oh no! No route found for path: "'+e+'"')}}}.call(this),function(){function e(e){var t=e.currentTarget,n=m.isUndefined(e.which)?e.button:e.which,r=t.href,o=t.pathname+t.search+t.hash;1===n&&(e.metaKey||e.ctrlKey||e.shiftKey||e.isDefaultPrevented()||t.target||i.isSameOrigin(r)&&(e.preventDefault(),i.set(o)))}function t(){r&&n.changed()}var n=new p.Dependency,r=!1;i={},i.origin=function(){return location.protocol+"//"+location.host},i.isSameOrigin=function(e){var t=i.origin();return 0===e.indexOf(t)},i.get=function(){return n.depend(),location},i.path=function(){return n.depend(),location.pathname+location.search+location.hash},i.set=function(e,t){t=t||{};var r=t.state||{};/^http/.test(e)?u=e:("/"!==e.charAt(0)&&(e="/"+e),u=i.origin()+e),i.isSameOrigin(u)?"server"===t.where?window.location=u:t.replaceState?i.replaceState(r,t.title,e):i.pushState(r,t.title,e):window.location=u,t.skipReactive!==!0&&n.changed()},i.pushState=function(e,t,n){r=!0,history.pushState?history.pushState(e,t,n):window.location=n},i.replaceState=function(e,t,n){r=!0,history.replaceState?history.replaceState(e,t,n):window.location=n},i.start=function(){this.isStarted||(y(window).on("popstate",t),y(document).on("click","a[href]",e),this.isStarted=!0,history.replaceState&&history.replaceState({initial:!0},null,location.pathname+location.search+location.hash))},i.stop=function(){y(window).off("popstate",t),y(window).off("click","a[href]",e),this.isStarted=!1},i.start()}.call(this),function(){var e="main",t="__defaultLayout__",n=function(e){this._dep=new p.Dependency,this._value=e||null};n.prototype={set:function(e){g.equals(e,this._value)||(this._value=e,this._dep.changed())},get:function(){return this._dep.depend(),this._value},equals:function(e){return this._dep.depend(),g.equals(this._value,e)}},d=b.Component.extend({kind:"Region",render:function(){var e=this;return function(){var t=e.component.get();if(t)return t=b.isComponent(t)?t:v[t]}},setComponent:function(e){this.component.set(e)}}),r=b.Component.extend({kind:"Page",init:function(){this.regions={},this.data=null,this.layout=new n(t)},render:function(){var t=this;return function(){var n=t.layout.get();return n=b.isComponent(n)?n:v[n],n.extend({yield:function(n){return m.isString(n)||(n=e),t._ensureRegion(n)}}).withData(function(){return t.getData()})}},setLayout:function(e){e=e||t,this.layout.set(e)},setData:function(e){this.data=e},getData:function(){return m.isFunction(this.data)?this.data():this.data},setRegion:function(t,n){t||(t=e),this._ensureRegion(t),this.regions[t].setComponent(n)},_ensureRegion:function(e){var t=this,i=this.regions[e]=this.regions[e]||d.extend({name:e,layout:this,component:new n}).withData(function(){var e=t.getData();return e});return i},_clearRegion:function(e){this.regions[e].setComponent(null)},_clearUnusedRegions:function(e){var t=this,n=m.keys(this.regions),e=m.filter(e,function(e){return!!e}),i=m.difference(n,e);m.each(i,function(e){t._clearRegion(e)})}})}.call(this),function(){if(c=o.extend(s,{constructor:function(){var e=this;c.__super__.constructor.apply(this,arguments),this._page=null,this._currentController=null,this._controllerDep=new p.Dependency,this._hasJustReloaded=!1,h.startup(function(){setTimeout(function(){e.options.autoRender!==!1&&e.autoRender(),e.options.autoStart!==!1&&e.start()})})},current:function(e){return e&&e.reactive===!1?this._currentController:(this._controllerDep.depend(),this._currentController)},setLayout:function(e){this._page.setLayout(e)},setRegion:function(e,t){this._page.setRegion(e,t)},clearUnusedRegions:function(e){this._page._clearUnusedRegions(e)},setData:function(e){this._page.setData(e)},getData:function(){return this._page.getData()},run:function(e,t){var n=this,i=h.isClient?"client":"server";if(o.assert(e,"run requires a controller"),e.where!=i)return n.onUnhandled(e.path,e.options),void 0;var r=function(){p.autorun(function(t){n._routeComputation=t,n._hasJustReloaded||e.runHooks("load"),n._hasJustReloaded=!1,p.autorun(function(){e.run()})})};this._currentController&&this._currentController.runHooks("unload"),this._currentController=e,this._routeComputation?(this._routeComputation.stop(),this._routeComputation.onInvalidate(r)):r(),e==this._currentController&&(t&&t(e),this._controllerDep.changed())},go:function(e,t,n){var r,a,s,c=/^\/|http/,l=function(){n=n||{},i.set(a,{replaceState:n.replaceState,state:n.state,skipReactive:!0})};c.test(e)?(a=e,n=t,this.dispatch(a,n,l)):(r=this.routes[e],o.assert(r,"No route found named "+e),a=r.path(t,n),s=r.getController(a,n),this.run(s,l))},render:function(){return this._page=b.render(r.extend({layoutTemplate:this.options.layoutTemplate})),this.isRendered=!0,this._page},autoRender:function(){var e=this.render();b.insert(e,document.body)},start:function(){var e=this;e.isStarted||(e.isStarted=!0,p.autorun(function(t){e._locationComputation=t,e.dispatch(i.path(),{state:history.state})}))},stop:function(){this.isStarted=!1,this._locationComputation&&this._locationComputation.stop()},onUnhandled:function(e){this.stop(),window.location=e},onRouteNotFound:function(e){if(history&&!history.state.initial)this.stop(),window.location=e;else{if(!this.options.notFoundTemplate)throw new Error('Oh no! No route found for path: "'+e+'"');this.setLayout(this.options.layoutTemplate),this.setTemplate(this.options.notFoundTemplate)}}}),n=new c,h._reload){h._reload.onMigrate("iron-router",function(){return[!0,!0]});var e=h._reload.migrationData("iron-router");n._hasJustReloaded=e}}.call(this),function(){v.__define__("__defaultLayout__",function(){{var e=this;e.__content,e.__elseContent}return function(){return Spacebars.include(v.yield||e.lookup("yield"))}})}.call(this),function(){f=function(){this._dep=new p.Dependency,this.clear()},f.prototype={get:function(e){return this._list[e]},clear:function(){this._list=[]},append:function(e){var t=this;e=o.toArray(e),m.each(e,function(e){t.push(e)})},push:function(e){if(e){var t=this._list.push(e);return t}},ready:function(){return m.all(this._list,function(e){return e.ready()})}};var t=function(){var e=this,t=e.getData();null!==t&&"undefined"!=typeof t||!e.notFoundTemplate||(e.render(e.notFoundTemplate),this.renderYields(),e.stop())},n=function(){this.ready()||this.loadingTemplate&&(this.render(this.loadingTemplate),this.renderYields(),this.stop())},i=function(){this.router&&this.router.clearUnusedRegions(this._renderedYields)};e=o.extend(a,{constructor:function(){e.__super__.constructor.apply(this,arguments);var t=this,n=function(e){return o.pick(t.options[e],t[e])};this.loadingTemplate=n("loadingTemplate"),this.notFoundTemplate=n("notFoundTemplate"),this.data=n("data"),this.template=n("template")||this.route&&this.route.name,this.yieldTemplates=n("yieldTemplates"),this.layoutTemplate=n("layoutTemplate"),this.waitOn=[].concat(o.toArray(this.options.waitOn)).concat(o.toArray(this.waitOn)),this._waitList=new f},ready:function(){return this._waitList.ready()},redirect:function(){return this.stop(),this.router&&this.router.go.apply(this.router,arguments)},yieldTemplates:null,layoutTemplate:null,template:null,loadingTemplate:null,notFoundTemplate:null,data:{},getData:function(){return this.router&&this.router.getData()},setData:function(e){var t=this,n=function(){return m.isFunction(e)?e.call(t):e};this.router&&this.router.setData(n)},waitOn:null,subscribe:function(){var e=this,t=function(){var t=!1;return{wait:function(){t||(e._waitList.push(this),t=!0)}}}(),n=h.subscribe.apply(this,arguments);return m.extend(n,t)},render:function(e,t){var n,e,i=this,r=function(e){i._renderedYields&&(e=e||"main",i._renderedYields.push(e))};0==arguments.length?(this.router&&this.router.setRegion("main",this.template),r(),this.renderYields()):(t=t||{},n=t.to,this.router&&this.router.setRegion(n,e),r(n))},renderYields:function(){var e=this;m.each(this.yieldTemplates,function(t,n){e.render(n,t)})},setLayout:function(e){this.router&&this.router.setLayout(e)},run:function(){var e=this,r=(m.toArray(arguments),m.isFunction(this.action)?this.action:this[this.action]);o.assert(r,"You don't have an action named \""+this.action+'" defined on your RouteController'),this.stopped=!1,this._renderedYields=[],this._waitList.clear();var a=m.flatten(m.map(this.waitOn,function(t){return m.isFunction(t)?t.call(e):t}));return this._waitList.append(a),this.setData(this.data),this.setLayout(this.layoutTemplate),this.runHooks("before",[n,t]),this.stopped?(this.isFirstRun=!1,void 0):(r.call(this),this.runHooks("after",[i]),this.isFirstRun=!1,void 0)},wait:function(e){e=m.isFunction(e)?e.call(this):e,this._waitList.append(e)},action:function(){this.render()}})}.call(this),function(){_&&(_.registerHelper("pathFor",function(e,t,i){2==arguments.length&&(i=t,t=this);var r=i.hash.hash,o=m.omit(i.hash,"hash");return n.path(e,t,{query:o,hash:r})}),_.registerHelper("urlFor",function(e,t,i){2==arguments.length&&(i=t,t=this);var r=i.hash.hash,o=m.omit(i.hash,"hash");return n.url(e,t,{query:o,hash:r})}),_.registerHelper("renderRouter",function(){return new _.SafeString(n.render())}),_.registerHelper("currentRouteController",function(){return n.current()}),_.registerHelper("link",function(e){var t=e.hash||{},i=t.route,r=t.params||this,o=t.query,a=t.hash,s=t["class"]||"",c=n.path(i,r,{query:o,hash:a}),l='<a href="'+c+'" class="'+s+'">';return l+=e.fn(this),l+="</a>",new _.SafeString(l)}))}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron-router"]={RouteController:e,Route:t,Router:n,IronLocation:i,Page:r,Utils:o,IronRouteController:a,IronRouter:s,ClientRouter:c}}(),function(){var e,t=(Package.meteor.Meteor,Package.underscore._);(function(){e={_isCssLoaded:function(){return t.find(document.styleSheets,function(e){return e.cssText&&!e.cssRules?e.cssText.match(/_meteor_detect_css/):t.find(e.cssRules,function(e){return"._meteor_detect_css"===e.selectorText})})}}}).call(this),"undefined"==typeof Package&&(Package={}),Package.webapp={WebApp:e}}(),function(){{var e,t=(Package.meteor.Meteor,Package.underscore._,Package["reactive-dict"].ReactiveDict);Package.ejson.EJSON}(function(){var n={};if(Package.reload){var i=Package.reload.Reload._migrationData("session");i&&i.keys&&(n=i.keys)}e=new t(n),Package.reload&&Package.reload.Reload._onMigrate("session",function(){return[!0,{keys:e.keys}]})}).call(this),"undefined"==typeof Package&&(Package={}),Package.session={Session:e}}(),function(){var e,t=(Package.meteor.Meteor,Package.htmljs.HTML),n=Package.ui.UI,i=Package.ui.Handlebars;(function(){e={};var r=function(e,t){return e!==t?!1:!e||"number"==typeof e||"boolean"==typeof e||"string"==typeof e};e.include=function(e,t){if(t=t||{},"function"==typeof e){var i=e,o={};for(var a in t)if("data"!==a){var s=t[a];o[a]="function"==typeof s?s():s}var c;if("data"in t){var l=t.data;l="function"==typeof l?l():l,c=i(l,{hash:o})}else c=i({hash:o});if(n.isComponent(c)&&("__content"in t||"__elseContent"in t)){var u={};"__content"in t&&(u.__content=t.__content),"__elseContent"in t&&(u.__elseContent=t.__elseContent),c=c.extend(u)}return c}var d=e;if(!n.isComponent(d))throw new Error("Expected template, found: "+d);if(t){var f={};for(var a in t)f[a]="__content"===a||"__elseContent"===a?t[a]:n.emboxValue(t[a],r);return d.extend(f)}return d},e.mustacheImpl=function(){var t=arguments;if(t.length>1){var n=t[t.length-1];if(n instanceof e.kw){var i={};for(var r in n.hash){var o=n.hash[r];i[r]="function"==typeof o?o():o}t[t.length-1]=e.kw(i)}else n=e.kw(),t=Array.prototype.slice.call(arguments),t.push(n)}return e.call.apply(null,t)},e.mustache=function(){var n=e.mustacheImpl.apply(null,arguments);return n instanceof i.SafeString?t.Raw(n.toString()):String(null==n?"":n)},e.attrMustache=function(){var n=e.mustacheImpl.apply(null,arguments);if(null==n||""===n)return null;if("object"==typeof n)return n;if("string"==typeof n&&t.isValidAttributeName(n)){var i={};return i[n]="",i}throw new Error("Expected valid attribute name, '', null, or object")},e.makeRaw=function(e){return e instanceof t.Raw?e:t.Raw(e)},e.call=function(e){if("function"==typeof e){for(var t=[],n=1;n<arguments.length;n++){var i=arguments[n];t[n-1]="function"==typeof i?i():i}return e.apply(null,t)}if(arguments.length>1)throw new Error("Can't call non-function: "+e);return e},e.kw=function(t){return this instanceof e.kw?(this.hash=t||{},void 0):new e.kw(t)},e.dot=function(t,n){if(arguments.length>2){var i=[];return i.push(e.dot(t,n)),i.push.apply(i,Array.prototype.slice.call(arguments,2)),e.dot.apply(null,i)}if("function"==typeof t&&(t=t()),!t)return t;var r=t[n];return"function"!=typeof r?r:function(){return r.apply(t,arguments)}}}).call(this),"undefined"==typeof Package&&(Package={}),Package.spacebars={Spacebars:e}}(),_=Package.underscore._,Accounts=Package["accounts-base"].Accounts,RouteController=Package["iron-router"].RouteController,Route=Package["iron-router"].Route,Router=Package["iron-router"].Router,IronLocation=Package["iron-router"].IronLocation,Page=Package["iron-router"].Page,Meteor=Package.meteor.Meteor,WebApp=Package.webapp.WebApp,Log=Package.logging.Log,Deps=Package.deps.Deps,Session=Package.session.Session,DDP=Package.livedata.DDP,UI=Package.ui.UI,Handlebars=Package.ui.Handlebars,Spacebars=Package.spacebars.Spacebars,Template=Package.templating.Template,check=Package.check.check,Match=Package.check.Match,$=Package.jquery.$,jQuery=Package.jquery.jQuery,Random=Package.random.Random,EJSON=Package.ejson.EJSON,HTML=Package.htmljs.HTML,function(){Template.__define__("main_character_error",function(){{var e=this;e.__content,e.__elseContent}return"角色資料錯誤，無法讀取：錯誤的角色規則。"})}(),function(){Template.__define__("main_character_PF",function(){{var e=this;e.__content,e.__elseContent}return HTML.FORM({action:"javascript:","class":"form-inline",id:"character_PF"},"\r\n    ",HTML.H3(function(){return Spacebars.mustache(e.lookup("title"))}),"\r\n    ",function(){return Spacebars.include(Template.character_PF_profile||e.lookup("character_PF_profile"),{data:e.lookup("characterID")})},"\r\n    ",function(){return Spacebars.include(Template.character_PF_number||e.lookup("character_PF_number"),{data:e.lookup("characterID")})},"\r\n    ",function(){return Spacebars.include(Template.character_PF_dice||e.lookup("character_PF_dice"),{data:e.lookup("characterID")})},"\r\n    ",function(){return Spacebars.include(Template.character_PF_item||e.lookup("character_PF_item"),{data:e.lookup("characterID")})},"\r\n    ",function(){return Spacebars.include(Template.character_PF_level||e.lookup("character_PF_level"),{data:e.lookup("characterID")})},"\r\n    ",function(){return Spacebars.include(Template.character_PF_spell||e.lookup("character_PF_spell"),{data:e.lookup("characterID")})},"\r\n    ",function(){return Spacebars.include(Template.character_PF_description||e.lookup("character_PF_description"),{data:e.lookup("characterID")})},"\r\n  ")}),Template.__define__("character_PF_profile",function(){{var e=this;e.__content,e.__elseContent}return HTML.FIELDSET({"class":"profile"},HTML.Raw('\r\n    <legend>　　基本訊息：<a href="javascript:" class="add pull-right">新增基本訊息</a></legend>\r\n    '),HTML.DIV({"class":"content",style:"display:none;"},"\r\n      ",HTML.DIV({"class":"eachProfile"},"\r\n        ",HTML.DIV({"class":"input-prepend"},HTML.Raw('\r\n          <label class="add-on">角色名稱</label>\r\n          '),HTML.INPUT({"class":"span5",type:"text",name:"name",value:function(){return Spacebars.mustache(e.lookup("characterName"),e.lookup("."))}}),"\r\n        "),"\r\n      "),"\r\n      ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.DIV({"class":"eachProfile","data-name":function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}},"\r\n          ",HTML.DIV({"class":"input-prepend input-append"},"\r\n            ",HTML.LABEL({"class":"add-on"},function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}),"\r\n            ",HTML.INPUT({"class":function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"class"))},type:"text",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"value"))}}),"\r\n            ",HTML.SPAN({"class":"add-on"},HTML.I({"class":"icon-remove",title:"刪除此訊息"})),"\r\n          "),"\r\n        "),"\r\n      "]}),data:function(){return Spacebars.call(e.lookup("profileList"),e.lookup("."))}})},"\r\n    "),"\r\n  ")}),Template.__define__("character_PF_number",function(){{var e=this;e.__content,e.__elseContent}return HTML.FIELDSET({"class":"number"},HTML.Raw('\r\n    <legend>　　角色數值：<a href="javascript:" class="add pull-right">新增角色數值</a></legend>\r\n    '),HTML.DIV({"class":"content",style:"display:none;"},"\r\n      ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n        ",function(){return Spacebars.include(Template.character_PF_number_list||e.lookup("character_PF_number_list"))},"\r\n      "]}),data:function(){return Spacebars.call(e.lookup("numberList"),e.lookup("."))}})},"\r\n    "),"\r\n  ")}),Template.__define__("character_PF_number_list",function(){{var e=this;e.__content,e.__elseContent}return HTML.DIV({"class":"eachNumber"},"\r\n    ",HTML.LABEL({"class":"span2"},HTML.Raw('<i class="icon-remove pull-left" title="刪除此列"></i>'),function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))
}),"\r\n    ",HTML.INPUT({"class":"input-mini sum",type:"text",disabled:"disabled",value:function(){return Spacebars.mustache(e.lookup("findNumber"),Spacebars.dot(e.lookup("."),"_id"))}}),HTML.Raw("\r\n    <strong>＝</strong>\r\n      "),function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.DIV({"class":"input-prepend"},"\r\n          ",HTML.SPAN({"class":"add-on"},HTML.I({"class":"icon-remove",title:"刪除此值"})),"\r\n          ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n            ",HTML.INPUT({"class":"input-mini each",type:"number",name:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))},title:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))},disabled:"disabled",value:function(){return Spacebars.mustache(e.lookup("findNameNumber"),Spacebars.dot(e.lookup("."),"use"))}}),"\r\n          "]}),__elseContent:UI.block(function(){var e=this;return["\r\n            ",HTML.INPUT({"class":"input-mini each",type:"number",name:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))},title:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))},value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"value"))}}),"\r\n          "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"use"))}})},"\r\n        "),"\r\n        ",HTML.STRONG("＋"),"\r\n      "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"value"))}})},"\r\n  ")}),Template.__define__("character_PF_dice",function(){{var e=this;e.__content,e.__elseContent}return HTML.FIELDSET({"class":"dice"},HTML.Raw('\r\n    <legend>　　擲骰資料：<a href="javascript:" class="add pull-right">新增擲骰資料</a></legend>\r\n    '),HTML.DIV({"class":"content",style:"display:none;"},"\r\n      ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n        ",function(){return Spacebars.include(Template.character_PF_dice_list||e.lookup("character_PF_dice_list"))},"\r\n      "]}),data:function(){return Spacebars.call(e.lookup("diceList"),e.lookup("."))}})},"\r\n    "),"\r\n  ")}),Template.__define__("character_PF_dice_list",function(){{var e=this;e.__content,e.__elseContent}return HTML.DIV({"class":"eachDice"},"\r\n    ",HTML.LABEL({"class":"span2"},HTML.Raw('<i class="icon-remove pull-left" title="刪除此列"></i>'),function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}),"\r\n    ",HTML.INPUT({"class":"input-mini sum",type:"text",disabled:"disabled",value:function(){return Spacebars.mustache(e.lookup("getDice"),Spacebars.dot(e.lookup("."),"_id"))}}),HTML.Raw("\r\n    <strong>＝</strong>\r\n      "),function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.DIV({"class":"input-prepend"},"\r\n          ",HTML.SPAN({"class":"add-on"},HTML.I({"class":"icon-remove",title:"刪除此值"})),"\r\n            ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n              ",HTML.INPUT({"class":"input-mini",type:"number",name:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))},title:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))},disabled:"disabled",value:function(){return Spacebars.mustache(e.lookup("findNameNumber"),Spacebars.dot(e.lookup("."),"use"))}}),"\r\n            "]}),__elseContent:UI.block(function(){var e=this;return["\r\n              ",HTML.INPUT({"class":"input-mini",type:"number",name:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))},title:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))},value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"value"))}}),"\r\n            "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"use"))}})},"\r\n        "),"\r\n        ",HTML.STRONG("＋"),"\r\n      "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"value"))}})},"\r\n  ")}),Template.__define__("character_PF_item",function(){{var e=this;e.__content,e.__elseContent}return HTML.FIELDSET({"class":"item"},HTML.Raw('\r\n    <legend>　　物品欄：<a href="javascript:" class="add pull-right">新增物品資料</a></legend>\r\n    '),HTML.DIV({"class":"content",style:"display:none;"},HTML.Raw('\r\n      <p>\r\n        <span class="span6 center">物品名稱</span>\r\n        <span class="span1 center">數量</span>\r\n        <span class="span1 center">單位重量</span>\r\n        <span class="span2 center">單位價值</span>\r\n      </p>\r\n      '),function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n        ",function(){return Spacebars.include(Template.character_PF_item_list||e.lookup("character_PF_item_list"))},"\r\n      "]}),data:function(){return Spacebars.call(e.lookup("itemList"),e.lookup("."))}})},"\r\n      ",HTML.P("\r\n        ",HTML.SPAN({"class":"span2 offset6"},"角色總負重：",function(){return Spacebars.mustache(e.lookup("sumItem"),e.lookup("."),"weight")}),"\r\n        ",HTML.SPAN({"class":"span2"},"角色總財富：",function(){return Spacebars.mustache(e.lookup("sumItem"),e.lookup("."),"worth")}),"\r\n      "),"\r\n    "),"\r\n  ")}),Template.__define__("character_PF_item_list",function(){{var e=this;e.__content,e.__elseContent}return HTML.DIV({"class":"eachItem"},"\r\n    ",HTML.DIV({"class":"input-prepend input-append span6"},HTML.Raw('\r\n      <span class="add-on"><i class="icon-remove pull-left" title="刪除此物品"></i></span>\r\n      '),HTML.INPUT({type:"text","class":"span5 name",name:"name",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}}),"\r\n      ",HTML.SPAN({"class":"add-on"},"\r\n        ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n          ",HTML.I({"class":"icon-th-list",title:"檢視物品細節"}),"\r\n        "]}),__elseContent:UI.block(function(){return["\r\n          ",HTML.I({"class":"icon-plus",title:"添加物品細節"}),"\r\n        "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"detail"))}})},"\r\n      "),"\r\n    "),"\r\n    ",HTML.SPAN({"class":"span1"},"\r\n      ",HTML.INPUT({type:"number","class":"span1 amount",name:"amount",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"amount"))}}),"\r\n    "),"\r\n    ",HTML.SPAN({"class":"span1"},"\r\n      ",HTML.INPUT({type:"number","class":"span1 weight",name:"weight",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"weight"))}}),"\r\n    "),"\r\n    ",HTML.SPAN({"class":"span2"},"\r\n      ",HTML.INPUT({type:"number","class":"span2 worth",name:"worth",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"worth"))}}),"\r\n    "),"\r\n    ",HTML.DIV({"class":"detail",style:"display:none;"},"\r\n      ",HTML.TEXTAREA({name:"detail","class":"span9"},function(){return Spacebars.mustache(e.lookup("trim"),Spacebars.dot(e.lookup("."),"detail"))}),"\r\n    "),"\r\n  ")}),Template.__define__("character_PF_level",function(){{var e=this;e.__content,e.__elseContent}return HTML.FIELDSET({"class":"level"},HTML.Raw('\r\n    <legend>　　等級資訊記錄：<a href="javascript:" class="add pull-right">新增一級</a></legend>\r\n    '),HTML.DIV({"class":"content",style:"display:none;"},"\r\n      ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.DIV({"class":"eachLevel"},"\r\n          ",HTML.P(HTML.STRONG("ＬＶ",function(){return Spacebars.mustache(e.lookup("intToBig"),Spacebars.dot(e.lookup("."),"level"))}),"　　",HTML.A({href:"javascript:","class":"addAbility"},"添加能力")),"\r\n          ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n            ",function(){return Spacebars.include(Template.character_PF_level_list||e.lookup("character_PF_level_list"))},"\r\n          "]}),data:function(){return Spacebars.call(e.lookup("levelList"),e.lookup("."))}})},"\r\n        "),"\r\n      "]}),data:function(){return Spacebars.call(e.lookup("eachLevel"),e.lookup("."))}})},"\r\n    "),"\r\n  ")}),Template.__define__("character_PF_level_list",function(){{var e=this;e.__content,e.__elseContent}return HTML.DIV({"class":"eachAbility"},"\r\n    ",HTML.DIV({"class":"input-prepend input-append span9"},HTML.Raw('\r\n      <span class="add-on"><i class="icon-remove" title="刪除此項"></i></span>\r\n      '),HTML.INPUT({type:"text","class":"span7 name",name:"name",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}}),"\r\n      ",HTML.SPAN({"class":"add-on"},"\r\n        ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n          ",HTML.I({"class":"icon-th-list",title:"檢視能力細節"}),"\r\n        "]}),__elseContent:UI.block(function(){return["\r\n          ",HTML.I({"class":"icon-plus",title:"添加能力細節"}),"\r\n        "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"detail"))}})},"\r\n      "),"\r\n    "),HTML.Raw("\r\n    <br>\r\n    "),HTML.TEXTAREA({"class":"offset2 span9",name:"detail",style:"display:none;"},function(){return Spacebars.mustache(e.lookup("trim"),Spacebars.dot(e.lookup("."),"detail"))}),"\r\n  ")}),Template.__define__("character_PF_spell",function(){{var e=this;e.__content,e.__elseContent}return HTML.FIELDSET({"class":"spell"},HTML.Raw("\r\n    <legend>　　法術表：</legend>\r\n    "),HTML.DIV({"class":"content",style:"display:none;"},"\r\n      ",HTML.UL({"class":"nav nav-tabs"},"\r\n        ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n          ",HTML.LI(HTML.A({href:"javascript:"},function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"belong"))})),"\r\n        "]}),data:function(){return Spacebars.call(e.lookup("allClass"),e.lookup("."))}})},HTML.Raw('\r\n        <li><a href="javascript:" class="add">新增法術體系</a></li>\r\n      ')),"\r\n      ",HTML.DIV({"class":"tab-content"},"\r\n        ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n          ",function(){return Spacebars.include(Template.character_PF_spellClass||e.lookup("character_PF_spellClass"))},"\r\n        "]}),data:function(){return Spacebars.call(e.lookup("allClass"),e.lookup("."))}})},"\r\n      "),"\r\n    "),"\r\n  ")}),Template.__define__("character_PF_spellClass",function(){{var e=this;e.__content,e.__elseContent}return HTML.DIV({"class":"tab-pane fade"},"\r\n    ",HTML.H4("已知法術（",function(){return Spacebars.mustache(e.lookup("totalSpell"),"known",Spacebars.dot(e.lookup("."),"character"),Spacebars.dot(e.lookup("."),"belong"),"all")},"）："),"\r\n    ",HTML.DIV({style:"display:none;"},"\r\n      ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n        ",function(){return Spacebars.include(Template.character_PF_spellKnown||e.lookup("character_PF_spellKnown"))},"\r\n      "]}),data:function(){return Spacebars.call(e.lookup("spellKnownCircle"),Spacebars.dot(e.lookup("."),"character"),Spacebars.dot(e.lookup("."),"belong"))}})},"\r\n    "),"\r\n    ",HTML.H4("本日法術格（",function(){return Spacebars.mustache(e.lookup("totalSpell"),"slotAvailable",Spacebars.dot(e.lookup("."),"character"),Spacebars.dot(e.lookup("."),"belong"),"all")},"／",function(){return Spacebars.mustache(e.lookup("totalSpell"),"slot",Spacebars.dot(e.lookup("."),"character"),Spacebars.dot(e.lookup("."),"belong"),"all")},"）："),"\r\n    ",HTML.DIV({style:"display:none;"},"\r\n      ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n        ",function(){return Spacebars.include(Template.character_PF_spellSlot||e.lookup("character_PF_spellSlot"))},"\r\n      "]}),data:function(){return Spacebars.call(e.lookup("spellSlotCircle"),Spacebars.dot(e.lookup("."),"character"),Spacebars.dot(e.lookup("."),"belong"))}})},"\r\n    "),"\r\n  ")}),Template.__define__("character_PF_spellKnown",function(){{var e=this;e.__content,e.__elseContent}return HTML.DIV({"class":"eachKnownCircle"},"\r\n    ",HTML.H5(HTML.Raw('<i class="icon-plus" title="在此法術環級下新增已知法術"></i>法術環級'),HTML.STRONG(function(){return Spacebars.mustache(e.lookup("intToBig"),Spacebars.dot(e.lookup("."),"circle"))}),"（",function(){return Spacebars.mustache(e.lookup("totalSpell"),"known",Spacebars.dot(e.lookup("."),"character"),Spacebars.dot(e.lookup("."),"belong"),Spacebars.dot(e.lookup("."),"circle"))},"）："),"\r\n    ",HTML.DIV({style:"display:none;"},"\r\n    ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n      ",HTML.DIV({"class":"eachKnown"},"\r\n        ",HTML.DIV({"class":"input-prepend input-append span9"},"\r\n          ",HTML.SPAN({"class":"add-on"},HTML.I({"class":"icon-remove",title:"刪除此項"})),"\r\n          ",HTML.INPUT({type:"text","class":"span7 name",name:"name",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}}),"\r\n          ",HTML.SPAN({"class":"add-on"},"\r\n            ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n              ",HTML.I({"class":"icon-th-list",title:"檢視能力細節"}),"\r\n            "]}),__elseContent:UI.block(function(){return["\r\n              ",HTML.I({"class":"icon-pencil",title:"添加能力細節"}),"\r\n            "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"detail"))}})},"\r\n          "),"\r\n        "),"\r\n        ",HTML.TEXTAREA({"class":"offset2 span9",name:"detail",style:"display:none;"},function(){return Spacebars.mustache(e.lookup("trim"),Spacebars.dot(e.lookup("."),"detail"))}),"\r\n      "),"\r\n    "]}),data:function(){return Spacebars.call(e.lookup("spellKnown"),Spacebars.dot(e.lookup("."),"character"),Spacebars.dot(e.lookup("."),"belong"),Spacebars.dot(e.lookup("."),"circle"))}})},"\r\n    "),"\r\n  ")}),Template.__define__("character_PF_spellSlot",function(){{var e=this;e.__content,e.__elseContent}return HTML.DIV({"class":"eachSlotCircle"},"\r\n    ",HTML.H5(HTML.Raw('<i class="icon-minus" title="在此法術環級下減少法術格"></i>法術環級'),HTML.STRONG(function(){return Spacebars.mustache(e.lookup("intToBig"),Spacebars.dot(e.lookup("."),"circle"))}),"（",function(){return Spacebars.mustache(e.lookup("totalSpell"),"slotAvailable",Spacebars.dot(e.lookup("."),"character"),Spacebars.dot(e.lookup("."),"belong"),Spacebars.dot(e.lookup("."),"circle"))},"／",function(){return Spacebars.mustache(e.lookup("totalSpell"),"slot",Spacebars.dot(e.lookup("."),"character"),Spacebars.dot(e.lookup("."),"belong"),Spacebars.dot(e.lookup("."),"circle"))},HTML.Raw('）<i class="icon-plus" title="在此法術環級下新增法術格"></i>')),"\r\n    ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n      ",HTML.DIV({"class":"input-append"},"\r\n        ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n          ",HTML.SELECT({"class":"span2",disabled:"disabled"},"\r\n            ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n              ",HTML.OPTION({value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}},function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}),"\r\n            "]}),__elseContent:UI.block(function(){return["\r\n              ",HTML.OPTION({value:""},"未準備"),"\r\n            "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"name"))}})},"\r\n          "),"\r\n          ",HTML.SPAN({"class":"add-on"},HTML.I({"class":"icon-ok",title:"標示為未使用"})),"\r\n        "]}),__elseContent:UI.block(function(){var e=this;return["\r\n          ",HTML.SELECT({"class":"span2"},"\r\n            ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n              ",HTML.OPTION({value:function(){return Spacebars.mustache(e.lookup("."))}},function(){return Spacebars.mustache(e.lookup("."))}),"\r\n            "]}),data:function(){return Spacebars.call(e.lookup("prepareList"),Spacebars.dot(e.lookup("."),"character"),Spacebars.dot(e.lookup("."),"belong"),Spacebars.dot(e.lookup("."),"circle"),Spacebars.dot(e.lookup("."),"name"))}})},"\r\n          "),"\r\n          ",HTML.SPAN({"class":"add-on"},HTML.I({"class":"icon-ok",title:"標示為已使用"})),"\r\n        "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"used"))}})},"\r\n      "),"\r\n    "]}),data:function(){return Spacebars.call(e.lookup("spellSlot"),Spacebars.dot(e.lookup("."),"character"),Spacebars.dot(e.lookup("."),"belong"),Spacebars.dot(e.lookup("."),"circle"))}})},"\r\n  ")}),Template.__define__("character_PF_description",function(){{var e=this;e.__content,e.__elseContent}return HTML.FIELDSET({"class":"description"},HTML.Raw('\r\n    <legend>　　額外詳述：<a href="javascript:" class="add pull-right">新增額外詳述</a></legend>\r\n    '),HTML.DIV({"class":"content",style:"display:none;"},"\r\n      ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.DIV({"class":"eachDescription","data-name":function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}},"\r\n          ",HTML.P(HTML.I({"class":"icon-remove",title:"刪除此列"}),HTML.STRONG(function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))})),"\r\n          ",HTML.P("\r\n            ",HTML.TEXTAREA({name:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}},function(){return Spacebars.mustache(e.lookup("trim"),Spacebars.dot(e.lookup("."),"value"))}),"\r\n          "),"\r\n        "),"\r\n      "]}),data:function(){return Spacebars.call(e.lookup("descriptionList"),e.lookup("."))}})},"\r\n    "),"\r\n  ")})}(),function(){UI.body.contentParts.push(UI.Component.extend({render:function(){var e=this;return HTML.DIV({id:"dice_form","class":"modal hide fade"},"\r\n    ",HTML.FORM({action:"javascript:","class":"form-inline"},"\r\n      ",function(){return Spacebars.include(Template.dice_form||e.lookup("dice_form"))},"\r\n    "),"\r\n  ")}})),Meteor.startup(function(){UI.body.INSTANTIATED||(UI.body.INSTANTIATED=!0,UI.materialize(UI.body,document.body))}),Template.__define__("dice_form",function(){{var e=this;e.__content,e.__elseContent}return[HTML.DIV({"class":"modal-header"},HTML.Raw('\r\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\r\n      '),HTML.H4(function(){return Spacebars.mustache(e.lookup("title"))}),"\r\n    "),HTML.Raw('\r\n    <div class="modal-body">\r\n      <div class="mainDice">\r\n        <p>\r\n          <label class="inline" for="who">\r\n            <strong>擲骰人</strong>\r\n            <input type="text" class="input-medium who" name="who">\r\n          </label>\r\n          <label class="inline" for="times">\r\n            <strong>擲骰次數</strong>\r\n            <input type="number" class="input-small times" name="times" value="1" min="1">\r\n          </label>\r\n          <span>　　　</span>\r\n          <label class="checkbox" for="isHide">\r\n            <input type="checkbox" class="isHide" name="isHide"> 暗骰\r\n          </label>\r\n        </p>\r\n        <p>\r\n          <label class="inline" for="saveName" title="選取已儲存之快擲資料，或將選好的擲骰設定儲存為快擲">\r\n            <strong>快擲名稱</strong>\r\n            <input type="text" class="input-xlarge saveName" name="saveName">\r\n          </label>\r\n          <span>　　　</span>\r\n          <label class="checkbox" for="isSave">\r\n            <input type="checkbox" class="isSave" name="isSave"> 存為快擲\r\n          </label>\r\n        </p>\r\n      </div>\r\n      <div class="eachDice">\r\n        <p>\r\n          <label class="inline" for="name">\r\n            <strong>擲骰名稱</strong>\r\n            <input type="text" class="input-small name" name="name">\r\n          </label>\r\n          <label class="inline" for="note">\r\n            <strong>　備註</strong>\r\n            <input type="text" class="input-large note" name="note">\r\n          </label>\r\n          <label class="checkbox" for="addEach">\r\n            <input type="checkbox" class="addEach" name="addEach"> 個別加總\r\n          </label>\r\n        </p>\r\n        <p>\r\n          <label class="inline" for="amount">\r\n            <strong>骰數</strong>\r\n            <input type="number" class="input-mini amount" name="amount" value="1">\r\n          </label>\r\n          <label class="inline" for="face">\r\n            <strong>&nbsp;&nbsp;骰面</strong>\r\n            <input type="number" class="input-mini face" name="face" value="20">\r\n          </label>\r\n          <label class="inline" for="add">\r\n            <strong>&nbsp;&nbsp;加值</strong>\r\n            <input type="number" class="input-mini add" name="add" value="0">\r\n          </label>\r\n          <label class="inline" for="extra">\r\n            <strong>&nbsp;&nbsp;額外調整</strong>\r\n            <input type="number" class="input-mini extra" name="extra" value="0">\r\n          </label>\r\n        </p>\r\n      </div>\r\n    </div>\r\n    <div class="modal-footer">\r\n      <button class="btn btn-primary">擲骰</button>\r\n      <input type="reset" class="btn btn-reset" value="重設">\r\n    </div>')]})}(),function(){Template.__define__("main_document",function(){{var e=this;e.__content,e.__elseContent}return HTML.DIV({id:"room_document"},"\r\n    ",HTML.ASIDE({id:"room_document_nav"},"\r\n      ",HTML.H4("\r\n        目錄\r\n        ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n          ",HTML.I({"class":"icon-plus-sign pull-right",title:"新增一筆資料"}),"\r\n        "]}),data:e.lookup("isAdm")})},"\r\n      "),"\r\n      ",HTML.UL({"class":"nav",style:"padding:0;"},"\r\n        ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n          ",function(){return Spacebars.include(Template.main_document_nav||e.lookup("main_document_nav"))},"\r\n        "]}),data:e.lookup("rootDocument")})},"\r\n      "),"\r\n    "),"\r\n    ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n      ",function(){return Spacebars.include(Template.main_document_detail||e.lookup("main_document_detail"),{data:e.lookup("thisDocument")})},"\r\n    "]}),data:e.lookup("thisDocument")})},"\r\n  ")}),Template.__define__("main_document_nav",function(){{var e=this;e.__content,e.__elseContent}return HTML.LI({"class":"eachDocument"},"\r\n    ",HTML.A({href:["#",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"_id"))}]},"\r\n    ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n      ",HTML.I({"class":"icon-folder-open"}),"\r\n    "]}),__elseContent:UI.block(function(){return["\r\n      ",HTML.I({"class":"icon-chevron-right"}),"\r\n    "]}),data:e.lookup("hasChildren")})},"\r\n    ",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))},"\r\n    ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n      ",HTML.I({"class":"icon-plus-sign pull-right",title:"在此資料下新增一筆資料"}),"\r\n    "]}),data:e.lookup("isAdm")})},"\r\n    "),"\r\n    ",HTML.UL({"class":"nav"},"\r\n      ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n        ",function(){return Spacebars.include(Template.main_document_nav||e.lookup("main_document_nav"))},"\r\n      "]}),data:e.lookup("children")})},"\r\n    "),"\r\n  ")}),Template.__define__("main_document_detail",function(){{var e=this;e.__content,e.__elseContent}return HTML.SECTION({id:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"_id"))},"class":"eachDocument"},"\r\n    ",HTML.H5("\r\n      ",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))},"\r\n      ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n        ",HTML.I({"class":"icon-arrow-down pull-right",title:"將此筆資料後移"}),"\r\n        ",HTML.I({"class":"icon-arrow-up pull-right",title:"將此筆資料前移"}),"\r\n        ",HTML.I({"class":"icon-trash pull-right",title:"刪除此筆資料"}),"\r\n        ",HTML.I({"class":"icon-pencil pull-right",title:"編輯此筆資料"}),"\r\n      "]}),data:e.lookup("isAdm")})},"\r\n    "),"\r\n    ",HTML.DIV({"class":"detail"},"\r\n      ",function(){return Spacebars.makeRaw(Spacebars.mustache(Spacebars.dot(e.lookup("."),"detail")))},"\r\n    "),HTML.Raw('\r\n    <div class="submit">\r\n      <button class="btn btn-primary">送出</button>\r\n      <button class="btn btn-cancel">取消</button>\r\n    </div>\r\n    '),HTML.FOOTER("\r\n      ",HTML.TIME("本文最後由 ",function(){return Spacebars.mustache(e.lookup("getNick"),e.lookup("user"))}," 於 ",function(){return Spacebars.mustache(e.lookup("timeChinese"),e.lookup("time"))}," 編輯"),"\r\n    "),HTML.Raw("\r\n    <hr>\r\n  "))})}(),function(){Template.__define__("main_explain",function(){{var e=this;e.__content,e.__elseContent}return[function(){return Spacebars.include(Template.allApplyRoom||e.lookup("allApplyRoom"))},HTML.Raw('\r\n  <h3>說明</h3>\r\n  <p>\r\n    <a href="javascript:" class="applyRoom">申請開團</a>\r\n  </p>\r\n  <a href="javascript:" class="dice">擲骰</a>')]}),Template.__define__("allApplyRoom",function(){{var e=this;e.__content,e.__elseContent}return function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n    ",HTML.DIV({"class":"apply"},"\r\n      ",HTML.H3("申請中的團"),"   \r\n        ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n          ",HTML.P("團名：",function(){return Spacebars.mustache(e.lookup("name"))}),"\r\n          ",HTML.P("申請者：",function(){return Spacebars.mustache(e.lookup("getName"),e.lookup("adm"))}),"\r\n          ",HTML.P("介紹：",HTML.BR(),function(){return Spacebars.makeRaw(Spacebars.mustache(e.lookup("desc")))}),"\r\n          ",HTML.BUTTON({"class":"btn btn-primary agree","data-id":function(){return Spacebars.mustache(e.lookup("_id"))}},"通過"),"\r\n          ",HTML.BUTTON({"class":"btn btn-info refuse","data-id":function(){return Spacebars.mustache(e.lookup("_id"))}},"否決"),"\r\n        "]}),data:e.lookup("applying")})},"\r\n    "),"\r\n  "]}),data:e.lookup("isAdm")})}})}(),function(){Template.__define__("map_message",function(){{var e=this;e.__content,e.__elseContent}return HTML.UL({id:"map_message","class":"ui-layout-south"},"\r\n  ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n    ",HTML.LI("\r\n      ",HTML.SPAN(function(){return Spacebars.mustache(e.lookup("timeChinese"),Spacebars.dot(e.lookup("."),"time"))}),"\r\n      ",HTML.SPAN({"class":"badge badge-success"},function(){return Spacebars.mustache(e.lookup("roomName"),Spacebars.dot(e.lookup("."),"room"))}),"\r\n      ",HTML.SPAN({"class":"badge"},function(){return Spacebars.mustache(e.lookup("typeChinese"),Spacebars.dot(e.lookup("."),"type"))}),"\r\n      ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.SPAN(function(){return Spacebars.mustache(e.lookup("getNick"),Spacebars.dot(e.lookup("."),"user"))},"："),"\r\n        ",HTML.SPAN(function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"msg"))}),"\r\n      "]}),data:e.lookup("typeChat")})},"\r\n      ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.SPAN(function(){return Spacebars.mustache(e.lookup("getNick"),Spacebars.dot(e.lookup("."),"user"))}),"\r\n        ",HTML.SPAN(function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"msg"))}),"\r\n      "]}),data:e.lookup("typeSystem")})},"\r\n      ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n        ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n          ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n            ",HTML.SPAN({"class":"badge badge-inverse"},"暗骰"),"\r\n          "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"isHide"))}})},"\r\n          ",HTML.SPAN(function(){return Spacebars.mustache(e.lookup("getNick"),e.lookup("user"))},"為",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"who"))},"擲了一次",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))},"骰",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["（",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"note"))},"）"]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"note"))}})}," ",function(){return Spacebars.mustache(e.lookup("diceResult"))}),"\r\n        "]}),__elseContent:UI.block(function(){return["\r\n          ",HTML.SPAN("擲骰結果載入中..."),"\r\n        "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"result"))}})},"\r\n      "]}),data:e.lookup("typeDice")})},"\r\n    "),"\r\n  "]}),data:e.lookup("allMsgs")})},"\r\n")}),UI.body.contentParts.push(UI.Component.extend({render:function(){var e=this;return[HTML.Comment(" 編輯modal form "),"\r\n  ",function(){return Spacebars.include(Template.map_editForm||e.lookup("map_editForm"))}]}})),Meteor.startup(function(){UI.body.INSTANTIATED||(UI.body.INSTANTIATED=!0,UI.materialize(UI.body,document.body))}),Template.__define__("main_map",function(){{var e=this;e.__content,e.__elseContent}return[HTML.Raw("<!-- 地圖主區塊 -->\r\n  "),HTML.DIV({"class":"ui-layout-center",id:"map"},"\r\n    ",function(){return Spacebars.include(Template.map_svg||e.lookup("map_svg"),{data:e.lookup("mapData")})},"\r\n  ")]}),Template.__define__("map_editForm",function(){{var e=this;e.__content,e.__elseContent}return HTML.FORM({action:"javascript:",id:"map_editForm","class":"modal hide fade form-horizontal"},HTML.Raw('\r\n    <div class="modal-header">\r\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\r\n      <h4>地圖物件編輯器</h4>\r\n    </div>\r\n    '),HTML.DIV({"class":"modal-body"},"\r\n      ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.DIV({"class":"eachEdit"},"\r\n          ",HTML.I({"class":"icon-ban-circle pull-right",title:"取消修改"}),"\r\n          ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n            ",HTML.I({"class":"icon-trash pull-right",title:"刪除這筆資料"}),"\r\n          "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"_id"))}})},"\r\n          ",HTML.I({"class":"icon-ok pull-right",title:"儲存修改"}),"\r\n          ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n            ",function(){return Spacebars.include(Template.map_edit_affect||e.lookup("map_edit_affect"))},"\r\n          "]}),data:function(){return Spacebars.call(e.lookup("isType"),"affect",Spacebars.dot(e.lookup("."),"type"))}})},"\r\n          ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n            ",function(){return Spacebars.include(Template.map_edit_land||e.lookup("map_edit_land"))},"\r\n          "]}),data:function(){return Spacebars.call(e.lookup("isType"),"land",Spacebars.dot(e.lookup("."),"type"))}})},"\r\n          ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n            ",function(){return Spacebars.include(Template.map_edit_unit||e.lookup("map_edit_unit"))},"\r\n          "]}),data:function(){return Spacebars.call(e.lookup("isType"),"unit",Spacebars.dot(e.lookup("."),"type"))}})},"\r\n        "),"\r\n      "]}),data:e.lookup("editing")})},"\r\n    "),"\r\n  ")}),Template.__define__("map_edit_affect",function(){{var e=this;e.__content,e.__elseContent}return[HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="name"><strong>效應名稱：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.INPUT({type:"text",name:"name",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))
}}),"\r\n    "),"\r\n  "),"\r\n  ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="until"><strong>效應中止回合：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.INPUT({type:"number",name:"until","class":"span1",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"until"))},min:"0",step:"1"}),"\r\n    "),"\r\n  "),"\r\n  ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="showDesc"><strong>顯示描述：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.TEXTAREA({name:"showDesc"},function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"showDesc"))}),"\r\n    "),"\r\n  "),"\r\n  ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="hideDesc"><strong>隱藏資訊：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.TEXTAREA({name:"hideDesc"},function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"hideDesc"))}),"\r\n    "),"\r\n  "),"\r\n  ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="unit"><strong>影響目標：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.SELECT({name:"unit",multiple:"multiple"},"\r\n        ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n          ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n            ",HTML.OPTION({value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"_id"))},selected:"selected"},function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}),"\r\n          "]}),__elseContent:UI.block(function(){var e=this;return["\r\n            ",HTML.OPTION({value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"_id"))}},function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}),"\r\n          "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"selected"))}})},"\r\n        "]}),data:e.lookup("units")})},"\r\n      "),"\r\n    "),"\r\n  ")]}),Template.__define__("map_edit_land",function(){{var e=this;e.__content,e.__elseContent}return[HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="name"><strong>地型名稱：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.INPUT({type:"text",name:"name",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}}),"\r\n    "),"\r\n  "),"\r\n  ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="show"><strong>顯示類別：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.SELECT({name:"show"},"\r\n        ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n          ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n            ",HTML.OPTION({value:function(){return Spacebars.mustache(e.lookup("value"))},selected:"selected"},function(){return Spacebars.mustache(e.lookup("name"))}),"\r\n          "]}),__elseContent:UI.block(function(){var e=this;return["\r\n            ",HTML.OPTION({value:function(){return Spacebars.mustache(e.lookup("value"))}},function(){return Spacebars.mustache(e.lookup("name"))}),"\r\n          "]}),data:e.lookup("selected")})},"\r\n        "]}),data:e.lookup("showList")})},"\r\n      "),"\r\n    "),"\r\n  "),"\r\n  ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="color"><strong>色彩：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.INPUT({type:"text",name:"color","class":"color",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"color"))}}),"\r\n    "),"\r\n  "),"\r\n  ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="light"><strong>光源：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.INPUT({type:"number",name:"light","class":"span1",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"light"))},min:"0",step:"1"}),"\r\n    "),"\r\n  "),"\r\n  ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="minusView"><strong>阻礙視線：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.INPUT({type:"number",name:"minusView","class":"span1",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"minusView"))},min:"0",max:"100",step:"1"}),"％\r\n    "),"\r\n  "),"\r\n  ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="showDesc"><strong>顯示描述：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.TEXTAREA({name:"showDesc"},function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"showDesc"))}),"\r\n    "),"\r\n  "),"\r\n  ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="hideDesc"><strong>隱藏資訊：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.TEXTAREA({name:"hideDesc"},function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"hideDesc"))}),"\r\n    "),"\r\n  ")]}),Template.__define__("map_edit_unit",function(){{var e=this;e.__content,e.__elseContent}return[HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="name"><strong>單位名稱：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.INPUT({type:"text",name:"name",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}}),"\r\n    "),"\r\n  "),"\r\n  ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="token"><strong>代表物：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.INPUT({type:"text","class":"span2",name:"token",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"token"))},maxlength:"2"}),"\r\n    "),"\r\n  "),"\r\n  ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="character"><strong>玩家角色：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.SELECT({name:"character"},HTML.Raw('\r\n        <option value="">非玩家角色</option>\r\n        '),function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n          ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n            ",HTML.OPTION({value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"_id"))},selected:"selected"},function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}),"\r\n          "]}),__elseContent:UI.block(function(){var e=this;return["\r\n            ",HTML.OPTION({value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"_id"))}},function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}),"\r\n          "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"selected"))}})},"\r\n        "]}),data:e.lookup("allCharacter")})},"\r\n      "),"\r\n    "),"\r\n  "),"\r\n  ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="hp"><strong>生命值：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.INPUT({type:"number",name:"hp","class":"span1",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"hp"))},min:"1",step:"1"}),"\r\n      ／\r\n      ",HTML.INPUT({type:"number",name:"maxHp","class":"span1",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"maxHp"))},min:"1",step:"1"}),"\r\n    "),"\r\n  "),"\r\n  ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="light"><strong>攜帶光源：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.INPUT({type:"number",name:"light","class":"span1",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"light"))},min:"0",step:"1"}),"\r\n    "),"\r\n  "),"\r\n  ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="sightNormal"><strong>一般視覺：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.INPUT({type:"number",name:"sightNormal","class":"span1",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"sightNormal"))},min:"0",step:"1"}),"\r\n    "),"\r\n  "),"\r\n  ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="sightLowLight"><strong>微光視覺：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.INPUT({type:"number",name:"sightLowLight","class":"span1",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"sightLowLight"))},min:"0",step:"1"}),"\r\n    "),"\r\n  "),"\r\n  ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="sightDark"><strong>黑暗視覺：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.INPUT({type:"number",name:"sightDark","class":"span1",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"sightDark"))},min:"0",step:"1"}),"\r\n    "),"\r\n  "),"\r\n  ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="sightBlind"><strong>盲目視覺：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.INPUT({type:"number",name:"sightBlind","class":"span1",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"sightBlind"))},min:"0",step:"1"}),"\r\n    "),"\r\n  "),"\r\n  ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="showDesc"><strong>顯示描述：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.TEXTAREA({name:"showDesc"},function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"showDesc"))}),"\r\n    "),"\r\n  "),"\r\n  ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n    <label class="control-label" for="hideDesc"><strong>隱藏資訊：</strong></label>\r\n    '),HTML.DIV({"class":"controls"},"\r\n      ",HTML.TEXTAREA({name:"hideDesc"},function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"hideDesc"))}),"\r\n    "),"\r\n  ")]}),Template.__define__("map_svg",function(){{var e=this;e.__content,e.__elseContent}return HTML.SVG({xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:function(){return Spacebars.mustache(e.lookup("totalWidth"))},height:function(){return Spacebars.mustache(e.lookup("totalHeight"))}},"\r\n    ",HTML.SVG({x:function(){return Spacebars.mustache(e.lookup("marginLeft"))},y:function(){return Spacebars.mustache(e.lookup("marginTop"))}},"\r\n      ",HTML.G({transform:function(){return Spacebars.mustache(e.lookup("transform"))}},"\r\n        ",HTML.G({"class":"girdLabel"},"\r\n          ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n            ",HTML.RECT({x:function(){return Spacebars.mustache(e.lookup("left"))},y:function(){return Spacebars.mustache(e.lookup("top"))},width:function(){return Spacebars.mustache(e.lookup("width"))},height:function(){return Spacebars.mustache(e.lookup("height"))}}),"\r\n            ",HTML.TEXT({x:function(){return Spacebars.mustache(e.lookup("textLeft"))},y:function(){return Spacebars.mustache(e.lookup("textTop"))}},function(){return Spacebars.mustache(e.lookup("text"))}),"\r\n          "]}),data:e.lookup("gridLabel")})},"\r\n          ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){return"\r\n          "}),data:e.lookup("grids")})},"\r\n        "),"\r\n      "),"\r\n    "),"\r\n  ")}),Template.__define__("map_grid",function(){{var e=this;e.__content,e.__elseContent}return""}),Template.__define__("map_info",function(){{var e=this;e.__content,e.__elseContent}return HTML.FORM({action:"javascript:","class":"form-inline ui-layout-west",id:"map_info"},"\r\n    ",HTML.H5(function(){return Spacebars.mustache(e.lookup("mapName"))}),HTML.Raw("\r\n    <!-- 當前輪數，前後輪連結 -->\r\n    "),HTML.DIV({"class":"round"},"\r\n      ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.A({href:function(){return Spacebars.mustache(e.lookup("prevRound"))},"class":"pull-left"},"上一輪"),"\r\n      "]}),data:e.lookup("prevRound")})},"\r\n      ",HTML.A({href:"javascript:","class":"go"},"第",function(){return Spacebars.mustache(e.lookup("nowRound"))},"輪"),"\r\n      ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.A({href:function(){return Spacebars.mustache(e.lookup("nextRound"))},"class":"pull-right"},"下一輪"),"\r\n      "]}),__elseContent:UI.block(function(){var e=this;return["\r\n        ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n          ",HTML.A({href:"javascript:","class":"pull-right newRound"},"推進下一輪"),"\r\n        "]}),data:e.lookup("isAdm")})},"\r\n      "]}),data:e.lookup("nextRound")})},"\r\n    "),HTML.Raw('\r\n    <section>\r\n      <header>檢視設定</header>\r\n      <div class="content" style="display:none;">\r\n        地圖顯示尺寸：<input type="number" class="span1 zoom" min="1" step="1" value="100">％\r\n      </div>\r\n    </section>\r\n    '),HTML.SECTION("\r\n      ",HTML.HEADER("效應資訊\r\n        ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n          ",HTML.A({href:"javascript:","class":"pull-right","data-fn":"add","data-type":"affect",title:"新增效應"},"新增"),"\r\n          ",HTML.A({href:"javascript:","class":"pull-right","data-fn":"editAll",title:"編輯全部效應"},"編輯全部"),"\r\n          ",HTML.A({href:"javascript:","class":"pull-right","data-fn":"edit",title:"編輯已展開的效應"},"編輯所選"),"\r\n        "]}),data:e.lookup("isAdm")})},"\r\n      "),"\r\n      ",HTML.DIV({"class":"content",style:"display:none;"},"\r\n        ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n          ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n            ",function(){return Spacebars.include(Template.map_info_affect||e.lookup("map_info_affect"))},"\r\n          "]}),data:function(){return Spacebars.call(e.lookup("allDetail"),"affect")}})},"\r\n        "]}),__elseContent:UI.block(function(){return"\r\n          目前沒有任何資料！\r\n        "}),data:function(){return Spacebars.call(e.lookup("hasDetail"),"affect")}})},"\r\n      "),"\r\n    "),"\r\n    ",HTML.SECTION("\r\n      ",HTML.HEADER("地型資訊\r\n        ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n          ",HTML.A({href:"javascript:","class":"pull-right","data-fn":"add","data-type":"land",title:"新增地型"},"新增"),"\r\n          ",HTML.A({href:"javascript:","class":"pull-right","data-fn":"editAll",title:"編輯全部地型"},"編輯全部"),"\r\n          ",HTML.A({href:"javascript:","class":"pull-right","data-fn":"edit",title:"編輯已展開的地型"},"編輯所選"),"\r\n        "]}),data:e.lookup("isAdm")})},"\r\n      "),"\r\n      ",HTML.DIV({"class":"content",style:"display:none;"},"\r\n        ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n          ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n            ",function(){return Spacebars.include(Template.map_info_land||e.lookup("map_info_land"))},"\r\n          "]}),data:function(){return Spacebars.call(e.lookup("allDetail"),"land")}})},"\r\n        "]}),__elseContent:UI.block(function(){return"\r\n          目前沒有任何資料！\r\n        "}),data:function(){return Spacebars.call(e.lookup("hasDetail"),"land")}})},"\r\n      "),"\r\n    "),"\r\n    ",HTML.SECTION("\r\n      ",HTML.HEADER("單位資訊\r\n        ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n          ",HTML.A({href:"javascript:","class":"pull-right","data-fn":"add","data-type":"unit",title:"新增單位"},"新增"),"\r\n          ",HTML.A({href:"javascript:","class":"pull-right","data-fn":"editAll",title:"編輯全部單位"},"編輯全部"),"\r\n          ",HTML.A({href:"javascript:","class":"pull-right","data-fn":"edit",title:"編輯已展開的單位"},"編輯所選"),"\r\n        "]}),data:e.lookup("isAdm")})},"\r\n      "),"\r\n      ",HTML.DIV({"class":"content",style:"display:none;"},"\r\n        ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n          ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n            ",function(){return Spacebars.include(Template.map_info_unit||e.lookup("map_info_unit"))},"\r\n          "]}),data:function(){return Spacebars.call(e.lookup("allDetail"),"unit")}})},"\r\n        "]}),__elseContent:UI.block(function(){return"\r\n          目前沒有任何資料！\r\n        "}),data:function(){return Spacebars.call(e.lookup("hasDetail"),"unit")}})},"\r\n      "),"\r\n    "),"\r\n    ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n      ",function(){return Spacebars.include(Template.map_info_edit||e.lookup("map_info_edit"))},"\r\n    "]}),data:e.lookup("isAdm")})},"\r\n  ")}),Template.__define__("map_info_affect",function(){{var e=this;e.__content,e.__elseContent}return HTML.SECTION({"data-id":function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"_id"))}},"\r\n    ",HTML.HEADER("\r\n      ",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))},"\r\n    "),"\r\n    ",HTML.DIV({"class":"content",style:"display:none;"},"\r\n      效應中止回合：",function(){return Spacebars.mustache(e.lookup("untilRound"),Spacebars.dot(e.lookup("."),"until"))},"\r\n      ",HTML.DIV({"class":"pre"},function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"showDesc"))}),"\r\n      ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.DIV({"class":"pre"},function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"hideDesc"))}),"\r\n      "]}),data:e.lookup("isAdm")})},"\r\n    "),"\r\n  ")}),Template.__define__("map_info_land",function(){{var e=this;e.__content,e.__elseContent}return HTML.SECTION({"data-id":function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"_id"))}},"\r\n    ",HTML.HEADER("\r\n      ",HTML.SPAN({style:function(){return Spacebars.mustache(e.lookup("landStyle"))},"class":"land"}),"：",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))},"\r\n    "),"\r\n    ",HTML.DIV({"class":"content",style:"display:none;"},"\r\n      ",HTML.DIV({"class":"pre"},function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"showDesc"))}),"\r\n      ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.DIV({"class":"pre"},function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"hideDesc"))}),"\r\n      "]}),data:e.lookup("isAdm")})},"\r\n    "),"\r\n  ")}),Template.__define__("map_info_unit",function(){{var e=this;e.__content,e.__elseContent}return HTML.SECTION({"data-id":function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"_id"))}},"\r\n    ",HTML.HEADER("\r\n      ",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"token"))},"：",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))},HTML.SPAN({"class":"maxHp"},HTML.SPAN({"class":"hp",style:function(){return Spacebars.mustache(e.lookup("hpStyle"),Spacebars.dot(e.lookup("."),"hp"),Spacebars.dot(e.lookup("."),"maxHp"))}})),"\r\n    "),"\r\n    ",HTML.DIV({"class":"content",style:"display:none;"},"\r\n      ",HTML.DIV({"class":"pre"},function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"showDesc"))}),"\r\n      ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.DIV({"class":"pre"},function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"hideDesc"))}),"\r\n      "]}),data:e.lookup("isAdm")})},"\r\n    "),"\r\n  ")}),Template.__define__("map_info_edit",function(){{var e=this;e.__content,e.__elseContent}return HTML.SECTION(HTML.Raw("\r\n    <header>編輯地圖</header>\r\n    "),HTML.DIV({"class":"content mapEdit",style:"display:none;"},"\r\n      ",function(){return Spacebars.include(UI.With,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.DIV("地圖名稱： ",HTML.INPUT({type:"text",name:"name",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}})),"\r\n        ",HTML.DIV("地圖大小：\r\n          ",HTML.INPUT({type:"number",name:"sizeX","class":"span1",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"sizeX"))}}),"\r\n          Ｘ\r\n          ",HTML.INPUT({type:"number",name:"sizeY","class":"span1",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"sizeY"))}}),"\r\n        "),"\r\n        ",HTML.DIV("自然光源： ",HTML.INPUT({type:"number",name:"light","class":"span1",value:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"light"))}})),"\r\n      "]}),data:e.lookup("mapData")})},HTML.Raw('\r\n      <div><input type="checkbox" class="editMode">開啟編輯模式</div>\r\n      <div class="editMode" style="display:none;">\r\n      </div>\r\n    ')),"\r\n  ")})}(),function(){Template.__define__("message",function(){{var e=this;e.__content,e.__elseContent}return HTML.ASIDE({"class":"ui-layout-south",id:"message"},HTML.Raw('\r\n  <a class="btn btn-info pull-right openFilter" href="javascript:">\r\n    <i class="icon-list-alt" title="開啟篩選條件"></i>\r\n  </a>\r\n  '),HTML.FORM({id:"message_filter","class":"form-inline form-horizontal ui-layout-north",style:"padding:5px 10px;",action:"javascript:"},"\r\n    ",HTML.LABEL({"for":"room"},HTML.Raw("\r\n      <strong>選擇房間：</strong>\r\n      "),HTML.SELECT({name:"room"},HTML.Raw('\r\n        <option value="">全部房間</option>\r\n        '),function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n          ",HTML.OPTION({value:function(){return Spacebars.mustache(e.lookup("_id"))}},function(){return Spacebars.mustache(e.lookup("name"))}),"\r\n        "]}),data:e.lookup("allRooms")})},"\r\n      "),"\r\n    "),HTML.Raw('\r\n    <label for="seeChat" class="checkbox">\r\n      <input type="checkbox" class="type" name="chat" checked="checked"> 聊天\r\n    </label>\r\n    <label for="seeChat" class="checkbox">\r\n      <input type="checkbox" class="type" name="dice" checked="checked"> 擲骰\r\n    </label>\r\n    <label for="seeChat" class="checkbox">\r\n      <input type="checkbox" class="type" name="outside" checked="checked"> 場外\r\n    </label>\r\n    <label for="seeChat" class="checkbox">\r\n      <input type="checkbox" class="type" name="room" checked="checked"> 團務\r\n    </label>\r\n    <label for="seeChat" class="checkbox">\r\n      <input type="checkbox" class="type" name="system" checked="checked"> 系統\r\n    </label>\r\n  ')),"\r\n  ",HTML.UL({id:"message_list","class":"ui-layout-center"},"\r\n    ",function(){return Spacebars.include(Template.message_list||e.lookup("message_list"))},"\r\n  "),HTML.Raw('\r\n  <a class="btn btn-info pull-right openChat" href="javascript:">\r\n    <i class="icon-comment" title="開啟發言欄"></i>\r\n  </a>\r\n  '),function(){return Spacebars.include(Template.message_chat||e.lookup("message_chat"))},"\r\n")}),Template.__define__("message_list",function(){{var e=this;e.__content,e.__elseContent}return function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n    ",HTML.LI("\r\n      ",HTML.SPAN(function(){return Spacebars.mustache(e.lookup("timeChinese"),Spacebars.dot(e.lookup("."),"time"))}),"\r\n      ",HTML.SPAN({"class":"badge badge-success"},function(){return Spacebars.mustache(e.lookup("roomName"),Spacebars.dot(e.lookup("."),"room"))}),"\r\n      ",HTML.SPAN({"class":"badge"},function(){return Spacebars.mustache(e.lookup("typeChinese"),Spacebars.dot(e.lookup("."),"type"))}),"\r\n      ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.SPAN(function(){return Spacebars.mustache(e.lookup("getNick"),Spacebars.dot(e.lookup("."),"user"))},"："),"\r\n        ",HTML.SPAN(function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"msg"))}),"\r\n      "]}),data:e.lookup("typeChat")})},"\r\n      ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.SPAN(function(){return Spacebars.mustache(e.lookup("getNick"),Spacebars.dot(e.lookup("."),"user"))}),"\r\n        ",HTML.SPAN(function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"msg"))}),"\r\n      "]}),data:e.lookup("typeSystem")})},"\r\n      ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n        ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n          ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n            ",HTML.SPAN({"class":"badge badge-inverse"},"暗骰"),"\r\n          "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"isHide"))}})},"\r\n          ",HTML.SPAN(function(){return Spacebars.mustache(e.lookup("getNick"),e.lookup("user"))},"為",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"who"))},"擲了一次",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))},"骰",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["（",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"note"))},"）"]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"note"))}})}," ",function(){return Spacebars.mustache(e.lookup("diceResult"))}),"\r\n        "]}),__elseContent:UI.block(function(){return["\r\n          ",HTML.SPAN("擲骰結果載入中..."),"\r\n        "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"result"))}})},"\r\n      "]}),data:e.lookup("typeDice")})},"\r\n      ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.SPAN("　"),"\r\n        ",HTML.A({href:["/room/",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"room"))},"/",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"chapter"))},"/#",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"section"))}]},"前往"),"\r\n      "]}),data:e.lookup("isRecord")})},"\r\n      ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.SPAN("　"),"\r\n        ",HTML.A({href:["/room/",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"room"))},"/doc/#",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"document"))}]},"前往"),"\r\n      "]}),data:e.lookup("isDocument")})},"\r\n      ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.SPAN("　"),"\r\n        ",HTML.A({href:["/character/",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"room"))},"/",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"character"))},"/"]},"前往"),"\r\n      "]}),data:e.lookup("isCharacter")})},"\r\n    "),"\r\n  "]}),data:e.lookup("allMsgs")})}}),Template.__define__("message_chat",function(){{var e=this;e.__content,e.__elseContent}return HTML.Raw('<form id="message_chat" class="form-inline form-horizontal ui-layout-south" style="padding:5px 10px;" action="javascript:">\r\n    <label for="newMsg">發言：</label>\r\n    <input type="text" class="msg input-xxlarge" name="newMsg">\r\n    <button type="submit" class="btn btn-primary">送出</button>\r\n  </form>')})}(),function(){UI.body.contentParts.push(UI.Component.extend({render:function(){var e=this;return HTML.FORM({action:"javascript:","class":"modal hide fade form-horizontal",id:"modal_form"},"\r\n    ",function(){return Spacebars.include(Template.modal_form||e.lookup("modal_form"))},"\r\n  ")}})),Meteor.startup(function(){UI.body.INSTANTIATED||(UI.body.INSTANTIATED=!0,UI.materialize(UI.body,document.body))}),Template.__define__("modal_form",function(){{var e=this;e.__content,e.__elseContent}return[HTML.DIV({"class":"modal-header"},HTML.Raw('\r\n    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\r\n    '),HTML.H4(function(){return Spacebars.mustache(e.lookup("title"))}),"\r\n  "),"\r\n  ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n    ",function(){return Spacebars.include(Template.modal_form_login||e.lookup("modal_form_login"))},"\r\n  "]}),data:e.lookup("login")})},"\r\n  ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n    ",function(){return Spacebars.include(Template.modal_form_register||e.lookup("modal_form_register"))},"\r\n  "]}),data:e.lookup("register")})},"\r\n  ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n    ",function(){return Spacebars.include(Template.modal_form_account||e.lookup("modal_form_account"))},"\r\n  "]}),data:e.lookup("account")})},"\r\n  ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n    ",function(){return Spacebars.include(Template.modal_form_applyRoom||e.lookup("modal_form_applyRoom"))},"\r\n  "]}),data:e.lookup("applyRoom")})},"\r\n  ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n    ",function(){return Spacebars.include(Template.modal_form_selectTime||e.lookup("modal_form_selectTime"))},"\r\n  "]}),data:e.lookup("selectTime")})}]}),Template.__define__("modal_form_login",function(){{var e=this;e.__content,e.__elseContent}return HTML.Raw('<div class="modal-body">\r\n    <div class="control-group">\r\n      <label class="control-label" for="email"><strong>登入帳號或電子郵箱：</strong></label>\r\n      <div class="controls">\r\n        <input type="text" name="email">\r\n      </div>\r\n    </div>\r\n    <div class="control-group">\r\n      <label class="control-label" for="password"><strong>密碼：</strong></label>\r\n      <div class="controls">\r\n        <input type="password" name="password">\r\n      </div>\r\n    </div>\r\n    <div class="control-group" style="text-align:center;">\r\n      <a href="javascript:" class="facebook">以Facebook帳號登入</a>\r\n    </div>\r\n    <div class="control-group" style="text-align:center;">\r\n      <a href="javascript:" class="google">以Google帳號登入</a>\r\n    </div>\r\n  </div>\r\n  <div class="modal-footer">\r\n    <button class="btn btn-primary">登入</button>\r\n    <button class="btn btn-info register">我要註冊</button>\r\n    <input type="reset" class="btn" value="重設">\r\n  </div>')}),Template.__define__("modal_form_register",function(){{var e=this;e.__content,e.__elseContent}return HTML.Raw('<div class="modal-body">\r\n    <div class="control-group">\r\n      <label class="control-label" for="email"><strong>電子郵箱：</strong></label>\r\n      <div class="controls">\r\n        <input type="text" name="email">\r\n      </div>\r\n    </div>\r\n    <div class="control-group">\r\n      <label class="control-label" for="nick"><strong>暱稱：</strong></label>\r\n      <div class="controls">\r\n        <input type="text" name="nick">\r\n      </div>\r\n    </div>\r\n    <div class="control-group">\r\n      <label class="control-label" for="password"><strong>密碼：</strong></label>\r\n      <div class="controls">\r\n        <input type="password" name="password">\r\n      </div>\r\n    </div>\r\n    <div class="control-group">\r\n      <label class="control-label" for="confirmpassword"><strong>確認密碼：</strong></label>\r\n      <div class="controls">\r\n        <input type="password" name="confirmpassword">\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="modal-footer">\r\n    <button class="btn btn-primary">註冊</button>\r\n    <button class="btn btn-info login">我要登入</button>\r\n    <input type="reset" class="btn" value="重設">\r\n  </div>')
}),Template.__define__("modal_form_account",function(){{var e=this;e.__content,e.__elseContent}return[HTML.DIV({"class":"modal-body"},"\r\n    ",HTML.DIV({"class":"control-group"},HTML.Raw('\r\n      <label class="control-label" for="nick"><strong>暱稱：</strong></label>\r\n      '),HTML.DIV({"class":"controls"},"\r\n        ",HTML.INPUT({type:"text","class":"nick",name:"nick",value:function(){return Spacebars.mustache(e.lookup("nick"))}}),"\r\n      "),"\r\n    "),"\r\n  "),HTML.Raw('\r\n  <div class="modal-footer">\r\n    <button class="btn btn-primary">送出</button>\r\n    <input type="reset" class="btn" value="重設">\r\n  </div>')]}),Template.__define__("modal_form_applyRoom",function(){{var e=this;e.__content,e.__elseContent}return[HTML.DIV({"class":"modal-body"},HTML.Raw('\r\n    <label for="name"><strong>團名：</strong></label>\r\n    <p>\r\n      <input type="text" class="span6 name" name="name">\r\n    </p>\r\n    <label for="rule"><strong>使用規則：</strong></label>\r\n    <p>\r\n      <select class="span6 rule" name="rule">\r\n        <option value="PF">Path finder</option>\r\n        <option value="DND35">D&amp;D 3.5</option>\r\n        <option value="DND4">D&amp;D 4</option>\r\n        <option value="mrbigmouth">神遺之地</option>\r\n      </select>\r\n    </p>\r\n    <label for="desc"><strong>開團說明：</strong></label>\r\n    '),HTML.P("\r\n      ",HTML.TEXTAREA({name:"desc","class":"span6 desc",rows:"8"}),"\r\n    "),"\r\n  "),HTML.Raw('\r\n  <div class="modal-footer">\r\n    <button class="btn btn-primary">進行申請</button>\r\n    <input type="reset" class="btn" value="重設">\r\n  </div>')]}),Template.__define__("modal_form_selectTime",function(){{var e=this;e.__content,e.__elseContent}return HTML.Raw('<div class="modal-body">\r\n    <div class="input-prepend input-append date">\r\n      <span class="add-on">\r\n        <i class="icon-time" data-time-icon="icon-time" data-date-icon="icon-calendar"></i>\r\n      </span>\r\n      <input class="datetime" data-format="yyyy/MM/dd hh:mm:ss" type="text">\r\n      <button class="btn btn-primary">送出</button>\r\n    </div>\r\n  </div>')})}(),function(){Template.__define__("nav",function(){{var e=this;e.__content,e.__elseContent}return HTML.NAV({"class":"ui-layout-north navbar",style:"padding: 10px;",id:"nav"},"\r\n    ",HTML.DIV({"class":"navbar-inner"},HTML.Raw('\r\n      <a class="brand" href="/">TRPG Master 2.0</a>\r\n      '),HTML.UL({"class":"nav"},"\r\n        ",HTML.LI({"class":"dropdown"},HTML.Raw('\r\n          <a href="javascript:" class="dropdown-toggle" data-toggle="dropdown">\r\n            選擇房間\r\n            <b class="caret"></b>\r\n          </a>\r\n          '),HTML.UL({"class":"dropdown-menu"},"\r\n            ",function(){return Spacebars.include(Template.nav_roomLink||e.lookup("nav_roomLink"))},"\r\n          "),"\r\n        "),"\r\n      "),HTML.Raw('\r\n      <i class="icon-chevron-up pull-right close" title="關閉導覽列"></i>\r\n      '),function(){return Spacebars.include(Template.nav_user||e.lookup("nav_user"))},"\r\n    "),"\r\n  ")}),Template.__define__("nav_roomLink",function(){{var e=this;e.__content,e.__elseContent}return function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n    ",HTML.LI({"class":"room dropdown"},"\r\n      ",HTML.A({href:["/room/",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"_id"))},"/"],"class":"dropdown-toggle room"}," ",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}," "),"\r\n        ",HTML.UL({"class":"dropdown-menu"},"\r\n            ",HTML.LI(HTML.A({href:["/room/",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"_id"))},"/"]},"簡介與玩家")),"\r\n            ",HTML.LI(HTML.A({href:["/room/",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"_id"))},"/doc/"]},"資料區")),"\r\n          ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n            ",HTML.LI(HTML.A({href:["/room/",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"room"))},"/",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"_id"))},"/"]},function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))})),"\r\n          "]}),data:function(){return Spacebars.call(e.lookup("allChapters"),Spacebars.dot(e.lookup("."),"_id"))}})},"\r\n        "),"\r\n    "),"\r\n  "]}),data:e.lookup("allRooms")})}}),Template.__define__("nav_user",function(){{var e=this;e.__content,e.__elseContent}return HTML.DIV({"class":"pull-right user"},"\r\n    ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n      ",HTML.SPAN({"class":"label label-success"},"使用者 ",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("currentUser"),"profile","nick"))}," 已登入"),"\r\n      ",HTML.A({href:"javascript:","class":"account"},"修改帳戶資訊"),"\r\n      　",HTML.A({href:"javascript:","class":"logout"},"登出"),"\r\n    "]}),__elseContent:UI.block(function(){return["\r\n      ",HTML.A({href:"javascript:","class":"login"},"點此登入"),"\r\n    "]}),data:e.lookup("currentUser")})},"\r\n  ")})}(),function(){Template.__define__("main_record",function(){{var e=this;e.__content,e.__elseContent}return HTML.DIV({id:"main_record"},"\r\n    ",HTML.HEADER("\r\n      ",HTML.H1(" ",function(){return Spacebars.mustache(e.lookup("title"))}," "),"\r\n    "),"\r\n    ",HTML.NAV("\r\n      ",HTML.UL({"class":"breadcrumb"},"\r\n        ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n          ",HTML.LI(HTML.A({href:"javascript:","class":"goSection","data-id":function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"_id"))}}," ",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}," ")," ",HTML.SPAN({"class":"divider"},"/")),"\r\n        "]}),data:e.lookup("allSection")})},HTML.Raw('\r\n          <li><a href="javascript:" class="addSection">新增一節</a></li>\r\n      ')),"\r\n    "),"\r\n    ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n      ",function(){return Spacebars.include(Template.chapter_section||e.lookup("chapter_section"))},"\r\n    "]}),data:e.lookup("allSection")})},"\r\n  ")}),Template.__define__("chapter_section",function(){{var e=this;e.__content,e.__elseContent}return HTML.SECTION({id:function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"_id"))}},"\r\n    ",HTML.HEADER("\r\n      ",HTML.H2("\r\n        ",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))},"\r\n        ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n          ",HTML.I({"class":"icon-pencil",title:"編輯標題"}),"\r\n        "]}),data:e.lookup("isAdm")})},HTML.Raw('\r\n        <i class="icon-eye-open" title="選取全段落"></i>\r\n        <i class="icon-eye-close" title="全段落取消選取"></i>\r\n        <i class="icon-filter" title="選取特定時間之後更新的段落"></i>\r\n      ')),"\r\n    "),"\r\n    ",HTML.DIV({"class":"content",style:"display:none;"},"\r\n      ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n        ",function(){return Spacebars.include(Template.chapter_section_paragraph||e.lookup("chapter_section_paragraph"))},"\r\n      "]}),data:e.lookup("allParagraph")})},"\r\n      ",HTML.ASIDE({"class":"tool"},"\r\n        ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n          ",HTML.A({href:"javascript:","class":"addParagraph",title:"此章節尾端添加內容"},"添加"),"\r\n        "]}),data:e.lookup("isAdm")})},HTML.Raw('\r\n        <a href="javascript:" class="outside" title="場外發言，並紀錄在本章節尾部">場外</a>\r\n        <a href="javascript:" class="wait" title="指示系統此章節正等待某位玩家或DM行動">等待</a>\r\n        '),function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n          ",HTML.A({href:"javascript:","class":"dice",title:"進行擲骰，並紀錄在本章節尾部"},"擲骰"),"\r\n        "]}),data:e.lookup("isPlayer")})},"\r\n        ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n          ",HTML.A({href:["/room/",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"room"))},"/",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"chapter"))},"/map/",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"map"))},"/"],title:"查看地圖",target:"_blank"},"地圖"),"\r\n        "]}),__elseContent:UI.block(function(){var e=this;return["\r\n          ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n            ",HTML.A({href:"javascript:","class":"createMap",title:"創建或指定本章節的地圖"},"地圖"),"\r\n          "]}),data:e.lookup("isAdm")})},"\r\n        "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"map"))}})},HTML.Raw('\r\n        <a href="javascript:" class="top">回到頁首</a>\r\n      ')),"\r\n      ",HTML.ASIDE({"class":"outside"},"\r\n        ",function(){return Spacebars.include(Template.chapter_section_outside||e.lookup("chapter_section_outside"))},"\r\n      "),"\r\n    "),HTML.Raw("\r\n    <hr>\r\n  "))}),Template.__define__("chapter_section_paragraph",function(){{var e=this;e.__content,e.__elseContent}return HTML.ARTICLE({"data-id":function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"_id"))}},"\r\n    ",HTML.HEADER({"class":"tool"},"\r\n      ",HTML.DIV({"class":"notEditing"},HTML.Raw('\r\n        <a href="javascript:" class="blur" title="取消選取此段落">取消選取</a>\r\n        '),function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n          ",HTML.A({href:"javascript:","class":"addBefore",title:"在此段落前新增段落"},"插入"),"\r\n          ",HTML.A({href:"javascript:","class":"addAfter",title:"在此段落後新增段落"},"接續"),"\r\n        "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"_id"))}})},"\r\n        ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n          ",HTML.A({href:"javascript:","class":"edit",title:"編輯此段落"},"編輯"),"\r\n          ",HTML.A({href:"javascript:","class":"delete",title:"刪除此段落"},"刪除"),"\r\n        "]}),data:e.lookup("canEdit")})},"\r\n      "),HTML.Raw('\r\n      <div class="inEditing">\r\n        <a href="javascript:" class="submit">送出修改</a>\r\n        <a href="javascript:" class="cancel">取消修改</a>\r\n      </div>\r\n    ')),"\r\n    ",HTML.DIV({"class":"paragraph"},"\r\n      ",HTML.P(function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return function(){return Spacebars.makeRaw(Spacebars.mustache(e.lookup("content")))}}),__elseContent:UI.block(function(){return"本節目前無內容。"}),data:e.lookup("content")})}),"\r\n    "),"\r\n    ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n      ",HTML.FOOTER("\r\n        ",HTML.TIME("本文最後由 ",function(){return Spacebars.mustache(e.lookup("getNick"),Spacebars.dot(e.lookup("."),"user"))}," 於 ",function(){return Spacebars.mustache(e.lookup("timeChinese"),Spacebars.dot(e.lookup("."),"time"))}," 編輯"),"\r\n      "),"\r\n    "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"time"))}})},"\r\n  ")}),Template.__define__("chapter_section_outside",function(){{var e=this;e.__content,e.__elseContent}return HTML.UL("\r\n    ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n      ",HTML.LI("\r\n        ",HTML.SPAN(function(){return Spacebars.mustache(e.lookup("timeChinese"),Spacebars.dot(e.lookup("."),"_id"))}),"\r\n        ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n          ",HTML.SPAN(function(){return Spacebars.mustache(e.lookup("getNick"),Spacebars.dot(e.lookup("."),"user"))},"："),"\r\n          ",HTML.SPAN(function(){return Spacebars.mustache(e.lookup("msg"))}),"\r\n        "]}),data:e.lookup("typeOutside")})},"\r\n        ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n          ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n            ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n              ",HTML.SPAN({"class":"badge badge-inverse"},"暗骰"),"\r\n            "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"isHide"))}})},"\r\n            ",HTML.SPAN(function(){return Spacebars.mustache(e.lookup("getNick"),Spacebars.dot(e.lookup("."),"user"))},"為",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"who"))},"擲了一次",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))},"骰",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["（",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"note"))},"）"]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"note"))}})}," ",function(){return Spacebars.mustache(e.lookup("diceResult"))}),"\r\n          "]}),__elseContent:UI.block(function(){return["\r\n            ",HTML.SPAN("擲骰結果載入中..."),"\r\n          "]}),data:function(){return Spacebars.call(Spacebars.dot(e.lookup("."),"result"))}})},"\r\n        "]}),data:e.lookup("typeDice")})},"\r\n      "),"\r\n    "]}),data:e.lookup("allOutside")})},"\r\n  ")})}(),function(){Template.__define__("main_room",function(){{var e=this;e.__content,e.__elseContent}return[HTML.H1(function(){return Spacebars.mustache(e.lookup("title"))}),"\r\n  ",HTML.SECTION("\r\n    ",HTML.H2("狀態：",function(){return Spacebars.mustache(e.lookup("status"))}),"\r\n    ",HTML.DIV("\r\n      ",function(){return Spacebars.makeRaw(Spacebars.mustache(e.lookup("desc")))},"\r\n    "),"\r\n    ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n      ",HTML.A({href:"javascript:","class":"apply"},"申請加入"),"\r\n    "]}),data:e.lookup("canApply")})},"\r\n  "),"\r\n\r\n  ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){var e=this;return["\r\n    ",function(){return Spacebars.include(Template.main_room_applying||e.lookup("main_room_applying"))},"\r\n  "]}),data:e.lookup("isAdm")})},"\r\n  ",HTML.SECTION(HTML.Raw("\r\n   <h2>章節區</h2>\r\n    "),HTML.UL({"class":"breadcrumb"},"\r\n      ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.LI(HTML.A({href:["/room/",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"room"))},"/",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"_id"))},"/"]}," ",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}," ")," ",HTML.SPAN({"class":"divider"},"/")),"\r\n      "]}),data:e.lookup("allChapters")})},"\r\n      ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n        ",HTML.LI(HTML.A({href:"javascript:","class":"addChapter"},"新增章節")),"\r\n      "]}),data:e.lookup("isAdm")})},"\r\n    "),"\r\n  "),"\r\n  ",HTML.SECTION(HTML.Raw("\r\n    <h2>角色區</h2>\r\n    "),HTML.UL({"class":"breadcrumb"},"\r\n      ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.LI(HTML.A({href:["/character/",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"room"))},"/",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"_id"))},"/"]}," ",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"name"))}," ")," ",HTML.SPAN({"class":"divider"},"/")),"\r\n      "]}),data:e.lookup("allCharacters")})},"\r\n      ",function(){return Spacebars.include(UI.If,{__content:UI.block(function(){return["\r\n        ",HTML.LI(HTML.A({href:"javascript:","class":"addCharacter"},"新增角色")),"\r\n      "]}),data:e.lookup("isPlayer")})},"\r\n    "),"\r\n  ")]}),Template.__define__("main_room_applying",function(){{var e=this;e.__content,e.__elseContent}return HTML.SECTION({"class":"applying"},HTML.Raw("\r\n    <h3>申請中名單：</h3>\r\n    "),HTML.UL("\r\n      ",function(){return Spacebars.include(UI.Each,{__content:UI.block(function(){var e=this;return["\r\n        ",HTML.LI("\r\n          ",function(){return Spacebars.mustache(e.lookup("getNick"),e.lookup("user"))},"(",function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"user"))},")，申請理由：",function(){return Spacebars.mustache(e.lookup("applyText"))},"\r\n          ",HTML.BR(),"\r\n          ",HTML.A({href:"javascript:","class":"btn btn-primary agree","data-id":function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"user"))}},"允許"),"\r\n          ",HTML.A({href:"javascript:","class":"btn refuse","data-id":function(){return Spacebars.mustache(Spacebars.dot(e.lookup("."),"user"))}},"拒絕"),"\r\n        "),"\r\n      "]}),data:e.lookup("applying")})},"\r\n    "),"\r\n  ")})}(),function(){Template.__define__("layout",function(){{var e=this;e.__content,e.__elseContent}return[HTML.DIV({"class":"ui-layout-center",style:"padding: 10px;",id:"main"},"\r\n    ",function(){return Spacebars.include(Template.yield||e.lookup("yield"))},"\r\n  "),"\r\n  ",function(){return Spacebars.include(Template.yield||e.lookup("yield"),{data:"north"})},"\r\n  ",function(){return Spacebars.include(Template.yield||e.lookup("yield"),{data:"south"})},"\r\n  ",function(){return Spacebars.include(Template.yield||e.lookup("yield"),{data:"west"})},HTML.Raw('\r\n  <!-- copy right declare -->\r\n  <footer style="display:none;"></footer>')]}),Template.__define__("notFound",function(){{var e=this;e.__content,e.__elseContent}return"404，找不到網址所請求的資源"}),Template.__define__("loading",function(){{var e=this;e.__content,e.__elseContent}return"載入中..."})}(),function(){TRPG={"public":{id:"1367153330780"},adm:"Hstk4c7N953EnBQns",getUserNick:function(e){return _.isArray(e)?_.map(e,function(e){return TRPG.getUserNick(e)}).join("、"):Meteor.users.findOne({_id:e}).profile.nick},options:{roomStatus:["申請中","招募中","進行中","已結束"],characterStatus:["創建中","進行中"],messageType:{chat:"聊天",dice:"擲骰",outside:"場外",system:"系統",room:"資訊"}}}}(),function(){DB={room:new Meteor.Collection("room"),record:new Meteor.Collection("record"),message_all:new Meteor.Collection("message_all"),character:new Meteor.Collection("character"),character_data:new Meteor.Collection("character_data"),document:new Meteor.Collection("document"),map:new Meteor.Collection("map"),map_grid:new Meteor.Collection("map_grid"),map_detail:new Meteor.Collection("map_detail")}}(),function(){!function(e,t){function n(e){var t=e.length,n=ot.type(e);return ot.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e){var t=pt[e]={};return ot.each(e.match(st)||[],function(e,n){t[n]=!0}),t}function r(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=ot.expando+Math.random()}function o(e,n,i){var r;if(i===t&&1===e.nodeType)if(r="data-"+n.replace(yt,"-$1").toLowerCase(),i=e.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:vt.test(i)?JSON.parse(i):i}catch(o){}mt.set(e,n,i)}else i=t;return i}function a(){return!0}function s(){return!1}function c(){try{return q.activeElement}catch(e){}}function l(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function u(e,t,n){if(ot.isFunction(t))return ot.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return ot.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Mt.test(t))return ot.filter(t,e,n);t=ot.filter(t,e)}return ot.grep(e,function(e){return tt.call(t,e)>=0!==n})}function d(e,t){return ot.nodeName(e,"table")&&ot.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function f(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function h(e){var t=At.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function p(e,t){for(var n=e.length,i=0;n>i;i++)gt.set(e[i],"globalEval",!t||gt.get(t[i],"globalEval"))}function m(e,t){var n,i,r,o,a,s,c,l;if(1===t.nodeType){if(gt.hasData(e)&&(o=gt.access(e),a=ot.extend({},o),l=o.events,gt.set(t,a),l)){delete a.handle,a.events={};for(r in l)for(n=0,i=l[r].length;i>n;n++)ot.event.add(t,r,l[r][n])}mt.hasData(e)&&(s=mt.access(e),c=ot.extend({},s),mt.set(t,c))}}function g(e,n){var i=e.getElementsByTagName?e.getElementsByTagName(n||"*"):e.querySelectorAll?e.querySelectorAll(n||"*"):[];return n===t||n&&ot.nodeName(e,n)?ot.merge([e],i):i}function v(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Nt.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function y(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=Qt.length;r--;)if(t=Qt[r]+n,t in e)return t;return i}function b(e,t){return e=t||e,"none"===ot.css(e,"display")||!ot.contains(e.ownerDocument,e)}function _(t){return e.getComputedStyle(t,null)}function w(e,t){for(var n,i,r,o=[],a=0,s=e.length;s>a;a++)i=e[a],i.style&&(o[a]=gt.get(i,"olddisplay"),n=i.style.display,t?(o[a]||"none"!==n||(i.style.display=""),""===i.style.display&&b(i)&&(o[a]=gt.access(i,"olddisplay",C(i.nodeName)))):o[a]||(r=b(i),(n&&"none"!==n||!r)&&gt.set(i,"olddisplay",r?n:ot.css(i,"display"))));for(a=0;s>a;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[a]||"":"none"));return e}function k(e,t,n){var i=qt.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function S(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=ot.css(e,n+Kt[o],!0,r)),i?("content"===n&&(a-=ot.css(e,"padding"+Kt[o],!0,r)),"margin"!==n&&(a-=ot.css(e,"border"+Kt[o]+"Width",!0,r))):(a+=ot.css(e,"padding"+Kt[o],!0,r),"padding"!==n&&(a+=ot.css(e,"border"+Kt[o]+"Width",!0,r)));return a}function T(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=_(e),a=ot.support.boxSizing&&"border-box"===ot.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=Ut(e,t,o),(0>r||null==r)&&(r=e.style[t]),Vt.test(r))return r;i=a&&(ot.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+S(e,t,n||(a?"border":"content"),i,o)+"px"}function C(e){var t=q,n=Xt[e];return n||(n=x(e,t),"none"!==n&&n||(Bt=(Bt||ot("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Bt[0].contentWindow||Bt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=x(e,t),Bt.detach()),Xt[e]=n),n}function x(e,t){var n=ot(t.createElement(e)).appendTo(t.body),i=ot.css(n[0],"display");return n.remove(),i}function P(e,t,n,i){var r;if(ot.isArray(t))ot.each(t,function(t,r){n||en.test(e)?i(e,r):P(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==ot.type(t))i(e,t);else for(r in t)P(e+"["+r+"]",t[r],n,i)}function M(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(st)||[];if(ot.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function D(e,n,i,r){function o(c){var l;return a[c]=!0,ot.each(e[c]||[],function(e,c){var u=c(n,i,r);return"string"!=typeof u||s||a[u]?s?!(l=u):t:(n.dataTypes.unshift(u),o(u),!1)}),l}var a={},s=e===yn;return o(n.dataTypes[0])||!a["*"]&&o("*")}function I(e,n){var i,r,o=ot.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&ot.extend(!0,e,r),e}function E(e,n,i){for(var r,o,a,s,c=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),r===t&&(r=e.mimeType||n.getResponseHeader("Content-Type"));if(r)for(o in c)if(c[o]&&c[o].test(r)){l.unshift(o);break}if(l[0]in i)a=l[0];else{for(o in i){if(!l[0]||e.converters[o+" "+l[0]]){a=o;break}s||(s=o)}a=a||s}return a?(a!==l[0]&&l.unshift(a),i[a]):t}function L(e,t,n,i){var r,o,a,s,c,l={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=u.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(a=l[c+" "+o]||l["* "+o],!a)for(r in l)if(s=r.split(" "),s[1]===o&&(a=l[c+" "+s[0]]||l["* "+s[0]])){a===!0?a=l[r]:l[r]!==!0&&(o=s[0],u.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}function H(){return setTimeout(function(){Pn=t}),Pn=ot.now()}function z(e,t){ot.each(t,function(t,n){for(var i=(Hn[t]||[]).concat(Hn["*"]),r=0,o=i.length;o>r;r++)if(i[r].call(e,t,n))return})}function N(e,t,n){var i,r,o=0,a=Ln.length,s=ot.Deferred().always(function(){delete c.elem}),c=function(){if(r)return!1;for(var t=Pn||H(),n=Math.max(0,l.startTime+l.duration-t),i=n/l.duration||0,o=1-i,a=0,c=l.tweens.length;c>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&c?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:ot.extend({},t),opts:ot.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Pn||H(),duration:n.duration,tweens:[],createTween:function(t,n){var i=ot.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,i=t?l.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),u=l.props;for(O(u,l.opts.specialEasing);a>o;o++)if(i=Ln[o].call(l,e,u,l.opts))return i;return z(l,u),ot.isFunction(l.opts.start)&&l.opts.start.call(e,l),ot.fx.timer(ot.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function O(e,t){var n,i,r,o,a;for(n in e)if(i=ot.camelCase(n),r=t[i],o=e[n],ot.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),a=ot.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function R(e,n,i){var r,o,a,s,c,l,u,d,f,h=this,p=e.style,m={},g=[],v=e.nodeType&&b(e);i.queue||(d=ot._queueHooks(e,"fx"),null==d.unqueued&&(d.unqueued=0,f=d.empty.fire,d.empty.fire=function(){d.unqueued||f()}),d.unqueued++,h.always(function(){h.always(function(){d.unqueued--,ot.queue(e,"fx").length||d.empty.fire()})})),1===e.nodeType&&("height"in n||"width"in n)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===ot.css(e,"display")&&"none"===ot.css(e,"float")&&(p.display="inline-block")),i.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]})),c=gt.get(e,"fxshow");for(r in n)if(a=n[r],Dn.exec(a)){if(delete n[r],l=l||"toggle"===a,a===(v?"hide":"show")){if("show"!==a||c===t||c[r]===t)continue;v=!0}g.push(r)}if(s=g.length){c=gt.get(e,"fxshow")||gt.access(e,"fxshow",{}),"hidden"in c&&(v=c.hidden),l&&(c.hidden=!v),v?ot(e).show():h.done(function(){ot(e).hide()}),h.done(function(){var t;gt.remove(e,"fxshow");for(t in m)ot.style(e,t,m[t])});for(r=0;s>r;r++)o=g[r],u=h.createTween(o,v?c[o]:0),m[o]=c[o]||ot.style(e,o),o in c||(c[o]=u.start,v&&(u.end=u.start,u.start="width"===o||"height"===o?1:0))}}function A(e,t,n,i,r){return new A.prototype.init(e,t,n,i,r)}function $(e,t){var n,i={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)n=Kt[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function j(e){return ot.isWindow(e)?e:9===e.nodeType&&e.defaultView}var U,B,F=typeof t,W=e.location,q=e.document,V=q.documentElement,Y=e.jQuery,X=e.$,J={},G=[],K="2.0.0",Q=G.concat,Z=G.push,et=G.slice,tt=G.indexOf,nt=J.toString,it=J.hasOwnProperty,rt=K.trim,ot=function(e,t){return new ot.fn.init(e,t,U)},at=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,st=/\S+/g,ct=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,lt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ut=/^-ms-/,dt=/-([\da-z])/gi,ft=function(e,t){return t.toUpperCase()},ht=function(){q.removeEventListener("DOMContentLoaded",ht,!1),e.removeEventListener("load",ht,!1),ot.ready()};ot.fn=ot.prototype={jquery:K,constructor:ot,init:function(e,n,i){var r,o;if(!e)return this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ct.exec(e),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(r[1]){if(n=n instanceof ot?n[0]:n,ot.merge(this,ot.parseHTML(r[1],n&&n.nodeType?n.ownerDocument||n:q,!0)),lt.test(r[1])&&ot.isPlainObject(n))for(r in n)ot.isFunction(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}return o=q.getElementById(r[2]),o&&o.parentNode&&(this.length=1,this[0]=o),this.context=q,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ot.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),ot.makeArray(e,this))},selector:"",length:0,toArray:function(){return et.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=ot.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ot.each(this,e,t)},ready:function(e){return ot.ready.promise().done(e),this},slice:function(){return this.pushStack(et.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(ot.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:[].sort,splice:[].splice},ot.fn.init.prototype=ot.fn,ot.extend=ot.fn.extend=function(){var e,n,i,r,o,a,s=arguments[0]||{},c=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},c=2),"object"==typeof s||ot.isFunction(s)||(s={}),l===c&&(s=this,--c);l>c;c++)if(null!=(e=arguments[c]))for(n in e)i=s[n],r=e[n],s!==r&&(u&&r&&(ot.isPlainObject(r)||(o=ot.isArray(r)))?(o?(o=!1,a=i&&ot.isArray(i)?i:[]):a=i&&ot.isPlainObject(i)?i:{},s[n]=ot.extend(u,a,r)):r!==t&&(s[n]=r));return s},ot.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===ot&&(e.$=X),t&&e.jQuery===ot&&(e.jQuery=Y),ot},isReady:!1,readyWait:1,holdReady:function(e){e?ot.readyWait++:ot.ready(!0)},ready:function(e){(e===!0?--ot.readyWait:ot.isReady)||(ot.isReady=!0,e!==!0&&--ot.readyWait>0||(B.resolveWith(q,[ot]),ot.fn.trigger&&ot(q).trigger("ready").off("ready")))},isFunction:function(e){return"function"===ot.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?J[nt.call(e)]||"object":typeof e},isPlainObject:function(e){if("object"!==ot.type(e)||e.nodeType||ot.isWindow(e))return!1;try{if(e.constructor&&!it.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||q;var i=lt.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=ot.buildFragment([e],t,r),r&&ot(r).remove(),ot.merge([],i.childNodes))},parseJSON:JSON.parse,parseXML:function(e){var n,i;if(!e||"string"!=typeof e)return null;try{i=new DOMParser,n=i.parseFromString(e,"text/xml")}catch(r){n=t}return(!n||n.getElementsByTagName("parsererror").length)&&ot.error("Invalid XML: "+e),n},noop:function(){},globalEval:function(e){var t,n=eval;e=ot.trim(e),e&&(1===e.indexOf("use strict")?(t=q.createElement("script"),t.text=e,q.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(ut,"ms-").replace(dt,ft)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,o=0,a=e.length,s=n(e);if(i){if(s)for(;a>o&&(r=t.apply(e[o],i),r!==!1);o++);else for(o in e)if(r=t.apply(e[o],i),r===!1)break}else if(s)for(;a>o&&(r=t.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=t.call(e[o],o,e[o]),r===!1)break;
return e},trim:function(e){return null==e?"":rt.call(e)},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?ot.merge(i,"string"==typeof e?[e]:e):Z.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:tt.call(t,e,n)},merge:function(e,n){var i=n.length,r=e.length,o=0;if("number"==typeof i)for(;i>o;o++)e[r++]=n[o];else for(;n[o]!==t;)e[r++]=n[o++];return e.length=r,e},grep:function(e,t,n){var i,r=[],o=0,a=e.length;for(n=!!n;a>o;o++)i=!!t(e[o],o),n!==i&&r.push(e[o]);return r},map:function(e,t,i){var r,o=0,a=e.length,s=n(e),c=[];if(s)for(;a>o;o++)r=t(e[o],o,i),null!=r&&(c[c.length]=r);else for(o in e)r=t(e[o],o,i),null!=r&&(c[c.length]=r);return Q.apply([],c)},guid:1,proxy:function(e,n){var i,r,o;return"string"==typeof n&&(i=e[n],n=e,e=i),ot.isFunction(e)?(r=et.call(arguments,2),o=function(){return e.apply(n||this,r.concat(et.call(arguments)))},o.guid=e.guid=e.guid||ot.guid++,o):t},access:function(e,n,i,r,o,a,s){var c=0,l=e.length,u=null==i;if("object"===ot.type(i)){o=!0;for(c in i)ot.access(e,n,c,i[c],!0,a,s)}else if(r!==t&&(o=!0,ot.isFunction(r)||(s=!0),u&&(s?(n.call(e,r),n=null):(u=n,n=function(e,t,n){return u.call(ot(e),n)})),n))for(;l>c;c++)n(e[c],i,s?r:r.call(e[c],c,n(e[c],i)));return o?e:u?n.call(e):l?n(e[0],i):a},now:Date.now,swap:function(e,t,n,i){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=a[o];return r}}),ot.ready.promise=function(t){return B||(B=ot.Deferred(),"complete"===q.readyState?setTimeout(ot.ready):(q.addEventListener("DOMContentLoaded",ht,!1),e.addEventListener("load",ht,!1))),B.promise(t)},ot.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){J["[object "+t+"]"]=t.toLowerCase()}),U=ot(q),function(e,t){function n(e){return bt.test(e+"")}function i(){var e,t=[];return e=function(n,i){return t.push(n+=" ")>x.cacheLength&&delete e[t.shift()],e[n]=i}}function r(e){return e[j]=!0,e}function o(e){var t=H.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t,n,i){var r,o,a,s,c,l,u,d,f,m;if((t?t.ownerDocument||t:U)!==H&&L(t),t=t||H,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(N&&!i){if(r=_t.exec(e))if(a=r[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&$(t,o)&&o.id===a)return n.push(o),n}else{if(r[2])return tt.apply(n,t.getElementsByTagName(e)),n;if((a=r[3])&&B.getElementsByClassName&&t.getElementsByClassName)return tt.apply(n,t.getElementsByClassName(a)),n}if(B.qsa&&(!O||!O.test(e))){if(d=u=j,f=t,m=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=h(e),(u=t.getAttribute("id"))?d=u.replace(St,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",c=l.length;c--;)l[c]=d+p(l[c]);f=pt.test(e)&&t.parentNode||t,m=l.join(",")}if(m)try{return tt.apply(n,f.querySelectorAll(m)),n}catch(g){}finally{u||t.removeAttribute("id")}}}return k(e.replace(dt,"$1"),t,n,i)}function s(e,t){var n=t&&e,i=n&&(~t.sourceIndex||K)-(~e.sourceIndex||K);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function c(e,n,i){var r;return i?t:(r=e.getAttributeNode(n))&&r.specified?r.value:e[n]===!0?n.toLowerCase():null}function l(e,n,i){var r;return i?t:r=e.getAttribute(n,"type"===n.toLowerCase()?1:2)}function u(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function d(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function f(e){return r(function(t){return t=+t,r(function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function h(e,t){var n,i,r,o,s,c,l,u=V[e+" "];if(u)return t?0:u.slice(0);for(s=e,c=[],l=x.preFilter;s;){(!n||(i=ft.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),c.push(r=[])),n=!1,(i=ht.exec(s))&&(n=i.shift(),r.push({value:n,type:i[0].replace(dt," ")}),s=s.slice(n.length));for(o in x.filter)!(i=yt[o].exec(s))||l[o]&&!(i=l[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?a.error(e):V(e,c).slice(0)}function p(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function m(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=W++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,a){var s,c,l,u=F+" "+o;if(a){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||r)if(l=t[j]||(t[j]={}),(c=l[i])&&c[0]===u){if((s=c[1])===!0||s===C)return s===!0}else if(c=l[i]=[u],c[1]=e(t,n,a)||C,c[1]===!0)return!0}}function g(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function v(e,t,n,i,r){for(var o,a=[],s=0,c=e.length,l=null!=t;c>s;s++)(o=e[s])&&(!n||n(o,i,r))&&(a.push(o),l&&t.push(s));return a}function y(e,t,n,i,o,a){return i&&!i[j]&&(i=y(i)),o&&!o[j]&&(o=y(o,a)),r(function(r,a,s,c){var l,u,d,f=[],h=[],p=a.length,m=r||w(t||"*",s.nodeType?[s]:s,[]),g=!e||!r&&t?m:v(m,f,e,s,c),y=n?o||(r?e:p||i)?[]:a:g;if(n&&n(g,y,s,c),i)for(l=v(y,h),i(l,[],s,c),u=l.length;u--;)(d=l[u])&&(y[h[u]]=!(g[h[u]]=d));if(r){if(o||e){if(o){for(l=[],u=y.length;u--;)(d=y[u])&&l.push(g[u]=d);o(null,y=[],l,c)}for(u=y.length;u--;)(d=y[u])&&(l=o?it.call(r,d):f[u])>-1&&(r[l]=!(a[l]=d))}}else y=v(y===a?y.splice(p,y.length):y),o?o(null,a,y,c):tt.apply(a,y)})}function b(e){for(var t,n,i,r=e.length,o=x.relative[e[0].type],a=o||x.relative[" "],s=o?1:0,c=m(function(e){return e===t},a,!0),l=m(function(e){return it.call(t,e)>-1},a,!0),u=[function(e,n,i){return!o&&(i||n!==I)||((t=n).nodeType?c(e,n,i):l(e,n,i))}];r>s;s++)if(n=x.relative[e[s].type])u=[m(g(u),n)];else{if(n=x.filter[e[s].type].apply(null,e[s].matches),n[j]){for(i=++s;r>i&&!x.relative[e[i].type];i++);return y(s>1&&g(u),s>1&&p(e.slice(0,s-1)).replace(dt,"$1"),n,i>s&&b(e.slice(s,i)),r>i&&b(e=e.slice(i)),r>i&&p(e))}u.push(n)}return g(u)}function _(e,t){var n=0,i=t.length>0,o=e.length>0,s=function(r,s,c,l,u){var d,f,h,p=[],m=0,g="0",y=r&&[],b=null!=u,_=I,w=r||o&&x.find.TAG("*",u&&s.parentNode||s),k=F+=null==_?1:Math.random()||.1;for(b&&(I=s!==H&&s,C=n);null!=(d=w[g]);g++){if(o&&d){for(f=0;h=e[f++];)if(h(d,s,c)){l.push(d);break}b&&(F=k,C=++n)}i&&((d=!h&&d)&&m--,r&&y.push(d))}if(m+=g,i&&g!==m){for(f=0;h=t[f++];)h(y,p,s,c);if(r){if(m>0)for(;g--;)y[g]||p[g]||(p[g]=Z.call(l));p=v(p)}tt.apply(l,p),b&&!r&&p.length>0&&m+t.length>1&&a.uniqueSort(l)}return b&&(F=k,I=_),y};return i?r(s):s}function w(e,t,n){for(var i=0,r=t.length;r>i;i++)a(e,t[i],n);return n}function k(e,t,n,i){var r,o,a,s,c,l=h(e);if(!i&&1===l.length){if(o=l[0]=l[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&N&&x.relative[o[1].type]){if(t=(x.find.ID(a.matches[0].replace(Tt,Ct),t)||[])[0],!t)return n;e=e.slice(o.shift().value.length)}for(r=yt.needsContext.test(e)?0:o.length;r--&&(a=o[r],!x.relative[s=a.type]);)if((c=x.find[s])&&(i=c(a.matches[0].replace(Tt,Ct),pt.test(o[0].type)&&t.parentNode||t))){if(o.splice(r,1),e=i.length&&p(o),!e)return tt.apply(n,i),n;break}}return D(e,l)(i,t,!N,n,pt.test(e)),n}function S(){}var T,C,x,P,M,D,I,E,L,H,z,N,O,R,A,$,j="sizzle"+-new Date,U=e.document,B={},F=0,W=0,q=i(),V=i(),Y=i(),X=!1,J=function(){return 0},G=typeof t,K=1<<31,Q=[],Z=Q.pop,et=Q.push,tt=Q.push,nt=Q.slice,it=Q.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},rt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",at="[\\x20\\t\\r\\n\\f]",st="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ct=st.replace("w","w#"),lt="\\["+at+"*("+st+")"+at+"*(?:([*^$|!~]?=)"+at+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ct+")|)|)"+at+"*\\]",ut=":("+st+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+lt.replace(3,8)+")*)|.*)\\)|)",dt=RegExp("^"+at+"+|((?:^|[^\\\\])(?:\\\\.)*)"+at+"+$","g"),ft=RegExp("^"+at+"*,"+at+"*"),ht=RegExp("^"+at+"*([>+~]|"+at+")"+at+"*"),pt=RegExp(at+"*[+~]"),mt=RegExp("="+at+"*([^\\]'\"]*)"+at+"*\\]","g"),gt=RegExp(ut),vt=RegExp("^"+ct+"$"),yt={ID:RegExp("^#("+st+")"),CLASS:RegExp("^\\.("+st+")"),TAG:RegExp("^("+st.replace("w","w*")+")"),ATTR:RegExp("^"+lt),PSEUDO:RegExp("^"+ut),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+at+"*(even|odd|(([+-]|)(\\d*)n|)"+at+"*(?:([+-]|)"+at+"*(\\d+)|))"+at+"*\\)|)","i"),"boolean":RegExp("^(?:"+rt+")$","i"),needsContext:RegExp("^"+at+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+at+"*((?:-\\d)?\\d*)"+at+"*\\)|)(?=[^-]|$)","i")},bt=/^[^{]+\{\s*\[native \w/,_t=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,wt=/^(?:input|select|textarea|button)$/i,kt=/^h\d$/i,St=/'|\\/g,Tt=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,Ct=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{tt.apply(Q=nt.call(U.childNodes),U.childNodes),Q[U.childNodes.length].nodeType}catch(xt){tt={apply:Q.length?function(e,t){et.apply(e,nt.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}M=a.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},L=a.setDocument=function(e){var i=e?e.ownerDocument||e:U;return i!==H&&9===i.nodeType&&i.documentElement?(H=i,z=i.documentElement,N=!M(i),B.getElementsByTagName=o(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),B.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),B.getElementsByClassName=o(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),B.sortDetached=o(function(e){return 1&e.compareDocumentPosition(H.createElement("div"))}),B.getById=o(function(e){return z.appendChild(e).id=j,!i.getElementsByName||!i.getElementsByName(j).length}),B.getById?(x.find.ID=function(e,t){if(typeof t.getElementById!==G&&N){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(e){var t=e.replace(Tt,Ct);return function(e){return e.getAttribute("id")===t}}):(x.find.ID=function(e,n){if(typeof n.getElementById!==G&&N){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==G&&i.getAttributeNode("id").value===e?[i]:t:[]}},x.filter.ID=function(e){var t=e.replace(Tt,Ct);return function(e){var n=typeof e.getAttributeNode!==G&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=B.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==G?n.getElementsByTagName(e):t}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},x.find.CLASS=B.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==G&&N?n.getElementsByClassName(e):t},R=[],O=[],(B.qsa=n(i.querySelectorAll))&&(o(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||O.push("\\["+at+"*(?:value|"+rt+")"),e.querySelectorAll(":checked").length||O.push(":checked")}),o(function(e){var t=H.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&O.push("[*^$]="+at+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),O.push(",.*:")})),(B.matchesSelector=n(A=z.webkitMatchesSelector||z.mozMatchesSelector||z.oMatchesSelector||z.msMatchesSelector))&&o(function(e){B.disconnectedMatch=A.call(e,"div"),A.call(e,"[s!='']:x"),R.push("!=",ut)}),O=O.length&&RegExp(O.join("|")),R=R.length&&RegExp(R.join("|")),$=n(z.contains)||z.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},J=z.compareDocumentPosition?function(e,t){if(e===t)return X=!0,0;var n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return n?1&n||!B.sortDetached&&t.compareDocumentPosition(e)===n?e===i||$(U,e)?-1:t===i||$(U,t)?1:E?it.call(E,e)-it.call(E,t):0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var n,r=0,o=e.parentNode,a=t.parentNode,c=[e],l=[t];if(e===t)return X=!0,0;if(!o||!a)return e===i?-1:t===i?1:o?-1:a?1:E?it.call(E,e)-it.call(E,t):0;if(o===a)return s(e,t);for(n=e;n=n.parentNode;)c.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;c[r]===l[r];)r++;return r?s(c[r],l[r]):c[r]===U?-1:l[r]===U?1:0},H):H},a.matches=function(e,t){return a(e,null,null,t)},a.matchesSelector=function(e,t){if((e.ownerDocument||e)!==H&&L(e),t=t.replace(mt,"='$1']"),!(!B.matchesSelector||!N||R&&R.test(t)||O&&O.test(t)))try{var n=A.call(e,t);if(n||B.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return a(t,H,null,[e]).length>0},a.contains=function(e,t){return(e.ownerDocument||e)!==H&&L(e),$(e,t)},a.attr=function(e,n){(e.ownerDocument||e)!==H&&L(e);var i=x.attrHandle[n.toLowerCase()],r=i&&i(e,n,!N);return r===t?B.attributes||!N?e.getAttribute(n):(r=e.getAttributeNode(n))&&r.specified?r.value:null:r},a.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},a.uniqueSort=function(e){var t,n=[],i=0,r=0;if(X=!B.detectDuplicates,E=!B.sortStable&&e.slice(0),e.sort(J),X){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return e},P=a.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=P(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i];i++)n+=P(t);return n},x=a.selectors={cacheLength:50,createPseudo:r,match:yt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Tt,Ct),e[3]=(e[4]||e[5]||"").replace(Tt,Ct),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||a.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&a.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return yt.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&gt.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Tt,Ct).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=q[e+" "];return t||(t=RegExp("(^|"+at+")"+e+"("+at+"|$)"))&&q(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==G&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var r=a.attr(i,e);return null==r?"!="===t:t?(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r+" ").indexOf(n)>-1:"|="===t?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,c){var l,u,d,f,h,p,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!c&&!s;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&y){for(u=g[j]||(g[j]={}),l=u[e]||[],h=l[0]===F&&l[1],f=l[0]===F&&l[2],d=h&&g.childNodes[h];d=++h&&d&&d[m]||(f=h=0)||p.pop();)if(1===d.nodeType&&++f&&d===t){u[e]=[F,h,f];break}}else if(y&&(l=(t[j]||(t[j]={}))[e])&&l[0]===F)f=l[1];else for(;(d=++h&&d&&d[m]||(f=h=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(y&&((d[j]||(d[j]={}))[e]=[F,f]),d!==t)););return f-=r,f===i||0===f%i&&f/i>=0}}},PSEUDO:function(e,t){var n,i=x.pseudos[e]||x.setFilters[e.toLowerCase()]||a.error("unsupported pseudo: "+e);return i[j]?i(t):i.length>1?(n=[e,e,"",t],x.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,n){for(var r,o=i(e,t),a=o.length;a--;)r=it.call(e,o[a]),e[r]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:r(function(e){var t=[],n=[],i=D(e.replace(dt,"$1"));return i[j]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),!n.pop()}}),has:r(function(e){return function(t){return a(e,t).length>0}}),contains:r(function(e){return function(t){return(t.textContent||t.innerText||P(t)).indexOf(e)>-1}}),lang:r(function(e){return vt.test(e||"")||a.error("unsupported lang: "+e),e=e.replace(Tt,Ct).toLowerCase(),function(t){var n;do if(n=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===z},focus:function(e){return e===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return kt.test(e.nodeName)},input:function(e){return wt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:f(function(){return[0]}),last:f(function(e,t){return[t-1]}),eq:f(function(e,t,n){return[0>n?n+t:n]}),even:f(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:f(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:f(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:f(function(e,t,n){for(var i=0>n?n+t:n;t>++i;)e.push(i);return e})}};for(T in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[T]=u(T);for(T in{submit:!0,reset:!0})x.pseudos[T]=d(T);D=a.compile=function(e,t){var n,i=[],r=[],o=Y[e+" "];if(!o){for(t||(t=h(e)),n=t.length;n--;)o=b(t[n]),o[j]?i.push(o):r.push(o);o=Y(e,_(r,i))}return o},x.pseudos.nth=x.pseudos.eq,S.prototype=x.filters=x.pseudos,x.setFilters=new S,B.sortStable=j.split("").sort(J).join("")===j,L(),[0,0].sort(J),B.detectDuplicates=X,o(function(e){if(e.innerHTML="<a href='#'></a>","#"!==e.firstChild.getAttribute("href"))for(var t="type|href|height|width".split("|"),n=t.length;n--;)x.attrHandle[t[n]]=l}),o(function(e){if(null!=e.getAttribute("disabled"))for(var t=rt.split("|"),n=t.length;n--;)x.attrHandle[t[n]]=c}),ot.find=a,ot.expr=a.selectors,ot.expr[":"]=ot.expr.pseudos,ot.unique=a.uniqueSort,ot.text=a.getText,ot.isXMLDoc=a.isXML,ot.contains=a.contains}(e);var pt={};ot.Callbacks=function(e){e="string"==typeof e?pt[e]||i(e):ot.extend({},e);var n,r,o,a,s,c,l=[],u=!e.once&&[],d=function(t){for(n=e.memory&&t,r=!0,c=a||0,a=0,s=l.length,o=!0;l&&s>c;c++)if(l[c].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}o=!1,l&&(u?u.length&&d(u.shift()):n?l=[]:f.disable())},f={add:function(){if(l){var t=l.length;!function i(t){ot.each(t,function(t,n){var r=ot.type(n);"function"===r?e.unique&&f.has(n)||l.push(n):n&&n.length&&"string"!==r&&i(n)})}(arguments),o?s=l.length:n&&(a=t,d(n))}return this},remove:function(){return l&&ot.each(arguments,function(e,t){for(var n;(n=ot.inArray(t,l,n))>-1;)l.splice(n,1),o&&(s>=n&&s--,c>=n&&c--)}),this},has:function(e){return e?ot.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],s=0,this},disable:function(){return l=u=n=t,this},disabled:function(){return!l},lock:function(){return u=t,n||f.disable(),this},locked:function(){return!u},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!l||r&&!u||(o?u.push(t):d(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!r}};return f},ot.extend({Deferred:function(e){var t=[["resolve","done",ot.Callbacks("once memory"),"resolved"],["reject","fail",ot.Callbacks("once memory"),"rejected"],["notify","progress",ot.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ot.Deferred(function(n){ot.each(t,function(t,o){var a=o[0],s=ot.isFunction(e[t])&&e[t];r[o[1]](function(){var e=s&&s.apply(this,arguments);e&&ot.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===i?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ot.extend(e,i):i}},r={};return i.pipe=i.then,ot.each(t,function(e,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=a.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=et.call(arguments),a=o.length,s=1!==a||e&&ot.isFunction(e.promise)?a:0,c=1===s?e:ot.Deferred(),l=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?et.call(arguments):r,i===t?c.notifyWith(n,i):--s||c.resolveWith(n,i)}};if(a>1)for(t=Array(a),n=Array(a),i=Array(a);a>r;r++)o[r]&&ot.isFunction(o[r].promise)?o[r].promise().done(l(r,i,o)).fail(c.reject).progress(l(r,n,t)):--s;return s||c.resolveWith(i,o),c.promise()}}),ot.support=function(t){var n=q.createElement("input"),i=q.createDocumentFragment(),r=q.createElement("div"),o=q.createElement("select"),a=o.appendChild(q.createElement("option"));return n.type?(n.type="checkbox",t.checkOn=""!==n.value,t.optSelected=a.selected,t.reliableMarginRight=!0,t.boxSizingReliable=!0,t.pixelPosition=!1,n.checked=!0,t.noCloneChecked=n.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!a.disabled,n=q.createElement("input"),n.value="t",n.type="radio",t.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),i.appendChild(n),t.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,t.focusinBubbles="onfocusin"in e,r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===r.style.backgroundClip,ot(function(){var n,i,o="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",a=q.getElementsByTagName("body")[0];a&&(n=q.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(r),r.innerHTML="",r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",ot.swap(a,null!=a.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===r.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(r,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(r,null)||{width:"4px"}).width,i=r.appendChild(q.createElement("div")),i.style.cssText=r.style.cssText=o,i.style.marginRight=i.style.width="0",r.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),a.removeChild(n))}),t):t}({});var mt,gt,vt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,yt=/([A-Z])/g;r.uid=1,r.accepts=function(e){return e.nodeType?1===e.nodeType||9===e.nodeType:!0},r.prototype={key:function(e){if(!r.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=r.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(i){t[this.expando]=n,ot.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var i,r=this.key(e),o=this.cache[r];if("string"==typeof t)o[t]=n;else if(ot.isEmptyObject(o))this.cache[r]=t;else for(i in t)o[i]=t[i]},get:function(e,n){var i=this.cache[this.key(e)];return n===t?i:i[n]},access:function(e,n,i){return n===t||n&&"string"==typeof n&&i===t?this.get(e,n):(this.set(e,n,i),i!==t?i:n)},remove:function(e,n){var i,r,o=this.key(e),a=this.cache[o];if(n===t)this.cache[o]={};else{ot.isArray(n)?r=n.concat(n.map(ot.camelCase)):n in a?r=[n]:(r=ot.camelCase(n),r=r in a?[r]:r.match(st)||[]),i=r.length;for(;i--;)delete a[r[i]]}},hasData:function(e){return!ot.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){delete this.cache[this.key(e)]}},mt=new r,gt=new r,ot.extend({acceptData:r.accepts,hasData:function(e){return mt.hasData(e)||gt.hasData(e)},data:function(e,t,n){return mt.access(e,t,n)},removeData:function(e,t){mt.remove(e,t)},_data:function(e,t,n){return gt.access(e,t,n)},_removeData:function(e,t){gt.remove(e,t)}}),ot.fn.extend({data:function(e,n){var i,r,a=this[0],s=0,c=null;if(e===t){if(this.length&&(c=mt.get(a),1===a.nodeType&&!gt.get(a,"hasDataAttrs"))){for(i=a.attributes;i.length>s;s++)r=i[s].name,0===r.indexOf("data-")&&(r=ot.camelCase(r.substring(5)),o(a,r,c[r]));gt.set(a,"hasDataAttrs",!0)}return c}return"object"==typeof e?this.each(function(){mt.set(this,e)}):ot.access(this,function(n){var i,r=ot.camelCase(e);if(a&&n===t){if(i=mt.get(a,e),i!==t)return i;if(i=mt.get(a,r),i!==t)return i;if(i=o(a,r,t),i!==t)return i}else this.each(function(){var i=mt.get(this,r);mt.set(this,r,n),-1!==e.indexOf("-")&&i!==t&&mt.set(this,e,n)})},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){mt.remove(this,e)})}}),ot.extend({queue:function(e,n,i){var r;return e?(n=(n||"fx")+"queue",r=gt.get(e,n),i&&(!r||ot.isArray(i)?r=gt.access(e,n,ot.makeArray(i)):r.push(i)),r||[]):t},dequeue:function(e,t){t=t||"fx";var n=ot.queue(e,t),i=n.length,r=n.shift(),o=ot._queueHooks(e,t),a=function(){ot.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),o.cur=r,r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return gt.get(e,n)||gt.access(e,n,{empty:ot.Callbacks("once memory").add(function(){gt.remove(e,[t+"queue",n])})})}}),ot.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),i>arguments.length?ot.queue(this[0],e):n===t?this:this.each(function(){var t=ot.queue(this,e,n);ot._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&ot.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ot.dequeue(this,e)})},delay:function(e,t){return e=ot.fx?ot.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,r=1,o=ot.Deferred(),a=this,s=this.length,c=function(){--r||o.resolveWith(a,[a])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";s--;)i=gt.get(a[s],e+"queueHooks"),i&&i.empty&&(r++,i.empty.add(c));return c(),o.promise(n)}});var bt,_t,wt=/[\t\r\n]/g,kt=/\r/g,St=/^(?:input|select|textarea|button)$/i;ot.fn.extend({attr:function(e,t){return ot.access(this,ot.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ot.removeAttr(this,e)})},prop:function(e,t){return ot.access(this,ot.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[ot.propFix[e]||e]})},addClass:function(e){var t,n,i,r,o,a=0,s=this.length,c="string"==typeof e&&e;if(ot.isFunction(e))return this.each(function(t){ot(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(st)||[];s>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(wt," "):" ")){for(o=0;r=t[o++];)0>i.indexOf(" "+r+" ")&&(i+=r+" ");n.className=ot.trim(i)}return this},removeClass:function(e){var t,n,i,r,o,a=0,s=this.length,c=0===arguments.length||"string"==typeof e&&e;if(ot.isFunction(e))return this.each(function(t){ot(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(st)||[];s>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(wt," "):"")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");n.className=e?ot.trim(i):""}return this},toggleClass:function(e,t){var n=typeof e,i="boolean"==typeof t;return ot.isFunction(e)?this.each(function(n){ot(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var r,o=0,a=ot(this),s=t,c=e.match(st)||[];r=c[o++];)s=i?s:!a.hasClass(r),a[s?"addClass":"removeClass"](r);else(n===F||"boolean"===n)&&(this.className&&gt.set(this,"__className__",this.className),this.className=this.className||e===!1?"":gt.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(wt," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,i,r,o=this[0];return arguments.length?(r=ot.isFunction(e),this.each(function(i){var o,a=ot(this);1===this.nodeType&&(o=r?e.call(this,i,a.val()):e,null==o?o="":"number"==typeof o?o+="":ot.isArray(o)&&(o=ot.map(o,function(e){return null==e?"":e+""})),n=ot.valHooks[this.type]||ot.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,o,"value")!==t||(this.value=o))})):o?(n=ot.valHooks[o.type]||ot.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(o,"value"))!==t?i:(i=o.value,"string"==typeof i?i.replace(kt,""):null==i?"":i)):void 0}}),ot.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,a=o?null:[],s=o?r+1:i.length,c=0>r?s:o?r:0;s>c;c++)if(n=i[c],!(!n.selected&&c!==r||(ot.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&ot.nodeName(n.parentNode,"optgroup"))){if(t=ot(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,o=ot.makeArray(t),a=r.length;a--;)i=r[a],(i.selected=ot.inArray(ot(i).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,n,i){var r,o,a=e.nodeType;return e&&3!==a&&8!==a&&2!==a?typeof e.getAttribute===F?ot.prop(e,n,i):(1===a&&ot.isXMLDoc(e)||(n=n.toLowerCase(),r=ot.attrHooks[n]||(ot.expr.match.boolean.test(n)?_t:bt)),i===t?r&&"get"in r&&null!==(o=r.get(e,n))?o:(o=ot.find.attr(e,n),null==o?t:o):null!==i?r&&"set"in r&&(o=r.set(e,i,n))!==t?o:(e.setAttribute(n,i+""),i):(ot.removeAttr(e,n),t)):void 0},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(st);if(o&&1===e.nodeType)for(;n=o[r++];)i=ot.propFix[n]||n,ot.expr.match.boolean.test(n)&&(e[i]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!ot.support.radioValue&&"radio"===t&&ot.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,i){var r,o,a,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?(a=1!==s||!ot.isXMLDoc(e),a&&(n=ot.propFix[n]||n,o=ot.propHooks[n]),i!==t?o&&"set"in o&&(r=o.set(e,i,n))!==t?r:e[n]=i:o&&"get"in o&&null!==(r=o.get(e,n))?r:e[n]):void 0},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||St.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),_t={set:function(e,t,n){return t===!1?ot.removeAttr(e,n):e.setAttribute(n,n),n}},ot.each(ot.expr.match.boolean.source.match(/\w+/g),function(e,n){var i=ot.expr.attrHandle[n]||ot.find.attr;ot.expr.attrHandle[n]=function(e,n,r){var o=ot.expr.attrHandle[n],a=r?t:(ot.expr.attrHandle[n]=t)!=i(e,n,r)?n.toLowerCase():null;return ot.expr.attrHandle[n]=o,a}}),ot.support.optSelected||(ot.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),ot.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ot.propFix[this.toLowerCase()]=this
}),ot.each(["radio","checkbox"],function(){ot.valHooks[this]={set:function(e,n){return ot.isArray(n)?e.checked=ot.inArray(ot(e).val(),n)>=0:t}},ot.support.checkOn||(ot.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Tt=/^key/,Ct=/^(?:mouse|contextmenu)|click/,xt=/^(?:focusinfocus|focusoutblur)$/,Pt=/^([^.]*)(?:\.(.+)|)$/;ot.event={global:{},add:function(e,n,i,r,o){var a,s,c,l,u,d,f,h,p,m,g,v=gt.get(e);if(v){for(i.handler&&(a=i,i=a.handler,o=a.selector),i.guid||(i.guid=ot.guid++),(l=v.events)||(l=v.events={}),(s=v.handle)||(s=v.handle=function(e){return typeof ot===F||e&&ot.event.triggered===e.type?t:ot.event.dispatch.apply(s.elem,arguments)},s.elem=e),n=(n||"").match(st)||[""],u=n.length;u--;)c=Pt.exec(n[u])||[],p=g=c[1],m=(c[2]||"").split(".").sort(),p&&(f=ot.event.special[p]||{},p=(o?f.delegateType:f.bindType)||p,f=ot.event.special[p]||{},d=ot.extend({type:p,origType:g,data:r,handler:i,guid:i.guid,selector:o,needsContext:o&&ot.expr.match.needsContext.test(o),namespace:m.join(".")},a),(h=l[p])||(h=l[p]=[],h.delegateCount=0,f.setup&&f.setup.call(e,r,m,s)!==!1||e.addEventListener&&e.addEventListener(p,s,!1)),f.add&&(f.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),o?h.splice(h.delegateCount++,0,d):h.push(d),ot.event.global[p]=!0);e=null}},remove:function(e,t,n,i,r){var o,a,s,c,l,u,d,f,h,p,m,g=gt.hasData(e)&&gt.get(e);if(g&&(c=g.events)){for(t=(t||"").match(st)||[""],l=t.length;l--;)if(s=Pt.exec(t[l])||[],h=m=s[1],p=(s[2]||"").split(".").sort(),h){for(d=ot.event.special[h]||{},h=(i?d.delegateType:d.bindType)||h,f=c[h]||[],s=s[2]&&RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)u=f[o],!r&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(f.splice(o,1),u.selector&&f.delegateCount--,d.remove&&d.remove.call(e,u));a&&!f.length&&(d.teardown&&d.teardown.call(e,p,g.handle)!==!1||ot.removeEvent(e,h,g.handle),delete c[h])}else for(h in c)ot.event.remove(e,h+t[l],n,i,!0);ot.isEmptyObject(c)&&(delete g.handle,gt.remove(e,"events"))}},trigger:function(n,i,r,o){var a,s,c,l,u,d,f,h=[r||q],p=it.call(n,"type")?n.type:n,m=it.call(n,"namespace")?n.namespace.split("."):[];if(s=c=r=r||q,3!==r.nodeType&&8!==r.nodeType&&!xt.test(p+ot.event.triggered)&&(p.indexOf(".")>=0&&(m=p.split("."),p=m.shift(),m.sort()),u=0>p.indexOf(":")&&"on"+p,n=n[ot.expando]?n:new ot.Event(p,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=r),i=null==i?[n]:ot.makeArray(i,[n]),f=ot.event.special[p]||{},o||!f.trigger||f.trigger.apply(r,i)!==!1)){if(!o&&!f.noBubble&&!ot.isWindow(r)){for(l=f.delegateType||p,xt.test(l+p)||(s=s.parentNode);s;s=s.parentNode)h.push(s),c=s;c===(r.ownerDocument||q)&&h.push(c.defaultView||c.parentWindow||e)}for(a=0;(s=h[a++])&&!n.isPropagationStopped();)n.type=a>1?l:f.bindType||p,d=(gt.get(s,"events")||{})[n.type]&&gt.get(s,"handle"),d&&d.apply(s,i),d=u&&s[u],d&&ot.acceptData(s)&&d.apply&&d.apply(s,i)===!1&&n.preventDefault();return n.type=p,o||n.isDefaultPrevented()||f._default&&f._default.apply(h.pop(),i)!==!1||!ot.acceptData(r)||u&&ot.isFunction(r[p])&&!ot.isWindow(r)&&(c=r[u],c&&(r[u]=null),ot.event.triggered=p,r[p](),ot.event.triggered=t,c&&(r[u]=c)),n.result}},dispatch:function(e){e=ot.event.fix(e);var n,i,r,o,a,s=[],c=et.call(arguments),l=(gt.get(this,"events")||{})[e.type]||[],u=ot.event.special[e.type]||{};if(c[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(s=ot.event.handlers.call(this,e,l),n=0;(o=s[n++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,i=0;(a=o.handlers[i++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(a.namespace))&&(e.handleObj=a,e.data=a.data,r=((ot.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,c),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,n){var i,r,o,a,s=[],c=n.delegateCount,l=e.target;if(c&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(r=[],i=0;c>i;i++)a=n[i],o=a.selector+" ",r[o]===t&&(r[o]=a.needsContext?ot(o,this).index(l)>=0:ot.find(o,this,null,[l]).length),r[o]&&r.push(a);r.length&&s.push({elem:l,handlers:r})}return n.length>c&&s.push({elem:this,handlers:n.slice(c)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,r,o,a=n.button;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||q,r=i.documentElement,o=i.body,e.pageX=n.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),e.which||a===t||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[ot.expando])return e;var t,n,i,r=e.type,o=e,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=Ct.test(r)?this.mouseHooks:Tt.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new ot.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return 3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==c()&&this.focus?(this.focus(),!1):t},delegateType:"focusin"},blur:{trigger:function(){return this===c()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&ot.nodeName(this,"input")?(this.click(),!1):t},_default:function(e){return ot.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=ot.extend(new ot.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?ot.event.trigger(r,null,t):ot.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},ot.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},ot.Event=function(e,n){return this instanceof ot.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.getPreventDefault&&e.getPreventDefault()?a:s):this.type=e,n&&ot.extend(this,n),this.timeStamp=e&&e.timeStamp||ot.now(),this[ot.expando]=!0,t):new ot.Event(e,n)},ot.Event.prototype={isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=a,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=a,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()}},ot.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){ot.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==i&&!ot.contains(i,r))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),ot.support.focusinBubbles||ot.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){ot.event.simulate(t,e.target,ot.event.fix(e),!0)};ot.event.special[t]={setup:function(){0===n++&&q.addEventListener(e,i,!0)},teardown:function(){0===--n&&q.removeEventListener(e,i,!0)}}}),ot.fn.extend({on:function(e,n,i,r,o){var a,c;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(c in e)this.on(c,n,i,e[c],o);return this}if(null==i&&null==r?(r=n,i=n=t):null==r&&("string"==typeof n?(r=i,i=t):(r=i,i=n,n=t)),r===!1)r=s;else if(!r)return this;return 1===o&&(a=r,r=function(e){return ot().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=ot.guid++)),this.each(function(){ot.event.add(this,e,r,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ot(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=s),this.each(function(){ot.event.remove(this,e,i,n)})},trigger:function(e,t){return this.each(function(){ot.event.trigger(e,t,this)})},triggerHandler:function(e,n){var i=this[0];return i?ot.event.trigger(e,n,i,!0):t}});var Mt=/^.[^:#\[\.,]*$/,Dt=ot.expr.match.needsContext,It={children:!0,contents:!0,next:!0,prev:!0};ot.fn.extend({find:function(e){var t,n,i,r=this.length;if("string"!=typeof e)return t=this,this.pushStack(ot(e).filter(function(){for(i=0;r>i;i++)if(ot.contains(t[i],this))return!0}));for(n=[],i=0;r>i;i++)ot.find(e,this[i],n);return n=this.pushStack(r>1?ot.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t=ot(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(ot.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(u(this,e||[],!0))},filter:function(e){return this.pushStack(u(this,e||[],!1))},is:function(e){return!!e&&("string"==typeof e?Dt.test(e)?ot(e,this.context).index(this[0])>=0:ot.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var n,i=0,r=this.length,o=[],a=Dt.test(e)||"string"!=typeof e?ot(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(a?a.index(n)>-1:1===n.nodeType&&ot.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?ot.unique(o):o)},index:function(e){return e?"string"==typeof e?tt.call(ot(e),this[0]):tt.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?ot(e,t):ot.makeArray(e&&e.nodeType?[e]:e),i=ot.merge(this.get(),n);return this.pushStack(ot.unique(i))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ot.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ot.dir(e,"parentNode")},parentsUntil:function(e,t,n){return ot.dir(e,"parentNode",n)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return ot.dir(e,"nextSibling")},prevAll:function(e){return ot.dir(e,"previousSibling")},nextUntil:function(e,t,n){return ot.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return ot.dir(e,"previousSibling",n)},siblings:function(e){return ot.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ot.sibling(e.firstChild)},contents:function(e){return ot.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ot.merge([],e.childNodes)}},function(e,t){ot.fn[e]=function(n,i){var r=ot.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=ot.filter(i,r)),this.length>1&&(It[e]||ot.unique(r),"p"===e[0]&&r.reverse()),this.pushStack(r)}}),ot.extend({filter:function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?ot.find.matchesSelector(i,e)?[i]:[]:ot.find.matches(e,ot.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,i){for(var r=[],o=i!==t;(e=e[n])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&ot(e).is(i))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Et=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Lt=/<([\w:]+)/,Ht=/<|&#?\w+;/,zt=/<(?:script|style|link)/i,Nt=/^(?:checkbox|radio)$/i,Ot=/checked\s*(?:[^=]|=\s*.checked.)/i,Rt=/^$|\/(?:java|ecma)script/i,At=/^true\/(.*)/,$t=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,jt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};jt.optgroup=jt.option,jt.tbody=jt.tfoot=jt.colgroup=jt.caption=jt.col=jt.thead,jt.th=jt.td,ot.fn.extend({text:function(e){return ot.access(this,function(e){return e===t?ot.text(this):this.empty().append((this[0]&&this[0].ownerDocument||q).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?ot.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||ot.cleanData(g(n)),n.parentNode&&(t&&ot.contains(n.ownerDocument,n)&&p(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ot.cleanData(g(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ot.clone(this,e,t)})},html:function(e){return ot.access(this,function(e){var n=this[0]||{},i=0,r=this.length;if(e===t&&1===n.nodeType)return n.innerHTML;if("string"==typeof e&&!zt.test(e)&&!jt[(Lt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Et,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(ot.cleanData(g(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=ot.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var i=e[t++],r=e[t++];r&&(ot(this).remove(),r.insertBefore(n,i))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=Q.apply([],e);var i,r,o,a,s,c,l=0,u=this.length,d=this,p=u-1,m=e[0],v=ot.isFunction(m);if(v||!(1>=u||"string"!=typeof m||ot.support.checkClone)&&Ot.test(m))return this.each(function(i){var r=d.eq(i);v&&(e[0]=m.call(this,i,r.html())),r.domManip(e,t,n)});if(u&&(i=ot.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=i.firstChild,1===i.childNodes.length&&(i=r),r)){for(o=ot.map(g(i,"script"),f),a=o.length;u>l;l++)s=i,l!==p&&(s=ot.clone(s,!0,!0),a&&ot.merge(o,g(s,"script"))),t.call(this[l],s,l);if(a)for(c=o[o.length-1].ownerDocument,ot.map(o,h),l=0;a>l;l++)s=o[l],Rt.test(s.type||"")&&!gt.access(s,"globalEval")&&ot.contains(c,s)&&(s.src?ot._evalUrl(s.src):ot.globalEval(s.textContent.replace($t,"")))}return this}}),ot.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ot.fn[e]=function(e){for(var n,i=[],r=ot(e),o=r.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),ot(r[a])[t](n),Z.apply(i,n.get());return this.pushStack(i)}}),ot.extend({clone:function(e,t,n){var i,r,o,a,s=e.cloneNode(!0),c=ot.contains(e.ownerDocument,e);if(!(ot.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ot.isXMLDoc(e)))for(a=g(s),o=g(e),i=0,r=o.length;r>i;i++)v(o[i],a[i]);if(t)if(n)for(o=o||g(e),a=a||g(s),i=0,r=o.length;r>i;i++)m(o[i],a[i]);else m(e,s);return a=g(s,"script"),a.length>0&&p(a,!c&&g(e,"script")),s},buildFragment:function(e,t,n,i){for(var r,o,a,s,c,l,u=0,d=e.length,f=t.createDocumentFragment(),h=[];d>u;u++)if(r=e[u],r||0===r)if("object"===ot.type(r))ot.merge(h,r.nodeType?[r]:r);else if(Ht.test(r)){for(o=o||f.appendChild(t.createElement("div")),a=(Lt.exec(r)||["",""])[1].toLowerCase(),s=jt[a]||jt._default,o.innerHTML=s[1]+r.replace(Et,"<$1></$2>")+s[2],l=s[0];l--;)o=o.firstChild;ot.merge(h,o.childNodes),o=f.firstChild,o.textContent=""}else h.push(t.createTextNode(r));for(f.textContent="",u=0;r=h[u++];)if((!i||-1===ot.inArray(r,i))&&(c=ot.contains(r.ownerDocument,r),o=g(f.appendChild(r),"script"),c&&p(o),n))for(l=0;r=o[l++];)Rt.test(r.type||"")&&n.push(r);return f},cleanData:function(e){for(var t,n,i,r=e.length,o=0,a=ot.event.special;r>o;o++){if(n=e[o],ot.acceptData(n)&&(t=gt.access(n)))for(i in t.events)a[i]?ot.event.remove(n,i):ot.removeEvent(n,i,t.handle);mt.discard(n),gt.discard(n)}},_evalUrl:function(e){return ot.ajax({url:e,type:"GET",dataType:"text",async:!1,global:!1,success:ot.globalEval})}}),ot.fn.extend({wrapAll:function(e){var t;return ot.isFunction(e)?this.each(function(t){ot(this).wrapAll(e.call(this,t))}):(this[0]&&(t=ot(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return ot.isFunction(e)?this.each(function(t){ot(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ot(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ot.isFunction(e);return this.each(function(n){ot(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ot.nodeName(this,"body")||ot(this).replaceWith(this.childNodes)}).end()}});var Ut,Bt,Ft=/^(none|table(?!-c[ea]).+)/,Wt=/^margin/,qt=RegExp("^("+at+")(.*)$","i"),Vt=RegExp("^("+at+")(?!px)[a-z%]+$","i"),Yt=RegExp("^([+-])=("+at+")","i"),Xt={BODY:"block"},Jt={position:"absolute",visibility:"hidden",display:"block"},Gt={letterSpacing:0,fontWeight:400},Kt=["Top","Right","Bottom","Left"],Qt=["Webkit","O","Moz","ms"];ot.fn.extend({css:function(e,n){return ot.access(this,function(e,n,i){var r,o,a={},s=0;if(ot.isArray(n)){for(r=_(e),o=n.length;o>s;s++)a[n[s]]=ot.css(e,n[s],!1,r);return a}return i!==t?ot.style(e,n,i):ot.css(e,n)},e,n,arguments.length>1)},show:function(){return w(this,!0)},hide:function(){return w(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:b(this))?ot(this).show():ot(this).hide()})}}),ot.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ut(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,n,i,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,c=ot.camelCase(n),l=e.style;return n=ot.cssProps[c]||(ot.cssProps[c]=y(l,c)),s=ot.cssHooks[n]||ot.cssHooks[c],i===t?s&&"get"in s&&(o=s.get(e,!1,r))!==t?o:l[n]:(a=typeof i,"string"===a&&(o=Yt.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(ot.css(e,n)),a="number"),null==i||"number"===a&&isNaN(i)||("number"!==a||ot.cssNumber[c]||(i+="px"),ot.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(l[n]="inherit"),s&&"set"in s&&(i=s.set(e,i,r))===t||(l[n]=i)),t)}},css:function(e,n,i,r){var o,a,s,c=ot.camelCase(n);return n=ot.cssProps[c]||(ot.cssProps[c]=y(e.style,c)),s=ot.cssHooks[n]||ot.cssHooks[c],s&&"get"in s&&(o=s.get(e,!0,i)),o===t&&(o=Ut(e,n,r)),"normal"===o&&n in Gt&&(o=Gt[n]),""===i||i?(a=parseFloat(o),i===!0||ot.isNumeric(a)?a||0:o):o}}),Ut=function(e,n,i){var r,o,a,s=i||_(e),c=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(""!==c||ot.contains(e.ownerDocument,e)||(c=ot.style(e,n)),Vt.test(c)&&Wt.test(n)&&(r=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=c,c=s.width,l.width=r,l.minWidth=o,l.maxWidth=a)),c},ot.each(["height","width"],function(e,n){ot.cssHooks[n]={get:function(e,i,r){return i?0===e.offsetWidth&&Ft.test(ot.css(e,"display"))?ot.swap(e,Jt,function(){return T(e,n,r)}):T(e,n,r):t},set:function(e,t,i){var r=i&&_(e);return k(e,t,i?S(e,n,i,ot.support.boxSizing&&"border-box"===ot.css(e,"boxSizing",!1,r),r):0)}}}),ot(function(){ot.support.reliableMarginRight||(ot.cssHooks.marginRight={get:function(e,n){return n?ot.swap(e,{display:"inline-block"},Ut,[e,"marginRight"]):t}}),!ot.support.pixelPosition&&ot.fn.position&&ot.each(["top","left"],function(e,n){ot.cssHooks[n]={get:function(e,i){return i?(i=Ut(e,n),Vt.test(i)?ot(e).position()[n]+"px":i):t}}})}),ot.expr&&ot.expr.filters&&(ot.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight},ot.expr.filters.visible=function(e){return!ot.expr.filters.hidden(e)}),ot.each({margin:"",padding:"",border:"Width"},function(e,t){ot.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+Kt[i]+t]=o[i]||o[i-2]||o[0];return r}},Wt.test(e)||(ot.cssHooks[e+t].set=k)});var Zt=/%20/g,en=/\[\]$/,tn=/\r?\n/g,nn=/^(?:submit|button|image|reset|file)$/i,rn=/^(?:input|select|textarea|keygen)/i;ot.fn.extend({serialize:function(){return ot.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ot.prop(this,"elements");return e?ot.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ot(this).is(":disabled")&&rn.test(this.nodeName)&&!nn.test(e)&&(this.checked||!Nt.test(e))}).map(function(e,t){var n=ot(this).val();return null==n?null:ot.isArray(n)?ot.map(n,function(e){return{name:t.name,value:e.replace(tn,"\r\n")}}):{name:t.name,value:n.replace(tn,"\r\n")}}).get()}}),ot.param=function(e,n){var i,r=[],o=function(e,t){t=ot.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=ot.ajaxSettings&&ot.ajaxSettings.traditional),ot.isArray(e)||e.jquery&&!ot.isPlainObject(e))ot.each(e,function(){o(this.name,this.value)});else for(i in e)P(i,e[i],n,o);return r.join("&").replace(Zt,"+")},ot.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ot.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ot.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var on,an,sn=ot.now(),cn=/\?/,ln=/#.*$/,un=/([?&])_=[^&]*/,dn=/^(.*?):[ \t]*([^\r\n]*)$/gm,fn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,hn=/^(?:GET|HEAD)$/,pn=/^\/\//,mn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,gn=ot.fn.load,vn={},yn={},bn="*/".concat("*");try{an=W.href}catch(_n){an=q.createElement("a"),an.href="",an=an.href}on=mn.exec(an.toLowerCase())||[],ot.fn.load=function(e,n,i){if("string"!=typeof e&&gn)return gn.apply(this,arguments);var r,o,a,s=this,c=e.indexOf(" ");return c>=0&&(r=e.slice(c),e=e.slice(0,c)),ot.isFunction(n)?(i=n,n=t):n&&"object"==typeof n&&(o="POST"),s.length>0&&ot.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){a=arguments,s.html(r?ot("<div>").append(ot.parseHTML(e)).find(r):e)}).complete(i&&function(e,t){s.each(i,a||[e.responseText,t,e])}),this},ot.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ot.fn[t]=function(e){return this.on(t,e)}}),ot.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:an,type:"GET",isLocal:fn.test(on[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":bn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ot.parseJSON,"text xml":ot.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?I(I(e,ot.ajaxSettings),t):I(ot.ajaxSettings,e)},ajaxPrefilter:M(vn),ajaxTransport:M(yn),ajax:function(e,n){function i(e,n,i,s){var l,d,y,b,w,S=n;2!==_&&(_=2,c&&clearTimeout(c),r=t,a=s||"",k.readyState=e>0?4:0,l=e>=200&&300>e||304===e,i&&(b=E(f,k,i)),b=L(f,b,k,l),l?(f.ifModified&&(w=k.getResponseHeader("Last-Modified"),w&&(ot.lastModified[o]=w),w=k.getResponseHeader("etag"),w&&(ot.etag[o]=w)),204===e?S="nocontent":304===e?S="notmodified":(S=b.state,d=b.data,y=b.error,l=!y)):(y=S,(e||!S)&&(S="error",0>e&&(e=0))),k.status=e,k.statusText=(n||S)+"",l?m.resolveWith(h,[d,S,k]):m.rejectWith(h,[k,S,y]),k.statusCode(v),v=t,u&&p.trigger(l?"ajaxSuccess":"ajaxError",[k,f,l?d:y]),g.fireWith(h,[k,S]),u&&(p.trigger("ajaxComplete",[k,f]),--ot.active||ot.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,o,a,s,c,l,u,d,f=ot.ajaxSetup({},n),h=f.context||f,p=f.context&&(h.nodeType||h.jquery)?ot(h):ot.event,m=ot.Deferred(),g=ot.Callbacks("once memory"),v=f.statusCode||{},y={},b={},_=0,w="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!s)for(s={};t=dn.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return _||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return _||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>_)for(t in e)v[t]=[v[t],e[t]];else k.always(e[k.status]);return this},abort:function(e){var t=e||w;return r&&r.abort(t),i(0,t),this}};if(m.promise(k).complete=g.add,k.success=k.done,k.error=k.fail,f.url=((e||f.url||an)+"").replace(ln,"").replace(pn,on[1]+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=ot.trim(f.dataType||"*").toLowerCase().match(st)||[""],null==f.crossDomain&&(l=mn.exec(f.url.toLowerCase()),f.crossDomain=!(!l||l[1]===on[1]&&l[2]===on[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(on[3]||("http:"===on[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=ot.param(f.data,f.traditional)),D(vn,f,n,k),2===_)return k;u=f.global,u&&0===ot.active++&&ot.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!hn.test(f.type),o=f.url,f.hasContent||(f.data&&(o=f.url+=(cn.test(o)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=un.test(o)?o.replace(un,"$1_="+sn++):o+(cn.test(o)?"&":"?")+"_="+sn++)),f.ifModified&&(ot.lastModified[o]&&k.setRequestHeader("If-Modified-Since",ot.lastModified[o]),ot.etag[o]&&k.setRequestHeader("If-None-Match",ot.etag[o])),(f.data&&f.hasContent&&f.contentType!==!1||n.contentType)&&k.setRequestHeader("Content-Type",f.contentType),k.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+bn+"; q=0.01":""):f.accepts["*"]);for(d in f.headers)k.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(f.beforeSend.call(h,k,f)===!1||2===_))return k.abort();w="abort";for(d in{success:1,error:1,complete:1})k[d](f[d]);if(r=D(yn,f,n,k)){k.readyState=1,u&&p.trigger("ajaxSend",[k,f]),f.async&&f.timeout>0&&(c=setTimeout(function(){k.abort("timeout")},f.timeout));try{_=1,r.send(y,i)}catch(S){if(!(2>_))throw S;i(-1,S)}}else i(-1,"No Transport");return k},getJSON:function(e,t,n){return ot.get(e,t,n,"json")},getScript:function(e,n){return ot.get(e,t,n,"script")}}),ot.each(["get","post"],function(e,n){ot[n]=function(e,i,r,o){return ot.isFunction(i)&&(o=o||r,r=i,i=t),ot.ajax({url:e,type:n,dataType:o,data:i,success:r})}}),ot.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ot.globalEval(e),e}}}),ot.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ot.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=ot("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),q.head.appendChild(t[0])},abort:function(){n&&n()}}}});var wn=[],kn=/(=)\?(?=&|$)|\?\?/;ot.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=wn.pop()||ot.expando+"_"+sn++;return this[e]=!0,e}}),ot.ajaxPrefilter("json jsonp",function(n,i,r){var o,a,s,c=n.jsonp!==!1&&(kn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&kn.test(n.data)&&"data");return c||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=ot.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,c?n[c]=n[c].replace(kn,"$1"+o):n.jsonp!==!1&&(n.url+=(cn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||ot.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},r.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=i.jsonpCallback,wn.push(o)),s&&ot.isFunction(a)&&a(s[0]),s=a=t}),"script"):t}),ot.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Sn=ot.ajaxSettings.xhr(),Tn={0:200,1223:204},Cn=0,xn={};e.ActiveXObject&&ot(e).on("unload",function(){for(var e in xn)xn[e]();xn=t}),ot.support.cors=!!Sn&&"withCredentials"in Sn,ot.support.ajax=Sn=!!Sn,ot.ajaxTransport(function(e){var n;return ot.support.cors||Sn&&!e.crossDomain?{send:function(i,r){var o,a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(o in i)s.setRequestHeader(o,i[o]);n=function(e){return function(){n&&(delete xn[a],n=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?r(s.status||404,s.statusText):r(Tn[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:t,s.getAllResponseHeaders()))}},s.onload=n(),s.onerror=n("error"),n=xn[a=Cn++]=n("abort"),s.send(e.hasContent&&e.data||null)},abort:function(){n&&n()}}:t});var Pn,Mn,Dn=/^(?:toggle|show|hide)$/,In=RegExp("^(?:([+-])=|)("+at+")([a-z%]*)$","i"),En=/queueHooks$/,Ln=[R],Hn={"*":[function(e,t){var n,i,r=this.createTween(e,t),o=In.exec(t),a=r.cur(),s=+a||0,c=1,l=20;if(o){if(n=+o[2],i=o[3]||(ot.cssNumber[e]?"":"px"),"px"!==i&&s){s=ot.css(r.elem,e,!0)||n||1;do c=c||".5",s/=c,ot.style(r.elem,e,s+i);while(c!==(c=r.cur()/a)&&1!==c&&--l)}r.unit=i,r.start=s,r.end=o[1]?s+(o[1]+1)*n:n}return r}]};ot.Animation=ot.extend(N,{tweener:function(e,t){ot.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],Hn[n]=Hn[n]||[],Hn[n].unshift(t)},prefilter:function(e,t){t?Ln.unshift(e):Ln.push(e)}}),ot.Tween=A,A.prototype={constructor:A,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(ot.cssNumber[n]?"":"px")},cur:function(){var e=A.propHooks[this.prop];return e&&e.get?e.get(this):A.propHooks._default.get(this)},run:function(e){var t,n=A.propHooks[this.prop];return this.pos=t=this.options.duration?ot.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):A.propHooks._default.set(this),this}},A.prototype.init.prototype=A.prototype,A.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ot.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ot.fx.step[e.prop]?ot.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ot.cssProps[e.prop]]||ot.cssHooks[e.prop])?ot.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},A.propHooks.scrollTop=A.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ot.each(["toggle","show","hide"],function(e,t){var n=ot.fn[t];ot.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate($(t,!0),e,i,r)}}),ot.fn.extend({fadeTo:function(e,t,n,i){return this.filter(b).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=ot.isEmptyObject(e),o=ot.speed(t,n,i),a=function(){var t=N(this,ot.extend({},e),o);
a.finish=function(){t.stop(!0)},(r||gt.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,i){var r=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=ot.timers,a=gt.get(this);if(n)a[n]&&a[n].stop&&r(a[n]);else for(n in a)a[n]&&a[n].stop&&En.test(n)&&r(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(i),t=!1,o.splice(n,1));(t||!i)&&ot.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=gt.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=ot.timers,a=i?i.length:0;for(n.finish=!0,ot.queue(this,e,[]),r&&r.cur&&r.cur.finish&&r.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),ot.each({slideDown:$("show"),slideUp:$("hide"),slideToggle:$("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ot.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),ot.speed=function(e,t,n){var i=e&&"object"==typeof e?ot.extend({},e):{complete:n||!n&&t||ot.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ot.isFunction(t)&&t};return i.duration=ot.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in ot.fx.speeds?ot.fx.speeds[i.duration]:ot.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){ot.isFunction(i.old)&&i.old.call(this),i.queue&&ot.dequeue(this,i.queue)},i},ot.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ot.timers=[],ot.fx=A.prototype.init,ot.fx.tick=function(){var e,n=ot.timers,i=0;for(Pn=ot.now();n.length>i;i++)e=n[i],e()||n[i]!==e||n.splice(i--,1);n.length||ot.fx.stop(),Pn=t},ot.fx.timer=function(e){e()&&ot.timers.push(e)&&ot.fx.start()},ot.fx.interval=13,ot.fx.start=function(){Mn||(Mn=setInterval(ot.fx.tick,ot.fx.interval))},ot.fx.stop=function(){clearInterval(Mn),Mn=null},ot.fx.speeds={slow:600,fast:200,_default:400},ot.fx.step={},ot.expr&&ot.expr.filters&&(ot.expr.filters.animated=function(e){return ot.grep(ot.timers,function(t){return e===t.elem}).length}),ot.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){ot.offset.setOffset(this,e,t)});var n,i,r=this[0],o={top:0,left:0},a=r&&r.ownerDocument;return a?(n=a.documentElement,ot.contains(n,r)?(typeof r.getBoundingClientRect!==F&&(o=r.getBoundingClientRect()),i=j(a),{top:o.top+i.pageYOffset-n.clientTop,left:o.left+i.pageXOffset-n.clientLeft}):o):void 0},ot.offset={setOffset:function(e,t,n){var i,r,o,a,s,c,l,u=ot.css(e,"position"),d=ot(e),f={};"static"===u&&(e.style.position="relative"),s=d.offset(),o=ot.css(e,"top"),c=ot.css(e,"left"),l=("absolute"===u||"fixed"===u)&&(o+c).indexOf("auto")>-1,l?(i=d.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(c)||0),ot.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+r),"using"in t?t.using.call(e,f):d.css(f)}},ot.fn.extend({position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===ot.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ot.nodeName(e[0],"html")||(i=e.offset()),i.top+=ot.css(e[0],"borderTopWidth",!0),i.left+=ot.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-ot.css(n,"marginTop",!0),left:t.left-i.left-ot.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||V;e&&!ot.nodeName(e,"html")&&"static"===ot.css(e,"position");)e=e.offsetParent;return e||V})}}),ot.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,i){var r="pageYOffset"===i;ot.fn[n]=function(o){return ot.access(this,function(n,o,a){var s=j(n);return a===t?s?s[i]:n[o]:(s?s.scrollTo(r?e.pageXOffset:a,r?a:e.pageYOffset):n[o]=a,t)},n,o,arguments.length,null)}}),ot.each({Height:"height",Width:"width"},function(e,n){ot.each({padding:"inner"+e,content:n,"":"outer"+e},function(i,r){ot.fn[r]=function(r,o){var a=arguments.length&&(i||"boolean"!=typeof r),s=i||(r===!0||o===!0?"margin":"border");return ot.access(this,function(n,i,r){var o;return ot.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):r===t?ot.css(n,i,s):ot.style(n,i,r,s)},n,a?r:t,a,null)}})}),ot.fn.size=function(){return this.length},ot.fn.andSelf=ot.fn.addBack,"object"==typeof module&&"object"==typeof module.exports?module.exports=ot:"function"==typeof define&&define.amd&&define("jquery",[],function(){return ot}),"object"==typeof e&&"object"==typeof e.document&&(e.jQuery=e.$=ot)}(window),function(e,t){function n(t,n){var r,o,a,s=t.nodeName.toLowerCase();return"area"===s?(r=t.parentNode,o=r.name,t.href&&o&&"map"===r.nodeName.toLowerCase()?(a=e("img[usemap=#"+o+"]")[0],!!a&&i(a)):!1):(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var r=0,o=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,r,o=e(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(r=parseInt(o.css("zIndex"),10),!isNaN(r)&&0!==r))return r;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,i){function r(t,n,i,r){return e.each(o,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var o="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?s["inner"+i].call(this):this.each(function(){e(this).css(a,r(this,n)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?s["outer"+i].call(this,t):this.each(function(){e(this).css(a,r(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var r,o=e.ui[t].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(e,t,n){var i,r=e.plugins[t];if(r&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;r.length>i;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return t[i]>0?!0:(t[i]=1,r=t[i]>0,t[i]=0,r)}})}(jQuery),function(e,t){var n=0,i=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(o){}r(t)},e.widget=function(n,i,r){var o,a,s,c,l={},u=n.split(".")[0];n=n.split(".")[1],o=u+"-"+n,r||(r=i,i=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[u]=e[u]||{},a=e[u][n],s=e[u][n]=function(e,n){return this._createWidget?(arguments.length&&this._createWidget(e,n),t):new s(e,n)},e.extend(s,a,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),c=new i,c.options=e.widget.extend({},c.options),e.each(r,function(n,r){return e.isFunction(r)?(l[n]=function(){var e=function(){return i.prototype[n].apply(this,arguments)},t=function(e){return i.prototype[n].apply(this,e)};return function(){var n,i=this._super,o=this._superApply;return this._super=e,this._superApply=t,n=r.apply(this,arguments),this._super=i,this._superApply=o,n}}(),t):(l[n]=r,t)}),s.prototype=e.widget.extend(c,{widgetEventPrefix:a?c.widgetEventPrefix:n},l,{constructor:s,namespace:u,widgetName:n,widgetFullName:o}),a?(e.each(a._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,s,n._proto)}),delete a._childConstructors):i._childConstructors.push(s),e.widget.bridge(n,s)},e.widget.extend=function(n){for(var r,o,a=i.call(arguments,1),s=0,c=a.length;c>s;s++)for(r in a[s])o=a[s][r],a[s].hasOwnProperty(r)&&o!==t&&(n[r]=e.isPlainObject(o)?e.isPlainObject(n[r])?e.widget.extend({},n[r],o):e.widget.extend({},o):o);return n},e.widget.bridge=function(n,r){var o=r.prototype.widgetFullName||n;e.fn[n]=function(a){var s="string"==typeof a,c=i.call(arguments,1),l=this;return a=!s&&c.length?e.widget.extend.apply(null,[a].concat(c)):a,s?this.each(function(){var i,r=e.data(this,o);return r?e.isFunction(r[a])&&"_"!==a.charAt(0)?(i=r[a].apply(r,c),i!==r&&i!==t?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):t):e.error("no such method '"+a+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+a+"'")}):this.each(function(){var t=e.data(this,o);t?t.option(a||{})._init():e.data(this,o,new r(a,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var r,o,a,s=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(s={},r=n.split("."),n=r.shift(),r.length){for(o=s[n]=e.widget.extend({},this.options[n]),a=0;r.length-1>a;a++)o[r[a]]=o[r[a]]||{},o=o[r[a]];if(n=r.pop(),i===t)return o[n]===t?null:o[n];o[n]=i}else{if(i===t)return this.options[n]===t?null:this.options[n];s[n]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(n,i,r){var o,a=this;"boolean"!=typeof n&&(r=i,i=n,n=!1),r?(i=o=e(i),this.bindings=this.bindings.add(i)):(r=i,i=this.element,o=this.widget()),e.each(r,function(r,s){function c(){return n||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?a[s]:s).apply(a,arguments):t}"string"!=typeof s&&(c.guid=s.guid=s.guid||c.guid||e.guid++);var l=r.match(/^(\w+)\s*(.*)$/),u=l[1]+a.eventNamespace,d=l[2];d?o.delegate(d,u,c):i.bind(u,c)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,o,a=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?r===!0||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),a=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&e.effects&&e.effects.effect[s]?i[t](r):s!==t&&i[s]?i[s](r.duration,r.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}})}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1===n.which,o="string"==typeof this.options.cancel&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;return r&&!o&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){function n(e,t,n){return[parseFloat(e[0])*(h.test(e[0])?t/100:1),parseFloat(e[1])*(h.test(e[1])?n/100:1)]}function i(t,n){return parseInt(e.css(t,n),10)||0}function r(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var o,a=Math.max,s=Math.abs,c=Math.round,l=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,f=/^\w+/,h=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(o!==t)return o;var n,i,r=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=r.children()[0];return e("body").append(r),n=a.offsetWidth,r.css("overflow","scroll"),i=a.offsetWidth,n===i&&(i=r[0].clientWidth),r.remove(),o=n-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),i=t.isWindow?"":t.element.css("overflow-y"),r="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,o="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return p.apply(this,arguments);t=e.extend({},t);var o,h,m,g,v,y,b=e(t.of),_=e.position.getWithinInfo(t.within),w=e.position.getScrollInfo(_),k=(t.collision||"flip").split(" "),S={};return y=r(b),b[0].preventDefault&&(t.at="left top"),h=y.width,m=y.height,g=y.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),n=d.exec(i[1]),S[this]=[e?e[0]:0,n?n[0]:0],t[this]=[f.exec(i[0])[0],f.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===t.at[0]?v.left+=h:"center"===t.at[0]&&(v.left+=h/2),"bottom"===t.at[1]?v.top+=m:"center"===t.at[1]&&(v.top+=m/2),o=n(S.at,h,m),v.left+=o[0],v.top+=o[1],this.each(function(){var r,l,u=e(this),d=u.outerWidth(),f=u.outerHeight(),p=i(this,"marginLeft"),y=i(this,"marginTop"),T=d+p+i(this,"marginRight")+w.width,C=f+y+i(this,"marginBottom")+w.height,x=e.extend({},v),P=n(S.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?x.left-=d:"center"===t.my[0]&&(x.left-=d/2),"bottom"===t.my[1]?x.top-=f:"center"===t.my[1]&&(x.top-=f/2),x.left+=P[0],x.top+=P[1],e.support.offsetFractions||(x.left=c(x.left),x.top=c(x.top)),r={marginLeft:p,marginTop:y},e.each(["left","top"],function(n,i){e.ui.position[k[n]]&&e.ui.position[k[n]][i](x,{targetWidth:h,targetHeight:m,elemWidth:d,elemHeight:f,collisionPosition:r,collisionWidth:T,collisionHeight:C,offset:[o[0]+P[0],o[1]+P[1]],my:t.my,at:t.at,within:_,elem:u})}),t.using&&(l=function(e){var n=g.left-x.left,i=n+h-d,r=g.top-x.top,o=r+m-f,c={target:{element:b,left:g.left,top:g.top,width:h,height:m},element:{element:u,left:x.left,top:x.top,width:d,height:f},horizontal:0>i?"left":n>0?"right":"center",vertical:0>o?"top":r>0?"bottom":"middle"};d>h&&h>s(n+i)&&(c.horizontal="center"),f>m&&m>s(r+o)&&(c.vertical="middle"),c.important=a(s(n),s(i))>a(s(r),s(o))?"horizontal":"vertical",t.using.call(this,e,c)}),u.offset(e.extend(x,{using:l}))})},e.ui.position={fit:{left:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,s=e.left-t.collisionPosition.marginLeft,c=r-s,l=s+t.collisionWidth-o-r;t.collisionWidth>o?c>0&&0>=l?(n=e.left+c+t.collisionWidth-o-r,e.left+=c-n):e.left=l>0&&0>=c?r:c>l?r+o-t.collisionWidth:r:c>0?e.left+=c:l>0?e.left-=l:e.left=a(e.left-s,e.left)},top:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollTop:i.offset.top,o=t.within.height,s=e.top-t.collisionPosition.marginTop,c=r-s,l=s+t.collisionHeight-o-r;t.collisionHeight>o?c>0&&0>=l?(n=e.top+c+t.collisionHeight-o-r,e.top+=c-n):e.top=l>0&&0>=c?r:c>l?r+o-t.collisionHeight:r:c>0?e.top+=c:l>0?e.top-=l:e.top=a(e.top-s,e.top)}},flip:{left:function(e,t){var n,i,r=t.within,o=r.offset.left+r.scrollLeft,a=r.width,c=r.isWindow?r.scrollLeft:r.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-c,d=l+t.collisionWidth-a-c,f="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,h="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];0>u?(n=e.left+f+h+p+t.collisionWidth-a-o,(0>n||s(u)>n)&&(e.left+=f+h+p)):d>0&&(i=e.left-t.collisionPosition.marginLeft+f+h+p-c,(i>0||d>s(i))&&(e.left+=f+h+p))},top:function(e,t){var n,i,r=t.within,o=r.offset.top+r.scrollTop,a=r.height,c=r.isWindow?r.scrollTop:r.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-c,d=l+t.collisionHeight-a-c,f="top"===t.my[1],h=f?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(i=e.top+h+p+m+t.collisionHeight-a-o,e.top+h+p+m>u&&(0>i||s(u)>i)&&(e.top+=h+p+m)):d>0&&(n=e.top-t.collisionPosition.marginTop+h+p+m-c,e.top+h+p+m>d&&(n>0||d>s(n))&&(e.top+=h+p+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,i,r,o,a=document.getElementsByTagName("body")[0],s=document.createElement("div");t=document.createElement(a?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in i)t.style[o]=i[o];t.appendChild(s),n=a||document.documentElement,n.insertBefore(t,n.firstChild),s.style.cssText="position: absolute; left: 10.7432222px;",r=e(s).offset().left,e.support.offsetFractions=r>10&&11>r,t.innerHTML="",n.removeChild(t)}()}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",t,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n,i=this,r=!1,o=!1;for(e.ui.ddmanager&&!this.options.dropBehaviour&&(o=e.ui.ddmanager.drop(this,t)),this.dropped&&(o=this.dropped,this.dropped=!1),n=this.element[0];n&&(n=n.parentNode);)n===document&&(r=!0);return r||"original"!==this.options.helper?("invalid"===this.options.revert&&!o||"valid"===this.options.revert&&o||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,o)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options;if("parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=["document"===r.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"===r.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"===r.containment?0:e(window).scrollLeft())+e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"===r.containment?0:e(window).scrollTop())+(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||r.containment.constructor===Array)r.containment.constructor===Array&&(this.containment=r.containment);else{if(n=e(r.containment),i=n[0],!i)return;t="hidden"!==e(i).css("overflow"),this.containment=[(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0),(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderRightWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderBottomWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);
return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i}},_generatePosition:function(t){var n,i,r,o,a=this.options,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,c=/(html|body)/i.test(s[0].tagName),l=t.pageX,u=t.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(u=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(u=n[3]+this.offset.click.top)),a.grid&&(r=a.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,u=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-a.grid[1]:r+a.grid[1]:r,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-a.grid[0]:o+a.grid[0]:o)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():c?0:s.scrollTop()),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():c?0:s.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var i=e(this).data("ui-draggable"),r=i.options,o=e.extend({},n,{item:i.element});i.sortables=[],e(r.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,o))})},stop:function(t,n){var i=e(this).data("ui-draggable"),r=e.extend({},n,{item:i.element});e.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,r))})},drag:function(t,n){var i=e(this).data("ui-draggable"),r=this;e.each(i.sortables,function(){var o=!1,a=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==a&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(a.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(r).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",t),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",t),i.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var i=e(n.helper),r=e(this).data("ui-draggable").options;i.css("opacity")&&(r._opacity=i.css("opacity")),i.css("opacity",r.opacity)},stop:function(t,n){var i=e(this).data("ui-draggable").options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),i=n.options,r=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-e(document).scrollTop()<i.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-e(document).scrollLeft()<i.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed)))),r!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=e(this),i=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})})},drag:function(t,n){var i,r,o,a,s,c,l,u,d,f,h=e(this).data("ui-draggable"),p=h.options,m=p.snapTolerance,g=n.offset.left,v=g+h.helperProportions.width,y=n.offset.top,b=y+h.helperProportions.height;for(d=h.snapElements.length-1;d>=0;d--)s=h.snapElements[d].left,c=s+h.snapElements[d].width,l=h.snapElements[d].top,u=l+h.snapElements[d].height,g>s-m&&c+m>g&&y>l-m&&u+m>y||g>s-m&&c+m>g&&b>l-m&&u+m>b||v>s-m&&c+m>v&&y>l-m&&u+m>y||v>s-m&&c+m>v&&b>l-m&&u+m>b?("inner"!==p.snapMode&&(i=m>=Math.abs(l-b),r=m>=Math.abs(u-y),o=m>=Math.abs(s-v),a=m>=Math.abs(c-g),i&&(n.position.top=h._convertPositionTo("relative",{top:l-h.helperProportions.height,left:0}).top-h.margins.top),r&&(n.position.top=h._convertPositionTo("relative",{top:u,left:0}).top-h.margins.top),o&&(n.position.left=h._convertPositionTo("relative",{top:0,left:s-h.helperProportions.width}).left-h.margins.left),a&&(n.position.left=h._convertPositionTo("relative",{top:0,left:c}).left-h.margins.left)),f=i||r||o||a,"outer"!==p.snapMode&&(i=m>=Math.abs(l-y),r=m>=Math.abs(u-b),o=m>=Math.abs(s-g),a=m>=Math.abs(c-v),i&&(n.position.top=h._convertPositionTo("relative",{top:l,left:0}).top-h.margins.top),r&&(n.position.top=h._convertPositionTo("relative",{top:u-h.helperProportions.height,left:0}).top-h.margins.top),o&&(n.position.left=h._convertPositionTo("relative",{top:0,left:s}).left-h.margins.left),a&&(n.position.left=h._convertPositionTo("relative",{top:0,left:c-h.helperProportions.width}).left-h.margins.left)),!h.snapElements[d].snapping&&(i||r||o||a||f)&&h.options.snap.snap&&h.options.snap.snap.call(h.element,t,e.extend(h._uiHash(),{snapItem:h.snapElements[d].item})),h.snapElements[d].snapping=i||r||o||a||f):(h.snapElements[d].snapping&&h.options.snap.release&&h.options.snap.release.call(h.element,t,e.extend(h._uiHash(),{snapItem:h.snapElements[d].item})),h.snapElements[d].snapping=!1)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=this.data("ui-draggable").options,i=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});i.length&&(t=parseInt(e(i[0]).css("zIndex"),10)||0,e(i).each(function(n){e(this).css("zIndex",t+n)}),this.css("zIndex",t+i.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var i=e(n.helper),r=e(this).data("ui-draggable").options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(t,n){var i=e(this).data("ui-draggable").options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}})}(jQuery),function(e){function t(e){return parseInt(e,10)||0}function n(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,i,r,o,a=this,s=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!s.aspectRatio,aspectRatio:s.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:s.helper||s.ghost||s.animate?s.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=s.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},n=0;t.length>n;n++)i=e.trim(t[n]),o="ui-resizable-"+i,r=e("<div class='ui-resizable-handle "+o+"'></div>"),r.css({zIndex:s.zIndex}),"se"===i&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[i]=".ui-resizable-"+i,this.element.append(r);this._renderAxis=function(t){var n,i,r,o;t=t||this.element;for(n in this.handles)this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(i=e(this.handles[n],this.element),o=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),r=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(r,o),this._proportionallyResize()),e(this.handles[n]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=r&&r[1]?r[1]:"se")}),s.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){s.disabled||(e(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){s.disabled||a.resizing||(e(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,i,r=!1;for(n in this.handles)i=e(this.handles[n])[0],(i===t.target||e.contains(i,t.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(n){var i,r,o,a=this.options,s=this.element.position(),c=this.element;return this.resizing=!0,/absolute/.test(c.css("position"))?c.css({position:"absolute",top:c.css("top"),left:c.css("left")}):c.is(".ui-draggable")&&c.css({position:"absolute",top:s.top,left:s.left}),this._renderProxy(),i=t(this.helper.css("left")),r=t(this.helper.css("top")),a.containment&&(i+=e(a.containment).scrollLeft()||0,r+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:r},this.size=this._helper?{width:c.outerWidth(),height:c.outerHeight()}:{width:c.width(),height:c.height()},this.originalSize=this._helper?{width:c.outerWidth(),height:c.outerHeight()}:{width:c.width(),height:c.height()},this.originalPosition={left:i,top:r},this.sizeDiff={width:c.outerWidth()-c.width(),height:c.outerHeight()-c.height()},this.originalMousePosition={left:n.pageX,top:n.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),c.addClass("ui-resizable-resizing"),this._propagate("start",n),!0},_mouseDrag:function(t){var n,i=this.helper,r={},o=this.originalMousePosition,a=this.axis,s=this.position.top,c=this.position.left,l=this.size.width,u=this.size.height,d=t.pageX-o.left||0,f=t.pageY-o.top||0,h=this._change[a];return h?(n=h.apply(this,[t,d,f]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==s&&(r.top=this.position.top+"px"),this.position.left!==c&&(r.left=this.position.left+"px"),this.size.width!==l&&(r.width=this.size.width+"px"),this.size.height!==u&&(r.height=this.size.height+"px"),i.css(r),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var n,i,r,o,a,s,c,l=this.options,u=this;return this._helper&&(n=this._proportionallyResizeElements,i=n.length&&/textarea/i.test(n[0].nodeName),r=i&&e.ui.hasScroll(n[0],"left")?0:u.sizeDiff.height,o=i?0:u.sizeDiff.width,a={width:u.helper.width()-o,height:u.helper.height()-r},s=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,c=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(e.extend(a,{top:c,left:s})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,i,r,o,a,s=this.options;a={minWidth:n(s.minWidth)?s.minWidth:0,maxWidth:n(s.maxWidth)?s.maxWidth:1/0,minHeight:n(s.minHeight)?s.minHeight:0,maxHeight:n(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,r=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,o=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),r>a.minHeight&&(a.minHeight=r),a.maxWidth>i&&(a.maxWidth=i),a.maxHeight>o&&(a.maxHeight=o)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),n(e.left)&&(this.position.left=e.left),n(e.top)&&(this.position.top=e.top),n(e.height)&&(this.size.height=e.height),n(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,r=this.axis;return n(e.height)?e.width=e.height*this.aspectRatio:n(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===r&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===r&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,r=n(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=n(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=n(e.width)&&t.minWidth&&t.minWidth>e.width,s=n(e.height)&&t.minHeight&&t.minHeight>e.height,c=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,u=/sw|nw|w/.test(i),d=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),s&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),a&&u&&(e.left=c-t.minWidth),r&&u&&(e.left=c-t.maxWidth),s&&d&&(e.top=l-t.minHeight),o&&d&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,n,i,r,o=this.helper||this.element;for(e=0;this._proportionallyResizeElements.length>e;e++){if(r=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],n=[r.css("borderTopWidth"),r.css("borderRightWidth"),r.css("borderBottomWidth"),r.css("borderLeftWidth")],i=[r.css("paddingTop"),r.css("paddingRight"),r.css("paddingBottom"),r.css("paddingLeft")],t=0;n.length>t;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(i[t],10)||0);r.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,i=this.originalPosition;return{left:i.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize,r=this.originalPosition;return{top:r.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),i=n.options,r=n._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),a=o&&e.ui.hasScroll(r[0],"left")?0:n.sizeDiff.height,s=o?0:n.sizeDiff.width,c={width:n.size.width-s,height:n.size.height-a},l=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,u=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(c,u&&l?{top:u,left:l}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};r&&r.length&&e(r[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var n,i,r,o,a,s,c,l=e(this).data("ui-resizable"),u=l.options,d=l.element,f=u.containment,h=f instanceof e?f.get(0):/parent/.test(f)?d.parent().get(0):f;h&&(l.containerElement=e(h),/document/.test(f)||f===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(n=e(h),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){i[e]=t(n.css("padding"+r))}),l.containerOffset=n.offset(),l.containerPosition=n.position(),l.containerSize={height:n.innerHeight()-i[3],width:n.innerWidth()-i[1]},r=l.containerOffset,o=l.containerSize.height,a=l.containerSize.width,s=e.ui.hasScroll(h,"left")?h.scrollWidth:a,c=e.ui.hasScroll(h)?h.scrollHeight:o,l.parentData={element:h,left:r.left,top:r.top,width:s,height:c}))},resize:function(t){var n,i,r,o,a=e(this).data("ui-resizable"),s=a.options,c=a.containerOffset,l=a.position,u=a._aspectRatio||t.shiftKey,d={top:0,left:0},f=a.containerElement;f[0]!==document&&/static/.test(f.css("position"))&&(d=c),l.left<(a._helper?c.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-c.left:a.position.left-d.left),u&&(a.size.height=a.size.width/a.aspectRatio),a.position.left=s.helper?c.left:0),l.top<(a._helper?c.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-c.top:a.position.top),u&&(a.size.width=a.size.height*a.aspectRatio),a.position.top=a._helper?c.top:0),a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top,n=Math.abs((a._helper?a.offset.left-d.left:a.offset.left-d.left)+a.sizeDiff.width),i=Math.abs((a._helper?a.offset.top-d.top:a.offset.top-c.top)+a.sizeDiff.height),r=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),r&&o&&(n-=a.parentData.left),n+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-n,u&&(a.size.height=a.size.width/a.aspectRatio)),i+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-i,u&&(a.size.width=a.size.height*a.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.containerOffset,r=t.containerPosition,o=t.containerElement,a=e(t.helper),s=a.offset(),c=a.outerWidth()-t.sizeDiff.width,l=a.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(o.css("position"))&&e(this).css({left:s.left-r.left-i.left,width:c,height:l}),t._helper&&!n.animate&&/static/.test(o.css("position"))&&e(this).css({left:s.left-r.left-i.left,width:c,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,i=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?i(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],i(n.alsoResize)):e.each(n.alsoResize,function(e){i(e)})},resize:function(t,n){var i=e(this).data("ui-resizable"),r=i.options,o=i.originalSize,a=i.originalPosition,s={height:i.size.height-o.height||0,width:i.size.width-o.width||0,top:i.position.top-a.top||0,left:i.position.left-a.left||0},c=function(t,i){e(t).each(function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),o={},a=i&&i.length?i:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var n=(r[t]||0)+(s[t]||0);n&&n>=0&&(o[t]=n||null)}),t.css(o)})};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?c(r.alsoResize):e.each(r.alsoResize,function(e,t){c(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.size,r=t.originalSize,o=t.originalPosition,a=t.axis,s="number"==typeof n.grid?[n.grid,n.grid]:n.grid,c=s[0]||1,l=s[1]||1,u=Math.round((i.width-r.width)/c)*c,d=Math.round((i.height-r.height)/l)*l,f=r.width+u,h=r.height+d,p=n.maxWidth&&f>n.maxWidth,m=n.maxHeight&&h>n.maxHeight,g=n.minWidth&&n.minWidth>f,v=n.minHeight&&n.minHeight>h;n.grid=s,g&&(f+=c),v&&(h+=l),p&&(f-=c),m&&(h-=l),/^(se|s|e)$/.test(a)?(t.size.width=f,t.size.height=h):/^(ne)$/.test(a)?(t.size.width=f,t.size.height=h,t.position.top=o.top-d):/^(sw)$/.test(a)?(t.size.width=f,t.size.height=h,t.position.left=o.left-u):(t.size.width=f,t.size.height=h,t.position.top=o.top-d,t.position.left=o.left-u)}})}(jQuery),function(e){function t(e,t,n){return e>t&&t+n>e}function n(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||n(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var i=null,r=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,o.widgetName+"-item")===o?(i=e(this),!1):void 0}),e.data(t.target,o.widgetName+"-item")===o&&(i=e(t.target)),i?!this.options.handle||n||(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(r=!0)}),r)?(this.currentItem=i,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,n,i){var r,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=e("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,r,o,a=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(t.pageY-e(document).scrollTop()<a.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-a.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<a.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+a.scrollSpeed)),t.pageX-e(document).scrollLeft()<a.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-a.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<a.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+a.scrollSpeed))),s!==!1&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],r=i.item[0],o=this._intersectsWithPointer(i),o&&i.instance===this.currentContainer&&r!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==r&&!e.contains(this.placeholder[0],r)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],r):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;
this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,r=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=e.left,a=o+e.width,s=e.top,c=s+e.height,l=this.offset.click.top,u=this.offset.click.left,d=i+l>s&&c>i+l&&t+u>o&&a>t+u;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?d:t+this.helperProportions.width/2>o&&a>n-this.helperProportions.width/2&&i+this.helperProportions.height/2>s&&c>r-this.helperProportions.height/2},_intersectsWithPointer:function(e){var n="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=n&&i,o=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return r?this.floating?a&&"right"===a||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(e){var n=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:r&&("down"===r&&n||"up"===r&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,i,r,o,a=[],s=[],c=this._connectWith();if(c&&t)for(n=c.length-1;n>=0;n--)for(r=e(c[n]),i=r.length-1;i>=0;i--)o=e.data(r[i],this.widgetFullName),o&&o!==this&&!o.options.disabled&&s.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(s.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=s.length-1;n>=0;n--)s[n][0].each(function(){a.push(this)});return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;t.length>n;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,r,o,a,s,c,l,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(n=f.length-1;n>=0;n--)for(r=e(f[n]),i=r.length-1;i>=0;i--)o=e.data(r[i],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(d.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(n=d.length-1;n>=0;n--)for(a=d[n][1],s=d[n][0],i=0,l=s.length;l>i;i++)c=e(s[i]),c.data(this.widgetName+"-item",a),u.push({item:c,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,r,o;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=r.outerWidth(),i.height=r.outerHeight()),o=r.offset(),i.left=o.left,i.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)o=this.containers[n].element.offset(),this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),r=e(t.document[0].createElement(i)).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===i?r.append("<td colspan='99'>&#160;</td>"):"img"===i&&r.attr("src",t.currentItem.attr("src")),n||r.css("visibility","hidden"),r},update:function(e,r){(!n||i.forcePlaceholderSize)&&(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(i){var r,o,a,s,c,l,u,d,f,h,p=null,m=null;for(r=this.containers.length-1;r>=0;r--)if(!e.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(p&&e.contains(this.containers[r].element[0],p.element[0]))continue;p=this.containers[r],m=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",i,this._uiHash(this)),this.containers[r].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",i,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(a=1e4,s=null,h=p.floating||n(this.currentItem),c=h?"left":"top",l=h?"width":"height",u=this.positionAbs[c]+this.offset.click[c],o=this.items.length-1;o>=0;o--)e.contains(this.containers[m].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!h||t(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(d=this.items[o].item.offset()[c],f=!1,Math.abs(d-u)>Math.abs(d+this.items[o][l]-u)&&(f=!0,d+=this.items[o][l]),a>Math.abs(d-u)&&(a=Math.abs(d-u),s=this.items[o],this.direction=f?"up":"down"));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;s?this._rearrange(i,s,null,!0):this._rearrange(i,null,this.containers[m].element,!0),this._trigger("change",i,this._uiHash()),this.containers[m]._trigger("change",i,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",i,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(t=e(r.containment)[0],n=e(r.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i}},_generatePosition:function(t){var n,i,r=this.options,o=t.pageX,a=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,c=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),r.grid&&(n=this.originalPageY+Math.round((a-this.originalPageY)/r.grid[1])*r.grid[1],a=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-r.grid[1]:n+r.grid[1]:n,i=this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0],o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():c?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():c?0:s.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){this.reverting=!1;var n,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),n=0;i.length>n;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(n=0;i.length>n;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),function(e,t){var n="ui-effects-";e.effects={effect:{}},function(e,t){function n(e,t,n){var i=d[t.type]||{};return null==e?n||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:e>i.max?i.max:e)}function i(n){var i=l(),r=i._rgba=[];return n=n.toLowerCase(),p(c,function(e,o){var a,s=o.re.exec(n),c=s&&o.parse(s),l=o.space||"rgba";return c?(a=i[l](c),i[u[l].cache]=a[u[l].cache],r=i._rgba=a._rgba,!1):t}),r.length?("0,0,0,0"===r.join()&&e.extend(r,o.transparent),i):o[n]}function r(e,t,n){return n=(n+1)%1,1>6*n?e+6*(t-e)*n:1>2*n?t:2>3*n?e+6*(t-e)*(2/3-n):e}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",s=/^([\-+])=\s*(\d+\.?\d*)/,c=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,n,i,r){return new e.Color.fn.parse(t,n,i,r)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},f=l.support={},h=e("<p>")[0],p=e.each;h.style.cssText="background-color:rgba(1,1,1,.5)",f.rgba=h.style.backgroundColor.indexOf("rgba")>-1,p(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(r,a,s,c){if(r===t)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=e(r).css(a),a=t);var d=this,f=e.type(r),h=this._rgba=[];return a!==t&&(r=[r,a,s,c],f="array"),"string"===f?this.parse(i(r)||o._default):"array"===f?(p(u.rgba.props,function(e,t){h[t.idx]=n(r[t.idx],t)}),this):"object"===f?(r instanceof l?p(u,function(e,t){r[t.cache]&&(d[t.cache]=r[t.cache].slice())}):p(u,function(t,i){var o=i.cache;p(i.props,function(e,t){if(!d[o]&&i.to){if("alpha"===e||null==r[e])return;d[o]=i.to(d._rgba)}d[o][t.idx]=n(r[e],t,!0)}),d[o]&&0>e.inArray(null,d[o].slice(0,3))&&(d[o][3]=1,i.from&&(d._rgba=i.from(d[o])))}),this):t},is:function(e){var n=l(e),i=!0,r=this;return p(u,function(e,o){var a,s=n[o.cache];return s&&(a=r[o.cache]||o.to&&o.to(r._rgba)||[],p(o.props,function(e,n){return null!=s[n.idx]?i=s[n.idx]===a[n.idx]:t})),i}),i},_space:function(){var e=[],t=this;return p(u,function(n,i){t[i.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var i=l(e),r=i._space(),o=u[r],a=0===this.alpha()?l("transparent"):this,s=a[o.cache]||o.to(a._rgba),c=s.slice();return i=i[o.cache],p(o.props,function(e,r){var o=r.idx,a=s[o],l=i[o],u=d[r.type]||{};null!==l&&(null===a?c[o]=l:(u.mod&&(l-a>u.mod/2?a+=u.mod:a-l>u.mod/2&&(a-=u.mod)),c[o]=n((l-a)*t+a,r)))}),this[r](c)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),r=l(t)._rgba;return l(e.map(n,function(e,t){return(1-i)*r[t]+i*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),i=n.pop();return t&&n.push(~~(255*i)),"#"+e.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,i=e[0]/255,r=e[1]/255,o=e[2]/255,a=e[3],s=Math.max(i,r,o),c=Math.min(i,r,o),l=s-c,u=s+c,d=.5*u;return t=c===s?0:i===s?60*(r-o)/l+360:r===s?60*(o-i)/l+120:60*(i-r)/l+240,n=0===l?0:.5>=d?l/u:l/(2-u),[Math.round(t)%360,n,d,null==a?1:a]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],o=e[3],a=.5>=i?i*(1+n):i+n-i*n,s=2*i-a;return[Math.round(255*r(s,a,t+1/3)),Math.round(255*r(s,a,t)),Math.round(255*r(s,a,t-1/3)),o]},p(u,function(i,r){var o=r.props,a=r.cache,c=r.to,u=r.from;l.fn[i]=function(i){if(c&&!this[a]&&(this[a]=c(this._rgba)),i===t)return this[a].slice();var r,s=e.type(i),d="array"===s||"object"===s?i:arguments,f=this[a].slice();return p(o,function(e,t){var i=d["object"===s?e:t.idx];null==i&&(i=f[t.idx]),f[t.idx]=n(i,t)}),u?(r=l(u(f)),r[a]=f,r):l(f)},p(o,function(t,n){l.fn[t]||(l.fn[t]=function(r){var o,a=e.type(r),c="alpha"===t?this._hsla?"hsla":"rgba":i,l=this[c](),u=l[n.idx];return"undefined"===a?u:("function"===a&&(r=r.call(this,u),a=e.type(r)),null==r&&n.empty?this:("string"===a&&(o=s.exec(r),o&&(r=u+parseFloat(o[2])*("+"===o[1]?1:-1))),l[n.idx]=r,this[c](l)))})})}),l.hook=function(t){var n=t.split(" ");p(n,function(t,n){e.cssHooks[n]={set:function(t,r){var o,a,s="";if("transparent"!==r&&("string"!==e.type(r)||(o=i(r)))){if(r=l(o||r),!f.rgba&&1!==r._rgba[3]){for(a="backgroundColor"===n?t.parentNode:t;(""===s||"transparent"===s)&&a&&a.style;)try{s=e.css(a,"backgroundColor"),a=a.parentNode}catch(c){}r=r.blend(s&&"transparent"!==s?s:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(c){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=l(t.elem,n),t.end=l(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook(a),e.cssHooks.borderColor={expand:function(e){var t={};return p(["Top","Right","Bottom","Left"],function(n,i){t["border"+i+"Color"]=e}),t}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function n(t){var n,i,r=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(r&&r.length&&r[0]&&r[r[0]])for(i=r.length;i--;)n=r[i],"string"==typeof r[n]&&(o[e.camelCase(n)]=r[n]);else for(n in r)"string"==typeof r[n]&&(o[n]=r[n]);return o}function i(t,n){var i,r,a={};for(i in n)r=n[i],t[i]!==r&&(o[i]||(e.fx.step[i]||!isNaN(parseFloat(r)))&&(a[i]=r));return a}var r=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,o,a,s){var c=e.speed(o,a,s);return this.queue(function(){var o,a=e(this),s=a.attr("class")||"",l=c.children?a.find("*").addBack():a;l=l.map(function(){var t=e(this);return{el:t,start:n(this)}}),o=function(){e.each(r,function(e,n){t[n]&&a[n+"Class"](t[n])})},o(),l=l.map(function(){return this.end=n(this.el[0]),this.diff=i(this.start,this.end),this}),a.attr("class",s),l=l.map(function(){var t=this,n=e.Deferred(),i=e.extend({},c,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,i),n.promise()}),e.when.apply(e,l.get()).done(function(){o(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),c.complete.call(a[0])})})},e.fn.extend({addClass:function(t){return function(n,i,r,o){return i?e.effects.animateClass.call(this,{add:n},i,r,o):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,i,r,o){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},i,r,o):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(n){return function(i,r,o,a,s){return"boolean"==typeof r||r===t?o?e.effects.animateClass.call(this,r?{add:i}:{remove:i},o,a,s):n.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},r,o,a)}}(e.fn.toggleClass),switchClass:function(t,n,i,r,o){return e.effects.animateClass.call(this,{add:n,remove:t},i,r,o)}})}(),function(){function i(t,n,i,r){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(r=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(r=i,i=n,n={}),e.isFunction(i)&&(r=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=r||n.complete,t}function r(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.10.2",save:function(e,t){for(var i=0;t.length>i;i++)null!==t[i]&&e.data(n+t[i],e[0].style[t[i]])},restore:function(e,i){var r,o;for(o=0;i.length>o;o++)null!==i[o]&&(r=e.data(n+i[o]),r===t&&(r=""),e.css(i[o],r))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return t.wrap(i),(t[0]===o||e.contains(t[0],o))&&e(o).focus(),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(r),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,i,r){return r=r||{},e.each(n,function(e,n){var o=t.cssUnit(n);o[0]>0&&(r[n]=o[0]*i+o[1])}),r}}),e.fn.extend({effect:function(){function t(t){function i(){e.isFunction(o)&&o.call(r[0]),e.isFunction(t)&&t()}var r=e(this),o=n.complete,s=n.mode;(r.is(":hidden")?"hide"===s:"show"===s)?(r[s](),i()):a.call(r[0],n,i)}var n=i.apply(this,arguments),r=n.mode,o=n.queue,a=e.effects.effect[n.effect];return e.fx.off||!a?r?this[r](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):o===!1?this.each(t):this.queue(o||"fx",t)},show:function(e){return function(t){if(r(t))return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(t){if(r(t))return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(t){if(r(t)||"boolean"==typeof t)return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])}),i}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;((t=Math.pow(2,--n))-1)/11>e;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}()}(jQuery),function(e){e.effects.effect.drop=function(t,n){var i,r=e(this),o=["position","top","bottom","left","right","opacity","height","width"],a=e.effects.setMode(r,t.mode||"hide"),s="show"===a,c=t.direction||"left",l="up"===c||"down"===c?"top":"left",u="up"===c||"left"===c?"pos":"neg",d={opacity:s?1:0};e.effects.save(r,o),r.show(),e.effects.createWrapper(r),i=t.distance||r["top"===l?"outerHeight":"outerWidth"](!0)/2,s&&r.css("opacity",0).css(l,"pos"===u?-i:i),d[l]=(s?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+i,r.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e){e.effects.effect.puff=function(t,n){var i=e(this),r=e.effects.setMode(i,t.mode||"hide"),o="hide"===r,a=parseInt(t.percent,10)||150,s=a/100,c={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:r,complete:n,percent:o?a:100,from:o?c:{height:c.height*s,width:c.width*s,outerHeight:c.outerHeight*s,outerWidth:c.outerWidth*s}}),i.effect(t)},e.effects.effect.scale=function(t,n){var i=e(this),r=e.extend(!0,{},t),o=e.effects.setMode(i,t.mode||"effect"),a=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===o?0:100),s=t.direction||"both",c=t.origin,l={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()},u={y:"horizontal"!==s?a/100:1,x:"vertical"!==s?a/100:1};
r.effect="size",r.queue=!1,r.complete=n,"effect"!==o&&(r.origin=c||["middle","center"],r.restore=!0),r.from=t.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:l),r.to={height:l.height*u.y,width:l.width*u.x,outerHeight:l.outerHeight*u.y,outerWidth:l.outerWidth*u.x},r.fade&&("show"===o&&(r.from.opacity=0,r.to.opacity=1),"hide"===o&&(r.from.opacity=1,r.to.opacity=0)),i.effect(r)},e.effects.effect.size=function(t,n){var i,r,o,a=e(this),s=["position","top","bottom","left","right","width","height","overflow","opacity"],c=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],u=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],f=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],h=e.effects.setMode(a,t.mode||"effect"),p=t.restore||"effect"!==h,m=t.scale||"both",g=t.origin||["middle","center"],v=a.css("position"),y=p?s:c,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===h&&a.show(),i={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},"toggle"===t.mode&&"show"===h?(a.from=t.to||b,a.to=t.from||i):(a.from=t.from||("show"===h?b:i),a.to=t.to||("hide"===h?b:i)),o={from:{y:a.from.height/i.height,x:a.from.width/i.width},to:{y:a.to.height/i.height,x:a.to.width/i.width}},("box"===m||"both"===m)&&(o.from.y!==o.to.y&&(y=y.concat(d),a.from=e.effects.setTransition(a,d,o.from.y,a.from),a.to=e.effects.setTransition(a,d,o.to.y,a.to)),o.from.x!==o.to.x&&(y=y.concat(f),a.from=e.effects.setTransition(a,f,o.from.x,a.from),a.to=e.effects.setTransition(a,f,o.to.x,a.to))),("content"===m||"both"===m)&&o.from.y!==o.to.y&&(y=y.concat(u).concat(l),a.from=e.effects.setTransition(a,u,o.from.y,a.from),a.to=e.effects.setTransition(a,u,o.to.y,a.to)),e.effects.save(a,y),a.show(),e.effects.createWrapper(a),a.css("overflow","hidden").css(a.from),g&&(r=e.effects.getBaseline(g,i),a.from.top=(i.outerHeight-a.outerHeight())*r.y,a.from.left=(i.outerWidth-a.outerWidth())*r.x,a.to.top=(i.outerHeight-a.to.outerHeight)*r.y,a.to.left=(i.outerWidth-a.to.outerWidth)*r.x),a.css(a.from),("content"===m||"both"===m)&&(d=d.concat(["marginTop","marginBottom"]).concat(u),f=f.concat(["marginLeft","marginRight"]),l=s.concat(d).concat(f),a.find("*[width]").each(function(){var n=e(this),i={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};p&&e.effects.save(n,l),n.from={height:i.height*o.from.y,width:i.width*o.from.x,outerHeight:i.outerHeight*o.from.y,outerWidth:i.outerWidth*o.from.x},n.to={height:i.height*o.to.y,width:i.width*o.to.x,outerHeight:i.height*o.to.y,outerWidth:i.width*o.to.x},o.from.y!==o.to.y&&(n.from=e.effects.setTransition(n,d,o.from.y,n.from),n.to=e.effects.setTransition(n,d,o.to.y,n.to)),o.from.x!==o.to.x&&(n.from=e.effects.setTransition(n,f,o.from.x,n.from),n.to=e.effects.setTransition(n,f,o.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){p&&e.effects.restore(n,l)})})),a.animate(a.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity),"hide"===h&&a.hide(),e.effects.restore(a,y),p||("static"===v?a.css({position:"relative",top:a.to.top,left:a.to.left}):e.each(["top","left"],function(e,t){a.css(t,function(t,n){var i=parseInt(n,10),r=e?a.to.left:a.to.top;return"auto"===n?r+"px":i+r+"px"})})),e.effects.removeWrapper(a),n()}})}}(jQuery),function(e){e.effects.effect.slide=function(t,n){var i,r=e(this),o=["position","top","bottom","left","right","width","height"],a=e.effects.setMode(r,t.mode||"show"),s="show"===a,c=t.direction||"left",l="up"===c||"down"===c?"top":"left",u="up"===c||"left"===c,d={};e.effects.save(r,o),r.show(),i=t.distance||r["top"===l?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),s&&r.css(l,u?isNaN(i)?"-"+i:-i:i),d[l]=(s?u?"+=":"-=":u?"-=":"+=")+i,r.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),n()}})}}(jQuery)}(),function(){!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,i=n.data(),r=n.is("input")?"val":"html";e+="Text",i.resetText||n.data("resetText",n[r]()),n[r](i[e]||this.options[e]),setTimeout(function(){"loadingText"==e?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var i=e(this),r=i.data("button"),o="object"==typeof n&&n;r||i.data("button",r=new t(this,o)),"toggle"==n?r.toggle():n&&r.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery)}(),function(){+function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=e.Event("show.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var i=n.data("bs.collapse");if(i&&i.transitioning)return;n.collapse("hide"),i||n.data("bs.collapse",null)}var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return o.call(this);var a=e.camelCase(["scroll",r].join("-"));this.$element.one(e.support.transition.end,e.proxy(o,this)).emulateTransitionEnd(350)[r](this.$element[0][a])}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?(this.$element[n](0).one(e.support.transition.end,e.proxy(i,this)).emulateTransitionEnd(350),void 0):i.call(this)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var i=e(this),r=i.data("bs.collapse"),o=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n);!r&&o.toggle&&"show"==n&&(n=!n),r||i.data("bs.collapse",r=new t(this,o)),"string"==typeof n&&r[n]()})},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(t){var n,i=e(this),r=i.attr("data-target")||t.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),o=e(r),a=o.data("bs.collapse"),s=a?"toggle":i.data(),c=i.attr("data-parent"),l=c&&e(c);a&&a.transitioning||(l&&l.find('[data-toggle=collapse][data-parent="'+c+'"]').not(i).addClass("collapsed"),i[o.hasClass("in")?"addClass":"removeClass"]("collapsed")),o.collapse(s)})}(jQuery)}(),function(){!function(e){function t(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function n(e,t,n){return t<e.length?e:Array(t-e.length+1).join(n||" ")+e}function i(e,t,n,i,r,o){return t&&n?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><ul><li'+(o?' class="collapse in"':"")+'><div class="datepicker">'+h.template+'</div></li><li class="picker-switch accordion-toggle"><a><i class="'+e+'"></i></a></li><li'+(o?' class="collapse"':"")+'><div class="timepicker">'+p.getTemplate(i,r)+"</div></li></ul></div>":n?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+p.getTemplate(i,r)+"</div></div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+h.template+"</div></div>"}function r(){return new Date(Date.UTC.apply(Date,arguments))}var o=(void 0!=window.orientation,function(e,t){this.id=a++,this.init(e,t)});o.prototype={constructor:o,init:function(t,n){var r;if(!n.pickTime&&!n.pickDate)throw new Error("Must choose at least one picker");if(this.options=n,this.$element=e(t),this.language=n.language in s?n.language:"en",this.pickDate=n.pickDate,this.pickTime=n.pickTime,this.isInput=this.$element.is("input"),this.component=!1,(this.$element.find(".input-append")||this.$element.find(".input-prepend"))&&(this.component=this.$element.find(".add-on")),this.format=n.format,this.format||(this.format=this.isInput?this.$element.data("format"):this.$element.find("input").data("format"),this.format||(this.format="MM/dd/yyyy")),this._compileFormat(),this.component&&(r=this.component.find("i")),this.pickTime&&(r&&r.length&&(this.timeIcon=r.data("time-icon")),this.timeIcon||(this.timeIcon="icon-time"),r.addClass(this.timeIcon)),this.pickDate&&(r&&r.length&&(this.dateIcon=r.data("date-icon")),this.dateIcon||(this.dateIcon="icon-calendar"),r.removeClass(this.timeIcon),r.addClass(this.dateIcon)),this.widget=e(i(this.timeIcon,n.pickDate,n.pickTime,n.pick12HourFormat,n.pickSeconds,n.collapse)).appendTo("body"),this.minViewMode=n.minViewMode||this.$element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=n.viewMode||this.$element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=n.weekStart||this.$element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.setStartDate(n.startDate||this.$element.data("date-startdate")),this.setEndDate(n.endDate||this.$element.data("date-enddate")),this.fillDow(),this.fillMonths(),this.fillHours(),this.fillMinutes(),this.fillSeconds(),this.update(),this.showMode(),this._attachDatePickerEvents()},show:function(e){this.widget.show(),this.height=this.component?this.component.outerHeight():this.$element.outerHeight(),this.place(),this.$element.trigger({type:"show",date:this._date}),this._attachDatePickerGlobalEvents(),e&&(e.stopPropagation(),e.preventDefault())},disable:function(){this.$element.find("input").prop("disabled",!0),this._detachDatePickerEvents()},enable:function(){this.$element.find("input").prop("disabled",!1),this._attachDatePickerEvents()},hide:function(){for(var e=this.widget.find(".collapse"),t=0;t<e.length;t++){var n=e.eq(t).data("collapse");if(n&&n.transitioning)return}this.widget.hide(),this.viewMode=this.startViewMode,this.showMode(),this.set(),this.$element.trigger({type:"hide",date:this._date}),this._detachDatePickerGlobalEvents()},set:function(){var e="";if(this._unset||(e=this.formatDate(this._date)),this.isInput)this.$element.val(e),this._resetMaskPos(this.$element);else{if(this.component){var t=this.$element.find("input");t.val(e),this._resetMaskPos(t)}this.$element.data("date",e)}},setValue:function(e){this._unset=e?!1:!0,"string"==typeof e?this._date=this.parseDate(e):e&&(this._date=new Date(e)),this.set(),this.viewDate=r(this._date.getUTCFullYear(),this._date.getUTCMonth(),1,0,0,0,0),this.fillDate(),this.fillTime()},getDate:function(){return this._unset?null:new Date(this._date.valueOf())},setDate:function(e){e?this.setValue(e.valueOf()):this.setValue(null)},setStartDate:function(e){e instanceof Date?this.startDate=e:"string"==typeof e?(this.startDate=new r(e),this.startDate.getUTCFullYear()||(this.startDate=-1/0)):this.startDate=-1/0,this.viewDate&&this.update()},setEndDate:function(e){e instanceof Date?this.endDate=e:"string"==typeof e?(this.endDate=new r(e),this.endDate.getUTCFullYear()||(this.endDate=1/0)):this.endDate=1/0,this.viewDate&&this.update()},getLocalDate:function(){if(this._unset)return null;var e=this._date;return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())},setLocalDate:function(e){e?this.setValue(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())):this.setValue(null)},place:function(){var t="absolute",n=this.component?this.component.offset():this.$element.offset();this.width=this.component?this.component.outerWidth():this.$element.outerWidth(),n.top=n.top+this.height;var i=e(window);void 0!=this.options.width&&this.widget.width(this.options.width),"left"==this.options.orientation&&(this.widget.addClass("left-oriented"),n.left=n.left-this.widget.width()+20),this._isInFixed()&&(t="fixed",n.top-=i.scrollTop(),n.left-=i.scrollLeft()),i.width()<n.left+this.widget.outerWidth()?(n.right=i.width()-n.left-this.width,n.left="auto",this.widget.addClass("pull-right")):(n.right="auto",this.widget.removeClass("pull-right")),this.widget.css({position:t,top:n.top,left:n.left,right:n.right})},notifyChange:function(){this.$element.trigger({type:"changeDate",date:this.getDate(),localDate:this.getLocalDate()})},update:function(e){var t=e;if(!t&&(t=this.isInput?this.$element.val():this.$element.find("input").val(),t&&(this._date=this.parseDate(t)),!this._date)){var n=new Date;this._date=r(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())}this.viewDate=r(this._date.getUTCFullYear(),this._date.getUTCMonth(),1,0,0,0,0),this.fillDate(),this.fillTime()},fillDow:function(){for(var t=this.weekStart,n=e("<tr>");t<this.weekStart+7;)n.append('<th class="dow">'+s[this.language].daysMin[t++%7]+"</th>");this.widget.find(".datepicker-days thead").append(n)},fillMonths:function(){for(var e="",t=0;12>t;)e+='<span class="month">'+s[this.language].monthsShort[t++]+"</span>";this.widget.find(".datepicker-months td").append(e)},fillDate:function(){var t=this.viewDate.getUTCFullYear(),n=this.viewDate.getUTCMonth(),i=r(this._date.getUTCFullYear(),this._date.getUTCMonth(),this._date.getUTCDate(),0,0,0,0),o="object"==typeof this.startDate?this.startDate.getUTCFullYear():-1/0,a="object"==typeof this.startDate?this.startDate.getUTCMonth():-1,c="object"==typeof this.endDate?this.endDate.getUTCFullYear():1/0,l="object"==typeof this.endDate?this.endDate.getUTCMonth():12;this.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-days th:eq(1)").text(s[this.language].months[n]+" "+t);var u=r(t,n-1,28,0,0,0,0),d=h.getDaysInMonth(u.getUTCFullYear(),u.getUTCMonth());u.setUTCDate(d),u.setUTCDate(d-(u.getUTCDay()-this.weekStart+7)%7),(t==o&&a>=n||o>t)&&this.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(t==c&&n>=l||t>c)&&this.widget.find(".datepicker-days th:eq(2)").addClass("disabled");var f=new Date(u.valueOf());f.setUTCDate(f.getUTCDate()+42),f=f.valueOf();for(var p,m,g=[];u.valueOf()<f;)u.getUTCDay()===this.weekStart&&(p=e("<tr>"),g.push(p)),m="",u.getUTCFullYear()<t||u.getUTCFullYear()==t&&u.getUTCMonth()<n?m+=" old":(u.getUTCFullYear()>t||u.getUTCFullYear()==t&&u.getUTCMonth()>n)&&(m+=" new"),u.valueOf()===i.valueOf()&&(m+=" active"),u.valueOf()+864e5<=this.startDate&&(m+=" disabled"),u.valueOf()>this.endDate&&(m+=" disabled"),p.append('<td class="day'+m+'">'+u.getUTCDate()+"</td>"),u.setUTCDate(u.getUTCDate()+1);this.widget.find(".datepicker-days tbody").empty().append(g);var v=this._date.getUTCFullYear(),y=this.widget.find(".datepicker-months").find("th:eq(1)").text(t).end().find("span").removeClass("active");v===t&&y.eq(this._date.getUTCMonth()).addClass("active"),o>v-1&&this.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),v+1>c&&this.widget.find(".datepicker-months th:eq(2)").addClass("disabled");for(var b=0;12>b;b++)t==o&&a>b||o>t?e(y[b]).addClass("disabled"):(t==c&&b>l||t>c)&&e(y[b]).addClass("disabled");g="",t=10*parseInt(t/10,10);var _=this.widget.find(".datepicker-years").find("th:eq(1)").text(t+"-"+(t+9)).end().find("td");this.widget.find(".datepicker-years").find("th").removeClass("disabled"),o>t&&this.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),t+9>c&&this.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),t-=1;for(var b=-1;11>b;b++)g+='<span class="year'+(-1===b||10===b?" old":"")+(v===t?" active":"")+(o>t||t>c?" disabled":"")+'">'+t+"</span>",t+=1;_.html(g)},fillHours:function(){var e=this.widget.find(".timepicker .timepicker-hours table");e.parent().hide();var t="";if(this.options.pick12HourFormat)for(var i=1,r=0;3>r;r+=1){t+="<tr>";for(var o=0;4>o;o+=1){var a=i.toString();t+='<td class="hour">'+n(a,2,"0")+"</td>",i++}t+="</tr>"}else for(var i=0,r=0;6>r;r+=1){t+="<tr>";for(var o=0;4>o;o+=1){var a=i.toString();t+='<td class="hour">'+n(a,2,"0")+"</td>",i++}t+="</tr>"}e.html(t)},fillMinutes:function(){var e=this.widget.find(".timepicker .timepicker-minutes table");e.parent().hide();for(var t="",i=0,r=0;5>r;r++){t+="<tr>";for(var o=0;4>o;o+=1){var a=i.toString();t+='<td class="minute">'+n(a,2,"0")+"</td>",i+=3}t+="</tr>"}e.html(t)},fillSeconds:function(){var e=this.widget.find(".timepicker .timepicker-seconds table");e.parent().hide();for(var t="",i=0,r=0;5>r;r++){t+="<tr>";for(var o=0;4>o;o+=1){var a=i.toString();t+='<td class="second">'+n(a,2,"0")+"</td>",i+=3}t+="</tr>"}e.html(t)},fillTime:function(){if(this._date){var e=this.widget.find(".timepicker span[data-time-component]"),t=(e.closest("table"),this.options.pick12HourFormat),i=this._date.getUTCHours(),r="AM";t&&(i>=12&&(r="PM"),0===i?i=12:12!=i&&(i%=12),this.widget.find(".timepicker [data-action=togglePeriod]").text(r)),i=n(i.toString(),2,"0");var o=n(this._date.getUTCMinutes().toString(),2,"0"),a=n(this._date.getUTCSeconds().toString(),2,"0");e.filter("[data-time-component=hours]").text(i),e.filter("[data-time-component=minutes]").text(o),e.filter("[data-time-component=seconds]").text(a)}},click:function(t){t.stopPropagation(),t.preventDefault(),this._unset=!1;var n=e(t.target).closest("span, td, th");if(1===n.length&&!n.is(".disabled"))switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var i=this.viewDate,o=h.modes[this.viewMode].navFnc,a=h.modes[this.viewMode].navStep;"prev"===n[0].className&&(a=-1*a),i["set"+o](i["get"+o]()+a),this.fillDate(),this.set()}break;case"span":if(n.is(".month")){var s=n.parent().find("span").index(n);this.viewDate.setUTCMonth(s)}else{var c=parseInt(n.text(),10)||0;this.viewDate.setUTCFullYear(c)}0!==this.viewMode&&(this._date=r(this.viewDate.getUTCFullYear(),this.viewDate.getUTCMonth(),this.viewDate.getUTCDate(),this._date.getUTCHours(),this._date.getUTCMinutes(),this._date.getUTCSeconds(),this._date.getUTCMilliseconds()),this.notifyChange()),this.showMode(-1),this.fillDate(),this.set();break;case"td":if(n.is(".day")){var l=parseInt(n.text(),10)||1,s=this.viewDate.getUTCMonth(),c=this.viewDate.getUTCFullYear();n.is(".old")?0===s?(s=11,c-=1):s-=1:n.is(".new")&&(11==s?(s=0,c+=1):s+=1),this._date=r(c,s,l,this._date.getUTCHours(),this._date.getUTCMinutes(),this._date.getUTCSeconds(),this._date.getUTCMilliseconds()),this.viewDate=r(c,s,Math.min(28,l),0,0,0,0),this.fillDate(),this.set(),this.notifyChange()}}},actions:{incrementHours:function(){this._date.setUTCHours(this._date.getUTCHours()+1)},incrementMinutes:function(){this._date.setUTCMinutes(this._date.getUTCMinutes()+1)},incrementSeconds:function(){this._date.setUTCSeconds(this._date.getUTCSeconds()+1)},decrementHours:function(){this._date.setUTCHours(this._date.getUTCHours()-1)},decrementMinutes:function(){this._date.setUTCMinutes(this._date.getUTCMinutes()-1)},decrementSeconds:function(){this._date.setUTCSeconds(this._date.getUTCSeconds()-1)},togglePeriod:function(){var e=this._date.getUTCHours();e>=12?e-=12:e+=12,this._date.setUTCHours(e)},showPicker:function(){this.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),this.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var n=e(t.target),i=parseInt(n.text(),10);if(this.options.pick12HourFormat){var r=this._date.getUTCHours();r>=12?12!=i&&(i=(i+12)%24):12===i?i=0:i%=12}this._date.setUTCHours(i),this.actions.showPicker.call(this)},selectMinute:function(t){var n=e(t.target),i=parseInt(n.text(),10);this._date.setUTCMinutes(i),this.actions.showPicker.call(this)},selectSecond:function(t){var n=e(t.target),i=parseInt(n.text(),10);this._date.setUTCSeconds(i),this.actions.showPicker.call(this)}},doAction:function(t){t.stopPropagation(),t.preventDefault(),this._date||(this._date=r(1970,0,0,0,0,0,0));var n=e(t.currentTarget).data("action"),i=this.actions[n].apply(this,arguments);return this.set(),this.fillTime(),this.notifyChange(),i},stopEvent:function(e){e.stopPropagation(),e.preventDefault()},keydown:function(t){var n=this,i=t.which,r=e(t.target);(8==i||46==i)&&setTimeout(function(){n._resetMaskPos(r)})},keypress:function(t){var n=t.which;if(8!=n&&46!=n){var i=e(t.target),r=String.fromCharCode(n),o=i.val()||"";o+=r;var a=this._mask[this._maskPos];if(!a)return!1;if(a.end==o.length){if(!a.pattern.test(o.slice(a.start))){for(o=o.slice(0,o.length-1);(a=this._mask[this._maskPos])&&a.character;)o+=a.character,this._maskPos++;return o+=r,a.end!=o.length?(i.val(o),!1):a.pattern.test(o.slice(a.start))?(i.val(o),this._maskPos++,!1):(i.val(o.slice(0,a.start)),!1)}this._maskPos++}}},change:function(t){var n=e(t.target),i=n.val();this._formatPattern.test(i)?(this.update(),this.setValue(this._date.getTime()),this.notifyChange(),this.set()):i&&i.trim()?(this.setValue(this._date.getTime()),this._date?this.set():n.val("")):this._date&&(this.setValue(null),this.notifyChange(),this._unset=!0),this._resetMaskPos(n)},showMode:function(e){e&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+e))),this.widget.find(".datepicker > div").hide().filter(".datepicker-"+h.modes[this.viewMode].clsName).show()},destroy:function(){this._detachDatePickerEvents(),this._detachDatePickerGlobalEvents(),this.widget.remove(),this.$element.removeData("datetimepicker"),this.component.removeData("datetimepicker")},formatDate:function(e){return this.format.replace(f,function(t){var i,r,o,a=t.length;if("ms"===t&&(a=1),r=c[t].property,"Hours12"===r)o=e.getUTCHours(),0===o?o=12:12!==o&&(o%=12);else{if("Period12"===r)return e.getUTCHours()>=12?"PM":"AM";i="get"+r,o=e[i]()}return"getUTCMonth"===i&&(o+=1),"getUTCYear"===i&&(o=o+1900-2e3),n(o.toString(),a,"0")})},parseDate:function(e){var t,n,i,r,o={};if(!(t=this._formatPattern.exec(e)))return null;for(n=1;n<t.length;n++)i=this._propertiesByIndex[n],i&&(r=t[n],/^\d+$/.test(r)&&(r=parseInt(r,10)),o[i]=r);return this._finishParsingDate(o)},_resetMaskPos:function(e){for(var t=e.val(),n=0;n<this._mask.length;n++){if(this._mask[n].end>t.length){this._maskPos=n;break}if(this._mask[n].end===t.length){this._maskPos=n+1;break}}},_finishParsingDate:function(e){var t,n,i,o,a,s,c;return t=e.UTCFullYear,e.UTCYear&&(t=2e3+e.UTCYear),t||(t=1970),n=e.UTCMonth?e.UTCMonth-1:0,i=e.UTCDate||1,o=e.UTCHours||0,a=e.UTCMinutes||0,s=e.UTCSeconds||0,c=e.UTCMilliseconds||0,e.Hours12&&(o=e.Hours12),e.Period12&&(/pm/i.test(e.Period12)?12!=o&&(o=(o+12)%24):o%=12),r(t,n,i,o,a,s,c)},_compileFormat:function(){for(var e,n,i=[],r=[],o=this.format,a={},s=0,l=0;e=d.exec(o);)n=e[0],n in c?(s++,a[s]=c[n].property,i.push("\\s*"+c[n].getPattern(this)+"\\s*"),r.push({pattern:new RegExp(c[n].getPattern(this)),property:c[n].property,start:l,end:l+=n.length})):(i.push(t(n)),r.push({pattern:new RegExp(t(n)),character:n,start:l,end:++l})),o=o.slice(n.length);this._mask=r,this._maskPos=0,this._formatPattern=new RegExp("^\\s*"+i.join("")+"\\s*$"),this._propertiesByIndex=a},_attachDatePickerEvents:function(){var t=this;this.widget.on("click",".datepicker *",e.proxy(this.click,this)),this.widget.on("click","[data-action]",e.proxy(this.doAction,this)),this.widget.on("mousedown",e.proxy(this.stopEvent,this)),this.pickDate&&this.pickTime&&this.widget.on("click.togglePicker",".accordion-toggle",function(n){n.stopPropagation();var i=e(this),r=i.closest("ul"),o=r.find(".collapse.in"),a=r.find(".collapse:not(.in)");if(o&&o.length){var s=o.data("collapse");if(s&&s.transitioning)return;o.collapse("hide"),a.collapse("show"),i.find("i").toggleClass(t.timeIcon+" "+t.dateIcon),t.$element.find(".add-on i").toggleClass(t.timeIcon+" "+t.dateIcon)}}),this.isInput?(this.$element.on({focus:e.proxy(this.show,this),change:e.proxy(this.change,this)}),this.options.maskInput&&this.$element.on({keydown:e.proxy(this.keydown,this),keypress:e.proxy(this.keypress,this)})):(this.$element.on({change:e.proxy(this.change,this)},"input"),this.options.maskInput&&this.$element.on({keydown:e.proxy(this.keydown,this),keypress:e.proxy(this.keypress,this)},"input"),this.component?this.component.on("click",e.proxy(this.show,this)):this.$element.on("click",e.proxy(this.show,this)))},_attachDatePickerGlobalEvents:function(){e(window).on("resize.datetimepicker"+this.id,e.proxy(this.place,this)),this.isInput||e(document).on("mousedown.datetimepicker"+this.id,e.proxy(this.hide,this))},_detachDatePickerEvents:function(){this.widget.off("click",".datepicker *",this.click),this.widget.off("click","[data-action]"),this.widget.off("mousedown",this.stopEvent),this.pickDate&&this.pickTime&&this.widget.off("click.togglePicker"),this.isInput?(this.$element.off({focus:this.show,change:this.change}),this.options.maskInput&&this.$element.off({keydown:this.keydown,keypress:this.keypress})):(this.$element.off({change:this.change},"input"),this.options.maskInput&&this.$element.off({keydown:this.keydown,keypress:this.keypress},"input"),this.component?this.component.off("click",this.show):this.$element.off("click",this.show))},_detachDatePickerGlobalEvents:function(){e(window).off("resize.datetimepicker"+this.id),this.isInput||e(document).off("mousedown.datetimepicker"+this.id)},_isInFixed:function(){if(this.$element){for(var t=this.$element.parents(),n=!1,i=0;i<t.length;i++)if("fixed"==e(t[i]).css("position")){n=!0;break}return n}return!1}},e.fn.datetimepicker=function(t,n){return this.each(function(){var i=e(this),r=i.data("datetimepicker"),a="object"==typeof t&&t;r||i.data("datetimepicker",r=new o(this,e.extend({},e.fn.datetimepicker.defaults,a))),"string"==typeof t&&r[t](n)})},e.fn.datetimepicker.defaults={maskInput:!1,pickDate:!0,pickTime:!0,pick12HourFormat:!1,pickSeconds:!0,startDate:-1/0,endDate:1/0,collapse:!0},e.fn.datetimepicker.Constructor=o;var a=0,s=e.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},c={dd:{property:"UTCDate",getPattern:function(){return"(0?[1-9]|[1-2][0-9]|3[0-1])\\b"}},MM:{property:"UTCMonth",getPattern:function(){return"(0?[1-9]|1[0-2])\\b"}},yy:{property:"UTCYear",getPattern:function(){return"(\\d{2})\\b"}},yyyy:{property:"UTCFullYear",getPattern:function(){return"(\\d{4})\\b"}},hh:{property:"UTCHours",getPattern:function(){return"(0?[0-9]|1[0-9]|2[0-3])\\b"}},mm:{property:"UTCMinutes",getPattern:function(){return"(0?[0-9]|[1-5][0-9])\\b"}},ss:{property:"UTCSeconds",getPattern:function(){return"(0?[0-9]|[1-5][0-9])\\b"}},ms:{property:"UTCMilliseconds",getPattern:function(){return"([0-9]{1,3})\\b"}},HH:{property:"Hours12",getPattern:function(){return"(0?[1-9]|1[0-2])\\b"}},PP:{property:"Period12",getPattern:function(){return"(AM|PM|am|pm|Am|aM|Pm|pM)\\b"}}},l=[];for(var u in c)l.push(u);l[l.length-1]+="\\b",l.push(".");var d=new RegExp(l.join("\\b|"));l.pop();var f=new RegExp(l.join("\\b|"),"g"),h={modes:[{clsName:"days",navFnc:"UTCMonth",navStep:1},{clsName:"months",navFnc:"UTCFullYear",navStep:1},{clsName:"years",navFnc:"UTCFullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,h.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};h.template='<div class="datepicker-days"><table class="table-condensed">'+h.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+h.headTemplate+h.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+h.headTemplate+h.contTemplate+"</table></div>";var p={hourTemplate:'<span data-action="showHours" data-time-component="hours" class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds" data-time-component="seconds" class="timepicker-second"></span>'};p.getTemplate=function(e,t){return'<div class="timepicker-picker"><table class="table-condensed"'+(e?' data-hour-format="12"':"")+'><tr><td><a href="#" class="btn" data-action="incrementHours"><i class="icon-chevron-up"></i></a></td><td class="separator"></td><td><a href="#" class="btn" data-action="incrementMinutes"><i class="icon-chevron-up"></i></a></td>'+(t?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><i class="icon-chevron-up"></i></a></td>':"")+(e?'<td class="separator"></td>':"")+"</tr><tr><td>"+p.hourTemplate+'</td> <td class="separator">:</td><td>'+p.minuteTemplate+"</td> "+(t?'<td class="separator">:</td><td>'+p.secondTemplate+"</td>":"")+(e?'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>':"")+'</tr><tr><td><a href="#" class="btn" data-action="decrementHours"><i class="icon-chevron-down"></i></a></td><td class="separator"></td><td><a href="#" class="btn" data-action="decrementMinutes"><i class="icon-chevron-down"></i></a></td>'+(t?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><i class="icon-chevron-down"></i></a></td>':"")+(e?'<td class="separator"></td>':"")+'</tr></table></div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"></table></div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"></table></div>'+(t?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")}}(window.jQuery)}(),function(){!function(e){"use strict";function t(){e(i).each(function(){n(e(this)).removeClass("open")
})}function n(t){var n,i=t.attr("data-target");return i||(i=t.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),n=i&&e(i),n&&n.length||(n=t.parent()),n}var i="[data-toggle=dropdown]",r=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};r.prototype={constructor:r,toggle:function(){var i,r,o=e(this);if(!o.is(".disabled, :disabled"))return i=n(o),r=i.hasClass("open"),t(),r||i.toggleClass("open"),o.focus(),!1},keydown:function(t){var r,o,a,s,c;if(/(38|40|27)/.test(t.keyCode)&&(r=e(this),t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled"))){if(a=n(r),s=a.hasClass("open"),!s||s&&27==t.keyCode)return 27==t.which&&a.find(i).focus(),r.click();o=e("[role=menu] li:not(.divider):visible a",a),o.length&&(c=o.index(o.filter(":focus")),38==t.keyCode&&c>0&&c--,40==t.keyCode&&c<o.length-1&&c++,~c||(c=0),o.eq(c).focus())}}};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("dropdown");i||n.data("dropdown",i=new r(this)),"string"==typeof t&&i[t].call(n)})},e.fn.dropdown.Constructor=r,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown-menu",function(e){e.stopPropagation()}).on("click.dropdown.data-api",i,r.prototype.toggle).on("keydown.dropdown.data-api",i+", [role=menu]",r.prototype.keydown)}(window.jQuery)}(),function(){!function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault();t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var n=e.fn.modal;e.fn.modal=function(n){return this.each(function(){var i=e(this),r=i.data("modal"),o=e.extend({},e.fn.modal.defaults,i.data(),"object"==typeof n&&n);r||i.data("modal",r=new t(this,o)),"string"==typeof n?r[n]():o.show&&r.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),r=e(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},r.data(),n.data());t.preventDefault(),r.modal(o).one("hide",function(){n.focus()})})}(window.jQuery)}(),function(){+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one(e.support.transition.end,function(){n=!0});var r=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(r,t),this},e(function(){e.support.transition=t()})}(jQuery)}(),function(){!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight}),n=this.options.css||{};return n.top=t.top+t.height,n.left=t.left,this.$menu.insertAfter("body").css(n).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var t;return this.query=this.$element.val(),this.query.length<this.options.minLength?this.shown?this.hide():this:(t=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,t?this.process(t):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),1===t.length&&t[0]===this.query&&(t=[]),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,n=[],i=[],r=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?i.push(t):r.push(t):n.push(t);return n.concat(i,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,i){return t=e(n.options.item).attr("data-value",i),t.find("a").html(n.highlighter(i)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(){var t=this.$menu.find(".active").removeClass("active"),n=t.next();n.length||(n=e(this.$menu.find("li")[0])),n.addClass("active")},prev:function(){var e=this.$menu.find(".active").removeClass("active"),t=e.prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.options.minLength<1&&this.$element.on("focus",e.proxy(this.lookup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=e.fn.typeahead;e.fn.typeahead=function(n){return this.each(function(){var i=e(this),r=i.data("typeahead"),o="object"==typeof n&&n;r||i.data("typeahead",r=new t(this,o)),"string"==typeof n&&r[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="javascript:"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var t=e(this);t.data("typeahead")||t.typeahead(t.data())})}(window.jQuery)}(),function(){jQuery&&function(e){function t(t,n){var i=e('<div class="minicolors" />'),r=e.minicolors.defaults;t.data("minicolors-initialized")||(n=e.extend(!0,{},r,n),i.addClass("minicolors-theme-"+n.theme).toggleClass("minicolors-with-opacity",n.opacity),void 0!==n.position&&e.each(n.position.split(" "),function(){i.addClass("minicolors-position-"+this)}),t.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",n).prop("size",7).wrap(i).after('<div class="minicolors-panel minicolors-slider-'+n.control+'"><div class="minicolors-slider"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider"><div class="minicolors-picker"></div></div><div class="minicolors-grid"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),n.inline||(t.after('<span class="minicolors-swatch"><span class="minicolors-swatch-color"></span></span>'),t.next(".minicolors-swatch").on("click",function(e){e.preventDefault(),t.focus()})),t.parent().find(".minicolors-panel").on("selectstart",function(){return!1}).end(),n.inline&&t.parent().addClass("minicolors-inline"),s(t,!1),t.data("minicolors-initialized",!0))}function n(e){var t=e.parent();e.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),t.before(e).remove()}function i(e){var t=e.parent(),n=t.find(".minicolors-panel"),i=e.data("minicolors-settings");!e.data("minicolors-initialized")||e.prop("disabled")||t.hasClass("minicolors-inline")||t.hasClass("minicolors-focus")||(r(),t.addClass("minicolors-focus"),n.stop(!0,!0).fadeIn(i.showSpeed,function(){i.show&&i.show.call(e.get(0))}))}function r(){e(".minicolors-focus").each(function(){var t=e(this),n=t.find(".minicolors-input"),i=t.find(".minicolors-panel"),r=n.data("minicolors-settings");i.fadeOut(r.hideSpeed,function(){r.hide&&r.hide.call(n.get(0)),t.removeClass("minicolors-focus")})})}function o(e,t,n){var i,r,o,s,c=e.parents(".minicolors").find(".minicolors-input"),l=c.data("minicolors-settings"),u=e.find("[class$=-picker]"),d=e.offset().left,f=e.offset().top,h=Math.round(t.pageX-d),p=Math.round(t.pageY-f),m=n?l.animationSpeed:0;t.originalEvent.changedTouches&&(h=t.originalEvent.changedTouches[0].pageX-d,p=t.originalEvent.changedTouches[0].pageY-f),0>h&&(h=0),0>p&&(p=0),h>e.width()&&(h=e.width()),p>e.height()&&(p=e.height()),e.parent().is(".minicolors-slider-wheel")&&u.parent().is(".minicolors-grid")&&(i=75-h,r=75-p,o=Math.sqrt(i*i+r*r),s=Math.atan2(r,i),0>s&&(s+=2*Math.PI),o>75&&(o=75,h=75-75*Math.cos(s),p=75-75*Math.sin(s)),h=Math.round(h),p=Math.round(p)),e.is(".minicolors-grid")?u.stop(!0).animate({top:p+"px",left:h+"px"},m,l.animationEasing,function(){a(c,e)}):u.stop(!0).animate({top:p+"px"},m,l.animationEasing,function(){a(c,e)})}function a(e,t){function n(e,t){var n,i;return e.length&&t?(n=e.offset().left,i=e.offset().top,{x:n-t.offset().left+e.outerWidth()/2,y:i-t.offset().top+e.outerHeight()/2}):null}var i,r,o,a,s,l,u,f=e.val(),p=e.attr("data-opacity"),m=e.parent(),v=e.data("minicolors-settings"),y=m.find(".minicolors-swatch"),b=m.find(".minicolors-grid"),_=m.find(".minicolors-slider"),w=m.find(".minicolors-opacity-slider"),k=b.find("[class$=-picker]"),S=_.find("[class$=-picker]"),T=w.find("[class$=-picker]"),C=n(k,b),x=n(S,_),P=n(T,w);if(t.is(".minicolors-grid, .minicolors-slider")){switch(v.control){case"wheel":a=b.width()/2-C.x,s=b.height()/2-C.y,l=Math.sqrt(a*a+s*s),u=Math.atan2(s,a),0>u&&(u+=2*Math.PI),l>75&&(l=75,C.x=69-75*Math.cos(u),C.y=69-75*Math.sin(u)),r=h(l/.75,0,100),i=h(180*u/Math.PI,0,360),o=h(100-Math.floor(x.y*(100/_.height())),0,100),f=g({h:i,s:r,b:o}),_.css("backgroundColor",g({h:i,s:r,b:100}));break;case"saturation":i=h(parseInt(C.x*(360/b.width()),10),0,360),r=h(100-Math.floor(x.y*(100/_.height())),0,100),o=h(100-Math.floor(C.y*(100/b.height())),0,100),f=g({h:i,s:r,b:o}),_.css("backgroundColor",g({h:i,s:100,b:o})),m.find(".minicolors-grid-inner").css("opacity",r/100);break;case"brightness":i=h(parseInt(C.x*(360/b.width()),10),0,360),r=h(100-Math.floor(C.y*(100/b.height())),0,100),o=h(100-Math.floor(x.y*(100/_.height())),0,100),f=g({h:i,s:r,b:o}),_.css("backgroundColor",g({h:i,s:r,b:100})),m.find(".minicolors-grid-inner").css("opacity",1-o/100);break;default:i=h(360-parseInt(x.y*(360/_.height()),10),0,360),r=h(Math.floor(C.x*(100/b.width())),0,100),o=h(100-Math.floor(C.y*(100/b.height())),0,100),f=g({h:i,s:r,b:o}),b.css("backgroundColor",g({h:i,s:100,b:100}))}e.val(d(f,v.letterCase))}t.is(".minicolors-opacity-slider")&&(p=v.opacity?parseFloat(1-P.y/w.height()).toFixed(2):1,v.opacity&&e.attr("data-opacity",p)),y.find("SPAN").css({backgroundColor:f,opacity:p}),c(e,f,p)}function s(e,t){var n,i,r,o,a,s,l,u=e.parent(),p=e.data("minicolors-settings"),m=u.find(".minicolors-swatch"),y=u.find(".minicolors-grid"),b=u.find(".minicolors-slider"),_=u.find(".minicolors-opacity-slider"),w=y.find("[class$=-picker]"),k=b.find("[class$=-picker]"),S=_.find("[class$=-picker]");switch(n=d(f(e.val(),!0),p.letterCase),n||(n=d(f(p.defaultValue,!0),p.letterCase)),i=v(n),t||e.val(n),p.opacity&&(r=""===e.attr("data-opacity")?1:h(parseFloat(e.attr("data-opacity")).toFixed(2),0,1),isNaN(r)&&(r=1),e.attr("data-opacity",r),m.find("SPAN").css("opacity",r),a=h(_.height()-_.height()*r,0,_.height()),S.css("top",a+"px")),m.find("SPAN").css("backgroundColor",n),p.control){case"wheel":s=h(Math.ceil(.75*i.s),0,y.height()/2),l=i.h*Math.PI/180,o=h(75-Math.cos(l)*s,0,y.width()),a=h(75-Math.sin(l)*s,0,y.height()),w.css({top:a+"px",left:o+"px"}),a=150-i.b/(100/y.height()),""===n&&(a=0),k.css("top",a+"px"),b.css("backgroundColor",g({h:i.h,s:i.s,b:100}));break;case"saturation":o=h(5*i.h/12,0,150),a=h(y.height()-Math.ceil(i.b/(100/y.height())),0,y.height()),w.css({top:a+"px",left:o+"px"}),a=h(b.height()-i.s*(b.height()/100),0,b.height()),k.css("top",a+"px"),b.css("backgroundColor",g({h:i.h,s:100,b:i.b})),u.find(".minicolors-grid-inner").css("opacity",i.s/100);break;case"brightness":o=h(5*i.h/12,0,150),a=h(y.height()-Math.ceil(i.s/(100/y.height())),0,y.height()),w.css({top:a+"px",left:o+"px"}),a=h(b.height()-i.b*(b.height()/100),0,b.height()),k.css("top",a+"px"),b.css("backgroundColor",g({h:i.h,s:i.s,b:100})),u.find(".minicolors-grid-inner").css("opacity",1-i.b/100);break;default:o=h(Math.ceil(i.s/(100/y.width())),0,y.width()),a=h(y.height()-Math.ceil(i.b/(100/y.height())),0,y.height()),w.css({top:a+"px",left:o+"px"}),a=h(b.height()-i.h/(360/b.height()),0,b.height()),k.css("top",a+"px"),y.css("backgroundColor",g({h:i.h,s:100,b:100}))}e.data("minicolors-initialized")&&c(e,n,r)}function c(e,t,n){var i=e.data("minicolors-settings"),r=e.data("minicolors-lastChange");r&&r.hex===t&&r.opacity===n||(e.data("minicolors-lastChange",{hex:t,opacity:n}),i.change&&(i.changeDelay?(clearTimeout(e.data("minicolors-changeTimeout")),e.data("minicolors-changeTimeout",setTimeout(function(){i.change.call(e.get(0),t,n)},i.changeDelay))):i.change.call(e.get(0),t,n)),e.trigger("change").trigger("input"))}function l(t){var n=f(e(t).val(),!0),i=b(n),r=e(t).attr("data-opacity");return i?(void 0!==r&&e.extend(i,{a:parseFloat(r)}),i):null}function u(t,n){var i=f(e(t).val(),!0),r=b(i),o=e(t).attr("data-opacity");return r?(void 0===o&&(o=1),n?"rgba("+r.r+", "+r.g+", "+r.b+", "+parseFloat(o)+")":"rgb("+r.r+", "+r.g+", "+r.b+")"):null}function d(e,t){return"uppercase"===t?e.toUpperCase():e.toLowerCase()}function f(e,t){return e=e.replace(/[^A-F0-9]/gi,""),3!==e.length&&6!==e.length?"":(3===e.length&&t&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),"#"+e)}function h(e,t,n){return t>e&&(e=t),e>n&&(e=n),e}function p(e){var t={},n=Math.round(e.h),i=Math.round(255*e.s/100),r=Math.round(255*e.b/100);if(0===i)t.r=t.g=t.b=r;else{var o=r,a=(255-i)*r/255,s=(o-a)*(n%60)/60;360===n&&(n=0),60>n?(t.r=o,t.b=a,t.g=a+s):120>n?(t.g=o,t.b=a,t.r=o-s):180>n?(t.g=o,t.r=a,t.b=a+s):240>n?(t.b=o,t.r=a,t.g=o-s):300>n?(t.b=o,t.g=a,t.r=a+s):360>n?(t.r=o,t.g=a,t.b=o-s):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}}function m(t){var n=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return e.each(n,function(e,t){1===t.length&&(n[e]="0"+t)}),"#"+n.join("")}function g(e){return m(p(e))}function v(e){var t=y(b(e));return 0===t.s&&(t.h=360),t}function y(e){var t={h:0,s:0,b:0},n=Math.min(e.r,e.g,e.b),i=Math.max(e.r,e.g,e.b),r=i-n;return t.b=i,t.s=0!==i?255*r/i:0,t.h=0!==t.s?e.r===i?(e.g-e.b)/r:e.g===i?2+(e.b-e.r)/r:4+(e.r-e.g)/r:-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t}function b(e){return e=parseInt(e.indexOf("#")>-1?e.substring(1):e,16),{r:e>>16,g:(65280&e)>>8,b:255&e}}e.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",hide:null,hideSpeed:100,inline:!1,letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default"}},e.extend(e.fn,{minicolors:function(o,a){switch(o){case"destroy":return e(this).each(function(){n(e(this))}),e(this);case"hide":return r(),e(this);case"opacity":return void 0===a?e(this).attr("data-opacity"):(e(this).each(function(){s(e(this).attr("data-opacity",a))}),e(this));case"rgbObject":return l(e(this),"rgbaObject"===o);case"rgbString":case"rgbaString":return u(e(this),"rgbaString"===o);case"settings":return void 0===a?e(this).data("minicolors-settings"):(e(this).each(function(){var t=e(this).data("minicolors-settings")||{};n(e(this)),e(this).minicolors(e.extend(!0,t,a))}),e(this));case"show":return i(e(this).eq(0)),e(this);case"value":return void 0===a?e(this).val():(e(this).each(function(){s(e(this).val(a))}),e(this));default:return"create"!==o&&(a=o),e(this).each(function(){t(e(this),a)}),e(this)}}}),e(document).on("mousedown.minicolors touchstart.minicolors",function(t){e(t.target).parents().add(t.target).hasClass("minicolors")||r()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(t){var n=e(this);t.preventDefault(),e(document).data("minicolors-target",n),o(n,t,!0)}).on("mousemove.minicolors touchmove.minicolors",function(t){var n=e(document).data("minicolors-target");n&&o(n,t)}).on("mouseup.minicolors touchend.minicolors",function(){e(this).removeData("minicolors-target")}).on("mousedown.minicolors touchstart.minicolors",".minicolors-swatch",function(t){var n=e(this).parent().find(".minicolors-input");t.preventDefault(),i(n)}).on("focus.minicolors",".minicolors-input",function(){var t=e(this);t.data("minicolors-initialized")&&i(t)}).on("blur.minicolors",".minicolors-input",function(){var t=e(this),n=t.data("minicolors-settings");t.data("minicolors-initialized")&&(t.val(f(t.val(),!0)),""===t.val()&&t.val(f(n.defaultValue,!0)),t.val(d(t.val(),n.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(t){var n=e(this);if(n.data("minicolors-initialized"))switch(t.keyCode){case 9:r();break;case 13:case 27:r(),n.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var t=e(this);t.data("minicolors-initialized")&&s(t,!0)}).on("paste.minicolors",".minicolors-input",function(){var t=e(this);t.data("minicolors-initialized")&&setTimeout(function(){s(t,!0)},1)})}(jQuery)}(),function(){!function(b){var a=Math.min,d=Math.max,c=Math.floor,f=function(e){return"string"===b.type(e)},j=function(a,d){if(b.isArray(d))for(var c=0,j=d.length;j>c;c++){var h=d[c];try{f(h)&&(h=eval(h)),b.isFunction(h)&&h(a)}catch(k){}}};b.layout={version:"1.3.rc30.79",revision:.033007,browser:{},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects panes north south west east center".split(" "),allPanes:["north","south","west","east","center"],borderPanes:["north","south","west","east"],oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(e){if(e=b(e),e=e.data("layout")||e.data("parentLayout")){if(e=e.container,e.data("layoutPane"))return e;if(e=e.closest("."+b.layout.defaults.panes.paneClass),e.data("layoutPane"))return e}return null},getParentPaneInstance:function(e){return(e=b.layout.getParentPaneElem(e))?e.data("layoutPane"):null},getParentLayoutInstance:function(e){return(e=b.layout.getParentPaneElem(e))?e.data("parentLayout"):null},getEventObject:function(e){return"object"==typeof e&&e.stopPropagation?e:null},parsePaneName:function(e){var t=b.layout.getEventObject(e);return t&&(t.stopPropagation(),e=b(this).data("layoutEdge")),e&&!/^(west|east|north|south|center)$/.test(e)&&(b.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+e+'"'),e="error"),e},plugins:{draggable:!!b.fn.draggable,effects:{core:!!b.effects,slide:b.effects&&(b.effects.slide||b.effects.effect&&b.effects.effect.slide)}},onCreate:[],onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||b.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||b.layout.getScrollbarSize("height")},getScrollbarSize:function(e){var t=b('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body"),n={width:t.css("width")-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),window.scrollbarWidth=n.width,window.scrollbarHeight=n.height,e.match(/^(width|height)$/)?n[e]:n},showInvisibly:function(e,t){if(e&&e.length&&(t||"none"===e.css("display"))){var n=e[0].style,n={display:n.display||"",visibility:n.visibility||""};return e.css({display:"block",visibility:"hidden"}),n}return{}},getElementDimensions:function(e,t){var n,i,r,o={css:{},inset:{}},a=o.css,s={bottom:0},c=b.layout.cssNum,l=e.offset();return o.offsetLeft=l.left,o.offsetTop=l.top,t||(t={}),b.each(["Left","Right","Top","Bottom"],function(c,l){n=a["border"+l]=b.layout.borderWidth(e,l),i=a["padding"+l]=b.layout.cssNum(e,"padding"+l),r=l.toLowerCase(),o.inset[r]=0<=t[r]?t[r]:i,s[r]=o.inset[r]+n}),a.width=e.width(),a.height=e.height(),a.top=c(e,"top",!0),a.bottom=c(e,"bottom",!0),a.left=c(e,"left",!0),a.right=c(e,"right",!0),o.outerWidth=e.outerWidth(),o.outerHeight=e.outerHeight(),o.innerWidth=d(0,o.outerWidth-s.left-s.right),o.innerHeight=d(0,o.outerHeight-s.top-s.bottom),o.layoutWidth=e.innerWidth(),o.layoutHeight=e.innerHeight(),o},getElementStyles:function(e,t){var n,i,r,o,a,s,c={},l=e[0].style,u=t.split(","),d=["Top","Bottom","Left","Right"],f=["Color","Style","Width"];for(o=0;o<u.length;o++)if(n=u[o],n.match(/(border|padding|margin)$/))for(a=0;4>a;a++)if(i=d[a],"border"===n)for(s=0;3>s;s++)r=f[s],c[n+i+r]=l[n+i+r];else c[n+i]=l[n+i];else c[n]=l[n];return c},cssWidth:function(e,t){if(0>=t)return 0;var n=b.layout.browser.boxModel?b.support.boxSizing?e.css("boxSizing"):"content-box":"border-box",i=b.layout.borderWidth,r=b.layout.cssNum,o=t;return"border-box"!==n&&(o-=i(e,"Left")+i(e,"Right")),"content-box"===n&&(o-=r(e,"paddingLeft")+r(e,"paddingRight")),d(0,o)},cssHeight:function(e,t){if(0>=t)return 0;var n=b.layout.browser.boxModel?b.support.boxSizing?e.css("boxSizing"):"content-box":"border-box",i=b.layout.borderWidth,r=b.layout.cssNum,o=t;return"border-box"!==n&&(o-=i(e,"Top")+i(e,"Bottom")),"content-box"===n&&(o-=r(e,"paddingTop")+r(e,"paddingBottom")),d(0,o)},cssNum:function(e,t,n){e.jquery||(e=b(e));var i=b.layout.showInvisibly(e);return t=b.css(e[0],t,!0),n=n&&"auto"==t?t:Math.round(parseFloat(t)||0),e.css(i),n},borderWidth:function(e,t){e.jquery&&(e=e[0]);var n="border"+t.substr(0,1).toUpperCase()+t.substr(1);return"none"===b.css(e,n+"Style",!0)?0:Math.round(parseFloat(b.css(e,n+"Width",!0))||0)},isMouseOverElem:function(e,t){var n=b(t||this),i=n.offset(),r=i.top,i=i.left,o=i+n.outerWidth(),n=r+n.outerHeight(),a=e.pageX,s=e.pageY;return b.layout.browser.msie&&0>a&&0>s||a>=i&&o>=a&&s>=r&&n>=s},msg:function(e,t,n,i){b.isPlainObject(e)&&window.debugData?("string"==typeof t?(i=n,n=t):"object"==typeof n&&(i=n,n=null),n=n||"log( <object> )",i=b.extend({sort:!1,returnHTML:!1,display:!1},i),!0===t||i.display?debugData(e,n,i):window.console&&console.log(debugData(e,n,i))):t?alert(e):window.console?console.log(e):(t=b("#layoutLogger"),t.length||(t=b('<div id="layoutLogger" style="position: '+(b.support.fixedPosition?"fixed":"absolute")+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body"),t.css("left",b(window).width()-t.outerWidth()-5),b.ui.draggable&&t.draggable({handle:":first-child"})),t.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>"))}};var h=navigator.userAgent.toLowerCase(),p=/(chrome)[ \/]([\w.]+)/.exec(h)||/(webkit)[ \/]([\w.]+)/.exec(h)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(h)||/(msie) ([\w.]+)/.exec(h)||0>h.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(h)||[],h=p[1]||"",p=p[2]||0,x="msie"===h;b.layout.browser={version:p,safari:"webkit"===h,webkit:"chrome"===h,msie:x,isIE6:x&&6==p,boxModel:!x||!1!==b.support.boxModel},h&&(b.layout.browser[h]=!0),x&&b(function(){b.layout.browser.boxModel=b.support.boxModel}),b.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,maskPanesEarly:!1,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1e3,resizer_drag:1e4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button\nInvalid ",containerMissing:"UI Layout Initialization Error\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element.",noContainerHeight:"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:b.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:!0,animatePaneSizing:!1,children:null,containerSelector:"",initChildren:!0,destroyChildren:!0,resizeChildren:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}},b.layout.optionsMap={layout:"name instanceKey stateManagement effects inset zIndexes errors zIndex scrollToBookmarkOnLoad showErrorMessages maskPanesEarly outset resizeWithWindow resizeWithWindowDelay resizeWithWindowMaxDelay onresizeall onresizeall_start onresizeall_end onload onload_start onload_end onunload onunload_start onunload_end".split(" "),center:"paneClass contentSelector contentIgnoreSelector findNestedContent applyDemoStyles triggerEventsOnLoad showOverflowOnHover maskContents maskObjects liveContentResizing containerSelector children initChildren resizeChildren destroyChildren onresize onresize_start onresize_end onsizecontent onsizecontent_start onsizecontent_end".split(" "),noDefault:["paneSelector","resizerCursor","customHotkey"]},b.layout.transformData=function(e,t){var n,i,r,o,a,s,c,l=t?{panes:{},center:{}}:{};
if("object"!=typeof e)return l;for(i in e)for(n=l,a=e[i],r=i.split("__"),c=r.length-1,s=0;c>=s;s++)o=r[s],s===c?n[o]=b.isPlainObject(a)?b.layout.transformData(a):a:(n[o]||(n[o]={}),n=n[o]);return l},b.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(e){function t(t,n){for(var i,r=t.split("."),o=r.length-1,a={branch:e,key:r[o]},s=0;o>s;s++)i=r[s],a.branch=void 0==a.branch[i]?n?a.branch[i]={}:{}:a.branch[i];return a}var n,i,r,o,a=b.layout.backwardCompatibility.map;for(o in a)n=t(o),r=n.branch[n.key],void 0!==r&&(i=t(a[o],!0),i.branch[i.key]=r,delete n.branch[n.key])},renameAllOptions:function(e){var t=b.layout.backwardCompatibility.renameOptions;return t(e),e.defaults&&("object"!=typeof e.panes&&(e.panes={}),b.extend(!0,e.panes,e.defaults),delete e.defaults),e.panes&&t(e.panes),b.each(b.layout.config.allPanes,function(n,i){e[i]&&t(e[i])}),e}},b.fn.layout=function(h){function p(e){if(!e)return!0;var t=e.keyCode;if(33>t)return!0;var n,i,o,a,s={38:"north",40:"south",37:"west",39:"east"},c=e.shiftKey,l=e.ctrlKey;return l&&t>=37&&40>=t&&r[s[t]].enableCursorHotkey?a=s[t]:(l||c)&&b.each(k.borderPanes,function(e,s){return n=r[s],i=n.customHotkey,o=n.customHotkeyModifier,(c&&"SHIFT"==o||l&&"CTRL"==o||l&&c)&&i&&t===(isNaN(i)||9>=i?i.toUpperCase().charCodeAt(0):i)?(a=s,!1):void 0}),a&&y[a]&&r[a].closable&&!q[a].isHidden?(na(a),e.stopPropagation(),e.returnValue=!1):!0}function x(e){if(H()){this&&this.tagName&&(e=this);var t;if(f(e)?t=y[e]:b(e).data("layoutRole")?t=b(e):b(e).parents().each(function(){return b(this).data("layoutRole")?(t=b(this),!1):void 0}),t&&t.length){var n=t.data("layoutEdge");if(e=q[n],e.cssSaved&&X(n),e.isSliding||e.isResizing||e.isClosed)e.cssSaved=!1;else{var i={zIndex:r.zIndexes.resizer_normal+1},o={},a=t.css("overflow"),s=t.css("overflowX"),c=t.css("overflowY");"visible"!=a&&(o.overflow=a,i.overflow="visible"),s&&!s.match(/(visible|auto)/)&&(o.overflowX=s,i.overflowX="visible"),c&&!c.match(/(visible|auto)/)&&(o.overflowY=s,i.overflowY="visible"),e.cssSaved=o,t.css(i),b.each(k.allPanes,function(e,t){t!=n&&X(t)})}}}}function X(e){if(H()){this&&this.tagName&&(e=this);var t;if(f(e)?t=y[e]:b(e).data("layoutRole")?t=b(e):b(e).parents().each(function(){return b(this).data("layoutRole")?(t=b(this),!1):void 0}),t&&t.length){e=t.data("layoutEdge"),e=q[e];var n=e.cssSaved||{};!e.isSliding&&!e.isResizing&&t.css("zIndex",r.zIndexes.pane_normal),t.css(n),e.cssSaved=!1}}}var G=b.layout.browser,k=b.layout.config,Q=b.layout.cssWidth,O=b.layout.cssHeight,R=b.layout.getElementDimensions,D=b.layout.getElementStyles,Ma=b.layout.getEventObject,A=b.layout.parsePaneName,r=b.extend(!0,{},b.layout.defaults);r.effects=b.extend(!0,{},b.layout.effects);var q={id:"layout"+b.now(),initialized:!1,paneResizing:!1,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},ba={north:null,south:null,east:null,west:null,center:null},M={data:{},set:function(e,t,n){M.clear(e),M.data[e]=setTimeout(t,n)},clear:function(e){var t=M.data;t[e]&&(clearTimeout(t[e]),delete t[e])}},ca=function(e,t,n){var i=r;return(i.showErrorMessages&&!n||n&&i.showDebugMessages)&&b.layout.msg(i.name+" / "+e,!1!==t),!1},C=function(e,w,m){var a=w&&f(w),g=a?q[w]:q,t=a?r[w]:r,n=r.name,d=e+(e.match(/_/)?"":"_end"),c=d.match(/_end$/)?d.substr(0,d.length-4):"",l=t[d]||t[c],h="NC",k=[];if(!a&&"boolean"===b.type(w)&&(m=w,w=""),l)try{f(l)&&(l.match(/,/)?(k=l.split(","),l=eval(k[0])):l=eval(l)),b.isFunction(l)&&(h=k.length?l(k[1]):a?l(w,y[w],g,t,n):l(z,g,t,n))}catch(j){ca(r.errors.callbackError.replace(/EVENT/,b.trim((w||"")+" "+d)),!1),"string"===b.type(j)&&string.length&&ca("Exception:  "+j,!1)}return!m&&!1!==h&&(a?(m=y[w],t=r[w],g=q[w],m.triggerHandler("layoutpane"+d,[w,m,g,t,n]),c&&m.triggerHandler("layoutpane"+c,[w,m,g,t,n])):(u.triggerHandler("layout"+d,[z,g,t,n]),c&&u.triggerHandler("layout"+c,[z,g,t,n]))),a&&"onresize_end"===e&&db(w+"",!0),h},eb=function(e){if(!G.mozilla){var t=y[e];"IFRAME"===q[e].tagName?t.css(k.hidden).css(k.visible):t.find("IFRAME").css(k.hidden).css(k.visible)}},ya=function(e){var t=y[e];return e=k[e].dir,t={minWidth:1001-Q(t,1e3),minHeight:1001-O(t,1e3)},"horz"===e&&(t.minSize=t.minHeight),"vert"===e&&(t.minSize=t.minWidth),t},fa=function(e,t,n){if(n||(n=k[e].dir),f(t)&&t.match(/%/)&&(t="100%"===t?-1:parseInt(t,10)/100),0===t)return 0;if(t>=1)return parseInt(t,10);var i=r,o=0;if("horz"==n?o=v.innerHeight-(y.north?i.north.spacing_open:0)-(y.south?i.south.spacing_open:0):"vert"==n&&(o=v.innerWidth-(y.west?i.west.spacing_open:0)-(y.east?i.east.spacing_open:0)),-1===t)return o;if(t>0)return c(o*t);if("center"==e)return 0;n="horz"===n?"height":"width",i=y[e],e="height"===n?U[e]:!1;var o=b.layout.showInvisibly(i),a=i.css(n),s=e?e.css(n):0;return i.css(n,"auto"),e&&e.css(n,"auto"),t="height"===n?i.outerHeight():i.outerWidth(),i.css(n,a).css(o),e&&e.css(n,s),t},ga=function(e,t){var n=y[e],i=r[e],o=q[e],a=t?i.spacing_open:0,i=t?i.spacing_closed:0;return!n||o.isHidden?0:o.isClosed||o.isSliding&&t?i:"horz"===k[e].dir?n.outerHeight()+a:n.outerWidth()+a},Y=function(e,t){if(H()){var n=r[e],i=q[e],o=k[e],s=o.dir;o.sizeType.toLowerCase();var o=void 0!=t?t:i.isSliding,c=n.spacing_open,l=k.oppositeEdge[e],u=q[l],f=y[l],h=!f||!1===u.isVisible||u.isSliding?0:"horz"==s?f.outerHeight():f.outerWidth(),l=(!f||u.isHidden?0:r[l][!1!==u.isClosed?"spacing_closed":"spacing_open"])||0,u="horz"==s?v.innerHeight:v.innerWidth,f=ya("center"),f="horz"==s?d(r.center.minHeight,f.minHeight):d(r.center.minWidth,f.minWidth),o=u-c-(o?0:fa("center",f,s)+h+l),s=i.minSize=d(fa(e,n.minSize),ya(e).minSize),o=i.maxSize=a(n.maxSize?fa(e,n.maxSize):1e5,o),i=i.resizerPosition={},c=v.inset.top,h=v.inset.left,l=v.innerWidth,u=v.innerHeight,n=n.spacing_open;switch(e){case"north":i.min=c+s,i.max=c+o;break;case"west":i.min=h+s,i.max=h+o;break;case"south":i.min=c+u-o-n,i.max=c+u-s-n;break;case"east":i.min=h+l-o-n,i.max=h+l-s-n}}},Na=function(e,t){var n=b(e),i=n.data("layoutRole"),o=n.data("layoutEdge"),a=r[o][i+"Class"],o="-"+o,s=n.hasClass(a+"-closed")?"-closed":"-open",c="-closed"===s?"-open":"-closed",s=a+"-hover "+(a+o+"-hover ")+(a+s+"-hover ")+(a+o+s+"-hover ");return t&&(s+=a+c+"-hover "+(a+o+c+"-hover ")),"resizer"==i&&n.hasClass(a+"-sliding")&&(s+=a+"-sliding-hover "+(a+o+"-sliding-hover ")),b.trim(s)},Oa=function(e,t){var n=b(t||this);e&&"toggler"===n.data("layoutRole")&&e.stopPropagation(),n.addClass(Na(n))},da=function(e,t){var n=b(t||this);n.removeClass(Na(n,!0))},fb=function(){var e=b(this).data("layoutEdge"),t=q[e];!t.isClosed&&!t.isResizing&&!q.paneResizing&&(b.fn.disableSelection&&b("body").disableSelection(),r.maskPanesEarly&&va(e,{resizing:!0}))},gb=function(e,t){var n=t||this,i=b(n).data("layoutEdge"),o=i+"ResizerLeave";M.clear(i+"_openSlider"),M.clear(o),t?q.paneResizing||(b.fn.enableSelection&&b("body").enableSelection(),r.maskPanesEarly&&za()):M.set(o,function(){gb(e,n)},200)},H=function(){return q.initialized||q.creatingLayout?!0:Aa()},Aa=function(e){var t=r;return u.is(":visible")?hb("center").length?(q.creatingLayout=!0,b.extend(v,R(u,t.inset)),A(void 0),b.each(k.allPanes,function(e,t){ib(t,!0)}),Pa(),b.each(k.borderPanes,function(e,t){y[t]&&q[t].isVisible&&(Y(t),ha(t))}),ia("center"),b.each(k.allPanes,function(e,t){jb(t)}),t.scrollToBookmarkOnLoad&&(e=self.location,e.hash&&e.replace(e.hash)),z.hasParentLayout?t.resizeWithWindow=!1:t.resizeWithWindow&&b(window).bind("resize."+K,Ab),delete q.creatingLayout,q.initialized=!0,j(z,b.layout.onReady),C("onload_end"),!0):ca(t.errors.centerPaneMissing):(!e&&G.webkit&&"BODY"===u[0].tagName&&setTimeout(function(){Aa(!0)},50),!1)},Qa=function(e,t){var n=A.call(this,e),i=y[n];if(i){var o=U[n],a=q[n],s=r[n],c=r.stateManagement||{},s=t?s.children=t:s.children;if(b.isPlainObject(s))s=[s];else if(!s||!b.isArray(s))return;b.each(s,function(e,t){b.isPlainObject(t)&&(t.containerSelector?i.find(t.containerSelector):o||i).each(function(){var e=b(this),i=e.data("layout");if(!i){if(kb({container:e,options:t},a),c.includeChildren&&q.stateData[n]){var i=(q.stateData[n].children||{})[t.instanceKey],r=t.stateManagement||(t.stateManagement={autoLoad:!0});!0===r.autoLoad&&i&&(r.autoSave=!1,r.includeChildren=!0,r.autoLoad=b.extend(!0,{},i))}(i=e.layout(t))&&Ba(n,i)}})})}},kb=function(e,t){var n=e.container,i=e.options,r=i.stateManagement,o=i.instanceKey||n.data("layoutInstanceKey");return o||(o=(r&&r.cookie?r.cookie.name:"")||i.name),o=o?o.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,"_"):"layout"+ ++t.childIdx,i.instanceKey=o,n.data("layoutInstanceKey",o),o},Ba=function(e,t){var n=y[e],i=ba[e],r=q[e];b.isPlainObject(i)&&(b.each(i,function(e,t){t.destroyed&&delete i[e]}),b.isEmptyObject(i)&&(i=ba[e]=null)),!t&&!i&&(t=n.data("layout")),t&&(t.hasParentLayout=!0,n=t.options,kb(t,r),i||(i=ba[e]={}),i[n.instanceKey]=t.container.data("layout")),z[e].children=ba[e],t||Qa(e)},Ab=function(){var e=r,t=Number(e.resizeWithWindowDelay);10>t&&(t=100),M.clear("winResize"),M.set("winResize",function(){M.clear("winResize"),M.clear("winResizeRepeater");var t=R(u,e.inset);(t.innerWidth!==v.innerWidth||t.innerHeight!==v.innerHeight)&&oa()},t),M.data.winResizeRepeater||lb()},lb=function(){var e=Number(r.resizeWithWindowMaxDelay);e>0&&M.set("winResizeRepeater",function(){lb(),oa()},e)},mb=function(){C("onunload_start"),j(z,b.layout.onUnload),C("onunload_end")},nb=function(e){e=e?e.split(","):k.borderPanes,b.each(e,function(e,t){var n=r[t];return n.enableCursorHotkey||n.customHotkey?(b(document).bind("keydown."+K,p),!1):void 0})},hb=function(e){if(e=r[e].paneSelector,"#"===e.substr(0,1))return u.find(e).eq(0);var t=u.children(e).eq(0);return t.length?t:u.children("form:first").children(e).eq(0)},ib=function(e,t){if(t||H()){var n,i,o=r[e],s=q[e],c=k[e],l=c.dir,u="center"===e,f={},h=y[e];if(h?Ra(e,!1,!0,!1):U[e]=!1,h=y[e]=hb(e),h.length){h.data("layoutCSS")||h.data("layoutCSS",D(h,"position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border")),z[e]={name:e,pane:y[e],content:U[e],options:r[e],state:q[e],children:ba[e]},h.data({parentLayout:z,layoutPane:z[e],layoutEdge:e,layoutRole:"pane"}).css(c.cssReq).css("zIndex",r.zIndexes.pane_normal).css(o.applyDemoStyles?c.cssDemo:{}).addClass(o.paneClass+" "+o.paneClass+"-"+e).bind("mouseenter."+K,Oa).bind("mouseleave."+K,da),c={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"};for(i in c)h.bind("layoutpane"+i.toLowerCase()+"."+K,z[c[i]||i]);Sa(e,!1),u||(n=s.size=fa(e,o.size),u=fa(e,o.minSize)||1,i=fa(e,o.maxSize)||1e5,n>0&&(n=d(a(n,i),u)),s.autoResize=o.autoResize,s.isClosed=!1,s.isSliding=!1,s.isResizing=!1,s.isHidden=!1,s.pins||(s.pins=[])),s.tagName=h[0].tagName,s.edge=e,s.noRoom=!1,s.isVisible=!0,ob(e),"horz"===l?f.height=O(h,n):"vert"===l&&(f.width=Q(h,n)),h.css(f),"horz"!=l&&ia(e,!0),q.initialized&&(Pa(e),nb(e)),o.initClosed&&o.closable&&!o.initHidden?ja(e,!0,!0):o.initHidden||o.initClosed?Ta(e):s.noRoom||h.css("display","block"),h.css("visibility","visible"),o.showOverflowOnHover&&h.hover(x,X),q.initialized&&jb(e)}else y[e]=!1}},jb=function(e){var t=y[e],n=q[e],i=r[e];t&&(t.data("layout")&&Ba(e,t.data("layout")),n.isVisible&&(q.initialized?oa():pa(e),i.triggerEventsOnLoad?C("onresize_end",e):db(e,!0)),i.initChildren&&i.children&&Qa(e))},ob=function(e){e=e?e.split(","):k.borderPanes,b.each(e,function(e,t){var n=y[t],i=F[t],r=q[t],o=k[t].side,a={};if(n){switch(t){case"north":a.top=v.inset.top,a.left=v.inset.left,a.right=v.inset.right;break;case"south":a.bottom=v.inset.bottom,a.left=v.inset.left,a.right=v.inset.right;break;case"west":a.left=v.inset.left;break;case"east":a.right=v.inset.right}n.css(a),i&&r.isClosed?i.css(o,v.inset[o]):i&&!r.isHidden&&i.css(o,v.inset[o]+ga(t))}})},Pa=function(e){e=e?e.split(","):k.borderPanes,b.each(e,function(e,t){var n=y[t];if(F[t]=!1,P[t]=!1,n){var i=r[t],n=q[t],o="#"===i.paneSelector.substr(0,1)?i.paneSelector.substr(1):"",a=i.resizerClass,s=i.togglerClass,c="-"+t,l=z[t],d=l.resizer=F[t]=b("<div></div>"),l=l.toggler=i.closable?P[t]=b("<div></div>"):!1;!n.isVisible&&i.slidable&&d.attr("title",i.tips.Slide).css("cursor",i.sliderCursor),d.attr("id",o?o+"-resizer":"").data({parentLayout:z,layoutPane:z[t],layoutEdge:t,layoutRole:"resizer"}).css(k.resizers.cssReq).css("zIndex",r.zIndexes.resizer_normal).css(i.applyDemoStyles?k.resizers.cssDemo:{}).addClass(a+" "+a+c).hover(Oa,da).hover(fb,gb).appendTo(u),i.resizerDblClickToggle&&d.bind("dblclick."+K,na),l&&(l.attr("id",o?o+"-toggler":"").data({parentLayout:z,layoutPane:z[t],layoutEdge:t,layoutRole:"toggler"}).css(k.togglers.cssReq).css(i.applyDemoStyles?k.togglers.cssDemo:{}).addClass(s+" "+s+c).hover(Oa,da).bind("mouseenter",fb).appendTo(d),i.togglerContent_open&&b("<span>"+i.togglerContent_open+"</span>").data({layoutEdge:t,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",t).addClass("content content-open").css("display","none").appendTo(l),i.togglerContent_closed&&b("<span>"+i.togglerContent_closed+"</span>").data({layoutEdge:t,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(l),pb(t));var i=t,f=b.layout.plugins.draggable,i=i?i.split(","):k.borderPanes;b.each(i,function(e,t){var n=r[t];if(!f||!y[t]||!n.resizable)return n.resizable=!1,!0;var i,o,a=q[t],s=r.zIndexes,c=k[t],l="horz"==c.dir?"top":"left",d=F[t],p=n.resizerClass,m=0,g=p+"-drag",v=p+"-"+t+"-drag",_=p+"-dragging",w=p+"-"+t+"-dragging",S=p+"-dragging-limit",T=p+"-"+t+"-dragging-limit",x=!1;a.isClosed||d.attr("title",n.tips.Resize).css("cursor",n.resizerCursor),d.draggable({containment:u[0],axis:"horz"==c.dir?"y":"x",delay:0,distance:1,grid:n.resizingGrid,helper:"clone",opacity:n.resizerDragOpacity,addClasses:!1,zIndex:s.resizer_drag,start:function(e,s){return n=r[t],a=q[t],o=n.livePaneResizing,!1===C("ondrag_start",t)?!1:(a.isResizing=!0,q.paneResizing=t,M.clear(t+"_closeSlider"),Y(t),i=a.resizerPosition,m=s.position[l],d.addClass(g+" "+v),x=!1,b("body").disableSelection(),va(t,{resizing:!0}),void 0)},drag:function(e,r){x||(r.helper.addClass(_+" "+w).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),x=!0,a.isSliding&&y[t].css("zIndex",s.pane_sliding));var c=0;r.position[l]<i.min?(r.position[l]=i.min,c=-1):r.position[l]>i.max&&(r.position[l]=i.max,c=1),c?(r.helper.addClass(S+" "+T),window.defaultStatus=c>0&&t.match(/(north|west)/)||0>c&&t.match(/(south|east)/)?n.tips.maxSizeWarning:n.tips.minSizeWarning):(r.helper.removeClass(S+" "+T),window.defaultStatus=""),o&&Math.abs(r.position[l]-m)>=n.liveResizingTolerance&&(m=r.position[l],h(e,r,t))},stop:function(e,n){b("body").enableSelection(),window.defaultStatus="",d.removeClass(g+" "+v),a.isResizing=!1,q.paneResizing=!1,h(e,n,t,!0)}})});var h=function(e,t,n,i){var o=t.position,a=k[n];e=r[n],t=q[n];var s;switch(n){case"north":s=o.top;break;case"west":s=o.left;break;case"south":s=v.layoutHeight-o.top-e.spacing_open;break;case"east":s=v.layoutWidth-o.left-e.spacing_open}s-=v.inset[a.side],i?(!1!==C("ondrag_end",n)&&Ca(n,s,!1,!0),za(!0),t.isSliding&&va(n,{resizing:!0})):Math.abs(s-t.size)<e.liveResizingTolerance||(Ca(n,s,!1,!0),ea.each(qb))};n.isVisible?Ua(t):(Da(t),ma(t,!0))}}),qa()},Sa=function(e,t){if(H()){var n,i=r[e],o=i.contentSelector,a=z[e],s=y[e];o&&(n=a.content=U[e]=i.findNestedContent?s.find(o).eq(0):s.children(o).eq(0)),n&&n.length?(n.data("layoutRole","content"),n.data("layoutCSS")||n.data("layoutCSS",D(n,"height")),n.css(k.content.cssReq),i.applyDemoStyles&&(n.css(k.content.cssDemo),s.css(k.content.cssDemoPane)),s.css("overflowX").match(/(scroll|auto)/)&&s.css("overflow","hidden"),q[e].content={},!1!==t&&pa(e)):a.content=U[e]=!1}},qb=function(){var e=b(this),t=e.data("layoutMask"),t=q[t];"IFRAME"==t.tagName&&t.isVisible&&e.css({top:t.offsetTop,left:t.offsetLeft,width:t.outerWidth,height:t.outerHeight})},va=function(e,t){var n,i,o=k[e],a=["center"],s=r.zIndexes,c=b.extend({objectsOnly:!1,animation:!1,resizing:!0,sliding:q[e].isSliding},t);c.resizing&&a.push(e),c.sliding&&a.push(k.oppositeEdge[e]),"horz"===o.dir&&(a.push("west"),a.push("east")),b.each(a,function(e,t){if(i=q[t],n=r[t],i.isVisible&&(n.maskObjects||!c.objectsOnly&&n.maskContents)){for(var o,a=b([]),l=0,d=ea.length;d>l;l++)o=ea.eq(l),o.data("layoutMask")===t&&(a=a.add(o));if(!a.length){a=y[t],o=q[t];var f,h,p,m,g,l=r[t],d=r.zIndexes,v=b([]);if(l.maskContents||l.maskObjects)for(g=0;g<(l.maskObjects?2:1);g++)f=l.maskObjects&&0==g,h=document.createElement(f?"iframe":"div"),p=b(h).data("layoutMask",t),h.className="ui-layout-mask ui-layout-mask-"+t,m=h.style,m.display="block",m.position="absolute",m.background="#FFF",f&&(h.frameborder=0,h.src="about:blank",m.opacity=0,m.filter="Alpha(Opacity='0')",m.border=0),"IFRAME"==o.tagName?(m.zIndex=d.pane_normal+1,u.append(h)):(p.addClass("ui-layout-mask-inside-pane"),m.zIndex=l.maskZindex||d.content_mask,m.top=0,m.left=0,m.width="100%",m.height="100%",a.append(h)),v=v.add(h),ea=ea.add(h);a=v}a.each(function(){qb.call(this),this.style.zIndex=i.isSliding?s.pane_sliding+1:s.pane_normal+1,this.style.display="block"})}})},za=function(e){if(e||!q.paneResizing)ea.hide();else if(!e&&!b.isEmptyObject(q.panesSliding)){e=ea.length-1;for(var t,n;e>=0;e--)n=ea.eq(e),t=n.data("layoutMask"),r[t].maskObjects||n.hide()}},Ra=function(e,t,n,i){if(H()){e=A.call(this,e);var o=y[e],a=U[e],s=F[e],c=P[e];o&&b.isEmptyObject(o.data())&&(o=!1),a&&b.isEmptyObject(a.data())&&(a=!1),s&&b.isEmptyObject(s.data())&&(s=!1),c&&b.isEmptyObject(c.data())&&(c=!1),o&&o.stop(!0,!0);var l=r[e],u=ba[e],d=b.isPlainObject(u)&&!b.isEmptyObject(u);i=void 0!==i?i:l.destroyChildren,d&&i&&(b.each(u,function(e,t){t.destroyed||t.destroy(!0),t.destroyed&&delete u[e]}),b.isEmptyObject(u)&&(u=ba[e]=null,d=!1)),o&&t&&!d?o.remove():o&&o[0]&&(t=l.paneClass,i=t+"-"+e,t=[t,t+"-open",t+"-closed",t+"-sliding",i,i+"-open",i+"-closed",i+"-sliding"],b.merge(t,Na(o,!0)),o.removeClass(t.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+K),d&&a?(a.width(a.width()),b.each(u,function(e,t){t.resizeAll()})):a&&a.css(a.data("layoutCSS")).removeData("layoutCSS").removeData("layoutRole"),o.data("layout")||o.css(o.data("layoutCSS")).removeData("layoutCSS")),c&&c.remove(),s&&s.remove(),z[e]=y[e]=U[e]=F[e]=P[e]=!1,n||oa()}},Ea=function(e){var t=y[e],n=t[0].style;r[e].useOffscreenClose?(t.data(k.offscreenReset)||t.data(k.offscreenReset,{left:n.left,right:n.right}),t.css(k.offscreenCSS)):t.hide().removeData(k.offscreenReset)},rb=function(e){var t=y[e];e=r[e];var n=k.offscreenCSS,i=t.data(k.offscreenReset),o=t[0].style;t.show().removeData(k.offscreenReset),e.useOffscreenClose&&i&&(o.left==n.left&&(o.left=i.left),o.right==n.right&&(o.right=i.right))},Ta=function(e,t){if(H()){var n=A.call(this,e),i=r[n],o=q[n],a=F[n];y[n]&&!o.isHidden&&!(q.initialized&&!1===C("onhide_start",n))&&(o.isSliding=!1,delete q.panesSliding[n],a&&a.hide(),!q.initialized||o.isClosed?(o.isClosed=!0,o.isHidden=!0,o.isVisible=!1,q.initialized||Ea(n),ia("horz"===k[n].dir?"":"center"),(q.initialized||i.triggerEventsOnLoad)&&C("onhide_end",n)):(o.isHiding=!0,ja(n,!1,t)))}},Fa=function(e,t,n,i){if(H()){e=A.call(this,e);var r=q[e];y[e]&&r.isHidden&&!1!==C("onshow_start",e)&&(r.isShowing=!0,r.isSliding=!1,delete q.panesSliding[e],!1===t?ja(e,!0):ra(e,!1,n,i))}},na=function(e,t){if(H()){var n=Ma(e),i=A.call(this,e),r=q[i];n&&n.stopImmediatePropagation(),r.isHidden?Fa(i):r.isClosed?ra(i,!!t):ja(i)}},ja=function(e,t,n,i){function o(){p.isMoving=!1,ma(a,!0);var e=k.oppositeEdge[a];q[e].noRoom&&(Y(e),ha(e)),i||!q.initialized&&!h.triggerEventsOnLoad||(l||C("onclose_end",a),l&&C("onshow_end",a),d&&C("onhide_end",a))}var a=A.call(this,e);if(!q.initialized&&y[a]){e=a;var s=q[e];Ea(e),s.isClosed=!0,s.isVisible=!1,Da(e)}else if(H()){var c,l,d,f=y[a],h=r[a],p=q[a];u.queue(function(e){if(!f||!h.closable&&!p.isShowing&&!p.isHiding||!t&&p.isClosed&&!p.isShowing)return e();var i=!p.isShowing&&!1===C("onclose_start",a);return l=p.isShowing,d=p.isHiding,delete p.isShowing,delete p.isHiding,i?e():(c=!n&&!p.isClosed&&"none"!=h.fxName_close,p.isMoving=!0,p.isClosed=!0,p.isVisible=!1,d?p.isHidden=!0:l&&(p.isHidden=!1),p.isSliding?wa(a,!1):ia("horz"===k[a].dir?"":"center",!1),Da(a),c?(Ga(a,!0),f.hide(h.fxName_close,h.fxSettings_close,h.fxSpeed_close,function(){Ga(a,!1),p.isClosed&&o(),e()})):(Ea(a),o(),e()),void 0)})}},Da=function(e){if(F[e]){var t=F[e],n=P[e],i=r[e],o=k[e].side,a=i.resizerClass,s=i.togglerClass,c="-"+e;t.css(o,v.inset[o]).removeClass(a+"-open "+a+c+"-open").removeClass(a+"-sliding "+a+c+"-sliding").addClass(a+"-closed "+a+c+"-closed"),i.resizable&&b.layout.plugins.draggable&&t.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title",""),n&&(n.removeClass(s+"-open "+s+c+"-open").addClass(s+"-closed "+s+c+"-closed").attr("title",i.tips.Open),n.children(".content-open").hide(),n.children(".content-closed").css("display","block")),Va(e,!1),q.initialized&&qa()}},ra=function(e,t,n,i){function o(){f.isMoving=!1,eb(c),f.isSliding||ia("vert"==k[c].dir?"center":"",!1),Ua(c)}if(H()){var a,s,c=A.call(this,e),l=y[c],d=r[c],f=q[c];u.queue(function(e){if(!l||!d.resizable&&!d.closable&&!f.isShowing||f.isVisible&&!f.isSliding)return e();if(f.isHidden&&!f.isShowing)e(),Fa(c,!0);else{f.autoResize&&f.size!=d.size?ka(c,d.size,!0,!0,!0):Y(c,t);var r=C("onopen_start",c);if("abort"===r)return e();if("NC"!==r&&Y(c,t),f.minSize>f.maxSize)return Va(c,!1),!i&&d.tips.noRoomToOpen&&alert(d.tips.noRoomToOpen),e();t?wa(c,!0):f.isSliding?wa(c,!1):d.slidable&&ma(c,!1),f.noRoom=!1,ha(c),s=f.isShowing,delete f.isShowing,a=!n&&f.isClosed&&"none"!=d.fxName_open,f.isMoving=!0,f.isVisible=!0,f.isClosed=!1,s&&(f.isHidden=!1),a?(Ga(c,!0),l.show(d.fxName_open,d.fxSettings_open,d.fxSpeed_open,function(){Ga(c,!1),f.isVisible&&o(),e()})):(rb(c),o(),e())}})}},Ua=function(e,t){var n=y[e],i=F[e],o=P[e],a=r[e],s=q[e],c=k[e].side,l=a.resizerClass,u=a.togglerClass,d="-"+e;i.css(c,v.inset[c]+ga(e)).removeClass(l+"-closed "+l+d+"-closed").addClass(l+"-open "+l+d+"-open"),s.isSliding?i.addClass(l+"-sliding "+l+d+"-sliding"):i.removeClass(l+"-sliding "+l+d+"-sliding"),da(0,i),a.resizable&&b.layout.plugins.draggable?i.draggable("enable").css("cursor",a.resizerCursor).attr("title",a.tips.Resize):s.isSliding||i.css("cursor","default"),o&&(o.removeClass(u+"-closed "+u+d+"-closed").addClass(u+"-open "+u+d+"-open").attr("title",a.tips.Close),da(0,o),o.children(".content-closed").hide(),o.children(".content-open").css("display","block")),Va(e,!s.isSliding),b.extend(s,R(n)),q.initialized&&(qa(),pa(e,!0)),!t&&(q.initialized||a.triggerEventsOnLoad)&&n.is(":visible")&&(C("onopen_end",e),s.isShowing&&C("onshow_end",e),q.initialized&&C("onresize_end",e))},sb=function(e){function t(){o.isClosed?o.isMoving||ra(i,!0):wa(i,!0)}if(H()){var n=Ma(e),i=A.call(this,e),o=q[i];e=r[i].slideDelay_open,n&&n.stopImmediatePropagation(),o.isClosed&&n&&"mouseenter"===n.type&&e>0?M.set(i+"_openSlider",t,e):t()}},Wa=function(e){function t(){o.isClosed?wa(i,!1):o.isMoving||ja(i)}if(H()){var n=Ma(e),i=A.call(this,e);e=r[i];var o=q[i],a=o.isMoving?1e3:300;!o.isClosed&&!o.isResizing&&("click"===e.slideTrigger_close?t():e.preventQuickSlideClose&&o.isMoving||e.preventPrematureSlideClose&&n&&b.layout.isMouseOverElem(n,y[i])||(n?M.set(i+"_closeSlider",t,d(e.slideDelay_close,a)):t()))}},Ga=function(e,t){var n=y[e],i=q[e],o=r[e],a=r.zIndexes;t?(va(e,{animation:!0,objectsOnly:!0}),n.css({zIndex:a.pane_animate}),"south"==e?n.css({top:v.inset.top+v.innerHeight-n.outerHeight()}):"east"==e&&n.css({left:v.inset.left+v.innerWidth-n.outerWidth()})):(za(),n.css({zIndex:i.isSliding?a.pane_sliding:a.pane_normal}),"south"==e?n.css({top:"auto"}):"east"==e&&!n.css("left").match(/\-99999/)&&n.css({left:"auto"}),G.msie&&o.fxOpacityFix&&"slide"!=o.fxName_open&&n.css("filter")&&1==n.css("opacity")&&n[0].style.removeAttribute("filter"))},ma=function(e,t){var n=r[e],i=F[e],o=n.slideTrigger_open.toLowerCase();!i||t&&!n.slidable||(o.match(/mouseover/)?o=n.slideTrigger_open="mouseenter":o.match(/(click|dblclick|mouseenter)/)||(o=n.slideTrigger_open="click"),n.resizerDblClickToggle&&o.match(/click/)&&i[t?"unbind":"bind"]("dblclick."+K,na),i[t?"bind":"unbind"](o+"."+K,sb).css("cursor",t?n.sliderCursor:"default").attr("title",t?n.tips.Slide:""))},wa=function(e,t){function n(t){M.clear(e+"_closeSlider"),t.stopPropagation()}var i=r[e],o=q[e],a=r.zIndexes,s=i.slideTrigger_close.toLowerCase(),c=t?"bind":"unbind",l=y[e],u=F[e];M.clear(e+"_closeSlider"),t?(o.isSliding=!0,q.panesSliding[e]=!0,ma(e,!1)):(o.isSliding=!1,delete q.panesSliding[e]),l.css("zIndex",t?a.pane_sliding:a.pane_normal),u.css("zIndex",t?a.pane_sliding+2:a.resizer_normal),s.match(/(click|mouseleave)/)||(s=i.slideTrigger_close="mouseleave"),u[c](s,Wa),"mouseleave"===s&&(l[c]("mouseleave."+K,Wa),u[c]("mouseenter."+K,n),l[c]("mouseenter."+K,n)),t?"click"===s&&!i.resizable&&(u.css("cursor",t?i.sliderCursor:"default"),u.attr("title",t?i.tips.Close:"")):M.clear(e+"_closeSlider")},ha=function(e,t,n,i){t=r[e];var o=q[e],a=k[e],s=y[e],c=F[e],l="vert"===a.dir,u=!1;("center"===e||l&&o.noVerticalRoom)&&((u=0<=o.maxHeight)&&o.noRoom?(rb(e),c&&c.show(),o.isVisible=!0,o.noRoom=!1,l&&(o.noVerticalRoom=!1),eb(e)):!u&&!o.noRoom&&(Ea(e),c&&c.hide(),o.isVisible=!1,o.noRoom=!0)),"center"!==e&&(o.minSize<=o.maxSize?(o.size>o.maxSize?ka(e,o.maxSize,n,!0,i):o.size<o.minSize?ka(e,o.minSize,n,!0,i):c&&o.isVisible&&s.is(":visible")&&(n=o.size+v.inset[a.side],b.layout.cssNum(c,a.side)!=n&&c.css(a.side,n)),o.noRoom&&(o.wasOpen&&t.closable?t.autoReopen?ra(e,!1,!0,!0):o.noRoom=!1:Fa(e,o.wasOpen,!0,!0))):o.noRoom||(o.noRoom=!0,o.wasOpen=!o.isClosed&&!o.isSliding,o.isClosed||(t.closable?ja(e,!0,!0):Ta(e,!0))))},Ca=function(e,t,n,i,o){if(H()){e=A.call(this,e);var a=r[e],s=q[e];o=o||a.livePaneResizing&&!s.isResizing,s.autoResize=!1,ka(e,t,n,i,o)}},ka=function(e,t,n,i,o){function s(){for(var e="width"===w?m.outerWidth():m.outerHeight(),e=[{pane:f,count:1,target:t,actual:e,correct:t===e,attempt:t,cssSize:l}],i=e[0],r={},a="Inaccurate size after resizing the "+f+"-pane.";!i.correct&&(r={pane:f,count:i.count+1,target:t},r.attempt=i.actual>t?d(0,i.attempt-(i.actual-t)):d(0,i.attempt+(t-i.actual)),r.cssSize=("horz"==k[f].dir?O:Q)(y[f],r.attempt),m.css(w,r.cssSize),r.actual="width"==w?m.outerWidth():m.outerHeight(),r.correct=t===r.actual,1===e.length&&(ca(a,!1,!0),ca(i,!1,!0)),ca(r,!1,!0),!(3<e.length));)e.push(r),i=e[e.length-1];p.size=t,b.extend(p,R(m)),p.isVisible&&m.is(":visible")&&(g&&g.css(_,t+v.inset[_]),pa(f)),!n&&!S&&q.initialized&&p.isVisible&&C("onresize_end",f),n||(p.isSliding||ia("horz"==k[f].dir?"":"center",S,o),qa()),i=k.oppositeEdge[f],c>t&&q[i].noRoom&&(Y(i),ha(i,!1,n)),1<e.length&&ca(a+"\nSee the Error Console for details.",!0,!0)}if(H()){var c,l,f=A.call(this,e),h=r[f],p=q[f],m=y[f],g=F[f],_=k[f].side,w=k[f].sizeType.toLowerCase(),S=p.isResizing&&!h.triggerEventsDuringLiveResize,T=!0!==i&&h.animatePaneSizing;u.queue(function(e){if(Y(f),c=p.size,t=fa(f,t),t=d(t,fa(f,h.minSize)),t=a(t,p.maxSize),t<p.minSize)e(),ha(f,!1,n);else{if(!o&&t===c)return e();if(p.newSize=t,!n&&q.initialized&&p.isVisible&&C("onresize_start",f),l=("horz"==k[f].dir?O:Q)(y[f],t),T&&m.is(":visible")){var i=b.layout.effects.size[f]||b.layout.effects.size.all,i=h.fxSettings_size.easing||i.easing,u=r.zIndexes,g={};g[w]=l+"px",p.isMoving=!0,m.css({zIndex:u.pane_animate}).show().animate(g,h.fxSpeed_size,i,function(){m.css({zIndex:p.isSliding?u.pane_sliding:u.pane_normal}),p.isMoving=!1,delete p.newSize,s(),e()})}else m.css(w,l),delete p.newSize,m.is(":visible")?s():(p.size=t,b.extend(p,R(m))),e()}})}},ia=function(e,t,n){e=(e?e:"east,west,center").split(","),b.each(e,function(e,i){if(y[i]){var o=r[i],a=q[i],s=y[i],c=!0,l={},u=b.layout.showInvisibly(s),f={top:ga("north",!0),bottom:ga("south",!0),left:ga("west",!0),right:ga("east",!0),width:0,height:0};if(f.width=v.innerWidth-f.left-f.right,f.height=v.innerHeight-f.bottom-f.top,f.top+=v.inset.top,f.bottom+=v.inset.bottom,f.left+=v.inset.left,f.right+=v.inset.right,b.extend(a,R(s)),"center"===i){if(!n&&a.isVisible&&f.width===a.outerWidth&&f.height===a.outerHeight)return s.css(u),!0;if(b.extend(a,ya(i),{maxWidth:f.width,maxHeight:f.height}),l=f,a.newWidth=l.width,a.newHeight=l.height,l.width=Q(s,l.width),l.height=O(s,l.height),c=0<=l.width&&0<=l.height,!q.initialized&&o.minWidth>f.width){var o=o.minWidth-a.outerWidth,f=r.east.minSize||0,h=r.west.minSize||0,p=q.east.size,m=q.west.size,g=p,_=m;if(o>0&&q.east.isVisible&&p>f&&(g=d(p-f,p-o),o-=p-g),o>0&&q.west.isVisible&&m>h&&(_=d(m-h,m-o),o-=m-_),0===o)return p&&p!=f&&ka("east",g,!0,!0,n),m&&m!=h&&ka("west",_,!0,!0,n),ia("center",t,n),s.css(u),void 0}}else{if(a.isVisible&&!a.noVerticalRoom&&b.extend(a,R(s),ya(i)),!n&&!a.noVerticalRoom&&f.height===a.outerHeight)return s.css(u),!0;l.top=f.top,l.bottom=f.bottom,a.newSize=f.height,l.height=O(s,f.height),a.maxHeight=l.height,c=0<=a.maxHeight,c||(a.noVerticalRoom=!0)}if(c?(!t&&q.initialized&&C("onresize_start",i),s.css(l),"center"!==i&&qa(i),a.noRoom&&!a.isClosed&&!a.isHidden&&ha(i),a.isVisible&&(b.extend(a,R(s)),q.initialized&&pa(i))):!a.noRoom&&a.isVisible&&ha(i),s.css(u),delete a.newSize,delete a.newWidth,delete a.newHeight,!a.isVisible)return!0;"center"===i&&(a=G.isIE6||!G.boxModel,y.north&&(a||"IFRAME"==q.north.tagName)&&y.north.css("width",Q(y.north,v.innerWidth)),y.south&&(a||"IFRAME"==q.south.tagName)&&y.south.css("width",Q(y.south,v.innerWidth))),!t&&q.initialized&&C("onresize_end",i)}})},oa=function(e){if(A(e),u.is(":visible"))if(q.initialized){if(!0===e&&b.isPlainObject(r.outset)&&u.css(r.outset),b.extend(v,R(u,r.inset)),v.outerHeight){if(!0===e&&ob(),!1===C("onresizeall_start"))return!1;var t,n,i;b.each(["south","north","east","west"],function(e,t){y[t]&&(n=r[t],i=q[t],i.autoResize&&i.size!=n.size?ka(t,n.size,!0,!0,!0):(Y(t),ha(t,!1,!0,!0)))}),ia("",!0,!0),qa(),b.each(k.allPanes,function(e,n){(t=y[n])&&q[n].isVisible&&C("onresize_end",n)}),C("onresizeall_end")}}else Aa()},db=function(e,t){var n=A.call(this,e);r[n].resizeChildren&&(t||Ba(n),n=ba[n],b.isPlainObject(n)&&b.each(n,function(e,t){t.destroyed||t.resizeAll()}))},pa=function(e,t){if(H()){var n=A.call(this,e),n=n?n.split(","):k.allPanes;b.each(n,function(e,n){function i(e){return d(l.css.paddingBottom,parseInt(e.css("marginBottom"),10)||0)}function o(){var e=r[n].contentIgnoreSelector,e=s.nextAll().not(".ui-layout-mask").not(e||":lt(0)"),t=e.filter(":visible"),o=t.filter(":last");u={top:s[0].offsetTop,height:s.outerHeight(),numFooters:e.length,hiddenFooters:e.length-t.length,spaceBelow:0},u.spaceAbove=u.top,u.bottom=u.top+u.height,u.spaceBelow=o.length?o[0].offsetTop+o.outerHeight()-u.bottom+i(o):i(s)
}var a=y[n],s=U[n],c=r[n],l=q[n],u=l.content;if(!a||!s||!a.is(":visible"))return!0;if((s.length||(Sa(n,!1),s))&&!1!==C("onsizecontent_start",n)){if((!l.isMoving&&!l.isResizing||c.liveContentResizing||t||void 0==u.top)&&(o(),0<u.hiddenFooters&&"hidden"===a.css("overflow")&&(a.css("overflow","visible"),o(),a.css("overflow","hidden"))),a=l.innerHeight-(u.spaceAbove-l.css.paddingTop)-(u.spaceBelow-l.css.paddingBottom),!s.is(":visible")||u.height!=a){var h=s,c=h;f(h)?c=y[h]:h.jquery||(c=b(h)),h=O(c,a),c.css({height:h,visibility:"visible"}),h>0&&0<c.innerWidth()?c.data("autoHidden")&&(c.show().data("autoHidden",!1),G.mozilla||c.css(k.hidden).css(k.visible)):c.data("autoHidden")||c.hide().data("autoHidden",!0),u.height=a}q.initialized&&C("onsizecontent_end",n)}})}},qa=function(e){e=(e=A.call(this,e))?e.split(","):k.borderPanes,b.each(e,function(e,t){var n,i=r[t],o=q[t],a=y[t],s=F[t],l=P[t];if(a&&s){var u,d=k[t].dir,h=o.isClosed?"_closed":"_open",p=i["spacing"+h],m=i["togglerAlign"+h],h=i["togglerLength"+h];if(0===p)s.hide();else{if(!o.noRoom&&!o.isHidden&&s.show(),"horz"===d?(u=v.innerWidth,o.resizerLength=u,a=b.layout.cssNum(a,"left"),s.css({width:Q(s,u),height:O(s,p),left:a>-9999?a:v.inset.left})):(u=a.outerHeight(),o.resizerLength=u,s.css({height:O(s,u),width:Q(s,p),top:v.inset.top+ga("north",!0)})),da(i,s),l){if(0===h||o.isSliding&&i.hideTogglerOnSlide)return l.hide(),void 0;if(l.show(),!(h>0)||"100%"===h||h>u)h=u,m=0;else if(f(m))switch(m){case"top":case"left":m=0;break;case"bottom":case"right":m=u-h;break;default:m=c((u-h)/2)}else a=parseInt(m,10),m=m>=0?a:u-h+a;if("horz"===d){var g=Q(l,h);l.css({width:g,height:O(l,p),left:m,top:0}),l.children(".content").each(function(){n=b(this),n.css("marginLeft",c((g-n.outerWidth())/2))})}else{var _=O(l,h);l.css({height:_,width:Q(l,p),top:m,left:0}),l.children(".content").each(function(){n=b(this),n.css("marginTop",c((_-n.outerHeight())/2))})}da(0,l)}q.initialized||!i.initHidden&&!o.isHidden||(s.hide(),l&&l.hide())}}})},pb=function(e){if(H()){var t=A.call(this,e);e=P[t];var n=r[t];e&&(n.closable=!0,e.bind("click."+K,function(e){e.stopPropagation(),na(t)}).css("visibility","visible").css("cursor","pointer").attr("title",q[t].isClosed?n.tips.Open:n.tips.Close).show())}},Va=function(e,t){b.layout.plugins.buttons&&b.each(q[e].pins,function(n,i){b.layout.buttons.setPinState(z,b(i),e,t)})},u=b(this).eq(0);if(!u.length)return ca(r.errors.containerMissing);if(u.data("layoutContainer")&&u.data("layout"))return u.data("layout");var y={},U={},F={},P={},ea=b([]),v=q.container,K=q.id,z={options:r,state:q,container:u,panes:y,contents:U,resizers:F,togglers:P,hide:Ta,show:Fa,toggle:na,open:ra,close:ja,slideOpen:sb,slideClose:Wa,slideToggle:function(e){e=A.call(this,e),na(e,!0)},setSizeLimits:Y,_sizePane:ka,sizePane:Ca,sizeContent:pa,swapPanes:function(e,t){function n(e){var t=y[e],n=U[e];return t?{pane:e,P:t?t[0]:!1,C:n?n[0]:!1,state:b.extend(!0,{},q[e]),options:b.extend(!0,{},r[e])}:!1}function i(e,t){if(e){var n=e.P,i=e.C,o=e.pane,a=k[t],s=b.extend(!0,{},q[t]),l=r[t],u={resizerCursor:l.resizerCursor};b.each(["fxName","fxSpeed","fxSettings"],function(e,t){u[t+"_open"]=l[t+"_open"],u[t+"_close"]=l[t+"_close"],u[t+"_size"]=l[t+"_size"]}),y[t]=b(n).data({layoutPane:z[t],layoutEdge:t}).css(k.hidden).css(a.cssReq),U[t]=i?b(i):!1,r[t]=b.extend(!0,{},e.options,u),q[t]=b.extend(!0,{},e.state),n.className=n.className.replace(RegExp(l.paneClass+"-"+o,"g"),l.paneClass+"-"+t),Pa(t),a.dir!=k[o].dir?(n=c[t]||0,Y(t),n=d(n,q[t].minSize),Ca(t,n,!0,!0)):F[t].css(a.side,v.inset[a.side]+(q[t].isVisible?ga(t):0)),e.state.isVisible&&!s.isVisible?Ua(t,!0):(Da(t),ma(t,!0)),e=null}}if(H()){var o=A.call(this,e);if(q[o].edge=t,q[t].edge=o,!1===C("onswap_start",o)||!1===C("onswap_start",t))q[o].edge=o,q[t].edge=t;else{var a=n(o),s=n(t),c={};c[o]=a?a.state.size:0,c[t]=s?s.state.size:0,y[o]=!1,y[t]=!1,q[o]={},q[t]={},P[o]&&P[o].remove(),P[t]&&P[t].remove(),F[o]&&F[o].remove(),F[t]&&F[t].remove(),F[o]=F[t]=P[o]=P[t]=!1,i(a,t),i(s,o),a=s=c=null,y[o]&&y[o].css(k.visible),y[t]&&y[t].css(k.visible),oa(),C("onswap_end",o),C("onswap_end",t)}}},showMasks:va,hideMasks:za,initContent:Sa,addPane:ib,removePane:Ra,createChildren:Qa,refreshChildren:Ba,enableClosable:pb,disableClosable:function(e,t){if(H()){var n=A.call(this,e),i=P[n];i&&(r[n].closable=!1,q[n].isClosed&&ra(n,!1,!0),i.unbind("."+K).css("visibility",t?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable:function(e){if(H()){e=A.call(this,e);var t=F[e];t&&t.data("draggable")&&(r[e].slidable=!0,q[e].isClosed&&ma(e,!0))}},disableSlidable:function(e){if(H()){e=A.call(this,e);var t=F[e];t&&(r[e].slidable=!1,q[e].isSliding?ja(e,!1,!0):(ma(e,!1),t.css("cursor","default").attr("title",""),da(null,t[0])))}},enableResizable:function(e){if(H()){e=A.call(this,e);var t=F[e],n=r[e];t&&t.data("draggable")&&(n.resizable=!0,t.draggable("enable"),q[e].isClosed||t.css("cursor",n.resizerCursor).attr("title",n.tips.Resize))}},disableResizable:function(e){if(H()){e=A.call(this,e);var t=F[e];t&&t.data("draggable")&&(r[e].resizable=!1,t.draggable("disable").css("cursor","default").attr("title",""),da(null,t[0]))}},allowOverflow:x,resetOverflow:X,destroy:function(e,t){b(window).unbind("."+K),b(document).unbind("."+K),"object"==typeof e?A(e):t=e,u.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(r.containerClass).unbind("."+K),ea.remove(),b.each(k.allPanes,function(e,n){Ra(n,!1,!0,t)}),u.data("layoutCSS")&&!u.data("layoutRole")&&u.css(u.data("layoutCSS")).removeData("layoutCSS"),"BODY"===v.tagName&&(u=b("html")).data("layoutCSS")&&u.css(u.data("layoutCSS")).removeData("layoutCSS"),j(z,b.layout.onDestroy),mb();for(var n in z)n.match(/^(container|options)$/)||delete z[n];return z.destroyed=!0,z},initPanes:H,resizeAll:oa,runCallbacks:C,hasParentLayout:!1,children:ba,north:!1,south:!1,west:!1,east:!1,center:!1},Xa,V,Ya,N,Ha,la,sa,W;if(h=b.layout.transformData(h,!0),h=b.layout.backwardCompatibility.renameAllOptions(h),!b.isEmptyObject(h.panes)){for(V=b.layout.optionsMap.noDefault,la=0,sa=V.length;sa>la;la++)N=V[la],delete h.panes[N];for(V=b.layout.optionsMap.layout,la=0,sa=V.length;sa>la;la++)N=V[la],delete h.panes[N]}V=b.layout.optionsMap.layout;var Bb=b.layout.config.optionRootKeys;for(N in h)Ha=h[N],0>b.inArray(N,Bb)&&0>b.inArray(N,V)&&(h.panes[N]||(h.panes[N]=b.isPlainObject(Ha)?b.extend(!0,{},Ha):Ha),delete h[N]);b.extend(!0,r,h),b.each(k.allPanes,function(e,t){if(k[t]=b.extend(!0,{},k.panes,k[t]),Ya=r.panes,W=r[t],"center"===t)for(V=b.layout.optionsMap.center,e=0,sa=V.length;sa>e;e++)N=V[e],h.center[N]||!h.panes[N]&&W[N]||(W[N]=Ya[N]);else{W=r[t]=b.extend(!0,{},Ya,W);var n=r[t],i=r.panes;n.fxSettings||(n.fxSettings={}),i.fxSettings||(i.fxSettings={}),b.each(["_open","_close","_size"],function(e,o){var a="fxName"+o,s="fxSpeed"+o,c="fxSettings"+o,l=n[a]=n[a]||i[a]||n.fxName||i.fxName||"none",u=b.effects&&(b.effects[l]||b.effects.effect&&b.effects.effect[l]);"none"!==l&&r.effects[l]&&u||(l=n[a]="none"),l=r.effects[l]||{},a=l.all||null,l=l[t]||null,n[s]=n[s]||i[s]||n.fxSpeed||i.fxSpeed||null,n[c]=b.extend(!0,{},a,l,i.fxSettings,n.fxSettings,i[c],n[c])}),delete n.fxName,delete n.fxSpeed,delete n.fxSettings,W.resizerClass||(W.resizerClass="ui-layout-resizer"),W.togglerClass||(W.togglerClass="ui-layout-toggler")}W.paneClass||(W.paneClass="ui-layout-pane")});var Ia=h.zIndex,xa=r.zIndexes;Ia>0&&(xa.pane_normal=Ia,xa.content_mask=d(Ia+1,xa.content_mask),xa.resizer_normal=d(Ia+2,xa.resizer_normal)),delete r.panes;var Cb=r,tb=q;if(tb.creatingLayout=!0,j(z,b.layout.onCreate),!1===C("onload_start"))Xa="cancel";else{var Za=u[0],$=b("html"),ub=v.tagName=Za.tagName,vb=v.id=Za.id,wb=v.className=Za.className,L=r,Ja=L.name,$a={},Ka=u.data("parentLayout"),La=u.data("layoutEdge"),ab=Ka&&La,ta=b.layout.cssNum,bb,aa;v.selector=u.selector.split(".slice")[0],v.ref=(L.name?L.name+" layout / ":"")+ub+(vb?"#"+vb:wb?".["+wb+"]":""),v.isBody="BODY"===ub,!ab&&!v.isBody&&(bb=u.closest("."+b.layout.defaults.panes.paneClass),Ka=bb.data("parentLayout"),La=bb.data("layoutEdge"),ab=Ka&&La),u.data({layout:z,layoutContainer:K}).addClass(L.containerClass);var xb={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(Ja in xb)u.bind("layout"+Ja.toLowerCase()+"."+K,z[xb[Ja]||Ja]);ab&&(z.hasParentLayout=!0,Ka.refreshChildren(La,z)),u.data("layoutCSS")||(v.isBody?(u.data("layoutCSS",b.extend(D(u,"position,margin,padding,border"),{height:u.css("height"),overflow:u.css("overflow"),overflowX:u.css("overflowX"),overflowY:u.css("overflowY")})),$.data("layoutCSS",b.extend(D($,"padding"),{height:"auto",overflow:$.css("overflow"),overflowX:$.css("overflowX"),overflowY:$.css("overflowY")}))):u.data("layoutCSS",D(u,"position,margin,padding,border,top,bottom,left,right,width,height,overflow,overflowX,overflowY")));try{if($a={overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},u.css($a),L.inset&&!b.isPlainObject(L.inset)&&(aa=parseInt(L.inset,10)||0,L.inset={top:aa,bottom:aa,left:aa,right:aa}),v.isBody)L.outset?b.isPlainObject(L.outset)||(aa=parseInt(L.outset,10)||0,L.outset={top:aa,bottom:aa,left:aa,right:aa}):L.outset={top:ta($,"paddingTop"),bottom:ta($,"paddingBottom"),left:ta($,"paddingLeft"),right:ta($,"paddingRight")},$.css($a).css({height:"100%",border:"none",padding:0,margin:0}),G.isIE6?(u.css({width:"100%",height:"100%",border:"none",padding:0,margin:0,position:"relative"}),L.inset||(L.inset=R(u).inset)):(u.css({width:"auto",height:"auto",margin:0,position:"absolute"}),u.css(L.outset)),b.extend(v,R(u,L.inset));else{var yb=u.css("position");(!yb||!yb.match(/(fixed|absolute|relative)/))&&u.css("position","relative"),u.is(":visible")&&(b.extend(v,R(u,L.inset)),1>v.innerHeight&&ca(L.errors.noContainerHeight.replace(/CONTAINER/,v.ref)))}ta(u,"minWidth")&&u.parent().css("overflowX","auto"),ta(u,"minHeight")&&u.parent().css("overflowY","auto")}catch(Db){}nb(),b(window).bind("unload."+K,mb),j(z,b.layout.onLoad),Cb.initPanes&&Aa(),delete tb.creatingLayout,Xa=q.initialized}return"cancel"===Xa?null:z}}(jQuery),function(e){e.ui||(e.ui={}),e.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(t){for(var n,i=document.cookie,i=i?i.split(";"):[],r=0,o=i.length;o>r;r++)if(n=e.trim(i[r]).split("="),n[0]==t)return decodeURIComponent(n[1]);return null},write:function(t,n,i){var r="",o="",a=!1;i=i||{};var s=i.expires||null,c=e.type(s);"date"===c?o=s:"string"===c&&s>0&&(s=parseInt(s,10),c="number"),"number"===c&&(o=new Date,s>0?o.setDate(o.getDate()+s):(o.setFullYear(1970),a=!0)),o&&(r+=";expires="+o.toUTCString()),i.path&&(r+=";path="+i.path),i.domain&&(r+=";domain="+i.domain),i.secure&&(r+=";secure"),document.cookie=t+"="+(a?"":encodeURIComponent(n))+r},clear:function(t){e.ui.cookie.write(t,"",{expires:-1})}},e.cookie||(e.cookie=function(t,n,i){var r=e.ui.cookie;if(null===n)r.clear(t);else{if(void 0===n)return r.read(t);r.write(t,n,i)}}),e.layout.plugins.stateManagement=!0,e.layout.config.optionRootKeys.push("stateManagement"),e.layout.defaults.stateManagement={enabled:!1,autoSave:!0,autoLoad:!0,animateLoad:!0,includeChildren:!0,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:!1}},e.layout.optionsMap.layout.push("stateManagement"),e.layout.state={saveCookie:function(t,n,i){var r=t.options,o=r.stateManagement;return i=e.extend(!0,{},o.cookie,i||null),t=t.state.stateData=t.readState(n||o.stateKeys),e.ui.cookie.write(i.name||r.name||"Layout",e.layout.state.encodeJSON(t),i),e.extend(!0,{},t)},deleteCookie:function(t){t=t.options,e.ui.cookie.clear(t.stateManagement.cookie.name||t.name||"Layout")},readCookie:function(t){return t=t.options,(t=e.ui.cookie.read(t.stateManagement.cookie.name||t.name||"Layout"))?e.layout.state.decodeJSON(t):{}},loadCookie:function(t){var n=e.layout.state.readCookie(t);return n&&(t.state.stateData=e.extend(!0,{},n),t.loadState(n)),n},loadState:function(t,n,i){if(e.isPlainObject(n)&&!e.isEmptyObject(n))if(n=t.state.stateData=e.layout.transformData(n),i=e.extend({animateLoad:!1,includeChildren:t.options.stateManagement.includeChildren},i),t.state.initialized){var r,o,a,c,l=!i.animateLoad;if(e.each(e.layout.config.borderPanes,function(i,u){f=n[u],e.isPlainObject(f)&&(s=f.size,r=f.initClosed,o=f.initHidden,ar=f.autoResize,a=t.state[u],c=a.isVisible,ar&&(a.autoResize=ar),c||t._sizePane(u,s,!1,!1,!1),!0===o?t.hide(u,l):!0===r?t.close(u,!1,l):!1===r?t.open(u,!1,l):!1===o&&t.show(u,!1,l),c&&t._sizePane(u,s,!1,!1,l))}),i.includeChildren){var u,d;e.each(t.children,function(t,i){(u=n[t]?n[t].children:0)&&i&&e.each(i,function(e,t){d=u[e],t&&d&&t.loadState(d)})})}}else{var f=e.extend(!0,{},n);e.each(e.layout.config.allPanes,function(e,t){f[t]&&delete f[t].children}),e.extend(!0,t.options,f)}},readState:function(t,n){"string"===e.type(n)&&(n={keys:n}),n||(n={});var i,r,o,a,s,c,l=t.options.stateManagement,u=n.includeChildren,u=void 0!==u?u:l.includeChildren,l=n.stateKeys||l.stateKeys,d={isClosed:"initClosed",isHidden:"initHidden"},f=t.state,h=e.layout.config.allPanes,p={};e.isArray(l)&&(l=l.join(","));for(var l=l.replace(/__/g,".").split(","),m=0,g=l.length;g>m;m++)i=l[m].split("."),r=i[0],i=i[1],0>e.inArray(r,h)||(o=f[r][i],void 0!=o&&("isClosed"==i&&f[r].isSliding&&(o=!0),(p[r]||(p[r]={}))[d[i]?d[i]:i]=o));return u&&e.each(h,function(n,i){s=t.children[i],a=f.stateData[i],e.isPlainObject(s)&&!e.isEmptyObject(s)&&(c=p[i]||(p[i]={}),c.children||(c.children={}),e.each(s,function(t,n){n.state.initialized?c.children[t]=e.layout.state.readState(n):a&&a.children&&a.children[t]&&(c.children[t]=e.extend(!0,{},a.children[t]))}))}),p},encodeJSON:function(t){function n(t){var i,r,o,a=[],s=0,c=e.isArray(t);for(i in t)r=t[i],o=typeof r,"string"==o?r='"'+r+'"':"object"==o&&(r=n(r)),a[s++]=(c?"":'"'+i+'":')+r;return(c?"[":"{")+a.join(",")+(c?"]":"}")}return n(t)},decodeJSON:function(t){try{return e.parseJSON?e.parseJSON(t):window.eval("("+t+")")||{}}catch(n){return{}}},_create:function(t){var n=e.layout.state,i=t.options.stateManagement;if(e.extend(t,{readCookie:function(){return n.readCookie(t)},deleteCookie:function(){n.deleteCookie(t)},saveCookie:function(e,i){return n.saveCookie(t,e,i)},loadCookie:function(){return n.loadCookie(t)},loadState:function(e,i){n.loadState(t,e,i)},readState:function(e){return n.readState(t,e)},encodeJSON:n.encodeJSON,decodeJSON:n.decodeJSON}),t.state.stateData={},i.autoLoad)if(e.isPlainObject(i.autoLoad))e.isEmptyObject(i.autoLoad)||t.loadState(i.autoLoad);else if(i.enabled)if(e.isFunction(i.autoLoad)){var r={};try{r=i.autoLoad(t,t.state,t.options,t.options.name||"")}catch(o){}r&&e.isPlainObject(r)&&!e.isEmptyObject(r)&&t.loadState(r)}else t.loadCookie()},_unload:function(t){var n=t.options.stateManagement;if(n.enabled&&n.autoSave)if(e.isFunction(n.autoSave))try{n.autoSave(t,t.state,t.options,t.options.name||"")}catch(i){}else t.saveCookie()}},e.layout.onCreate.push(e.layout.state._create),e.layout.onUnload.push(e.layout.state._unload),e.layout.plugins.buttons=!0,e.layout.defaults.autoBindCustomButtons=!1,e.layout.optionsMap.layout.push("autoBindCustomButtons"),e.layout.buttons={init:function(t){var n,i=t.options.name||"";e.each("toggle open close pin toggle-slide open-slide".split(" "),function(r,o){e.each(e.layout.config.borderPanes,function(r,a){e(".ui-layout-button-"+o+"-"+a).each(function(){n=e(this).data("layoutName")||e(this).attr("layoutName"),(void 0==n||n===i)&&t.bindButton(this,o,a)})})})},get:function(t,n,i,r){var o=e(n);t=t.options;var a=t.errors.addButtonError;return o.length?0>e.inArray(i,e.layout.config.borderPanes)?(e.layout.msg(a+" "+t.errors.pane+": "+i,!0),o=e("")):(n=t[i].buttonClass+"-"+r,o.addClass(n+" "+n+"-"+i).data("layoutName",t.name)):e.layout.msg(a+" "+t.errors.selector+": "+n,!0),o},bind:function(t,n,i,r){var o=e.layout.buttons;switch(i.toLowerCase()){case"toggle":o.addToggle(t,n,r);break;case"open":o.addOpen(t,n,r);break;case"close":o.addClose(t,n,r);break;case"pin":o.addPin(t,n,r);break;case"toggle-slide":o.addToggle(t,n,r,!0);break;case"open-slide":o.addOpen(t,n,r,!0)}return t},addToggle:function(t,n,i,r){return e.layout.buttons.get(t,n,i,"toggle").click(function(e){t.toggle(i,!!r),e.stopPropagation()}),t},addOpen:function(t,n,i,r){return e.layout.buttons.get(t,n,i,"open").attr("title",t.options[i].tips.Open).click(function(e){t.open(i,!!r),e.stopPropagation()}),t},addClose:function(t,n,i){return e.layout.buttons.get(t,n,i,"close").attr("title",t.options[i].tips.Close).click(function(e){t.close(i),e.stopPropagation()}),t},addPin:function(t,n,i){var r=e.layout.buttons,o=r.get(t,n,i,"pin");if(o.length){var a=t.state[i];o.click(function(n){r.setPinState(t,e(this),i,a.isSliding||a.isClosed),a.isSliding||a.isClosed?t.open(i):t.close(i),n.stopPropagation()}),r.setPinState(t,o,i,!a.isClosed&&!a.isSliding),a.pins.push(n)}return t},setPinState:function(e,t,n,i){var r=t.attr("pin");if(!r||i!==("down"==r)){e=e.options[n];var r=e.buttonClass+"-pin",o=r+"-"+n;n=r+"-up "+o+"-up",r=r+"-down "+o+"-down",t.attr("pin",i?"down":"up").attr("title",i?e.tips.Unpin:e.tips.Pin).removeClass(i?n:r).addClass(i?r:n)}},syncPinBtns:function(t,n,i){e.each(t.state[n].pins,function(r,o){e.layout.buttons.setPinState(t,e(o),n,i)})},_load:function(t){var n=e.layout.buttons;e.extend(t,{bindButton:function(e,i,r){return n.bind(t,e,i,r)},addToggleBtn:function(e,i,r){return n.addToggle(t,e,i,r)},addOpenBtn:function(e,i,r){return n.addOpen(t,e,i,r)},addCloseBtn:function(e,i){return n.addClose(t,e,i)},addPinBtn:function(e,i){return n.addPin(t,e,i)}});for(var i=0;4>i;i++)t.state[e.layout.config.borderPanes[i]].pins=[];t.options.autoBindCustomButtons&&n.init(t)},_unload:function(){}},e.layout.onLoad.push(e.layout.buttons._load),e.layout.plugins.browserZoom=!0,e.layout.defaults.browserZoomCheckInterval=1e3,e.layout.optionsMap.layout.push("browserZoomCheckInterval"),e.layout.browserZoom={_init:function(t){!1!==e.layout.browserZoom.ratio()&&e.layout.browserZoom._setTimer(t)},_setTimer:function(t){if(!t.destroyed){var n=t.options,i=t.state,r=t.hasParentLayout?5e3:Math.max(n.browserZoomCheckInterval,100);setTimeout(function(){if(!t.destroyed&&n.resizeWithWindow){var r=e.layout.browserZoom.ratio();r!==i.browserZoom&&(i.browserZoom=r,t.resizeAll()),e.layout.browserZoom._setTimer(t)}},r)}},ratio:function(){function t(e,t){return(100*(parseInt(e,10)/parseInt(t,10))).toFixed()}var n,i,r,o=window,a=screen,s=document,c=s.documentElement||s.body,l=e.layout.browser,u=l.version;return l.msie&&u>8||!l.msie?!1:a.deviceXDPI&&a.systemXDPI?t(a.deviceXDPI,a.systemXDPI):l.webkit&&(n=s.body.getBoundingClientRect)?t(n.left-n.right,s.body.offsetWidth):l.webkit&&(i=o.outerWidth)?t(i,o.innerWidth):(i=a.width)&&(r=c.clientWidth)?t(i,r):!1}},e.layout.onReady.push(e.layout.browserZoom._init)}(jQuery)}(),function(){!function(e){function t(e,t){e.length=0,Array.prototype.push.apply(e,t)}var n=e('<style rel="alternate stylesheet" type="text/css" />').appendTo("head")[0],i=n.sheet?"sheet":"styleSheet",r=n[i],o=r.rules?"rules":"cssRules",a=r.deleteRule?"deleteRule":"removeRule",s=r.ownerNode?"ownerNode":"owningElement",c=/^([^{]+)\{([^}]*)\}/m,l=/([^:]+):([^;}]+)/;r.disabled=!0;var u=e.rule=function(e,n){if(!(this instanceof u))return new u(e,n);if(this.sheets=u.sheets(n),e&&c.test(e)&&(e=u.clean(e)),"object"!=typeof e||e.exec){if(t(this,this.sheets.cssRules().get()),e)return this.filter(e)}else t(this,e.get?e.get():e.splice?e:[e]);return this};e.extend(u,{sheets:function(t){var n=t;return"object"!=typeof n&&(n=e.makeArray(document.styleSheets)),n=e(n).not(r),"string"==typeof t&&(n=n.ownerNode().filter(t).sheet()),n},rule:function(e){return e.selectorText?["",e.selectorText,e.style.cssText]:c.exec(e)},appendTo:function(e,t,n){switch(typeof t){case"string":t=this.sheets(t);case"object":if(t[0]&&(t=t[0]),t[i]&&(t=t[i]),t[o])break;default:if("object"==typeof e)return e;t=r}var a;!n&&(a=this.parent(e))&&(e=this.remove(e,a));var s=this.rule(e);return t.addRule?t.addRule(s[1],s[2]||";"):t.insertRule&&t.insertRule(s[1]+"{"+s[2]+"}",t[o].length),t[o][t[o].length-1]},remove:function(t,n){if(n=n||this.parent(t),n!=r){var i=n?e.inArray(t,n[o]):-1;-1!=i&&(t=this.appendTo(t,0,!0),n[a](i))}return t},clean:function(t){return e.map(t.split("}"),function(e){return e?u.appendTo(e+"}"):void 0})},parent:function(t){if("string"==typeof t||"function"!=typeof this.sheets)return t.parentStyleSheet;var n;return this.sheets().each(function(){return-1!=e.inArray(t,this[o])?(n=this,!1):void 0}),n},outerText:function(e){return e&&e.selectorText?[e.selectorText+"{","	"+e.style.cssText,"}"].join("\n").toLowerCase():""},text:function(e,t){return void 0!==t&&(e.style.cssText=t),e?e.style.cssText.toLowerCase():""}}),u.fn=u.prototype={pushStack:function(e,t){var n=u(e,t||this.sheets);return n.prevObject=this,n},end:function(){return this.prevObject||u(0,[])},filter:function(t){var n;return t||(t=/./),t.split?(n=e.trim(t).toLowerCase().split(/\s*,\s*/),t=function(){var t=this.selectorText||"";return!!e.grep(t.toLowerCase().split(/\s*,\s*/),function(t){return-1!=e.inArray(t,n)}).length}):t.exec&&(n=t,t=function(){return n.test(this.selectorText)}),this.pushStack(e.grep(this,function(e,n){return t.call(e,n)}))},add:function(t,n){return this.pushStack(e.merge(this.get(),u(t,n)))},is:function(e){return!(!e||!this.filter(e).length)},not:function(t,n){return t=u(t,n),this.filter(function(){return-1==e.inArray(this,t)})},append:function(t){var n,i=this;return e.each(t.split(/\s*;\s*/),function(e,t){(n=l.exec(t))&&i.css(n[1],n[2])}),this},text:function(e){return arguments.length?this.each(function(){u.text(this,e)}):u.text(this[0])},outerText:function(){return u.outerText(this[0])}},e.each({ownerNode:s,sheet:i,cssRules:o},function(t,n){var i=n==o;e.fn[t]=function(){return this.map(function(){return i?e.makeArray(this[n]):this[n]})}}),e.fn.cssText=function(){return this.filter("link,style").eq(0).sheet().cssRules().map(function(){return u.outerText(this)}).get().join("\n")},e.each("remove,appendTo,parent".split(","),function(t,n){u.fn[n]=function(){var t=e.makeArray(arguments),i=this;return t.unshift(0),this.each(function(e){t[0]=this,i[e]=u[n].apply(u,t)||i[e]})}}),e.each("each,index,get,size,eq,slice,map,attr,andSelf,css,show,hide,toggle,queue,dequeue,stop,animate,fadeIn,fadeOut,fadeTo".split(","),function(t,n){u.fn[n]=e.fn[n]});var d=e.curCSS;e.curCSS=function(t,n){return"selectorText"in t?t.style[n]||e.prop(t,"opacity"==n?1:0,"curCSS",0,n):d.apply(this,arguments)},u.cache={};var f=function(t){return function(n){var i=n.selectorText;return i&&(arguments[0]=u.cache[i]=u.cache[i]||{}),t.apply(e,arguments)}};e.data=f(e.data),e.removeData=f(e.removeData),e(window).unload(function(){e(r).cssRules().remove()})}(jQuery)}(),function(){RULE={PF:{character:{profile:[{name:"種族","class":"span3",value:""},{name:"性別","class":"span1",value:""},{name:"年齡","class":"span1",value:""},{name:"身高","class":"span2",value:""},{name:"體重","class":"span2",value:""},{name:"陣營","class":"span2",value:""},{name:"語言","class":"span6",value:""}],number:[{name:"經驗值",value:[{name:"經驗值",value:0}]},{name:"生命值",value:[{name:"現存生命值",value:0},{name:"暫時生命值",value:0}]},{name:"最大生命值",value:[{name:"體質加值",value:0}]},{name:"基本攻擊加值",value:[]},{name:"力量",value:[{name:"初始",value:0},{name:"升級",value:0},{name:"增強加值",value:0}]},{name:"力量調整值",value:[{name:"力量調整值",value:0}]},{name:"敏捷",value:[{name:"初始",value:0},{name:"升級",value:0},{name:"增強加值",value:0}]},{name:"敏捷調整值",value:[{name:"敏捷調整值",value:0}]},{name:"體質",value:[{name:"初始",value:0},{name:"升級",value:0},{name:"增強加值",value:0}]},{name:"體質調整值",value:[{name:"體質調整值",value:0}]},{name:"智力",value:[{name:"初始",value:0},{name:"升級",value:0},{name:"增強加值",value:0}]},{name:"智力調整值",value:[{name:"智力調整值",value:0}]},{name:"睿智",value:[{name:"初始",value:0},{name:"升級",value:0},{name:"增強加值",value:0}]},{name:"睿智調整值",value:[{name:"睿智調整值",value:0}]},{name:"魅力",value:[{name:"初始",value:0},{name:"升級",value:0},{name:"增強加值",value:0}]},{name:"魅力調整值",value:[{name:"魅力調整值",value:0}]},{name:"防禦等級",value:[{name:"基本",value:10},{name:"盔甲",value:0},{name:"盾牌",value:0},{name:"敏捷調整",use:"敏捷調整值"},{name:"天生防禦",value:0},{name:"卸勁",value:0}]},{name:"戰技防禦",value:[{name:"基本",value:10},{name:"基本攻擊加值",use:"基本攻擊加值"},{name:"力量調整",use:"力量調整值"},{name:"敏捷調整",use:"敏捷調整值"},{name:"特殊體型調整",value:0}]},{name:"防具減值",value:[{name:"盔甲",value:0},{name:"盾牌",value:0}]},{name:"基礎速度",value:[{name:"基本",value:30}]}],dice:[{name:"先攻擲骰",value:[{name:"敏捷調整",use:"敏捷調整值"}]},{name:"強韌檢定",value:[{name:"體質調整",use:"體質調整值"}]},{name:"反射檢定",value:[{name:"敏捷調整",use:"敏捷調整值"}]},{name:"意志檢定",value:[{name:"睿智調整",use:"睿智調整值"}]},{name:"一般近戰命中",value:[{name:"基本攻擊加值",use:"基本攻擊加值"},{name:"力量調整",use:"力量調整值"}]},{name:"一般遠程命中",value:[{name:"基本攻擊加值",use:"基本攻擊加值"},{name:"敏捷調整",use:"敏捷調整值"}]},{name:"戰技檢定",value:[{name:"基本攻擊加值",use:"基本攻擊加值"},{name:"力量調整",use:"力量調整值"},{name:"特殊體型調整",value:0}]},{name:"力量檢定",value:[{name:"力量調整",use:"力量調整值"}]},{name:"敏捷檢定",value:[{name:"敏捷調整",use:"敏捷調整值"}]},{name:"體質檢定",value:[{name:"體質調整",use:"體質調整值"}]},{name:"智力檢定",value:[{name:"智力調整",use:"智力調整值"}]},{name:"睿智檢定",value:[{name:"睿智調整",use:"睿智調整值"}]},{name:"魅力檢定",value:[{name:"魅力調整",use:"魅力調整值"}]},{name:"運動技能檢定",value:[{name:"技能等級",value:0},{name:"敏捷調整",use:"敏捷調整值"},{name:"本職調整",value:0},{name:"防具減值",use:"防具減值"}]},{name:"估價技能檢定",value:[{name:"技能等級",value:0},{name:"智力調整",use:"智力調整值"},{name:"本職調整",value:0}]},{name:"唬弄技能檢定",value:[{name:"技能等級",value:0},{name:"魅力調整",use:"魅力調整值"},{name:"本職調整",value:0}]},{name:"攀爬技能檢定",value:[{name:"技能等級",value:0},{name:"力量調整",use:"力量調整值"},{name:"本職調整",value:0},{name:"防具減值",use:"防具減值"}]},{name:"交涉技能檢定",value:[{name:"技能等級",value:0},{name:"魅力調整",use:"魅力調整值"},{name:"本職調整",value:0}]},{name:"偽裝技能檢定",value:[{name:"技能等級",value:0},{name:"魅力調整",use:"魅力調整值"},{name:"本職調整",value:0}]},{name:"脫逃技能檢定",value:[{name:"技能等級",value:0},{name:"敏捷調整",use:"敏捷調整值"},{name:"本職調整",value:0},{name:"防具減值",use:"防具減值"}]},{name:"飛行技能檢定",value:[{name:"技能等級",value:0},{name:"敏捷調整",use:"敏捷調整值"},{name:"本職調整",value:0},{name:"防具減值",use:"防具減值"}]},{name:"醫療技能檢定",value:[{name:"技能等級",value:0},{name:"睿智調整",use:"睿智調整值"},{name:"本職調整",value:0}]},{name:"威嚇技能檢定",value:[{name:"技能等級",value:0},{name:"魅力調整",use:"魅力調整值"},{name:"本職調整",value:0}]},{name:"感知技能檢定",value:[{name:"技能等級",value:0},{name:"睿智調整",use:"睿智調整值"},{name:"本職調整",value:0}]},{name:"騎術技能檢定",value:[{name:"技能等級",value:0},{name:"敏捷調整",use:"敏捷調整值"},{name:"本職調整",value:0},{name:"防具減值",use:"防具減值"}]},{name:"察顏觀色技能檢定",value:[{name:"技能等級",value:0},{name:"睿智調整",use:"睿智調整值"},{name:"本職調整",value:0}]},{name:"隱匿技能檢定",value:[{name:"技能等級",value:0},{name:"敏捷調整",use:"敏捷調整值"},{name:"本職調整",value:0},{name:"防具減值",use:"防具減值"}]},{name:"生存技能檢定",value:[{name:"技能等級",value:0},{name:"睿智調整",use:"睿智調整值"},{name:"本職調整",value:0}]},{name:"游泳技能檢定",value:[{name:"技能等級",value:0},{name:"力量調整",use:"力量調整值"},{name:"本職調整",value:0},{name:"防具減值",use:"防具減值"}]}],item:[{name:"白金幣",detail:"",amount:0,weight:.02,worth:10},{name:"金幣",detail:"",amount:0,weight:.02,worth:1},{name:"銀幣",detail:"",amount:0,weight:.02,worth:.1},{name:"銅幣",detail:"",amount:0,weight:.02,worth:.01}],spell:[],level:[[]],description:[{name:"背景",value:""},{name:"外表",value:""}]}}},RULE.mrbigmouth=$.extend(!0,{},RULE.PF),RULE.mrbigmouth.character.number.splice(1,0,{name:"歷練點數",value:[{name:"歷練點數",value:0}]},{name:"英雄點數",value:[{name:"歷練點數",value:0}]}),RULE.mrbigmouth.character.description.push({name:"創角問答",value:""})}(),function(){!function(e,t){function n(e,n){i.addType(e,function(o,a,s){var c,l,u,d,f=a,h=(new Date).getTime();if(!o){f={},d=[],u=0;try{for(o=n.length;o=n.key(u++);)r.test(o)&&(l=JSON.parse(n.getItem(o)),l.expires&&l.expires<=h?d.push(o):f[o.replace(r,"")]=l.data);for(;o=d.pop();)n.removeItem(o)}catch(p){}return f}if(o="__amplify__"+o,a===t){if(c=n.getItem(o),l=c?JSON.parse(c):{expires:-1},!(l.expires&&l.expires<=h))return l.data;n.removeItem(o)}else if(null===a)n.removeItem(o);else{l=JSON.stringify({data:a,expires:s.expires?h+s.expires:null});try{n.setItem(o,l)}catch(p){i[e]();try{n.setItem(o,l)}catch(p){throw i.error()}}}return f})}var i=e.store=function(e,t,n,r){var r=i.type;return n&&n.type&&n.type in i.types&&(r=n.type),i.types[r](e,t,n||{})};i.types={},i.type=null,i.addType=function(e,t){i.type||(i.type=e),i.types[e]=t,i[e]=function(t,n,r){return r=r||{},r.type=e,i(t,n,r)}},i.error=function(){return"amplify.store quota exceeded"};var r=/^__amplify__/;for(var o in{localStorage:1,sessionStorage:1})try{window[o].getItem&&n(o,window[o])}catch(a){}if(window.globalStorage)try{n("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===i.type&&(i.type="globalStorage")}catch(a){}!function(){if(!i.types.localStorage){var e=document.createElement("div"),n="amplify";e.style.display="none",document.getElementsByTagName("head")[0].appendChild(e);try{e.addBehavior("#default#userdata"),e.load(n)}catch(r){return e.parentNode.removeChild(e),void 0}i.addType("userData",function(r,o,a){e.load(n);var s,c,l,u,d,f=o,h=(new Date).getTime();if(!r){for(f={},d=[],u=0;s=e.XMLDocument.documentElement.attributes[u++];)c=JSON.parse(s.value),c.expires&&c.expires<=h?d.push(s.name):f[s.name]=c.data;for(;r=d.pop();)e.removeAttribute(r);return e.save(n),f}if(r=r.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-"),o===t){if(s=e.getAttribute(r),c=s?JSON.parse(s):{expires:-1},!(c.expires&&c.expires<=h))return c.data;e.removeAttribute(r)}else null===o?e.removeAttribute(r):(l=e.getAttribute(r),c=JSON.stringify({data:o,expires:a.expires?h+a.expires:null}),e.setAttribute(r,c));try{e.save(n)}catch(p){null===l?e.removeAttribute(r):e.setAttribute(r,l),i.userData();try{e.setAttribute(r,c),e.save(n)}catch(p){throw null===l?e.removeAttribute(r):e.setAttribute(r,l),i.error()}}return f})}}(),function(){function e(e){return e===t?t:JSON.parse(JSON.stringify(e))}var n={},r={};i.addType("memory",function(i,o,a){return i?o===t?e(n[i]):(r[i]&&(clearTimeout(r[i]),delete r[i]),null===o?(delete n[i],null):(n[i]=o,a.expires&&(r[i]=setTimeout(function(){delete n[i],delete r[i]},a.expires)),o)):e(n)})}()}(this.amplify=this.amplify||{}),STORE=amplify.store}(),function(){SCRIBE={room:!1,message:!1,userNick:!1,room:!1}}(),function(){TOOL={getUserNick:function(e){return e=Meteor.users.findOne(e),e?e.profile.nick:"不明人物"},convertTimeToChinese:function(e){return e=parseInt(e,10),e?moment(e).format("[(]YYYY/MM/DD HH:mm:ss[)]"):"(????/??/?? ??:??:??)"},userIsAdm:function(){var e=Session.get("RouterParams"),t=DB.room.findOne(e.room),n=Meteor.userId();return e.room===TRPG.public.id?!0:n&&(n==TRPG.adm||t&&-1!==_.indexOf(t.adm,n))},userIsPlayer:function(){var e=Session.get("RouterParams"),t=DB.room.findOne(e.room),n=Meteor.userId();return e.room===TRPG.public.id?!0:n&&(n==TRPG.adm||t&&(-1!==_.indexOf(t.adm,n)||-1!==_.indexOf(t.player,n)))},keyIsUndefined:function(){var e,t;for(t in arguments)if(this[arguments[t]]!==e)return!1;return!0}}}(),function(){var e=function(){return _.toArray(arguments).join(",")};MAP={marginLeft:10,marginTop:10,gridWidth:32,gridHeight:32,fontSize:16,getLeftByX:_.memoize(function(e){return e*MAP.gridWidth}),getTopByY:_.memoize(function(e){return e*MAP.gridHeight}),centerText:_.memoize(function(e,t){return e+=MAP.gridWidth/2,t=t+MAP.gridHeight-(MAP.gridHeight-MAP.fontSize)/2,[e,t]},e)}}(),function(){(function(e){function t(e,t){return function(n){return c(e.call(this,n),t)}}function n(e){return function(t){return this.lang().ordinal(e.call(this,t))}}function i(){}function r(e){a(this,e)}function o(e){var t=this._data={},n=e.years||e.year||e.y||0,i=e.months||e.month||e.M||0,r=e.weeks||e.week||e.w||0,o=e.days||e.day||e.d||0,a=e.hours||e.hour||e.h||0,c=e.minutes||e.minute||e.m||0,l=e.seconds||e.second||e.s||0,u=e.milliseconds||e.millisecond||e.ms||0;this._milliseconds=u+1e3*l+6e4*c+36e5*a,this._days=o+7*r,this._months=i+12*n,t.milliseconds=u%1e3,l+=s(u/1e3),t.seconds=l%60,c+=s(l/60),t.minutes=c%60,a+=s(c/60),t.hours=a%24,o+=s(a/24),o+=7*r,t.days=o%30,i+=s(o/30),t.months=i%12,n+=s(i/12),t.years=n
}function a(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function s(e){return 0>e?Math.ceil(e):Math.floor(e)}function c(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n}function l(e,t,n){var i,r=t._milliseconds,o=t._days,a=t._months;r&&e._d.setTime(+e+r*n),o&&e.date(e.date()+o*n),a&&(i=e.date(),e.date(1).month(e.month()+a*n).date(Math.min(i,e.daysInMonth())))}function u(e){return"[object Array]"===Object.prototype.toString.call(e)}function d(e,t){var n,i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),o=0;for(n=0;i>n;n++)~~e[n]!==~~t[n]&&o++;return o+r}function f(e,t){return t.abbr=e,N[e]||(N[e]=new i),N[e].set(t),N[e]}function h(e){return e?(!N[e]&&O&&require("./lang/"+e),N[e]):E.fn._lang}function p(e){return e.match(/\[.*\]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function m(e){var t,n,i=e.match(A);for(t=0,n=i.length;n>t;t++)i[t]=rt[i[t]]?rt[i[t]]:p(i[t]);return function(r){var o="";for(t=0;n>t;t++)o+="function"==typeof i[t].call?i[t].call(r,e):i[t];return o}}function g(e,t){function n(t){return e.lang().longDateFormat(t)||t}for(var i=5;i--&&$.test(t);)t=t.replace($,n);return tt[t]||(tt[t]=m(t)),tt[t](e)}function v(e){switch(e){case"DDDD":return B;case"YYYY":return F;case"YYYYY":return W;case"S":case"SS":case"SSS":case"DDD":return U;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return q;case"X":return X;case"Z":case"ZZ":return V;case"T":return Y;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return j;default:return new RegExp(e.replace("\\",""))}}function y(e,t,n){var i,r=n._a;switch(e){case"M":case"MM":r[1]=null==t?0:~~t-1;break;case"MMM":case"MMMM":i=h(n._l).monthsParse(t),null!=i?r[1]=i:n._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=t&&(r[2]=~~t);break;case"YY":r[0]=~~t+(~~t>68?1900:2e3);break;case"YYYY":case"YYYYY":r[0]=~~t;break;case"a":case"A":n._isPm="pm"===(t+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":r[3]=~~t;break;case"m":case"mm":r[4]=~~t;break;case"s":case"ss":r[5]=~~t;break;case"S":case"SS":case"SSS":r[6]=~~(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,i=(t+"").match(Q),i&&i[1]&&(n._tzh=~~i[1]),i&&i[2]&&(n._tzm=~~i[2]),i&&"+"===i[0]&&(n._tzh=-n._tzh,n._tzm=-n._tzm)}null==t&&(n._isValid=!1)}function b(e){var t,n,i=[];if(!e._d){for(t=0;7>t;t++)e._a[t]=i[t]=null==e._a[t]?2===t?1:0:e._a[t];i[3]+=e._tzh||0,i[4]+=e._tzm||0,n=new Date(0),e._useUTC?(n.setUTCFullYear(i[0],i[1],i[2]),n.setUTCHours(i[3],i[4],i[5],i[6])):(n.setFullYear(i[0],i[1],i[2]),n.setHours(i[3],i[4],i[5],i[6])),e._d=n}}function _(e){var t,n,i=e._f.match(A),r=e._i;for(e._a=[],t=0;t<i.length;t++)n=(v(i[t]).exec(r)||[])[0],n&&(r=r.slice(r.indexOf(n)+n.length)),rt[i[t]]&&y(i[t],n,e);e._isPm&&e._a[3]<12&&(e._a[3]+=12),e._isPm===!1&&12===e._a[3]&&(e._a[3]=0),b(e)}function w(e){for(var t,n,i,o,s=99;e._f.length;){if(t=a({},e),t._f=e._f.pop(),_(t),n=new r(t),n.isValid()){i=n;break}o=d(t._a,n.toArray()),s>o&&(s=o,i=n)}a(e,i)}function k(e){var t,n=e._i;if(J.exec(n)){for(e._f="YYYY-MM-DDT",t=0;4>t;t++)if(K[t][1].exec(n)){e._f+=K[t][0];break}V.exec(n)&&(e._f+=" Z"),_(e)}else e._d=new Date(n)}function S(t){var n=t._i,i=R.exec(n);n===e?t._d=new Date:i?t._d=new Date(+i[1]):"string"==typeof n?k(t):u(n)?(t._a=n.slice(0),b(t)):t._d=n instanceof Date?new Date(+n):new Date(n)}function T(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function C(e,t,n){var i=z(Math.abs(e)/1e3),r=z(i/60),o=z(r/60),a=z(o/24),s=z(a/365),c=45>i&&["s",i]||1===r&&["m"]||45>r&&["mm",r]||1===o&&["h"]||22>o&&["hh",o]||1===a&&["d"]||25>=a&&["dd",a]||45>=a&&["M"]||345>a&&["MM",z(a/30)]||1===s&&["y"]||["yy",s];return c[2]=t,c[3]=e>0,c[4]=n,T.apply({},c)}function x(e,t,n){var i=n-t,r=n-e.day();return r>i&&(r-=7),i-7>r&&(r+=7),Math.ceil(E(e).add("d",r).dayOfYear()/7)}function P(e){var t=e._i,n=e._f;return null===t||""===t?null:("string"==typeof t&&(e._i=t=h().preparse(t)),E.isMoment(t)?(e=a({},t),e._d=new Date(+t._d)):n?u(n)?w(e):_(e):S(e),new r(e))}function M(e,t){E.fn[e]=E.fn[e+"s"]=function(e){var n=this._isUTC?"UTC":"";return null!=e?(this._d["set"+n+t](e),this):this._d["get"+n+t]()}}function D(e){E.duration.fn[e]=function(){return this._data[e]}}function I(e,t){E.duration.fn["as"+e]=function(){return+this/t}}for(var E,L,H="2.0.0",z=Math.round,N={},O="undefined"!=typeof module&&module.exports,R=/^\/?Date\((\-?\d+)/i,A=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,$=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,j=/\d\d?/,U=/\d{1,3}/,B=/\d{3}/,F=/\d{1,4}/,W=/[+\-]?\d{1,6}/,q=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,V=/Z|[\+\-]\d\d:?\d\d/i,Y=/T/i,X=/[\+\-]?\d+(\.\d{1,3})?/,J=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,G="YYYY-MM-DDTHH:mm:ssZ",K=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Q=/([\+\-]|\d\d)/gi,Z="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),et={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},tt={},nt="DDD w W M D d".split(" "),it="M D H h m s w W".split(" "),rt={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return c(this.year()%100,2)},YYYY:function(){return c(this.year(),4)},YYYYY:function(){return c(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return c(~~(this.milliseconds()/10),2)},SSS:function(){return c(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+c(~~(e/60),2)+":"+c(~~e%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+c(~~(10*e/6),4)},X:function(){return this.unix()}};nt.length;)L=nt.pop(),rt[L+"o"]=n(rt[L]);for(;it.length;)L=it.pop(),rt[L+L]=t(rt[L],2);for(rt.DDDD=t(rt.DDD,3),i.prototype={set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,i;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=E([2e3,t]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(i.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(e,t,n,i):r.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return x(e,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}},E=function(e,t,n){return P({_i:e,_f:t,_l:n,_isUTC:!1})},E.utc=function(e,t,n){return P({_useUTC:!0,_isUTC:!0,_l:n,_i:e,_f:t})},E.unix=function(e){return E(1e3*e)},E.duration=function(e,t){var n,i=E.isDuration(e),r="number"==typeof e,a=i?e._data:r?{}:e;return r&&(t?a[t]=e:a.milliseconds=e),n=new o(a),i&&e.hasOwnProperty("_lang")&&(n._lang=e._lang),n},E.version=H,E.defaultFormat=G,E.lang=function(e,t){return e?(t?f(e,t):N[e]||h(e),E.duration.fn._lang=E.fn._lang=h(e),void 0):E.fn._lang._abbr},E.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),h(e)},E.isMoment=function(e){return e instanceof r},E.isDuration=function(e){return e instanceof o},E.fn=r.prototype={clone:function(){return E(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return E.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!d(this._a,(this._isUTC?E.utc(this._a):E(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(e){var t=g(this,e||E.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var n;return n="string"==typeof e?E.duration(+t,e):E.duration(e,t),l(this,n,1),this},subtract:function(e,t){var n;return n="string"==typeof e?E.duration(+t,e):E.duration(e,t),l(this,n,-1),this},diff:function(e,t,n){var i,r,o=this._isUTC?E(e).utc():E(e).local(),a=6e4*(this.zone()-o.zone());return t&&(t=t.replace(/s$/,"")),"year"===t||"month"===t?(i=432e5*(this.daysInMonth()+o.daysInMonth()),r=12*(this.year()-o.year())+(this.month()-o.month()),r+=(this-E(this).startOf("month")-(o-E(o).startOf("month")))/i,"year"===t&&(r/=12)):(i=this-o-a,r="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?i/864e5:"week"===t?i/6048e5:i),n?r:s(r)},from:function(e,t){return E.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(E(),e)},calendar:function(){var e=this.diff(E().startOf("day"),"days",!0),t=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(t,this))},isLeapYear:function(){var e=this.year();return e%4===0&&e%100!==0||e%400===0},isDST:function(){return this.zone()<E([this.year()]).zone()||this.zone()<E([this.year(),5]).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==e?t:this.add({d:e-t})},startOf:function(e){switch(e=e.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.day(0),this},endOf:function(e){return this.startOf(e).add(e.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+E(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+E(e).startOf(t)},isSame:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)===+E(e).startOf(t)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return E.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(e){var t=z((E(this).startOf("day")-E(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},isoWeek:function(e){var t=x(this,1,4);return null==e?t:this.add("d",7*(e-t))},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},lang:function(t){return t===e?this._lang:(this._lang=h(t),this)}},L=0;L<Z.length;L++)M(Z[L].toLowerCase().replace(/s$/,""),Z[L]);M("year","FullYear"),E.fn.days=E.fn.day,E.fn.weeks=E.fn.week,E.fn.isoWeeks=E.fn.isoWeek,E.duration.fn=o.prototype={weeks:function(){return s(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(e){var t=+this,n=C(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},lang:E.fn.lang};for(L in et)et.hasOwnProperty(L)&&(I(L,et[L]),D(L.toLowerCase()));I("Weeks",6048e5),E.lang("en",{ordinal:function(e){var t=e%10,n=1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),O&&(module.exports=E),"undefined"==typeof ender&&(this.moment=E),"function"==typeof define&&define.amd&&define("moment",[],function(){return E})}).call(this),moment.lang("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah點mm",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiem:function(e,t){return 9>e?"早上":11>e&&30>t?"上午":13>e&&30>t?"中午":18>e?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"一分鐘",mm:"%d分鐘",h:"一小時",hh:"%d小時",d:"一天",dd:"%d天",M:"一個月",MM:"%d個月",y:"一年",yy:"%d年"}}),moment.lang("zh-tw")}(),function(){var e={PF:"PF",3.5:"PF",mrbigmouth:"PF"};Router.map(function(){this.route("character",{path:"/character/:room/:character/",waitOn:function(){var t=this,n=this.params;return Meteor.subscribe("character",n.character,function(){var i=DB.character.findOne(n.character)||{};t.template="main_character_"+(e[i.rule]||"error")})}})})}(),function(){Template.main_character_PF.helpers({title:function(e){var t=Session.get("RouterParams"),e=DB.character.find(t.character,{fields:{name:1}}).fetch()[0]||{name:""},n=DB.room.find(t.room,{fields:{name:1}}).fetch()[0]||{name:""};return n.name+"--"+e.name+"角色表"},characterID:function(){return Session.get("RouterParams").character||""}});var e=function(e,t,n){var i=DB.character.findOne(e)||{};DB.message_all.insert({room:i.room,type:"room",msg:t+"角色「"+i.name+"」"+n+"。",character:i._id})},t=function(e){var t={character:Session.get("RouterParams").character,type:"number",name:e},i=DB.character_data.find(t,{fields:{_id:1}}).fetch()[0];return i?n(i._id):0},n=function(e){var t=DB.character_data.find(e,{fields:{character:1,value:1}}).fetch()[0];return t?_.reduce(t.value,function(e,i){var r,o,a={character:t.character,type:"number"};return i.value!==o?i.value+e:i.use!==o?(a.name=i.use,r=DB.character_data.find(a,{fields:{_id:1}}).fetch()[0],(r?n(r._id):0)+e):e},0):(console.log("cant find number"+e),0)},i=function(e,t){var n=Math.pow(10,String(e).length-String(e).indexOf(".")-1),i=Math.pow(10,String(t).length-String(t).indexOf(".")-1);return e*n*t*i/(n*i)},r=function(e,t){var n=Math.pow(10,String(e).length-String(e).indexOf(".")-1),i=Math.pow(10,String(t).length-String(t).indexOf(".")-1),r=Math.max(n,i);return(e*r+t*r)/r},o=function(e,t){var n={character:e,type:"item"},o={amount:1};return o[t]=1,_.reduce(DB.character_data.find(n,{fields:o}).fetch(),function(e,n){return r(e,i(n[t],n.amount))},0)},a=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/gm,"")},s=["０","１","２","３","４","５","６","７","８","９"],c=function(e){var t="";return _.each((e+"").split(""),function(e){t+=s[e]}),t},l=function(e){var t=DB.character_data.find({character:e,type:"level"},{fields:{level:1}}).fetch();return t.length>0?_.max(t,function(e){return e.level}).level:0},u=function(e,t){var n=DB.character_data.find({character:e,type:"known",belong:t},{fields:{circle:1}}).fetch();return n.length>0?_.max(n,function(e){return e.circle}).circle:0},d=function(e,t,n,i){var r={character:t,belong:n};switch("all"!==i&&(r.circle=i),e){case"known":r.type="known";break;case"slot":r.type="slot";break;case"slotAvailable":r.type="slot",r.used=!1}return DB.character_data.find(r).count()},f=function(e,t){$(t.firstNode).find("div.content:first").toggle()};Template.character_PF_profile.helpers({characterName:function(e){var t=DB.character.find(e,{fields:{name:1}}).fetch()[0];return t?t.name:""},profileList:function(e){return DB.character_data.find({character:e,type:"profile"},{sort:{sort:1}})}}),Template.character_PF_profile.events({"click legend":f,"click legend a":function(t,n){var i=n.data+"",r={character:i,type:"profile",value:""};return t.stopPropagation(),r.name=window.prompt("請輸入要新增的基本訊息名稱："),r.name?(r["class"]=window.prompt("請設定輸入格大小(1~9)："),r["class"]?isNaN(r["class"])||(r["class"]="span"+r["class"]):r["class"]="",DB.character_data.insert(r,function(){e(i,"新增了","的「"+r.name+"」基本訊息資料")}),void 0):!1},"click i.icon-remove":function(t,n){var i=this,r=n.data+"";confirm("你確定要刪除角色的「"+i.name+"」基本訊息嗎？")&&DB.character_data.remove(i._id,function(){e(r,"刪除了","的「"+i.name+"」基本訊息資料")})},"change input":function(t,n){var i=t.currentTarget.name,r=t.currentTarget.value,o=this,a=n.data+"";"name"===i?DB.character.update(a,{$set:{name:r}},function(){e(a,"重新命名","為「"+r+"」")}):DB.character_data.update(o._id,{$set:{value:r}},function(){e(a,"更新了","的「"+o.name+"」基本訊息資料")})}}),Template.character_PF_number.helpers({numberList:function(e){return DB.character_data.find({character:e,type:"number"},{sort:{sort:1}})}}),Template.character_PF_number.events({"click legend":f,"click legend a":function(t,n){var i,r=n.data+"",o={character:r,type:"number",value:[]};return t.stopPropagation(),o.name=window.prompt("請輸入要新增的數值名稱："),o.name?DB.character_data.findOne({character:r,type:"number",name:o.name})!==i?(alert("角色已經存在數值「"+o.name+"」"),!1):(DB.character_data.insert(o,function(){e(r,"新增了","的「"+o.name+"」數值資料")}),void 0):!1}}),Template.character_PF_number_list.helpers({findNumber:n,findNameNumber:t}),Template.character_PF_number_list.events({"click label > i.icon-remove":function(t,n){var i=n.data;confirm("你確定要刪除角色的「"+i.name+"」數值資料嗎？")&&DB.character_data.remove(i._id,function(){e(i.character,"刪除了","的「"+i.name+"」數值資料")})},"click div.eachNumber span.add-on > i.icon-remove":function(t,n){var i,r,o=n.data,a=o.name,s=o.value,c=this.name;return _.find(s,function(e,t){return e.name===c?(i=t,!0):!1}),i===r?(console.log("error: can't find name:["+c+"] index!"),!1):(confirm("你確定要刪除「"+a+"」數值中的「"+c+"」加值嗎？")&&(s.splice(i,1),DB.character_data.update(o._id,{$set:{value:s}},function(){e(o.character,"刪除了","的「"+a+"」數值的「"+c+"」加值")})),void 0)},"click div.eachNumber strong":function(t,n){var i,r=n.data,o=r.value,a=($(t.currentTarget),r.name,{});return a.name=window.prompt("請輸入加值名稱："),a.name?_.find(o,function(e){return e.name===a.name})!==i?(alert("此列數值已存在名稱為「"+a.name+"」的加值！"),!1):(a.use=window.prompt("請輸入此加值所參照的角色數值名稱\n（或不輸入，手動修改數值）："),a.use||(delete a.use,a.value=0),o.push(a),DB.character_data.update(r._id,{$set:{value:o}},function(){e(r.character,"新增了","的「"+r.name+"」數值的「"+a.name+"」加值")}),void 0):!1},"change input":function(t,n){var i,r,o=n.data,a=o.name,s=o.value,c=this.name;return _.find(s,function(e,t){return e.name===c?(i=t,!0):!1}),i===r?(console.log("error: can't find name:["+c+"] index!"),!1):(s[i].value=parseInt(t.currentTarget.value,10),DB.character_data.update(o._id,{$set:{value:s}},function(){e(o.character,"修改了","的「"+a+"」數值的「"+c+"」加值")}),void 0)}}),Template.character_PF_dice.helpers({diceList:function(e){return DB.character_data.find({character:e,type:"dice"},{sort:{sort:1}})}}),Template.character_PF_dice.events({"click legend":f,"click legend a":function(t,n){var i,r=n.data+"",o={character:r,type:"dice",value:[]};return t.stopPropagation(),o.name=window.prompt("請輸入要新增的擲骰名稱："),o.name?DB.character_data.findOne({character:r,type:"dice",name:o.name})!==i?(alert("角色已經存在擲骰資料「"+o.name+"」"),!1):(DB.character_data.insert(o,function(){e(r,"新增了","的「"+o.name+"」擲骰資料")}),void 0):!1}}),Template.character_PF_dice_list.helpers({getDice:n,findNameNumber:t}),Template.character_PF_dice_list.events({"click label > i.icon-remove":function(t,n){var i=n.data;confirm("你確定要刪除角色的「"+i.name+"」擲骰資料嗎？")&&DB.character_data.remove(i._id,function(){e(i.character,"刪除了","的「"+i.name+"」擲骰資料")})},"click div.eachDice span.add-on > i.icon-remove":function(t,n){var i,r,o=n.data,a=o.name,s=o.value,c=this.name;return _.find(s,function(e,t){return e.name===c?(i=t,!0):!1}),i===r?(console.log("error: can't find name:["+c+"] index!"),!1):(confirm("你確定要刪除「"+a+"」擲骰中的「"+c+"」加值嗎？")&&(s.splice(i,1),DB.character_data.update(o._id,{$set:{value:s}},function(){e(o.character,"刪除了","的「"+a+"」擲骰的「"+c+"」加值")})),void 0)},"click div.eachDice strong":function(t,n){var i,r=n.data,o=r.value,a=($(t.currentTarget),r.name,{});return a.name=window.prompt("請輸入加值名稱："),a.name?_.find(o,function(e){return e.name===a.name})!==i?(alert("此列數值已存在名稱為「"+a.name+"」的加值！"),!1):(a.use=window.prompt("請輸入此加值所參照的角色數值名稱\n（或不輸入，手動修改數值）："),a.use||(delete a.use,a.value=0),o.push(a),DB.character_data.update(r._id,{$set:{value:o}},function(){e(r.character,"新增了","的「"+r.name+"」擲骰的「"+a.name+"」加值")}),void 0):!1},"change input":function(t,n){var i,r,o=n.data,a=o.name,s=o.value,c=this.name;return _.find(s,function(e,t){return e.name===c?(i=t,!0):!1}),i===r?(console.log("error: can't find name:["+c+"] index!"),!1):(s[i].value=parseInt(t.currentTarget.value,10),DB.character_data.update(o._id,{$set:{value:s}},function(){e(o.character,"修改了","的「"+a+"」擲骰的「"+c+"」加值")}),void 0)}}),Template.character_PF_item.helpers({itemList:function(e){return DB.character_data.find({character:e,type:"item"},{sort:{sort:1}})},sumItem:o}),Template.character_PF_item.events({"click legend":f,"click legend a":function(t,n){var i=n.data+"",r={character:i,type:"item",name:"",detail:"",amount:1,weight:0,worth:0};t.stopPropagation(),DB.character_data.insert(r,function(){e(i,"新增了","的物品項目")})}}),Template.character_PF_item_list.helpers({trim:a}),Template.character_PF_item_list.events({"click i.icon-plus, click i.icon-th-list":function(e){$(e.currentTarget).closest("div.eachItem").find("div.detail").toggle()},"click i.icon-remove":function(t,n){var i=n.data,r=i.character,o=i.name;confirm("你確定要刪除角色的物品「"+o+"」嗎？")&&DB.character_data.remove(i._id,function(){e(r,"刪除了","的「"+o+"」物品資料")})},"change input, change textarea":function(t,n){var i=n.data,r=i.character,o=t.currentTarget.name,a=t.currentTarget.value,s={},c="的"+(i.name?"「"+i.name+"」":"一項未命名")+"物品細節";switch(o){case"amount":case"weight":case"worth":s[o]=parseFloat(a);break;case"name":c+="為「"+a+"」",s[o]=a;break;case"detail":s[o]=a}DB.character_data.update(i._id,{$set:s},function(){e(r,"調整了",c)})}});var h=[],p=new Deps.Dependency;Deps.autorun(function(){var e,t=[],n={},i=Session.get("RouterParams")||{};DB.character_data.find({character:i.character,type:"known"},{fields:{belong:1}}).forEach(function(r){n[r.belong]===e&&(t.push({character:i.character,belong:r.belong}),n[r.belong]=!0)}),h.length!==t.length&&(h=t,p.changed())}),Template.character_PF_spell.helpers({allClass:function(){return p.depend(),h}}),Template.character_PF_spell.events({"click legend":f,"click ul.nav-tabs li":function(e){var t,n,i,r=$(e.currentTarget);return r.hasClass("active")?!0:(t=r.closest("ul").children(),n=t.index(r),i=t.closest("div.content").find("div.tab-content div.tab-pane"),t.not(r).removeClass("active"),r.addClass("active"),i.removeClass("in active").eq(n).addClass("in active"),!0)},"click ul.nav-tabs a.add":function(t,n){var i,r,o=n.data+"",a={belong:"",character:o,circle:0,type:"known",name:"",detail:""};return t.stopPropagation(),a.belong=window.prompt("請輸入要新增的法術體系名稱："),a.belong?(i={character:o,type:"known",belong:a.belong},DB.character_data.findOne(i)!==r?(alert("角色已經法術體系「"+a.belong+"」"),!1):(DB.character_data.insert(a,function(){e(o,"新增了","的「"+a.belong+"」法術體系")}),void 0)):!1}}),Template.character_PF_spell.rendered=function(){$(this.find("li")).addClass("active"),$(this.find("div.tab-pane")).addClass("in active")},Template.character_PF_spellClass.helpers({totalSpell:d,spellKnownCircle:function(e,t){var n=u(e,t)+2;return n>10&&(n=10),_.map(_.range(n),function(n){return{character:e,belong:t,circle:n}})},spellSlotCircle:function(e,t){var n=u(e,t)+1;return n>10&&(n=10),_.map(_.range(n),function(n){return{character:e,belong:t,circle:n}})}}),Template.character_PF_spellClass.events({"click h4":function(e){$(e.currentTarget).next().toggle()}}),Template.character_PF_spellKnown.helpers({totalSpell:d,spellKnown:function(e,t,n){return DB.character_data.find({character:e,type:"known",belong:t,circle:n},{sort:{sort:1}})},intToBig:c,trim:a}),Template.character_PF_spellKnown.events({"click h5":function(e){$(e.currentTarget).next().toggle()},"click div.eachKnown i.icon-pencil, click div.eachKnown i.icon-th-list":function(e){e.stopPropagation(),$(e.currentTarget).closest("div.eachKnown").find("textarea").toggle()},"click i.icon-plus":function(t){var n=this.character,i=this.circle,r=this.belong,o={belong:r,character:n,circle:i,type:"known",name:"",detail:""};t.stopPropagation(),DB.character_data.insert(o,function(){e(n,"新增了","「"+r+"」職業的一個"+i+"環法術")})},"click i.icon-remove":function(){var t=this.name,n=this.character,i=this.belong,r=this.circle;confirm("你確定要刪除法術「"+t+"」嗎？")&&DB.character_data.remove(this._id,function(){e(n,"刪除了","「"+i+"」職業的"+(t?"「"+t+"」":"一個未命名")+r+"環法術資料")})},"change input, change textarea":function(t){var n=this,i=n.character,r=n.name,o=n.belong,a=n.circle,s=t.currentTarget.name,c=t.currentTarget.value,l={},u="「"+o+"」職業的"+(r?"「"+r+"」":"一個未命名")+a+"環法術資料";"name"===s&&(u+="為「"+c+"」"),l[s]=c,DB.character_data.update(n._id,{$set:l},function(){e(i,"更新了",u)})}}),Template.character_PF_spellSlot.helpers({totalSpell:d,intToBig:c,spellSlot:function(e,t,n){return DB.character_data.find({character:e,type:"slot",belong:t,circle:n},{sort:{sort:1}})},prepareList:function(e,t,n,i){var r=[];return DB.character_data.find({character:e,type:"known",belong:t,circle:n},{sort:{sort:1},fields:{name:1}}).forEach(function(e){r.push(e.name)}),i?r.unshift(i):r.unshift("未準備"),r}}),Template.character_PF_spellSlot.events({"click i.icon-plus":function(){var t=this.character,n=this.circle,i=this.belong,r={belong:i,character:t,circle:n,type:"slot",name:"",used:!1};console.log(this),DB.character_data.insert(r,function(){e(t,"調整了","在「"+i+"」職業"+n+"環法術的法術格數量")})},"click i.icon-minus":function(){var t=this.character,n=this.circle,i=this.belong,r=DB.character_data.findOne({character:t,type:"slot",belong:i,circle:n},{sort:{sort:-1}});console.log(this),DB.character_data.remove(r._id,function(){e(t,"調整了","在「"+i+"」職業"+n+"環法術的法術格數量")})},"change select":function(t){var n=this,i=n.character,r=n.belong,o=n.circle,a=$(t.currentTarget).val();DB.character_data.update(n._id,{$set:{name:a}},function(){e(i,"調整了","在「"+r+"」職業"+o+"環法術的準備法術")})},"click i.icon-ok":function(){var t=this,n=t.character,i=t.belong,r=t.circle,o=t.used?!1:!0;DB.character_data.update(t._id,{$set:{used:o}},function(){e(n,"調整了","在「"+i+"」職業"+r+"環法術的法術格使用情形")})}}),Template.character_PF_level.helpers({eachLevel:function(e){return _.map(_.range(l(e)+1),function(t){return{character:e,level:t}})},levelList:function(e){return DB.character_data.find({character:e.character,type:"level",level:e.level},{sort:{sort:1}})},intToBig:c}),Template.character_PF_level.events({"click legend":f,"click legend a.add":function(t,n){var i=n.data+"",r=l(i)+1,o={character:i,type:"level",level:r,name:"",detail:""};t.stopPropagation(),DB.character_data.insert(o,function(){e(i,"提升了","的資訊紀錄至"+r+"級")})},"click div.eachLevel a.addAbility":function(){var t=this.character,n=this.level,i={character:t,type:"level",level:n,name:"",detail:""};DB.character_data.insert(i,function(){e(t,"更新了",n+"級的等級資訊紀錄")})}}),Template.character_PF_level_list.helpers({trim:a}),Template.character_PF_level_list.events({"click div.eachAbility i.icon-plus, click div.eachAbility i.icon-th-list":function(e){$(e.currentTarget).closest("div.eachAbility").find("textarea").toggle()},"click div.eachAbility i.icon-remove":function(t,n){var i=n.data,r=i.level;confirm("你確定要刪除這筆等級"+r+"的資訊紀錄嗎？")&&DB.character_data.remove(i._id,function(){e(i.character,"更新了",r+"級的等級資訊紀錄")})},"change input, change textarea":function(t,n){var i=n.data,r=t.currentTarget.name,o={};o[r]=t.currentTarget.value,DB.character_data.update(i._id,{$set:o},function(){e(i.character,"更新了",i.level+"級的等級資訊紀錄")})}}),Template.character_PF_description.helpers({descriptionList:function(e){return DB.character_data.find({character:e,type:"description"},{sort:{sort:1}})},trim:a}),Template.character_PF_description.events({"click legend":f,"click legend a":function(t,n){var i,r=n.data+"",o={character:r,type:"description",value:""};return t.stopPropagation(),o.name=window.prompt("請輸入要新增的額外詳述標題："),o.name?DB.character_data.findOne({character:r,type:"description",name:o.name})!==i?(alert("角色已經存在額外詳述「"+o.name+"」"),!1):(DB.character_data.insert(o,function(){e(r,"新增了","的額外詳述「"+o.name+"」")}),void 0):!1},"click i.icon-remove":function(t,n){var i=this.name,r=n.data+"";confirm("你確定要刪除角色的「"+i+"」額外詳述嗎？")&&DB.character_data.remove(this._id,function(){e(r,"刪除了","的額外詳述「"+i+"」")})},"change textarea":function(t,n){var i=this.name,r=n.data+"",o={value:t.currentTarget.value};DB.character_data.update(this._id,{$set:o},function(){e(r,"更新了","的額外詳述「"+i+"」")})}})}(),function(){var e,t,n,i,r=new Deps.Dependency;e=function(e){r.changed(),t.data("diceData",e).modal("show")},Template.main_explain.events({"click a.dice":function(){var t=Session.get("RouterParams")||{};e({room:t.room})}}),Template.chapter_section.events({"click a.dice":function(t,n){var i=Session.get("RouterParams")||{},r=DB.room.findOne(i.room),o=DB.record.findOne(i.chapter),a=DB.record.findOne(n.data._id);e({title:"擲骰--"+r.name+"--"+o.name+"--"+a.name,room:r._id,chapter:o._id,section:a._id})}}),Meteor.startup(function(){var e;t=$("#dice_form").modal({show:!1,backdrop:!1}),t.draggable({handle:"div.modal-header",cursor:"move",delay:0}),n=t.find("div.mainDice:first"),i=t.find("div.eachDice:first").clone(),e=n.find("input.times:first"),e.on("change",function(){var e=$(this).val(),t=n.nextAll("div.eachDice"),r=parseInt(e,10)-t.length;if(e>0)for(t.not(":lt("+e+")").remove();(r-=1)>=0;)t.last().after(i.clone())}),t.find("input.who").typeahead({source:[],minLength:0,items:255,css:{"max-height":"300px","overflow-y":"auto"}}).end().find("input.saveName").typeahead({source:[],minLength:0,items:255,css:{"max-height":"300px","overflow-y":"auto"}}).end().find("input.name").typeahead({source:[],minLength:0,items:255,css:{"max-height":"300px","overflow-y":"auto"}}).end().find("input.face").typeahead({source:["2","3","4","6","8","10","12","20","100"],items:9,minLength:0,matcher:function(){return!0}}),Deps.autorun(function(){var e=Session.get("RouterParams")||{},n=DB.room.findOne(e.room),i={adm:Meteor.userId()};n&&(i.room=n._id),t.find("input.who").data("typeahead").source=_.pluck(DB.character.find(i).fetch(),"name")
});var r=function(e,t){return _.reduce(t,function(t,n){var i;return n.value!==i?n.value+t:n.use!==i?(o(e,n.use)||0)+t:t},0)},o=function(e,t){var n=DB.character_data.findOne({character:e,type:"dice",name:t});return n?r(e,n.value):0};t.find("input.who").on("change",function(){var e=this.value,n=DB.character.findOne({adm:Meteor.userId(),name:e}),i=STORE("QuickDice")||{},o={};i=i[e]||{},n&&(DB.character_data.find({character:n._id,type:"dice"},{sort:{sort:1}}).forEach(function(e){var t=r(n._id,e.value);i[e.name]={times:1,isHide:!1,dices:[{name:e.name,note:"",addEach:!1,amount:1,face:20,add:t,extra:0}]},o[e.name]={note:"",addEach:!1,amount:1,face:20,add:t,extra:0}}),t.find("input.saveName").data("typeahead").source=_.keys(i),t.find("input.saveName").data("QuickDice",i),t.find("input.name").data("typeahead").source=_.keys(o),t.find("input.name").data("QuickDice",o))}).end().find("input.saveName").on("change",function(){var e,n,i,r,o,a=this.value,s=$.data(this,"QuickDice");return s===o?!0:(e=s[a],e===o?!0:(n=e.dices,i=_.size(n),r=_.keys(n),i?(e&&t.find("input.times").val(i).trigger("change").end().find("input.isHide").prop("checked",e.isHide).end().find("input.save").prop("checked",!1).end().find("div.eachDice").each(function(e){var t=r[e],i=n[t];$(this).find("input").filter(".name").val(t).end().filter(".addEach").prop("checked",i.addEach).end().filter(".amount").val(i.amount).end().filter(".face").val(i.face).end().filter(".add").val(i.add).end().filter(".extra").val(0)}),void 0):!0))}).end().find("input.name").on("change",function(){var e=$(this).closest("div.eachDice").find("input"),t=this.value,n=$.data(this,"QuickDice"),i=n[t];i&&e.filter(".note").val(i.note).end().filter(".addEach").prop("checked",i.addEach).end().filter(".amount").val(i.amount).end().filter(".face").val(i.face).end().filter(".add").val(i.add).end().filter(".extra").val(0)})}),Template.dice_form.helpers({title:function(){r.depend();var e=t&&t.data("diceData");return e?e.title:"擲骰"}}),Template.dice_form.events({"click button.btn-primary":function(){var e,n,i=t.data("diceData"),r=i.room,o=i.chapter,a=i.section,s=t.find("input"),c=s.filter(".who").val(),l=s.filter(".isHide").prop("checked"),u=s.filter(".isSave").prop("checked"),d={};console.log(i);debugger;t.find("div.eachDice").each(function(){var e=$(this).find("input"),t={type:"dice",room:r,chapter:o,section:a,who:c,isHide:l,name:e.filter(".name").val(),note:e.filter(".note").val(),addEach:e.filter(".addEach").prop("checked"),amount:parseInt(e.filter(".amount").val(),10),face:parseInt(e.filter(".face").val(),10),add:parseInt(e.filter(".add").val(),10),extra:parseInt(e.filter(".extra").val(),10)};u&&(d[t.name]=_.pick(t,"addEach","amount","face","add","extra")),DB.message_all.insert(t)}),u&&(e=s.filter(".saveName").val(),n=STORE("QuickDice")||{},n[c]=n[c]||{},n[c][e]={isHide:l,dices:d},STORE("QuickDice",n)),t.modal("hide").find("form").trigger("reset")}})}(),function(){Router.map(function(){this.route("document",{path:"/room/:room/doc/",template:"main_document",before:function(){Meteor.subscribe("documentList",this.params.room),Meteor.subscribe("document",this.params.hash)}})}),Template.main_document.helpers({rootDocument:function(){var e=Session.get("RouterParams");return DB.document.find({room:e.room,parent:null},{sort:{sort:1},fields:{_id:1,parent:1,name:1}})},thisDocument:function(){var e=Session.get("RouterParams");return DB.document.findOne(e.hash)},isAdm:TOOL.userIsAdm}),Template.main_document.events({"click i.icon-plus-sign":function(e){{var t=Session.get("RouterParams"),n=t.room,i=this._id||null,r={};$(e.currentTarget).closest("li.eachDocument")}return e.preventDefault(),e.stopImmediatePropagation(),r.room=n,r.name=window.prompt("請輸入資料標題"),r.name?(r.detail="",r.parent=i,DB.document.insert(r),void 0):!1}}),Template.main_document_nav.helpers({hasChildren:function(){return DB.document.find({parent:this._id}).count()>0?!0:!1},children:function(){return DB.document.find({parent:this._id},{sort:{sort:1},fields:{_id:1,parent:1,name:1}})},isAdm:TOOL.userIsAdm}),Template.main_document_nav.events({"click i.icon-folder-close, click i.icon-folder-open":function(e){e.preventDefault(),e.stopImmediatePropagation();var t=$(e.currentTarget);t.hasClass("icon-folder-open")?t.removeClass("icon-folder-open").addClass("icon-folder-close").closest("li.eachDocument").find("ul:first").hide():t.removeClass("icon-folder-close").addClass("icon-folder-open").closest("li.eachDocument").find("ul:first").show()}}),Template.main_document_detail.helpers({timeChinese:TOOL.convertTimeToChinese,getNick:TOOL.getUserNick,isAdm:TOOL.userIsAdm}),Template.main_document_detail.events({"click i.icon-pencil":function(e,t){var n=this._id,i=this.name,r=this.room,o=window.prompt("請輸入新的資料標題",i);e.stopImmediatePropagation(),i!==o&&DB.document.update(n,{$set:{name:o}},function(){DB.message_all.insert({type:"room",room:r,document:n,msg:"修改資料「"+i+"」為「"+o+"」。"})});var a=$(t.firstNode);return a.hasClass("editing")?!1:(a.addClass("editing").find("div.detail").prop("contenteditable",!0).trigger("focus"),void 0)},"click i.icon-trash":function(e){var t=this._id,n=this.room,i=this.name,r=DB.document.findOne(t),o=r.parent||null,a=r.sort;e.stopImmediatePropagation(),window.confirm("確定刪除此筆資料?")&&DB.document.remove(t,function(){DB.document.find({parent:t}).forEach(function(e){DB.document.update(e._id,{$set:{parent:o}})}),DB.document.find({parent:o,sort:{$gt:a}}).forEach(function(e){DB.document.update(e._id,{$inc:{sort:-1}})}),DB.message_all.insert({type:"room",room:n,document:t,msg:"刪除了資料「"+i+"」。"})})},"click i.icon-arrow-up, click i.icon-arrow-down":function(e){var t,n=this._id,i=this.sort;if(e.stopImmediatePropagation(),$(e.currentTarget).hasClass("icon-arrow-up")){if(0===i)return!1;i-=1,(t=DB.document.findOne({room:this.room,parent:this.parent,sort:i}))&&DB.document.update(t._id,{$inc:{sort:1}})}else i+=1,(t=DB.document.findOne({room:this.room,parent:this.parent,sort:i}))&&DB.document.update(t._id,{$inc:{sort:-1}});DB.document.update(n,{$set:{sort:i}})},"click button.btn-cancel":function(e,t){$(t.firstNode).removeClass("editing").find("div.detail").prop("contenteditable",!1)},"click button.btn-primary":function(e,t){e.stopImmediatePropagation();var n=this._id,i=this.name,r=this.room,o=$(t.firstNode).find("div.detail").html();DB.document.update(n,{$set:{detail:o}},function(){DB.message_all.insert({type:"room",room:r,document:n,msg:"修改了資料「"+i+"」。"})}),$(t.firstNode).removeClass("editing").find("div.detail").prop("contenteditable",!1)}}),Template.main_document_detail.rendered=function(){var e=this;e.computation=Deps.autorun(function(){var t=Session.get("RouterParams"),n=DB.document.find(t.hash,{fields:{detail:1}}).fetch();e.find("div.detail").innerHTML=n.length>0?n[0].detail:""})},Template.main_document_detail.destroyed=function(){this.computation.stop()}}(),function(){Template.allApplyRoom.helpers({isAdm:function(){return Meteor.userId()==TRPG.adm},applying:function(){return DB.room.find({status:0})},getName:function(e){return e=e[0],Meteor.users.findOne({_id:e}).profile.nick+"("+e+")"}}),Template.allApplyRoom.events({"click button.agree":function(e){var t=$(e.currentTarget).attr("data-id");DB.room.update({_id:t},{$set:{status:1}},{multi:!1},function(){console.log(arguments)})},"click button.refuse":function(e){var t=$(e.currentTarget).attr("data-id");DB.room.remove({_id:t},function(){console.log(arguments)})}})}(),function(){Router.map(function(){this.route("map",{path:"/room/:room/:chapter/map/:mapID/",template:"main_map",yieldTemplates:{map_message:{to:"south"},map_info:{to:"west"}},waitOn:function(){var e=this.params;return[Meteor.subscribe("map",e.room,e.mapID),Meteor.subscribe("characterList",e.room)]},after:function(){var e,t,n=_.extend({},this.params);n.hash===t&&(e=DB.map.find(n.mapID,{fields:{round:1}}).fetch(),e=e[0]||{},n.hash=e.round||"1",Session.set("RouterParams",n)),$(window).off("selectstart").on("selectstart",function(e){e.preventDefault()}),$.rule("#map svg text","style").remove(),$.rule("#map svg text {font-size:"+MAP.fontSize+"px;}").appendTo("style")}})}),Template.map_message.helpers({allMsgs:function(){var e=Session.get("RouterParams"),t=e.room,n=DB.message_all.find({room:t,type:{$in:["chat","outside","dice"]}},{sort:{time:1}}),i=_.debounce(function(){var e=$("#map_message");e.scrollTop(e.prop("scrollHeight"))},100);return n.observeChanges({added:function(){{var e=$("body").data("layout");$("#map_message")}e&&"function"==typeof e.open&&e.open("south"),i()}}),n},timeChinese:TOOL.convertTimeToChinese,getNick:TOOL.getUserNick,roomName:function(e){return e=DB.room.findOne({_id:e}),e?e.name:""},typeChinese:function(e){return TRPG.options.messageType[e]},typeChat:function(){return"chat"===this.type||"outside"===this.type},typeDice:function(){return"dice"===this.type},diceResult:function(){var e,t=this.result,n=t.length,i=this.face,r=this.add,o=r>=0?"+ ":"",a=0;return this.addEach?(e="[1d"+i+o+r+"] x "+n+"結果分別為 ",e+=_.map(t,function(e){var t=e+r;return a+=t,e+"("+t+")"}).join(","),e+=" 總合為 "+a+" 。"):(e=n+"d"+i+o+r+"結果為 ",e+=t.join(","),e+=" 總合為",e+=_.reduce(t,function(e,t){return e+t},r),e+=" 。"),e}}),Template.main_map.helpers({mapData:function(){var e=Session.get("RouterParams"),t=DB.map.find(e.mapID,{fields:{sizeX:1,sizeY:1}}).fetch();return t=t.length?t[0]:{}}});var e=$("#map_editForm"),t=new Deps.Dependency,n=[],i=function(i){n=_.uniq(n.concat(i)),t.changed(),e.modal("show")};Template.map_editForm.rendered=function(){e=$("#map_editForm").modal({show:!1})},Template.map_editForm.helpers({editing:function(){var i;return t.depend(),n.length<1?(e.modal("hide"),[]):(i=_.map(n,function(e){return"string"==typeof e?DB.map_detail.findOne(e):e}),_.compact(i))},isType:function(e,t){return e===t}}),Template.map_editForm.events({"click i.icon-ok":function(e){var i=this,r=$(e.currentTarget).closest("div.eachEdit"),o=r.closest("div.modal-body").children("div.eachEdit").index(r),a={map:i.map,round:i.round,type:i.type};if(i._id)r.find("[name]").each(function(){var e=$(this).val(),t=this.name;i[t]!=e&&(a[t]=e)}),DB.map_detail.update(i._id,{$set:a},function(){n.splice(o,1),t.changed()});else{r.find("[name]").each(function(){a[this.name]=$(this).val()});debugger;DB.map_detail.insert(a,function(){n.splice(o,1),t.changed()})}},"click i.icon-trash":function(e){var i=this,r=$(e.currentTarget).closest("div.eachEdit"),o=r.closest("div.modal-body").children("div.eachEdit").index(r);confirm("確定要刪除此項資料?")&&(i._id&&DB.map_detail.remove(i._id),n.splice(o,1),t.changed())},"click i.icon-ban-circle":function(e){var i=$(e.currentTarget).closest("div.eachEdit"),r=i.closest("div.modal-body").children("div.eachEdit").index(i);n.splice(r,1),t.changed()}}),Template.map_edit_affect.helpers({units:function(){var e=(this.map,this.round,this.unit);return _.map(DB.map_detail.find({map:this.map,round:this.round,type:"unit"},{fields:{_id:1,name:1}}).fetch(),function(t){return{_id:t._id,name:t.name,selected:-1!==_.indexOf(e,t._id)}})}}),Template.map_edit_land.helpers({showList:function(){return[{value:"land",name:"方格底色",selected:"land"===this.show},{value:"mist",name:"半透明遮蓋",selected:"mist"===this.show},{value:"wall",name:"方格色邊",selected:"wall"===this.show}]}}),Template.map_edit_land.rendered=function(){$(this.find("input.color")).minicolors()},Template.map_edit_unit.helpers({allCharacter:function(){var e=Session.get("RouterParams"),t=this.character;return _.map(DB.character.find({room:e.room},{fields:{_id:1,name:1}}).fetch(),function(e){return{_id:e._id,name:e.name,selected:e._id===t}})}}),Session.setDefault("mapScale",1),Template.map_svg.helpers({totalWidth:function(){var e=Session.get("mapScale"),t=this.sizeX+2;return t*MAP.gridWidth*e+MAP.marginLeft+""},totalHeight:function(){var e=Session.get("mapScale"),t=this.sizeY+2;return t*MAP.gridHeight*e+MAP.marginTop+""},marginLeft:function(){return MAP.marginLeft},marginTop:function(){return MAP.marginTop},transform:function(){var e=Session.get("mapScale");return"scale("+e+")"},gridLabel:function(){var e,t,n,i,r,o=this.sizeX,a=this.sizeY,s=[];for(i=1;o>=i;i+=1)t=MAP.getLeftByX(i),e=MAP.centerText(t,0),s.push({text:i,textLeft:e[0],textTop:e[1],left:t,top:0,width:MAP.gridWidth,height:MAP.gridHeight}),n=MAP.getTopByY(o+1),e=MAP.centerText(t,n),s.push({text:i,textLeft:e[0],textTop:e[1],left:t,top:n,width:MAP.gridWidth,height:MAP.gridHeight});for(r=1;a>=r;r+=1)n=MAP.getTopByY(r),e=MAP.centerText(0,n),s.push({text:r,textLeft:e[0],textTop:e[1],left:0,top:n,width:MAP.gridWidth,height:MAP.gridHeight}),t=MAP.getLeftByX(o+1),e=MAP.centerText(t,n),s.push({text:r,textLeft:e[0],textTop:e[1],left:MAP.getLeftByX(o+1),top:n,width:MAP.gridWidth,height:MAP.gridHeight});return s},textStyle:function(){var e=MAP.fontSize;return"font-size:"+e+"px;"}}),Template.map_svg.events({}),Template.map_info.helpers({mapName:function(){var e=Session.get("RouterParams"),t=DB.map.find(e.mapID,{fields:{name:1}}).fetch()[0],n=t?t.name:"";return n},prevRound:function(){var e=Session.get("RouterParams"),t=parseInt(e.hash,10);return 1>=t?!1:"#"+(t-1)},nextRound:function(){var e=Session.get("RouterParams"),t=parseInt(e.hash,10);return location.hash?"#"+(t+1):!1},nowRound:function(){return Session.get("RouterParams").hash},isAdm:TOOL.userIsAdm,hasDetail:function(e){var t=Session.get("RouterParams"),n=t.mapID,i=parseInt(t.hash,10);return DB.map_detail.find({type:e,map:n,round:i}).fetch().length>0},allDetail:function(e){var t=Session.get("RouterParams"),n=t.mapID,i=parseInt(t.hash,10);return DB.map_detail.find({type:e,map:n,round:i})}}),Template.map_info.events({"click a.go":function(){var e=Session.get("RouterParams"),t=DB.map.findOne(e.map),n=t.round,i=window.prompt("跳到第幾輪？(1~"+n+")",now),r=parseInt(i,10);return r!=i||1>r||r>n?(alert("輸入格式不正確！"),!1):(location.href="#"+r,!0)},"click a.newRound":$.noop,"click header":function(e){$(e.currentTarget).closest("section").children("div.content").slideToggle("fast")},"change input.zoom":function(e){var t=e.currentTarget.value,n=Session.get("mapScale");return parseInt(t,10)!=t?(alert("縮放尺寸必須為整數！"),e.currentTarget.value=100*n,!1):(Session.set("mapScale",t/100),void 0)},"click header a":function(e){var t,n=$(e.currentTarget),r=(n.attr("data-type"),Session.get("RouterParams")),o=[];switch(e.stopPropagation(),n.attr("data-fn")){case"add":switch(t={_id:"",map:r.mapID,round:r.hash,type:n.attr("data-type")},n.attr("data-type")){case"affect":t.name="未命名效應",t.until=0,t.showDesc="",t.hideDesc="",t.unit=[];break;case"land":t.name="未命名地型",t.show="land",t.color="#FFFFFF",t.showDesc="",t.hideDesc="",t.light=0,t.shadow=0,t.minusView=0,t.isHideTo=[];break;case"unit":t.name="未命名單位",t.token="？",t.showDesc="",t.hideDesc="",t.character="",t.maxHp=10,t.hp=10,t.light=0,t.shadow=0,t.sightNormal=20,t.sightLowLight=0,t.sightDark=0,t.sightBlind=0,t.hiddenTo=[],t.isPublicView=!1}o.push(t),i(o);break;case"editAll":n.closest("section").find("section[data-id]").each(function(){o.push($(this).attr("data-id"))}),i(o);break;case"edit":n.closest("section").find("div.content:visible").each(function(){var e=$(this).parent().attr("data-id");e&&o.push(e)}),i(o)}},"dblclick section header":function(e){TOOL.userIsAdm()&&i([$(e.currentTarget).closest("section").attr("data-id")])},"change div.mapEdit input[name]":function(e,t){var n=t.data,i={},r=e.currentTarget;i[r.name]=r.value,DB.map.update(n._id,{$set:i})}}),Template.map_info_affect.helpers({untilRound:function(e){return 0>=e?"無":e}}),Template.map_info_land.helpers({landStyle:function(){var e=this,t="";switch(e.show){case"mist":t="background:"+e.color+";opacity: 0.5;";break;case"wall":t="border: 1px solid "+e.color+";";break;case"land":default:t="background:"+e.color+";"}return t}}),Template.map_info_unit.helpers({hpStyle:function(e,t){var n=100*e/t,i="#00FF00";return 50>=n&&(i=20>=n?"#FF0000":"#FFFF00"),"width:"+n+"%;background:"+i+";"}}),Template.map_info_edit.helpers({mapData:function(){return DB.map.findOne(Session.get("RouterParams").mapID)}})}(),function(){Template.message.helpers({allRooms:function(){return DB.room.find({status:{$gt:0}},{sort:{status:1}})}}),Template.message.rendered=function(){var e=$("#message"),t=e.layout({applyDefaultStyles:!1,closable:!0,resizable:!0,slidable:!1,livePaneResizing:!0,spacing_closed:0,spacing_open:2,resizerTip:"調整大小",sliderTip:"調整大小",togglerTip_open:"關閉",north__size:40,north__initClosed:!0,south__size:40,south__initClosed:!0});e.on("click","a.openFilter",function(){t.state.north.isClosed?(t.open("north"),$(this).attr("title","關閉篩選欄")):(t.close("north"),$(this).attr("title","開啟篩選欄"))}).on("click","a.openChat",function(){t.state.south.isClosed?(t.open("south"),$(this).attr("title","關閉發言欄")):(t.close("south"),$(this).attr("title","開啟發言欄"))})};var e,t=new Deps.Dependency,n={};e=function(e){EJSON.equals(n,e)||(n=e,t.changed())},Template.message.events({"change #message_filter select, change #message_filter input":function(){var e=$("#message_filter"),i=e.find("select").val(),r=e.find("input.type:checked"),o=[];n={time:{$gte:Date.now()-6048e5}},""!==i&&(n.room=i),r.each(function(){o.push(this.name)}),n.type={$in:o},t.changed()}}),Template.message_list.helpers({allMsgs:function(){t.depend();var e=DB.message_all.find(n,{sort:{time:1}}),i=_.debounce(function(){var e=$("#message_list");e.scrollTop(e.prop("scrollHeight"))},100);return e.observeChanges({added:function(){{var e=$("body").data("layout");$("#message_list")}e&&"function"==typeof e.open&&e.open("south"),i()}}),e},timeChinese:TOOL.convertTimeToChinese,getNick:TOOL.getUserNick,roomName:function(e){return e=DB.room.findOne({_id:e}),e?e.name:""},typeChinese:function(e){return TRPG.options.messageType[e]},typeChat:function(){return"chat"===this.type||"outside"===this.type},typeSystem:function(){return"room"===this.type||"system"===this.type},typeDice:function(){return"dice"===this.type},diceResult:function(){var e,t=this.result,n=t.length,i=this.face,r=this.add,o=r>=0?"+ ":"",a=0;return this.addEach?(e="[1d"+i+o+r+"] x "+n+"結果分別為 ",e+=_.map(t,function(e){var t=e+r;return a+=t,e+"("+t+")"}).join(","),e+=" 總合為 "+a+" 。"):(e=n+"d"+i+o+r+"結果為 ",e+=t.join(","),e+=" 總合為",e+=_.reduce(t,function(e,t){return e+t},r),e+=" 。"),e},isRecord:function(){return this.room&&this.chapter&&this.section},isDocument:function(){return this.room&&this.document},isCharacter:function(){return!!this.character}});var i=function(e,t){var n,i,r=$(t.find("input.msg")),o=Session.get("RouterParams");n={type:"chat",msg:r.val()},(i=o.room)?(n.room=i,(i=o.chapter)&&(n.chapter=i,(i=$(e.currentTarget).attr("data-section"))&&(n.section=i))):n.room=TRPG.public._id,DB.message_all.insert(n),r.val("")};Template.message_chat.events({"click button.btn":i})}(),function(){var e,t,n={},i=new Deps.Dependency,r=$($.parseHTML("<div />")),o={};e=function(e){var t,r=!1;for(t in e)n[t]!==e[t]&&(n[t]=e[t],r=!0);r&&i.changed()},t=function(t){e(t),r.modal("show")},Meteor.startup(function(){r.remove(),r=$("#modal_form").modal({show:!1})}),o={title:function(){return i.depend(),n.title},login:function(){return i.depend(),"login"===n.type},register:function(){return i.depend(),"register"===n.type},account:function(){return i.depend(),"account"===n.type},applyRoom:function(){return i.depend(),"applyRoom"===n.type},selectTime:function(){return i.depend(),"selectTime"===n.type}},Template.modal_form.helpers(o);var a=function(e){e.preventDefault(),t({title:"使用者登入",type:"login"})};Template.nav_user.events({"click a.login":a,"click a.account":function(e){e.preventDefault(),t({title:"帳戶資訊",type:"account"})}}),Template.modal_form_register.events({"click button.login":a,"click button.btn-primary":function(e,t){var n=$(t.findAll("input[name]")),i=n.filter('[name="password"]'),o=i.val(),a=n.filter('[name="confirmpassword"]'),s=n.filter('[name="email"]'),c=n.filter('[name="nick"]'),l=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(?:[A-Z]{2}|com|org|net|edu|gov|mil|biz|info|mobi|name|aero|asia|jobs|museum)\b/;return o!==a.val()?(alert("密碼與確認密碼不相符，請重新輸入！"),i.val(""),a.val(""),!1):o.length<8?(alert("密碼過短，請重新輸入！"),i.val(""),a.val(""),!1):c.val().length<2?(alert("暱稱過短，請重新輸入！"),c.val(""),!1):l.test(s.val())?(Meteor.call("registerUser",{username:s.val(),email:s.val(),password:o,profile:{nick:c.val()}},function(e){return e?alert(e.reason):(r.modal("hide"),void 0)}),void 0):(alert("電子郵箱格式錯誤，請重新輸入！"),s.val(""),!1)}}),Template.modal_form_login.events({"click button.register":function(){t({title:"使用者註冊",type:"register"})},"click button.btn-primary":function(e,t){{var n=$(t.findAll("input[name]"));n.filter('[name="password"]'),n.filter('[name="email"]')}Meteor.loginWithPassword(n.filter('[name="email"]').val(),n.filter('[name="password"]').val(),function(e){e?alert(e.reason):r.modal("hide")})},"click a.facebook":function(){Meteor.loginWithFacebook(function(){r.modal("hide")})},"click a.google":function(){Meteor.loginWithGoogle(function(){r.modal("hide")})}}),Template.main_explain.events({"click a.applyRoom":function(e){e.preventDefault(),Meteor.userId()?t({title:"申請開團",type:"applyRoom"}):a(e)}}),Template.modal_form_applyRoom.events({"click button.btn-primary":function(e,t){var n=$(t.findAll("input,select,textarea"));DB.room.insert({name:n.filter(".name").val(),rule:n.filter(".rule").val(),desc:n.filter(".desc").val().replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2"),status:0,"public":!0,adm:[Meteor.userId()]},function(e){e?alert(e.reason):r.modal("hide")})}}),Template.modal_form_account.helpers({nick:function(){return TOOL.getUserNick(Meteor.userId())}}),Template.modal_form_account.events({"click button.btn-primary":function(e,t){Meteor.users.update(Meteor.userId(),{$set:{"profile.nick":$(t.find("input.nick")).val()}}),r.modal("hide")}}),Template.modal_form_selectTime.rendered=function(){$(this.firstNode).find("div.date").datetimepicker({maskInput:!1,pickDate:!0,pickTime:!0}).find("input.datetime").val(moment().add("days",-1).format("YYYY/MM/DD HH:mm:ss"))},Template.chapter_section.events({"click i.icon-filter":function(e){e.stopPropagation(),t({title:"選取特定時間之後的段落",type:"selectTime"})}}),Template.modal_form_selectTime.events({"click button.btn-primary":function(){var e=Date.parse(r.find("input.datetime").val());$("article[data-id]").removeClass("focus editing").each(function(){var t=$(this),n=t.attr("data-id"),i=DB.record.findOne(n),r=i?i.time:0;r>=e&&t.addClass("focus")}),r.modal("hide")},"focus input.datetime":function(){r.find("i.icon-calendar").trigger("click")}})}(),function(){$("#nav").css("z-index",10),Template.nav.rendered=function(){$(this.find('a[data-toggle="dropdown"]')).dropdown()},Template.nav_roomLink.events({"mouseover li.room":function(e){$(e.currentTarget).addClass("open")},"mouseout li.room":function(e){$(e.currentTarget).removeClass("open")}}),Template.nav.events({"click i.close":function(){$("body").data("layout").close("north")}}),Template.nav_roomLink.helpers({allRooms:function(){return DB.room.find({status:{$gt:0}},{sort:{status:1}})},allChapters:function(e){return DB.record.find({room:e,chapter:{$exists:!1}})}}),Template.nav_user.events({"click a.logout":function(){Meteor.logout()}})}(),function(){var e=0;Router.map(function(){this.route("record",{path:"/room/:room/:chapter/",template:"main_record",waitOn:function(){var e=this.params;return[Meteor.subscribe("chapter",e.room,e.chapter,e.hash||""),Meteor.subscribe("mapList",e.chapter)]},after:function(){var t=this.params,n=STORE("recordViewTime")||{},i=t.chapter,r=n[i]||[0,0];e=r[1]=r[0],r[0]=Date.now(),n[i]=r,STORE("recordViewTime",n),window.onbeforeunload=function(){return $("article.editing").length>0?"你正在編輯文章，離開此網頁將會失去所有編輯訊息，是否確定？":void 0}},unload:function(){window.onbeforeunload=$.noop}})}),Template.main_record.helpers({title:function(){var e=Session.get("RouterParams"),t=DB.room.findOne(e.room)||{name:""},n=DB.record.findOne(e.chapter)||{name:""};return t.name+"--"+n.name},allSection:function(){var e=Session.get("RouterParams");return DB.record.find({room:e.room,chapter:e.chapter,section:{$exists:!1}},{sort:{sort:1}})}}),Template.main_record.events({"click ul.breadcrumb a.addSection":function(){var e=Session.get("RouterParams"),t=e.room,n=e.chapter,i=DB.record.find({room:t,chapter:n,section:{$exists:!1}}).count();DB.record.insert({room:t,chapter:n,name:"第"+(i+1)+"節",sort:i}),DB.message_all.insert({user:Meteor.userId(),room:t,chapter:n,type:"room",msg:"更新了遊戲紀錄。"})},"click ul.breadcrumb a.goSection":function(e){location.href="#"+$(e.currentTarget).attr("data-id")}});var t=_.debounce(function(){location.hash&&(location.href=location.hash)},500);Template.chapter_section.helpers({allParagraph:function(){{var e=this.room,n=this.chapter,i=this._id;DB.record.find({room:e,chapter:n,section:i},{sort:{sort:1}})}return t(),DB.record.find({room:e,chapter:n,section:i},{sort:{sort:1}})},emptyParagraph:function(){return{}},isAdm:TOOL.userIsAdm,isPlayer:TOOL.userIsPlayer}),Template.chapter_section.events({"click header":function(e,t){var n=Session.get("RouterParams"),i=n.room,r=n.chapter,o=t.firstNode.id,a=$(t.firstNode),s=a.children("div.content");return a.find("article.editing").length>0?!1:(s.is(":visible")?s.hide():(Meteor.subscribe("chapter",i,r,o),s.show()),void 0)},"click header i.icon-pencil":function(e,t){var n=t.firstNode.id,i=t.data,r=window.prompt("請輸入新標題：");e.stopPropagation(),r&&(DB.record.update(n,{$set:{name:r}}),DB.message_all.insert({user:Meteor.userId(),room:i.room,chapter:i.chapter,section:n,type:"room",msg:"更新了遊戲紀錄。"}))},"click header i.icon-eye-open":function(e,t){e.stopPropagation(),$(t.firstNode).find("article").addClass("focus")},"click header i.icon-eye-close":function(e,t){e.stopPropagation(),$(t.firstNode).find("article").removeClass("focus editing")},"click aside a.outside":function(e,t){var n,i=t.firstNode.id,r=t.data;e.stopPropagation(),n=window.prompt("請輸入場外發言："),n&&DB.message_all.insert({room:r.room,chapter:r.chapter,section:i,type:"outside",msg:n})},"click aside a.createMap":function(e,t){var n=($(e.currentTarget),t.data),i=DB.map.find({chapter:n.chapter}).fetch(),r=function(e){return"/room/"+n.room+"/"+n.chapter+"/map/"+e+"/"};if(TOOL.userIsAdm()&&window.confirm("你確定要為章節「"+n.name+"」編修戰場地圖？")){var o,a,s=_.chain(i).pluck("name").map(function(e,t){return t+1+")"+e}).value();if(s.unshift("請指定地圖或開新地圖：","0)為此章節開新地圖"),o=window.prompt(s.join("\r\n"),0),null===o)return!1;if("0"==o){var c={_id:n._id,room:n.room,chapter:n.chapter,section:n._id,round:1,sizeX:10,sizeY:10,light:100};if(c.name=window.prompt("請輸入地圖名稱：",n.name+"戰場地圖"),null===c.name)return!1;DB.map.insert(c,function(){DB.message_all.insert({room:n.room,chapter:n.chapter,section:n._id,type:"room",msg:"建立了新地圖「"+c.name+"」"}),DB.record.update(n._id,{$set:{map:n._id}})})}else{if(isNaN(o)||null===o)return!1;o=parseInt(o,10)-1,a=i[o],DB.record.update(n._id,{$set:{map:a._id}},function(){window.open(r(a._id),"map")})}}},"click aside a.addParagraph":function(e,t){var n=Session.get("RouterParams"),i=n.room,r=n.chapter,o=t.firstNode.id,a=DB.record.find({room:i,chapter:r,section:o}).count();DB.record.insert({room:i,chapter:r,section:o,sort:a,content:""}),DB.message_all.insert({user:Meteor.userId(),room:i,chapter:r,section:o,type:"room",msg:"更新了遊戲紀錄。"})},"click aside a.top":function(){location.href="#main_record"}}),Template.chapter_section.rendered=function(){var e=this.data._id,t=$(this.firstNode);DB.record.findOne({section:e})&&t.children("div.content").show()},Template.chapter_section_paragraph.helpers({timeChinese:TOOL.convertTimeToChinese,getNick:TOOL.getUserNick,canEdit:function(){var e=Session.get("RouterParams"),t=Meteor.userId();return t&&(t===this.user||TOOL.userIsAdm(e.room))}}),Template.chapter_section_paragraph.events({"click article":function(e,t){var n=$(t.firstNode);return n.hasClass("focus")?!1:(n.addClass("focus"),void 0)},"click article header a.blur":function(e,t){e.stopPropagation();var n=$(t.firstNode);return n.hasClass("focus")?(n.removeClass("focus"),void 0):!1},"click article header a.addBefore, click article header a.addAfter":function(e,t){e.stopPropagation();var n=Meteor.userId(),i=$(e.currentTarget).closest("article"),r=i.parent().children("article"),o=r.index(i),a=t.data,s=a.room,c=a.chapter,l=a.section||a._id,u={user:n,room:s,chapter:c,section:l};$(e.currentTarget).hasClass("addAfter")&&(o+=1),u.sort=o,r.each(function(e){e>=o&&DB.record.update($(this).attr("data-id"),{$inc:{sort:1}})}),u.sort=o,DB.record.insert(u)},"click article header a.edit":function(e,t){e.stopPropagation(),$(t.firstNode).addClass("editing").find("div.paragraph").prop("contenteditable",!0).trigger("focus")},"click article header a.delete":function(e,t){var n=t.data,i=n.room,r=n.chapter,o=n.section||n._id;e.stopPropagation(),window.confirm("你確定要刪除此段落？")&&($(t.firstNode).nextAll("article").each(function(){DB.record.update($(this).attr("data-id"),{$inc:{sort:-1}})}),DB.record.remove($(t.firstNode).attr("data-id")),DB.message_all.insert({user:Meteor.userId(),room:i,chapter:r,section:o,type:"room",msg:"刪除了遊戲紀錄。"}))},"click article header a.cancel":function(e,t){e.stopPropagation();var n=$(t.firstNode),i=t.data;return n.hasClass("editing")?(n.removeClass("editing").find("div.paragraph").html(i.content).prop("contenteditable",!1),void 0):!1},"click article header a.submit":function(e,t){e.stopPropagation();var n,i,r=Meteor.userId(),o=$(t.firstNode),a=t.data,s=a.room,c=a.chapter,l=a.section||a._id,u={user:r,room:s,chapter:c,section:l},d=[],f=0;$(t.firstNode).find("div.paragraph").find("p").each(function(){d.push($(this).html())}),f=o.prevAll("article").length,a._id!==i&&(a.content=d.shift(),DB.record.update(a._id,{$set:{content:a.content}}),f+=1),d.length&&(n=d.length,o.nextAll("article").each(function(){var e=$(this).attr("data-id");DB.record.update(e,{$inc:{sort:n}})}),_.each(d,function(e,t){u.sort=f+t,u.content=e,DB.record.insert(u)})),DB.message_all.insert({user:r,room:s,chapter:c,section:l,type:"room",msg:"更新了遊戲紀錄。"}),o.removeClass("editing").find("div.paragraph").html(a.content).prop("contenteditable",!1)}}),Template.chapter_section_paragraph.rendered=function(){var t,n=(Session.get("RouterParams"),e);this.data.content===t&&this.data.user===Meteor.userId()?$(this.firstNode).addClass("focus editing").find("div.paragraph").prop("contenteditable",!0).trigger("focus"):this.data.time>=n&&$(this.firstNode).addClass("focus")},Template.chapter_section_outside.helpers({allOutside:function(){return DB.message_all.find({section:this._id,type:{$in:["outside","dice"]}},{sort:{_id:1}})},timeChinese:TOOL.convertTimeToChinese,getNick:TOOL.getUserNick,typeOutside:function(){return"outside"===this.type},typeDice:function(){return"dice"===this.type},diceResult:function(){var e,t=this.result,n=t.length,i=this.face,r=this.add,o=r>=0?"+ ":"",a=0;return this.addEach?(e="[1d"+i+o+r+"] x "+n+"結果分別為 ",e+=_.map(t,function(e){var t=e+r;return a+=t,e+"("+t+")"}).join(","),e+=" 總合為 "+a+" 。"):(e=n+"d"+i+o+r+"結果為 ",e+=t.join(","),e+=" 總合為",e+=_.reduce(t,function(e,t){return e+t},r),e+=" 。"),e}})}(),function(){Router.map(function(){this.route("room",{path:"/room/:room/",template:"main_room",waitOn:function(){var e=this.params;return Meteor.subscribe("characterList",e.room)}})}),Template.main_room.helpers({title:function(){var e=Session.get("RouterParams"),t=DB.room.findOne(e.room);return t&&t.name},status:function(){var e=Session.get("RouterParams"),t=DB.room.findOne(e.room),n=t?t.status:0;switch(n){case 0:return"申請中";case 1:return"籌備中";case 2:return"進行中";case 3:return"已結束"}},canApply:function(){var e=Session.get("RouterParams"),t=DB.room.findOne(e.room),n=t?t.status:0;return Meteor.userId()?TOOL.userIsAdm()||TOOL.userIsPlayer()||n>1?!1:!0:!1},desc:function(){var e=Session.get("RouterParams"),t=DB.room.findOne(e.room);return t.desc},allChapters:function(){var e=Session.get("RouterParams"),t=DB.room.findOne(e.room)||{};return DB.record.find({room:t._id,chapter:{$exists:!1}})},allCharacters:function(){var e=Session.get("RouterParams"),t=DB.room.findOne(e.room)||{};return DB.character.find({room:t._id})},isAdm:TOOL.userIsAdm,isPlayer:TOOL.userIsPlayer,getNick:TOOL.getUserNick,getCharacter:function(e){var t=Session.get("RouterParams"),n=DB.room.findOne(t.room)||{},i=DB.character.find({room:n._id,adm:e}).find().fetch();
return _.pluck(i,"name").join("、")}}),Template.main_room.events({"click a.apply":function(){var e,t=Session.get("RouterParams"),n=DB.room.findOne(t.room)||{};Meteor.userId()?(e=window.prompt("請輸入給DM審核用的申請文字："),Meteor.call("applyJoinRoom",n._id,e)):alert("請先登入或註冊！")},"click a.addChapter":function(){var e=Session.get("RouterParams"),t=DB.room.findOne(e.room)||{},n=DB.record.find({room:t._id,chapter:{$exists:!1}}).count();DB.record.insert({room:t._id,name:"第"+(n+1)+"章",sort:n})},"click a.addCharacter":function(){var e=Session.get("RouterParams"),t=DB.room.findOne(e.room)||{},n=RULE[t.rule],i=_.defaults({},n.character);i.room=t._id,i.rule=t.rule,i.name=Meteor.user().profile.nick+"的新角色",DB.character.insert(i)}}),Template.main_room_applying.helpers({applying:function(){var e=Session.get("RouterParams"),t=DB.room.findOne(e.room)||{};return t.applying},getNick:TOOL.getUserNick}),Template.main_room_applying.events({"click a":function(e){var t=Session.get("RouterParams"),n=DB.room.findOne(t.room)||{},i=$(e.currentTarget),r=i.attr("data-id"),o=n.applying,a=_.find(o,function(e){return e.user===r}),s={applying:_.without(o,a)};i.hasClass("agree")&&(s.player=_.chain(n.player||[]).union([r]).uniq().value()),DB.room.update(n._id,{$set:s})}})}(),function(){Meteor.loginAs=function(e){Accounts.callLoginMethod({methodArguments:[{method:"loginAs",user:e}],userCallback:function(){console.log(arguments)}})}}(),function(){Template.layout.rendered=function(){var e={applyDefaultStyles:!1,closable:!0,resizable:!0,slidable:!0,livePaneResizing:!0,spacing_closed:5,spacing_open:5,resizerTip:"調整大小",sliderTip:"調整大小",north__spacing_closed:5,north__spacing_open:0,north__togglerTip_closed:"開啟導覽列",south__togglerTip_open:"關閉訊息列",south__togglerTip_closed:"開啟訊息列",south__size:100,west__togglerTip_open:"關閉資訊列",west__togglerTip_closed:"開啟資訊列",west__size:300};$("body").layout(e)},Router.configure({layoutTemplate:"layout",notFoundTemplate:"notFound",loadingTemplate:"loading",waitOn:function(){return Meteor.subscribe("initialize")},before:function(){Session.set("RouterParams",_.extend({},this.params))},yieldTemplates:{nav:{to:"north"},message:{to:"south"}}}),Router.map(function(){this.route("home",{path:"/",template:"main_explain"})});var e=!1,t=!1;"http://localhost:13667/"!==Meteor.absoluteUrl()&&Deps.autorun(function(){var n=Meteor.status().connected;e?n?t&&(alert("已恢復與伺服器間的連線！"),t=!1):t===!1&&(alert("注意！已失去與伺服器間的連線，此時所做的任何資料更改將不會更新至伺服器上！"),t=!0):n&&(e=!0)})}();