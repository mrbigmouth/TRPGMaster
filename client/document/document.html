<template name="main_document">
  <div id="room_document">
    <a id="room_document_top" />
    <aside id="room_document_nav">
      <h4>
        目錄
        {{#if isAdm}}
          <i class="icon-plus-sign pull-right" title="新增一筆資料"></i>
        {{/if}}
      </h4>
      <ul class="nav" style="padding:0;">
        {{> main_document_nav}}
      </ul>
    </aside>
    {{> main_document_detail}}
  </div>
</template>

<template name="main_document_nav">
  <li class="eachDocument" data-id="{{_id}}">
    <a href="#{{_id}}">
    {{#if hasChildren}}
      <i class="icon-folder-open"></i>
    {{else}}
      <i class="icon-chevron-right"></i>
    {{/if}}
    {{name}}
    {{#if isAdm}}
      <i class="icon-plus-sign pull-right" title="在此資料下新增一筆資料"></i>
    {{/if}}
    </a>
    <ul class="nav">
      {{#each children}}
        {{> main_document_nav}}
      {{/each}}
    </ul>
  </li>
</template>


<template name="main_document_detail">
  <section id="{{_id}}" class="eachDocument">
    <h5>
      {{name}}
      {{#if isAdm}}
        <i class="icon-arrow-down pull-right" title="將此筆資料後移"></i>
        <i class="icon-arrow-up pull-right" title="將此筆資料前移"></i>
        <i class="icon-trash pull-right" title="刪除此筆資料"></i>
        <i class="icon-pencil pull-right" title="修改資料標題"></i>
      {{/if}}
    </h5>
    <div{{#if isAdm}} class="detail"{{/if}}>
      {{{detail}}}
    </div>
    <div class="submit">
      <button class="btn btn-primary">送出</button>
      <button class="btn btn-cancel">取消</button>
    </div>
    <footer>
      <time>本文最後由 {{getNick user}} 於 {{timeChinese time}} 編輯</time>
    </footer>
    <hr />
    <div class="tool">
      <a href="#room_document_top">Top</a>
    </div>
    <hr />
  </section>
  {{#each children}}
    {{> main_document_detail}}
  {{/each}}
</template>